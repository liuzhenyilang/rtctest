(self["webpackChunkquick_vue2"]=self["webpackChunkquick_vue2"]||[]).push([[998],{1001:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,{Z:function(){return r}})},5026:function(e){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e,t;function n(t){this.name="__st"+(1e9*Math.random()>>>0)+e+"__",null!=t&&t.forEach(this.add,this),e+=1}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return o;i+=1}}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),window.WeakSet||(e=Date.now()%1e9,n.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},n.prototype.delete=function(e){return!!e[this.name]&&!(e[this.name]=void 0)},n.prototype.has=function(e){return!!e[this.name]},t=n,Object.defineProperty(window,"WeakSet",{value:function(e){return new t(e)}})),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if(null!=(r=arguments[n]))for(var r=Object(r),i=Object.keys(Object(r)),o=0,a=i.length;o<a;o++){var s=i[o],c=Object.getOwnPropertyDescriptor(r,s);null!=c&&c.enumerable&&(t[s]=r[s])}return t}});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function a(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(d){return e}}var s,c=["ext1","ext2","ext3","level","trace","tag","seq","code"],u=(d.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},d.prototype.on=function(e,t,n){var r;if(void 0===n&&(n=0),this)return(r=this.eventsList[e])||(this.eventsList[e]=[],r=this.eventsList[e]),-1===this.indexOf(r,t)&&r.push({name:e,type:n||0,callback:t}),this},d.prototype.one=function(e,t){this.on(e,t,1)},d.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(e){}}return null}},d.prototype.clear=function(){this.eventsList={}},d),l=function(e){if(!e||0===e.length)return"{}";e=Array.isArray(e)?e:[e];var t=Object.keys(e[0]),n={};return t.forEach((function(t){n[t]=e.map((function(e){return e[t]}))})),n.count=e.length,M(n)};function d(){var e=this;this.emit=function(t,n){if(e){var r;if(null!=(i=e.eventsList[t])&&i.length)for(var i=i.slice(),o=0;o<i.length;o++){r=i[o];try{var a=r.callback.apply(e,[n]);if(1===r.type&&e.remove(t,r.callback),!1===a)break}catch(t){throw t}}return e}},this.eventsList={}}function h(e,t){return"number"==typeof e||"string"==typeof e?e:t?s.string:s.number}function p(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e}function f(e){return"string"==typeof e&&e.startsWith("//")?"undefined"!=typeof location&&"https:"===location.protocol:/^https/.test(e)}function v(e,t,n){var r,i;try{if("function"==typeof(null==t?void 0:t.retCodeHandler))return{code:void 0===(o=(i=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx,null==n?void 0:n.payload)||{}).code)?"unknown":o,isErr:i.isErr};"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null==(r=null==t?void 0:t.ret)?void 0:r.join)&&(D=[].concat(t.ret.map((function(e){return e.toLowerCase()}))));var o,a=Object.getOwnPropertyNames(e).filter((function(e){return-1!==D.indexOf(e.toLowerCase())}));return a.length?{code:""+(o=e[a[0]]),isErr:0!==o&&"0"!==o}:{code:"unknown",isErr:!1}}catch(e){return{code:"unknown",isErr:!1}}}function m(e,t,n){try{var r="function"==typeof t?t(e,null==n?void 0:n.url)||"":e;return U(r).slice(0,102400)}catch(e){return""}}function g(e,t){var n,r=[],i=e.config;return e.lifeCycle.on("destroy",(function(){r.length=0})),function(o,a){Array.isArray(o)?r=r.concat(o):r.push(o),t&&r.length>=t||e.sendNow&&0<r.length?(r=F(r),a(r.splice(0,r.length)),n&&clearTimeout(n)):(n&&clearTimeout(n),n=setTimeout((function(){n=null,0<(r=F(r)).length&&a(r.splice(0,r.length))}),i.delay))}}function _(e,t){return Array.isArray(e)?t(e.map((function(e){return t=i(i({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(N).join(" ")}),c.forEach((function(e){t[e]||delete t[e]})),t;var t}))):t([i(i({},e),{msg:"string"==typeof e.msg?e.msg:N(e.msg)})])}function y(e,t){return function(n,r){var o,a,s,u=Array.isArray(n),l=u?n:[n],d=(e.lifeCycle.emit("beforeRequest",n),e.config.beforeRequest);(l="function"==typeof d?l.map((function(e){try{var n=d({logs:e,logType:t});return(null==n?void 0:n.logType)===t&&null!=n&&n.logs?n.logs:!1!==n&&e}catch(n){return e}})).filter((function(e){return!1!==e})):l).length&&(o=l,n=c,!Array.isArray(o)||o.length<=1||(a=[],s=[],!(s="string"==typeof n?[n]:n)||s.length<=0||(s.forEach((function(e){o.forEach((function(t){null!=t&&t[e]&&a.push(e)}))})),0<a.length&&(o=o.map((function(e){var t={};return a.forEach((function(e){t[e]=""})),i(i({},t),e)}))))),l=o,r(u?l:l[0]))}}function b(e){return function(t,n){e.lifeCycle.emit("modifyRequest",t);var r=e.config.modifyRequest;if("function"==typeof r)try{var i=r(t);"object"==typeof i&&"url"in i&&(t=i)}catch(t){console.error(t)}n(t)}}function S(e){return function(t,n){e.lifeCycle.emit("afterRequest",t);var r=e.config.afterRequest;"function"==typeof r&&!1===r(t)||n(t)}}function k(e){if(e&&e.reduce&&e.length)return 1===e.length?function(t,n){e[0](t,n||z)}:e.reduce((function(e,t){return function(n,r){return void 0===r&&(r=z),e(n,(function(e){return null==t?void 0:t(e,r)}))}}));throw new TypeError("createPipeline need at least one function param")}function w(e,t){Object.getOwnPropertyNames(e).forEach((function(n){"function"==typeof e[n]&&"constructor"!==n&&(t?t[n]="sendPipeline"===n?function(){return function(){}}:function(){}:e[n]=function(){})}))}function T(){return void 0!==window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now}function E(e,t){function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)}function I(e){return J.some((function(t){return-1<e.indexOf(t)}))}function C(e){return-1!==Y.indexOf(e)}(W=s=s||{})[W.number=-1]="number",W.string="";var x,R,A,O=["application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video"],P=/\.(json|js|css|jpg|jpeg|png|svg|apng|webp|gif|bmp|mp4|mp3|mpeg|wav|webm|ogg|flv|m3u8|ttf|woff2|otf|eot|woff|)$/gi,D=["ret","retcode","code","errcode"],L=function(){var e=new WeakSet;return function(t,n){if(n instanceof Error)return"Error.message: "+n.message+" \n  Error.stack: "+n.stack;if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular "+(t||"root")+"]";e.add(n)}return n}},N=function(e){if("string"==typeof e)return e;try{return e instanceof Error?(JSON.stringify(e,L(),4)||"undefined").replace(/"/gim,""):JSON.stringify(e,L(),4)||"undefined"}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}},M=function(e){if("string"==typeof e)return e;try{return JSON.stringify(e,L())||"undefined"}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}},U=function(e,t){void 0===t&&(t=3);var n,r,i,o="";return Array.isArray(e)?(o+="[",n=e.length,e.forEach((function(e,r){o=(o+="object"==typeof e&&1<t?U(e,t-1):V(e))+(r===n-1?"":",")})),o+="]"):e instanceof Object?(o="{",r=Object.keys(e),i=r.length,r.forEach((function(n,a){"object"==typeof e[n]&&1<t?o+='"'+n+'":'+U(e[n],t-1):o+=j(n,e[n]),o+=a===i-1||a<i-1&&void 0===e[r[a+1]]?"":","})),o+="}"):o+=e,o},j=function(e,t){var n=typeof t,r="";return"string"==n||"object"==n?r+='"'+e+'":"'+t+'"':"function"==typeof t?r+='"'+e+'":"function '+t.name+'"':"symbol"==typeof t?r+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!=n||(r+='"'+e+'": '+t),r},V=function(e){var t=typeof e;return""+("undefined"==t||"symbol"==t||"function"==t?"null":"string"==t||"object"==t?'"'+e+'"':e)},F=((W=x=x||{}).INFO_ALL="-1",W.API_RESPONSE="1",W.INFO="2",W.ERROR="4",W.PROMISE_ERROR="8",W.AJAX_ERROR="16",W.SCRIPT_ERROR="32",W.IMAGE_ERROR="64",W.CSS_ERROR="128",W.CONSOLE_ERROR="256",W.MEDIA_ERROR="512",W.RET_ERROR="1024",W.REPORT="2048",W.PV="4096",W.EVENT="8192",W.PAGE_NOT_FOUND_ERROR="16384",W.WEBSOCKET_ERROR="32768",W.BRIDGE_ERROR="65536",(W=R=R||{}).LOG="log",W.SPEED="speed",W.PERFORMANCE="performance",W.OFFLINE="offline",W.WHITE_LIST="whiteList",W.VITALS="vitals",W.PV="pv",W.CUSTOM_PV="customPV",W.EVENT="event",W.CUSTOM="custom",W.SDK_ERROR="sdkError",W.SET_DATA="setData",W.LOAD_PACKAGE="loadPackage",(W=A=A||{}).production="production",W.development="development",W.gray="gray",W.pre="pre",W.daily="daily",W.local="local",W.test="test",W.others="others",function(e){return e.filter((function(t,n){return"static"!==t.type||!e.find((function(e,r){return t.url===e.url&&200===t.status&&n<r}))}))}),B=function(e){e.level===x.INFO_ALL&&(e.level=x.INFO)},$=function(e){return(Array.isArray(e)?e:[e]).map((function(e){return Object.getOwnPropertyNames(e).reduce((function(t,n){return"ctx"!==n&&(t[n]=e[n]),t}),{level:x.INFO,msg:""})}))},H=function(e){return function(t){return e.sendPipeline([function(t,n){return n({url:e.config.url||"",data:l($(t)),method:"post",contentType:"application/json",type:R.LOG,log:t,requestConfig:{timeout:5e3},success:function(){var r=e.config.onReport;"function"==typeof r&&t.forEach((function(e){r(e)})),"function"==typeof n&&n([])},fail:function(t){"403 forbidden"===t&&e.destroy()}})}],R.LOG)(t)}},z=function(){},W=(Object.defineProperty(te.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.36.5"},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),x},enumerable:!1,configurable:!0}),te.prototype.init=function(e){this.setConfig(e);for(var t=0;t<te.installedPlugins.length;t++)try{te.installedPlugins[t].patch(this)}catch(e){this.sendSDKError(e)}this.lifeCycle.emit("onInited")},te.prototype.setConfig=function(e){Object.assign(this.config,e);e=this.config;var t=e.id,n=e.uin,r=e.version,i=e.ext1,o=e.ext2,a=e.ext3,s=e.aid,c=e.env,u=void 0===c?"production":c;c=e.pageUrl,e=this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==s;return this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=r||"1.36.5",this.bean.aid=s||"",this.bean.env=function(){switch(u){case A.production:case A.development:case A.gray:case A.pre:case A.daily:case A.local:case A.test:case A.others:return 1;default:return}}()?u:A.others,c&&this.extendBean("from",encodeURIComponent(c)),i&&this.extendBean("ext1",encodeURIComponent(i)),o&&this.extendBean("ext2",encodeURIComponent(o)),a&&this.extendBean("ext3",encodeURIComponent(a)),e&&this.lifeCycle.emit("onConfigChange",this.config),this.config},te.use=function(e){-1===te.installedPlugins.indexOf(e)&&e.aegisPlugin&&te.installedPlugins.push(e)},te.unuse=function(e){e=te.installedPlugins.indexOf(e),-1!==e&&te.installedPlugins.splice(e,1)},te.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:x.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(n,i({},e[0]),{level:x.INFO}),this.normalLogPipeline(n)},te.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:x.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(n,i({},e[0]),{level:x.INFO_ALL}),this.normalLogPipeline(n)},te.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:x.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(n,i({},e[0])),this.normalLogPipeline(n)},te.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:x.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(n,i({},e[0]),{level:x.ERROR}),this.normalLogPipeline(n)},te.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},te.prototype.reportPv=function(e){var t,n=this;e&&(console.warn("reportPv is deprecated, please use reportEvent"),t=""+Object.getOwnPropertyNames(this.bean).filter((function(e){return"id"!==e})).map((function(e){return e+"="+n.bean[e]})).join("&"),this.sendPipeline([function(r,i){i({url:n.config.url+"/"+e+"?"+t,addBean:!1,type:R.CUSTOM_PV,fail:function(e){"403 forbidden"===e&&n.destroy()}})}],R.CUSTOM_PV)(null))},te.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},te.prototype.reportTime=function(e,t){if("object"==typeof e)return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},te.prototype.reportT=function(e){var t=e.name,n=e.duration,r=e.ext1,i=(r=void 0===r?"":r,e.ext2),o=(i=void 0===i?"":i,e.ext3);o=void 0===o?"":o,e=e.from;if("string"==typeof t&&"number"==typeof n&&"string"==typeof r&&"string"==typeof i&&"string"==typeof o){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,r,i,o,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},te.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},te.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},te.prototype.submitCustomTime=function(e,t,n,r,i,o){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:r||this.config.ext2,ext3:i||this.config.ext3,from:o||void 0})},te.prototype.extendBean=function(e,t){this.bean[e]=t},te.prototype.sendPipeline=function(e,t){var n,r=this;return k(o([function(e,t){if("number"!=typeof n.config.random&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||t(e);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,t(e);n.isHidden=!0}},y(n=this,t)],e,[b(this),function(e,t){r.request(e,(function(){for(var n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];r.failRequestCount=0,t({isErr:!1,result:i,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null!=(n=null==e?void 0:e.success)&&n.call.apply(n,o([e],i))}),(function(){for(var n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];10<=++r.failRequestCount&&r.destroy(),t({isErr:!0,result:i,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null!=(n=null==e?void 0:e.fail)&&n.call.apply(n,o([e],i))}))},S(this)]))},te.prototype.send=function(e,t,n){var r=this;return k([b(this),function(e,i){r.request(e,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];i({isErr:!1,result:n,logType:e.type,logs:e.log}),null!=t&&t.apply(void 0,n)}),(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];i({isErr:!0,result:t,logType:e.type,logs:e.log}),null!=n&&n.apply(void 0,t)}))},S(this)])(e)},te.prototype.ready=function(e,t,n){throw new Error('You need to override "ready" method')},te.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},te.prototype.sendSDKError=function(e){var t=this;this.sendPipeline([function(e,n){n({url:t.config.url+"?id=1085&msg[0]="+encodeURIComponent(N(e))+"&level[0]=2&from="+t.config.id+"&count=1&version="+t.config.id+"(1.36.5)",addBean:!1,method:"get",type:R.SDK_ERROR,log:e})}],R.SDK_ERROR)(e)},te.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,r=te.instances.indexOf(this);-1!==r&&te.instances.splice(r,1);for(var i=te.installedPlugins.length-1;0<=i;i--)try{te.installedPlugins[i].unpatch(this)}catch(e){this.sendSDKError(e)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach((function(e){n[e].writable&&(t[e]=null)})),Object.setPrototypeOf(this,null);else{for(var o=this;o.constructor!==Object&&w(o,this),o=Object.getPrototypeOf(o););0===te.instances.length&&(r=Object.getPrototypeOf(this).constructor,w(r),w(te))}},te.version="1.36.5",te.instances=[],te.logType=x,te.environment=A,te.installedPlugins=[],te),q=(ee.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},ee.prototype.unpatch=function(e){e=this.instances.indexOf(e),-1!==e&&(this.instances.splice(e,1),0===this.instances.length&&this.uninstall())},ee.prototype.countInstance=function(){return this.instances.length},ee.prototype.uninstall=function(){var e;null!=(e=null==(e=this.option)?void 0:e.destroy)&&e.apply(this)},ee.prototype.walk=function(e){var t=this;this.instances.forEach((function(n){var r=t.canUse(n);r&&e(n,r)}))},ee.prototype.canUse=function(e){return e=this.getConfig(e),!(!e||"object"!=typeof e)||!!e},ee.prototype.getConfig=function(e){return null==(e=e.config)?void 0:e[this.name]},ee.prototype.exist=function(e){return-1===this.instances.indexOf(e)},ee.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null!=(t=null==(t=this.option)?void 0:t.init)&&t.call(this.option,this.getConfig(e)))},ee.prototype.triggerOnNewAegis=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.onNewAegis)&&t.call(this.option,e,this.getConfig(e))},ee),G=new q({name:"aid",aid:"",init:function(e){try{var t=!0!==e&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch(e){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),J=["/collect/offlineAuto","/aegis-sdk","/flog.core.min.js"],K=function(e){var t;return e.payload?(t={},Object.keys(e).forEach((function(n){"payload"!==n&&(t[n]=e[n])})),t):e},Q=new q({name:"reportAssetSpeed"}),X=Q=new q({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;T()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(e){this.$walk((function(t){t.speedLogPipeline(e)}))},publishMany:function(e,t){for(var n=t.config,r=0,i=e.length;r<i;r++){var o=e[r];-1===this.ASSETS_INITIATOR_TYPE.indexOf(o.initiatorType)||I(o.name)||this.publish(this.generateLog(o,n))}},collectSuccessLog:function(e){var t,n,r=this;"function"==typeof window.PerformanceObserver?(this.publishMany(performance.getEntriesByType(this.collectEntryType),e),(t=new window.PerformanceObserver((function(t){r.publishMany(t.getEntries(),e)}))).observe({entryTypes:[this.collectEntryType]}),e.lifeCycle.on("destroy",(function(){0===Q.countInstance()&&t.disconnect()}))):(n=setInterval((function(){var t=performance.getEntriesByType(r.collectEntryType),n=t.slice(r.collectCur);r.collectCur=t.length,r.publishMany(n,e)}),3e3),e.lifeCycle.on("destroy",(function(){0===Q.countInstance()&&clearInterval(n)})))},collectFailLog:function(e){function t(e){var t,i;e&&(e=e.target||e.srcElement,!(t=(null==e?void 0:e.src)||(null==e?void 0:e.href))||"string"!=typeof t||-1<window.location.href.indexOf(t)||(e="function"==typeof(null==(e=r.api)?void 0:e.resourceTypeHandler)?null==(e=r.api)?void 0:e.resourceTypeHandler(t):"",i=performance.getEntriesByType(n.collectEntryType).find((function(e){return e.name===t})),I(t)||(i={url:p(t),status:400,duration:Number(((null==i?void 0:i.duration)||0).toFixed(2)),method:"get",type:e||"static",isHttps:f(t),urlQuery:p(t,!0),nextHopProtocol:"",domainLookup:0,connectTime:0},n.publish(i))))}var n=this,r=e.config;window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",(function(){0===Q.countInstance()&&window.document.removeEventListener("error",t,!0)}))},generateLog:function(e,t){var n;t="function"==typeof(null==(n=t.api)?void 0:n.resourceTypeHandler)?null==(n=t.api)?void 0:n.resourceTypeHandler(e.name):"";return{url:p(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:t||"static",isHttps:f(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:p(e.name,!0),domainLookup:h(e.domainLookupEnd-e.domainLookupStart),connectTime:h(e.connectEnd-e.connectStart)}},collectNotReportedLog:function(e){var t,n;T()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,"function"!=typeof window.PerformanceObserver&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e,!0)))},destroy:function(){this.option.publish=function(){}}}),Y=window.navigator.userAgent.toLowerCase(),Z={};function ee(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function te(e){var t,n,r,i,o,a,s,c,l,d,h,p,f,v,m,y=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,hostUrl:"https://aegis.qq.com",websocketHack:!1,env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:"",reportImmediately:!0},this.isWhiteList=!1,this.lifeCycle=new u,this.bean={},this.normalLogPipeline=k([g(this,5),_,function(e,n){var r=t.config;n(e=e.map((function(e){var t,n=r.maxLength||102400;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null==(t=e.msg)?void 0:t.substring(0,n)}catch(t){e.msg=N(e.msg).substring(0,r.maxLength)}return e})))},(v=(t=this).config,m={},function(e,t){var n="number"==typeof v.repeat?v.repeat:5;if(0===n)return t(e);t(e.filter((function(e){return e.level!==x.ERROR&&e.level!==x.PROMISE_ERROR&&e.level!==x.AJAX_ERROR&&e.level!==x.SCRIPT_ERROR&&e.level!==x.IMAGE_ERROR&&e.level!==x.CSS_ERROR&&e.level!==x.MEDIA_ERROR||(m[e.msg]=m[e.msg]||0,m[e.msg]+=1,!(m[e.msg]>n))})))}),(p=this.lifeCycle.emit,f=this.config,function(e,t){var n,r=f.logCreated;return"function"==typeof r?(n=e.filter((function(e){return!1!==r(e)})),p("beforeWrite",n),t(n)):(p("beforeWrite",e),t(e))}),(h=this,setTimeout((function(){var e=h.config.pvUrl,t=void 0===e?"":e;t&&h.sendPipeline([function(e,n){n({url:t,type:R.PV,fail:function(e){"403 forbidden"===e&&h.destroy()}})}],R.PV)(null)}),100),function(e,t){t(e)}),(l=c=s=!1,d=[],(o=this).lifeCycle.on("onConfigChange",(function(){a&&clearTimeout(a),a=setTimeout((function(){var e,t;!l&&o.config&&(l=!0,e=o.config.whiteListUrl,(t=void 0===e?"":e)&&o.sendPipeline([function(e,n){n({url:t,type:R.WHITE_LIST,success:function(e){c=!0;try{var t=e.data||JSON.parse(e),n=t.retcode,r=t.result,i=void 0===r?{}:r;if(0===n){if(s=i.is_in_white_list,o.isWhiteList=s,i.shutdown)return void o.destroy();0<=i.rate&&i.rate<=1&&(o.config.random=i.rate,o.isGetSample=!1)}o.isWhiteList&&d.length?H(o)(d.splice(0),(function(){})):!o.isWhiteList&&d.length&&(d.length=0);var a=o.config.onWhitelist;"function"==typeof a&&a(s)}catch(e){}},fail:function(e){"403 forbidden"===e&&o.destroy(),c=!0}})}],R.WHITE_LIST)(null),l=!1)}),o.config.uin?50:500)})),o.lifeCycle.on("destroy",(function(){d.length=0})),function(e,t){var n;s||null!=(n=null==(n=o.config)?void 0:n.api)&&n.reportRequest?t(e.concat(d.splice(0)).map((function(e){return B(e),e}))):(n=e.filter((function(e){return e.level!==x.INFO&&e.level!==x.API_RESPONSE?(B(e),!0):(c||(d.push(e),200<=d.length&&(d.length=200)),!1)}))).length&&t(n)}),function(e,t){try{var n=JSON.parse(JSON.stringify(e)),r=(y.lifeCycle.emit("beforeReport",n),y.config.beforeReport);(e="function"==typeof r?e.filter((function(e){return!1!==r(e)})):e).length&&t(e)}catch(e){}},H(this)]),this.eventPipeline=k([g(this,10),(i=this,function(e){i.sendPipeline([function(e,t){var n=e.map((function(e){return{name:e.name,ext1:e.ext1||i.config.ext1||"",ext2:e.ext2||i.config.ext2||"",ext3:e.ext3||i.config.ext3||""}}));t({url:i.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:R.EVENT,log:e,fail:function(e){"403 forbidden"===e&&i.destroy()}})}],R.EVENT)(e)})]),this.timeMap={},this.failRequestCount=0,this.customTimePipeline=k([g(this,10),(r=this,function(e){return r.sendPipeline([function(e,t){t({url:r.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:R.CUSTOM,log:e,fail:function(e){"403 forbidden"===e&&r.destroy()}})}],R.CUSTOM)(e)})]),this.config=(n=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),n.url=n.url||e+"/collect",n.offlineUrl=n.offlineUrl||e+"/offline",n.whiteListUrl=n.whiteListUrl||e+"/collect/whitelist",n.pvUrl=n.pvUrl||e+"/collect/pv",n.eventUrl=n.eventUrl||e+"/collect/events",n.speedUrl=n.speedUrl||e+"/speed",n.customTimeUrl=n.customTimeUrl||e+"/speed/custom",n.performanceUrl=n.performanceUrl||e+"/speed/performance",n.webVitalsUrl=n.webVitalsUrl||e+"/speed/webvitals",n.setDataReportUrl=n.SetDataReportUrl||e+"/speed/miniProgramData",n),te.instances.push(this)}function ne(e){de.find((function(t){return t.name===e.name}))||(de.push(e),!le&&window.XMLHttpRequest&&(le=!0,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],this.aegisXhrStartTime=Date.now(),this.sendByAegis)Z.isIE()||(this.timeout=5e3);else for(var e=0;e<de.length;e++){var t=de[e];try{"function"==typeof t.open&&t.open(this)}catch(e){}}return pe.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0],t=arguments[1];return this.aegisXhrReqHeader=this.aegisXhrReqHeader||{},this.aegisXhrReqHeader[e]=t,fe.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<de.length;e++){var t=de[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(e){}}return he.apply(this,arguments)}))}function re(e){var t=de.findIndex((function(t){return t.name===e.name}));-1!==t&&de.splice(t,1),window.XMLHttpRequest.prototype.send=he,window.XMLHttpRequest.prototype.open=pe,window.XMLHttpRequest.prototype.setRequestHeader=fe}function ie(e){return e.split("\r\n").reduce((function(e,t){return t=t.split(": "),t[0]&&t[1]&&(e[t[0]]=t[1]),e}),{})}function oe(e,t,n){return null!=t&&t.length&&"object"==typeof e?t.reduce((function(t,r){var i=e instanceof Headers?e.get(r):e[r];return i?t+(""===t?"\n":"\n\n")+n+" header "+r+": "+i:t}),""):""}function ae(e){var t,n="";return"object"==typeof e&&(t=(e=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=e[r]||"function"==typeof e.get&&e.get(r);if(i)return[r,i]}return["",""]}(e,Object.keys(_e)))[0],e=e[1],t&&(n=_e[t](e))),n}Z.macos=function(){return C("mac")},Z.ios=function(){return Z.iphone()||Z.ipod()||Z.ipad()},Z.iphone=function(){return!Z.windows()&&C("iphone")},Z.ipod=function(){return C("ipod")},Z.ipad=function(){var e="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return C("ipad")||e},Z.android=function(){return!Z.windows()&&C("android")},Z.androidPhone=function(){return Z.android()&&C("mobile")},Z.androidTablet=function(){return Z.android()&&!C("mobile")},Z.blackberry=function(){return C("blackberry")||C("bb10")},Z.blackberryPhone=function(){return Z.blackberry()&&!C("tablet")},Z.blackberryTablet=function(){return Z.blackberry()&&C("tablet")},Z.windows=function(){return C("windows")},Z.windowsPhone=function(){return Z.windows()&&C("phone")},Z.windowsTablet=function(){return Z.windows()&&C("touch")&&!Z.windowsPhone()},Z.fxos=function(){return(C("(mobile")||C("(tablet"))&&C(" rv:")},Z.fxosPhone=function(){return Z.fxos()&&C("mobile")},Z.fxosTablet=function(){return Z.fxos()&&C("tablet")},Z.meego=function(){return C("meego")},Z.cordova=function(){return window.cordova&&"file:"===location.protocol},Z.nodeWebkit=function(){return"object"==typeof window.process},Z.mobile=function(){return Z.androidPhone()||Z.iphone()||Z.ipod()||Z.windowsPhone()||Z.blackberryPhone()||Z.fxosPhone()||Z.meego()},Z.tablet=function(){return Z.ipad()||Z.androidTablet()||Z.blackberryTablet()||Z.windowsTablet()||Z.fxosTablet()},Z.desktop=function(){return!Z.tablet()&&!Z.mobile()};var se,ce,ue,le=!(Z.isIE=function(){return"ActiveXObject"in window}),de=[],he=window.XMLHttpRequest.prototype.send,pe=window.XMLHttpRequest.prototype.open,fe=window.XMLHttpRequest.prototype.setRequestHeader,ve=window.fetch,me=!1,ge=[],_e={sw8:function(e){return e=e.split("-")[1],e?atob(e):""},traceparent:function(e){return e.split("-")[1]},"sentry-trace":function(e){return e.split("-")[0]}},ye=(new q({name:"reportApiSpeed"}),new q({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},getRequestType:function(e,t,n){void 0===t&&(t="");var r,i;e="function"==typeof(null==(i=e.api)?void 0:i.resourceTypeHandler)?null==(i=e.api)?void 0:i.resourceTypeHandler(n):"";return"fetch"===e&&"static"===e||(r=void 0===t?"":t,i=(void 0===n?"":n).split("?")[0],e=P.test(i)||O.some((function(e){return-1!==String(r).indexOf(e)}))?"static":"fetch"),e},overrideFetch:function(e){var t=this,n={name:this.name,then:function(n,r,i,o){var a,c;e.hostUrl&&-1<i.indexOf(e.hostUrl)||(a=n.headers?n.headers.get("content-type"):"",a=t.getRequestType(e,a,n.url),c={url:n.url,isHttps:f(n.url),method:(null==o?void 0:o.method)||"get",duration:r,type:a,nextHopProtocol:"",status:n.status||0},"fetch"===a?n.clone().text().then((function(a){var s=n.status<=0||400<=n.status,u=(null==(u=e.api)?void 0:u.reqHeaders)||[],l=(u=oe(null==o?void 0:o.headers,u,"req"),(null==(l=e.api)?void 0:l.resHeaders)||[]),d=(l=oe(n.headers,l,"res"),ae(null==o?void 0:o.headers)),h=v(a,e.api,{url:i,ctx:n,payload:null==o?void 0:o.body}),p=h.code,f=(h=h.isErr,null==(f=e.api)?void 0:f.apiDetail),g=f?m(null==o?void 0:o.body,null==(g=e.api)?void 0:g.reqParamHandler,{url:i}):"";f=f?m(a,null==(f=e.api)?void 0:f.resBodyHandler,{url:i,ctx:n}):"",a=(s?"FETCH_ERROR: "+a+" \n\n":"")+"fetch req url: "+i+" \n                                \nres status: "+(n.status||0)+" \n                                \nres duration: "+r+"ms \n                                \nreq method: "+((null==o?void 0:o.method)||"get")+" \n                                \nres retcode: "+p+"\n                                \nreq param: "+g+"\n                                \nres data: "+f+"\n                                "+u+"\n                                "+l;c.payload=null==o?void 0:o.body,c.ret=p,c.isErr=+h,t.publishNormalLog({msg:a,level:s?x.AJAX_ERROR:h?x.RET_ERROR:x.API_RESPONSE,code:p,trace:d}),t.publishSpeed(c)})):(Object.assign(c,{type:"static",urlQuery:p(n.url,!0),domainLookup:s.number,connectTime:s.number}),t.publishSpeed(c)))},catch:function(n,r,i,o){var a,s,c;if(!(e.hostUrl&&-1<i.indexOf(e.hostUrl)))throw a=t.getRequestType(e,"",i),a={url:i,isHttps:f(i),method:(null==o?void 0:o.method)||"get",duration:r,nextHopProtocol:"",type:a,status:0},t.publishSpeed(a),a=(null==(a=e.api)?void 0:a.reqHeaders)||[],a=oe(null==o?void 0:o.headers,a,"req"),s=ae(null==o?void 0:o.headers),c=null!=(c=e.api)&&c.apiDetail?m(null==o?void 0:o.body,null==(c=e.api)?void 0:c.reqParamHandler,{url:i}):"",i="AJAX_ERROR: "+n+"\n                          \nreq url: "+i+"\n                          \nres status: 0\n                          \nres duration: "+r+"ms\n                          \nreq method: "+((null==o?void 0:o.method)||"get")+"\n                          \nreq param:"+c+"\n                          "+a,t.publishNormalLog({msg:i,level:x.AJAX_ERROR,code:-400,trace:s}),n}},r=(this.hackFetchOptions=n,this.hackFetchOptions);if(ge.find((function(e){return e.name===r.name})))throw new Error("name '"+r.name+"' is already in hackFetch option list");ge.push(r),!me&&window.fetch&&(me=!0,window.fetch=function(e,t){void 0===t&&(t={});for(var n="string"==typeof e?e:e.url,r=0;r<ge.length;r++){var i=ge[r];try{"function"==typeof i.beforeFetch&&i.beforeFetch(n,t)}catch(e){}}var o=Date.now();return ve(e,t).then((function(e){for(var r=0;r<ge.length;r++){var i=ge[r];try{"function"==typeof i.then&&i.then(e,Date.now()-o,n,t)}catch(e){}}return e})).catch((function(e){for(var r=0;r<ge.length;r++){var i=ge[r];try{"function"==typeof i.catch&&i.catch(e,Date.now()-o,n,t)}catch(e){}}throw e}))})},overrideXhr:function(e){var t=this,n={name:this.name,send:function(n,r){var i=Date.now();n.addEventListener("loadend",(function(){var o=n.aegisUrl||"";if(o&&!(e.hostUrl&&-1<o.indexOf(e.hostUrl))){var a=Date.now()-i,c=n.getResponseHeader("content-type"),u=(c=t.getRequestType(e,c,o),{url:o,isHttps:f(o),status:n.status||0,method:n.aegisMethod||"get",type:c,nextHopProtocol:"",duration:a}),l=(null==(l=e.api)?void 0:l.reqHeaders)||[],d=oe(n.aegisXhrReqHeader,l,"req"),h=(l=(null==(l=e.api)?void 0:l.resHeaders)||[],ie(n.getAllResponseHeaders())),v=oe(h,l,"res"),g=ae(n.aegisXhrReqHeader),_=(l=null==(h=e.api)?void 0:h.apiDetail,l?m(r,null==(h=e.api)?void 0:h.reqParamHandler,{url:o}):""),y=l?m(n.response,null==(h=e.api)?void 0:h.resBodyHandler,{url:o}):"";if("fetch"===c)try{var b,S,k,w,T=n.response,E=e.api,I={url:o,ctx:n,payload:r},C=function(e){var n=e.code,i=(e=e.isErr,"xhr req url: "+o+"\n                    \nres status: "+u.status+"\n                    \nres duration: "+a+"ms\n                    \nreq method: "+u.method+"\n                    \nres retcode: "+n+"\n                    \nreq param: "+_+"\n                    \nres data: "+y+"\n                    "+d+"\n                    "+v);u.ret=n,u.isErr=+e,u.payload=r,t.publishNormalLog({msg:i,level:e?x.RET_ERROR:x.API_RESPONSE,code:n,trace:g}),t.publishSpeed(u)};try{if("function"==typeof(null==E?void 0:E.retCodeHandlerAsync))return void E.retCodeHandlerAsync(T,null==I?void 0:I.url,null==I?void 0:I.ctx,(function(e){var t=e.code;e=e.isErr;null!=C&&C({code:void 0===t?"unknown":t,isErr:e})}));if("function"==typeof(null==E?void 0:E.retCodeHandler))return k=(S=E.retCodeHandler(T,null==I?void 0:I.url,null==I?void 0:I.ctx,null==I?void 0:I.payload)||{}).code,w=S.isErr,void(null!=C&&C({code:void 0===k?"unknown":k,isErr:w}));"string"==typeof T&&(T=JSON.parse(T)),"function"==typeof(null==(b=null==E?void 0:E.ret)?void 0:b.join)&&(D=[].concat(E.ret.map((function(e){return e.toLowerCase()}))));var R=Object.getOwnPropertyNames(T).filter((function(e){return-1!==D.indexOf(e.toLowerCase())}));if(R.length)return k=T[R[0]],void(null!=C&&C({code:""+k,isErr:0!==k&&"0"!==k}));null!=C&&C({code:"unknown",isErr:!1})}catch(T){null!=C&&C({code:"unknown",isErr:!1})}}catch(c){u.ret="unknown",t.publishSpeed(u)}else Object.assign(u,{type:"static",urlQuery:p(o,!0),domainLookup:s.number,connectTime:s.number}),t.publishSpeed(u)}}))}};this.hackXHROptions=n,ne(this.hackXHROptions)},publishSpeed:function(e){var t=this;this.$walk((function(n){var r=t.$getConfig(n);"fetch"===e.type&&r&&"function"==typeof r.urlHandler?n.speedLogPipeline(i(i({},e),{url:p(r.urlHandler(e.url,e.payload))})):(e.url=p(e.url),n.speedLogPipeline(e))}))},publishNormalLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))},destroy:function(){var e,t;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&re(this.option.hackXHROptions),this.option.hackFetchOptions&&(e=this.option.hackFetchOptions,-1!==(t=ge.findIndex((function(t){return t.name===e.name})))&&ge.splice(t,1),window.fetch=ve)}})),be=new q({name:"reportBridgeSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideBridge(e))},publishSpeed:function(e){this.$walk((function(t){t.speedLogPipeline(e)}))},overrideBridge:function(e){var t=this,n=Date.now(),r=e.config;r.reportBridgeSpeed&&r.h5Bridge&&r.h5BridgeFunc.length&&r.h5BridgeFunc.forEach((function(e){var i=r.h5Bridge[e];r.h5Bridge[e]=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a=e[0],s=e[1],c=e[2],u=e[3];i(a,s,c,(function(e){var i=v(e,r.api),o=i.code;i=i.isErr,o={url:a+"-"+s,name:a+"-"+s,duration:Date.now()-n,type:"bridge",ret:o,isErr:+i};t.publishSpeed(o),u(e)}))}}))}});function Se(e,t,n,r){return void 0===n&&(n=3e4),void 0===r&&(r=0),(t=void 0===t?0:t)<=e&&e<=n?e:r}(Oe=se=se||{})[Oe.unknown=100]="unknown",Oe[Oe.wifi=1]="wifi",Oe[Oe.net2g=2]="net2g",Oe[Oe.net3g=3]="net3g",Oe[Oe.net4g=4]="net4g",Oe[Oe.net5g=5]="net5g",Oe[Oe.net6g=6]="net6g",(Oe=ce=ce||{})[Oe.android=1]="android",Oe[Oe.ios=2]="ios",Oe[Oe.windows=3]="windows",Oe[Oe.macos=4]="macos",Oe[Oe.linux=5]="linux",Oe[Oe.other=100]="other",(Oe=ue=ue||{})[Oe.unknown=100]="unknown",Oe[Oe.normal=0]="normal",Oe[Oe.weak=1]="weak",Oe[Oe.disconnected=2]="disconnected";var ke,we,Te,Ee,Ie,Ce,xe,Re,Ae,Oe=new q({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",se.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e),this.refreshNetworkStatusToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var e={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},t=Object.keys(e).find((function(t){return e[t].test(navigator.userAgent)}));return t?ce[t]:ce.other},refreshNetworkTypeToBean:function(e){var t=this,n=e.config;n&&("function"==typeof n.getNetworkType?n.getNetworkType:Pe)((function(n){se[n]||(n=se.unknown),e.extendBean("netType",n),t.NetworkRefreshTimer=setTimeout((function(){t.refreshNetworkTypeToBean(e),clearTimeout(t.NetworkRefreshTimer)}),1e4)}))},refreshNetworkStatusToBean:function(e){var t,n=this,r=e.config;!r||null!=(t="function"==typeof r.getNetworkStatus?r.getNetworkStatus:t)&&t((function(t){void 0===ue[t]&&(t=ue.unknown),e.extendBean("netStatus",t),n.NetworkStatusRefreshTimer=setTimeout((function(){n.refreshNetworkStatusToBean(e),clearTimeout(n.NetworkStatusRefreshTimer)}),1e4)}))}}),Pe=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||"unknown",0<=(n=String(n).toLowerCase()).indexOf("4g")?se.net4g:0<=n.indexOf("wifi")?se.wifi:0<=n.indexOf("5g")?se.net5g:0<=n.indexOf("6g")?se.net6g:0<=n.indexOf("3g")?se.net3g:0<=n.indexOf("2g")?se.net2g:se.unknown))},De=window.WebSocket,Le=[],Ne={construct:function(e,t){var n=new e(t[0],t[1]);return n.originSend=n.send,n.addEventListener("error",(function(e){e=(null==e?void 0:e.currentTarget)||{};var t=e.url,n=e.readyState;null!=Le&&Le.forEach((function(e){e=e.onErr,null!=e&&e({msg:"无法获知具体错误信息，需在浏览器控制台查看！",readyState:n,connectUrl:t})}))})),Object.defineProperty(n,"send",{get:function(){return function(e){null!=(t=n.originSend)&&t.call(n,e);var t=n.readyState,r=(e=WebSocket.OPEN,WebSocket.CLOSED),o=WebSocket.CONNECTING,a=WebSocket.CLOSING;if(t!==e){var s={readyState:t,connectUrl:n.url};switch(t){case r:Le.forEach((function(e){e=e.sendErr,null!=e&&e(i({msg:"消息发送失败，连接已关闭！"},s))}));break;case o:Le.forEach((function(e){(0,e.sendErr)(i({msg:"消息发送失败，正在连接中！"},s))}));break;case a:Le.forEach((function(e){(0,e.sendErr)(i({msg:"消息发送失败，连接正在关闭！"},s))}))}}}}}),n}},Me=new q({name:"onError"}),Ue=Me=new q({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(e){function t(e){e=e&&N(e.reason),s.publishErrorLog({msg:"PROMISE_ERROR: "+e,level:x.PROMISE_ERROR})}function n(e){if(e=(null==e?void 0:e.target)||(null==e?void 0:e.srcElement)){var t=e.src||e.href;e=e.tagName;if("string"==typeof t&&e&&!(-1<window.location.href.indexOf(t))){var n={msg:e+" load fail: "+t,level:x.INFO};if(/\.js$/.test(t))n.level=x.SCRIPT_ERROR;else if(/\.css$/.test(t))n.level=x.CSS_ERROR;else switch(e.toLowerCase()){case"script":n.level=x.SCRIPT_ERROR;break;case"link":n.level=x.CSS_ERROR;break;case"img":n.level=x.IMAGE_ERROR;break;case"audio":case"video":n.level=x.MEDIA_ERROR;break;default:return}s.publishErrorLog(n)}}}var r,i,a,s=this,c=window.onerror,u=(window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.publishErrorLog({msg:(N(e[0])||"")+" @ ("+(N(e[1])||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+N(e[4]||""),level:x.ERROR}),null!=c&&c.call.apply(c,o([window],e))},window.addEventListener("unhandledrejection",t),window.document.addEventListener("error",n,!0),e.lifeCycle.on("destroy",(function(){0===Me.countInstance()&&(window.document.removeEventListener("unhandledrejection",t),window.document.removeEventListener("error",n,!0))})),this),l={name:this.name,send:function(t,n){t.addEventListener("loadend",(function(){var r,i,o,a,s,c,l,d="";this.failType?d=this.failType:this.status?400<=this.status&&(d="error"):d="failed",e.config.hostUrl&&this.aegisUrl&&-1<this.aegisUrl.indexOf(e.config.hostUrl)||!d||(r=t.aegisUrl,i=(null==(i=e.config.api)?void 0:i.reqHeaders)||[],i=oe(t.aegisXhrReqHeader,i,"req"),a=(null==(a=e.config.api)?void 0:a.resHeaders)||[],o=ie(t.getAllResponseHeaders()),o=oe(o,a,"res"),a=ae(t.aegisXhrReqHeader),s=v(t.response,e.config.api,{url:r,ctx:t,payload:n}).code,c=(l=null==(l=e.config.api)?void 0:l.apiDetail)?m(n,null==(c=e.config.api)?void 0:c.reqParamHandler,{url:r}):"",l=l?m(t.responseType&&"text"!==t.responseType&&"json"!==t.responseType?"":U(t.response),null==(l=e.config.api)?void 0:l.resBodyHandler,{url:r}):"",u.publishErrorLog({msg:"AJAX_ERROR: request "+d+"\n                      \nreq url: "+this.aegisUrl+"\n                      \nres status: "+(this.status||0)+"\n                      \nres duration: "+(Date.now()-t.aegisXhrStartTime)+"ms\n                      \nres retcode: "+s+"\n                      \nreq method: "+this.aegisMethod+"\n                      \nreq param: "+c+"\n                      \nres data: "+l+"\n                      "+i+"\n                      "+o,level:x.AJAX_ERROR,trace:a}))})),t.addEventListener("timeout",(function(){t.failType="timeout"})),t.addEventListener("error",(function(){t.failType="error"})),t.addEventListener("abort",(function(){t.failType="abort"}))}};this.hackXHROptions=l,ne(this.hackXHROptions),e.config.websocketHack&&(l={key:e.config.id+"-"+this.name,onErr:function(e){var t;null!=(t=s.publishWsErrorLog)&&t.call(s,e)},sendErr:function(e){var t;null!=(t=s.publishWsErrorLog)&&t.call(s,e)}},this.hackWebsocketConfig=l,l=this.hackWebsocketConfig,window.Proxy&&window.WebSocket&&(r=window.WebSocket,window&&!r.isHack&&(i=new Proxy(WebSocket,Ne),r.isHack=!0,window.WebSocket=i),a=l,Le.find((function(e){return e.key===a.key}))||a&&Le.push(a)))},publishErrorLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))},publishWsErrorLog:function(e){var t=e.connectUrl,n=e.msg;e=e.readyState;this.publishErrorLog({msg:"WEBSOCKET_ERROR: \n              connect: "+t+"\n              readyState: "+e+"\n              msg: "+n,level:x.WEBSOCKET_ERROR})},destroy:function(){var e,t;this.option.publishErrorLog=function(){},this.option.hackXHROptions&&re(this.option.hackXHROptions),this.option.hackWebsocketConfig&&(e=this.option.hackWebsocketConfig,window.WebSocket=De,-1!==(t=Le.findIndex((function(t){return t.key===e.key})))&&Le.splice(t,1))}}),je=(new q({name:"pagePerformance"}),3),Ve=new q({name:"pagePerformance",onNewAegis:function(e){T()&&(ke?this.publish(ke,e):this.startCalcPerformance(e))},publish:function(e,t){var n=this;t.sendPipeline([function(e,r){var i,o=[];for(i in e)o.push(i+"="+e[i]);var a,s=n.$getConfig(t);if(s)return a=-1===t.config.performanceUrl.indexOf("?")?"?":"&","function"==typeof s.urlHandler?r({url:t.config.performanceUrl+a+o.join("&")+"&from="+(encodeURIComponent(s.urlHandler())||window.location.href),beanFilter:["from"],type:R.PERFORMANCE,log:e}):r({url:t.config.performanceUrl+a+o.join("&"),type:R.PERFORMANCE,log:e})}],R.PERFORMANCE)(e)},startCalcPerformance:function(e){var t=this;try{this.getFirstScreenTiming(e,(function(n){var r=performance.timing;r&&(ke={dnsLookup:Se(r.domainLookupEnd-r.domainLookupStart),tcp:Se(r.connectEnd-r.connectStart),ssl:Se(0===r.secureConnectionStart?0:r.requestStart-r.secureConnectionStart),ttfb:Se(r.responseStart-r.requestStart),contentDownload:Se(r.responseEnd-r.responseStart),domParse:Se(r.domInteractive-r.domLoading,0,3e4,1070),resourceDownload:Se(r.loadEventStart-r.domInteractive,0,3e4,1070),firstScreenTiming:Se(Math.floor(n),0,6e4)},(r=e.config).extraPerformanceData&&"{}"!==JSON.stringify(r.extraPerformanceData)&&(r=(n=r.extraPerformanceData).engineInit,n=n.bundleLoad,ke=i(i({},ke),{engineInit:Se(r,0,1e4),bundleLoad:Se(n,0,1e4)})),t.publish(ke,e))}))}catch(e){}},getFirstScreenTiming:function(e,t){e.lifeCycle.on("destroy",(function(){c&&clearTimeout(c)}));var n=this,r=["script","style","link","br"],i=[],o={},a=new MutationObserver((function(e){var t={roots:[],rootsDomNum:[],time:performance.now()};e.forEach((function(e){e&&e.addedNodes&&e.addedNodes.forEach&&e.addedNodes.forEach((function(e){1===e.nodeType&&(e.hasAttribute("AEGIS-FIRST-SCREEN-TIMING")||e.querySelector("[AEGIS-FIRST-SCREEN-TIMING]"))?(Object.prototype.hasOwnProperty.apply(o,[t.time])||(o[t.time]=[]),o[t.time].push(e)):1!==e.nodeType||-1!==r.indexOf(e.nodeName.toLocaleLowerCase())||n.isEleInArray(e,t.roots)||e.hasAttribute("AEGIS-IGNORE-FIRST-SCREEN-TIMING")||(t.roots.push(e),t.rootsDomNum.push(n.walkAndCount(e)||0))}))})),t.roots.length&&i.push(t)})),s=(a.observe(document,{childList:!0,subtree:!0}),function(r){(r=void 0===r?0:r)||(u=0,(l=Object.keys(o).filter((function(e){return o[+e].find((function(e){return n.isInFirstScreen(e)}))}))).length?(r=Math.max.apply(null,l),("object"!=typeof(null==(l=e.config)?void 0:l.pagePerformance)||null!=(l=e.config.pagePerformance)&&l.firstScreenInfo)&&(e.firstScreenInfo={element:null==(l=o[r])?void 0:l[0],timing:r,markDoms:o})):i.forEach((function(t){for(var i,o=0;o<t.roots.length;o++)t.rootsDomNum[o]>u&&n.isInFirstScreen(t.roots[o])&&(u=t.rootsDomNum[o],r=t.time,("object"!=typeof(null==(i=e.config)?void 0:i.pagePerformance)||null!=(i=e.config.pagePerformance)&&i.firstScreenInfo)&&(e.firstScreenInfo={element:t.roots[o],timing:r}))})),i.length=0,Object.keys(o).forEach((function(e){o[e]=o[e].map((function(e){var t={tagName:e.tagName},n=e.attributes;if(!n)return e;for(var r=0;r<n.length;r++){var i=n[r];i.name&&(t[i.name]=e.getAttribute(i.name))}return t}))})));var u,l=performance.timing,d=l.domInteractive-l.domLoading,h=(l=l.loadEventStart-l.domInteractive,r);c=null;for(var p=0,f=[d,l,h];p<f.length;p++)if(f[p]<=0&&0<je){c=setTimeout((function(){return s(h)}),3e3);break}c?--je:(a.disconnect(),null!=t&&t(r))}),c=setTimeout((function(){return s()}),3e3)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){var t,n;return!(!e||"function"!=typeof e.getBoundingClientRect)&&(e=e.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth,0<=e.left&&e.left<n&&0<=e.top&&e.top<t&&0<e.width&&0<e.height)},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var r=0;r<n.length;r++)t+=this.walkAndCount(n[r])}return t}});function Fe(){Ie=[],Te=-1,we=null,He(addEventListener)}function Be(e,t){we||(we=t,Te=e,Ee=new Date,He(removeEventListener),$e())}function $e(){var e;0<=Te&&Te<Ee-xe&&(e={entryType:"first-input",name:we.type,target:we.target,cancelable:we.cancelable,startTime:we.timeStamp,processingStart:we.timeStamp+Te},Ie.forEach((function(t){t(e)})),Ie=[])}function He(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Re,Ce)}))}function ze(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}}function We(e,t){try{var n;if(PerformanceObserver.supportedEntryTypes.includes(e)&&("first-input"!==e||"PerformanceEventTiming"in self))return(n=new PerformanceObserver((function(e){return e.getEntries().map(t)}))).observe({type:e,buffered:!0}),n}catch(e){}}function qe(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)}function Ge(e,t,n){var r;return function(){0<=t.value&&(n||tt.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),!t.delta&&void 0!==r||(r=t.value,e(t)))}}function Je(){et((function(e){e=e.timeStamp,nt=e}),!0)}function Ke(){return nt<0&&((nt=self.webVitals.firstHiddenTime)===1/0&&Je(),qe((function(){setTimeout((function(){nt="hidden"===document.visibilityState?0:1/0,Je()}),0)}))),{get timeStamp(){return nt}}}function Qe(e){var t=e.name;e=e.value;rt[t]=e}function Xe(e,t){function n(e){u=e}function r(e){s=s.concat(e)}function o(e,t){c={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}}var s=[],c=null,u=null;at.useAsyncPlugin(e,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",r),e.lifeCycle.on("uploadLogs",o),e.lifeCycle.on("onConfigChange",n)},onAegisInitAndPluginLoaded:function(e,l){var d,h,p,f,v,m,g=t.dbConfig,_=(g=void 0===g?{}:g,t.url),y=(_=void 0===_?at.urls.aegisCollect:_,t.offlineLogExp),b=(y=void 0===y?3:y,t.id),S=t.uin;null!=(d=e.lifeCycle)&&d.remove("beforeWrite",r),null!=(d=e.lifeCycle)&&d.remove("uploadLogs",o),null!=(d=e.lifeCycle)&&d.remove("onConfigChange",n),_=Object.assign({lookupUrl:_+"/offlineAuto?id="+b,preservedDay:y,id:b,uin:S,aid:(null==(d=e.bean)?void 0:d.aid)||"",beforeRequest:e.config.beforeRequest,afterRequest:e.config.afterRequest},g,{sessionId:at.sessionID});try{var k=new l(_);s.forEach((function(e){k.add(i(i({},e),{level:e.level===x.INFO_ALL?x.INFO:e.level}))})),null!=(h=e.lifeCycle)&&h.on("beforeWrite",(function(e){(e=void 0===e?[]:e).forEach((function(e){k.add(i(i({},e),{level:e.level===x.INFO_ALL?x.INFO:e.level}))}))})),null!=(p=e.lifeCycle)&&p.on("uploadLogs",(function(n,r){var i;void 0===n&&(n={}),void 0===r&&(r={}),k.uploadLogs(Object.assign({id:t.id,uin:t.uin,aid:null==(i=e.bean)?void 0:i.aid},n),r)})),null!=(f=e.lifeCycle)&&f.on("onConfigChange",(function(e){k.setConfig(e)})),null!=(v=e.lifeCycle)&&v.on("destroy",(function(){0===st.countInstance()&&(s.length=0,"function"==typeof((c=null)==k?void 0:k.destroy)&&k.destroy())})),k.on("PERREVENT",(function(n){e.sendPipeline([function(e,n){r={msg:N(e),level:x.INFO};var r=(r=Array.isArray(r)?r:[r]).map((function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return a(n)+"["+t+"]="+(void 0===e[n]?"":a(e[n]))})).join("&")})).join("&")+(r.length?"&count="+r.length:"");n({type:R.OFFLINE,data:r,contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:t.url+"?id=893&sessionId="+at.sessionID+"&uin="+t.uin+"&from="+t.id+"&count=1&version=1.36.5",log:e})}],R.OFFLINE)(n)})),u&&(k.setConfig(u),u=null),c&&(null!=(m=e.lifeCycle)&&m.emit("uploadLogs",c.conds,c.params),c=null),e.flog=k}catch(e){console.log(e)}}})}Ce={passive:!0,capture:!0},xe=new Date,Re=function(e){var t,n,r,i;function o(){Be(n,r),i()}function a(){i()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,r=e,i=function(){removeEventListener("pointerup",o,Ce),removeEventListener("pointercancel",a,Ce)},addEventListener("pointerup",o,Ce),addEventListener("pointercancel",a,Ce)):Be(t,e))},Ae="hidden"===document.visibilityState?0:1/0,addEventListener("visibilitychange",(function e(t){"hidden"===document.visibilityState&&(Ae=t.timeStamp,removeEventListener("visibilitychange",e,!0))}),!0),Fe(),self.webVitals={firstInputPolyfill:function(e){Ie.push(e),$e()},resetFirstInputPolyfill:Fe,get firstHiddenTime(){return Ae}};var Ye,Ze,et=function(e,t){function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},tt=new("function"==typeof WeakSet?WeakSet:Set),nt=-1,rt=(new q({name:"webVitals"}),{FCP:-1,LCP:-1,FID:-1,CLS:-1}),it=new q({name:"webVitals",onNewAegis:function(e){if(T()&&"function"==typeof window.PerformanceObserver&&"function"==typeof performance.getEntriesByName)try{g=Qe,y=Ke(),b=ze("FCP"),S=performance.getEntriesByName("first-contentful-paint")[0],k=S?null:We("paint",C),(S||k)&&(_=Ge(g,b,void 0),S&&C(S),qe((function(e){b=ze("FCP"),_=Ge(g,b,void 0),requestAnimationFrame((function(){requestAnimationFrame((function(){b.value=performance.now()-e.timeStamp,tt.add(b),_()}))}))}))),d=Qe,f=Ke(),v=ze("LCP"),(m=We("largest-contentful-paint",I))&&(h=Ge(d,v,void 0),p=function(){tt.has(v)||(m.takeRecords().map(I),m.disconnect(),tt.add(v),h())},["keydown","click"].forEach((function(e){addEventListener(e,p,{once:!0,capture:!0})})),et(p,!0),qe((function(e){v=ze("LCP"),h=Ge(d,v,void 0),requestAnimationFrame((function(){requestAnimationFrame((function(){v.value=performance.now()-e.timeStamp,tt.add(v),h()}))}))}))),a=Qe,s=Ke(),c=ze("FID"),u=We("first-input",w),l=Ge(a,c,void 0),u&&et((function(){u.takeRecords().map(w),u.disconnect()}),!0),u||window.webVitals.firstInputPolyfill(w),qe((function(){c=ze("FID"),l=Ge(a,c,void 0),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(w)})),n=Qe,i=ze("CLS",0),(o=We("layout-shift",t))&&(r=Ge(n,i,void 0),et((function(){o.takeRecords().map(t),r()})),qe((function(){i=ze("CLS",0),r=Ge(n,i,void 0)}))),E(this.publish.bind(this,e),!0)}catch(e){}function t(e){e.hadRecentInput||(i.value+=e.value,i.entries.push(e),r())}var n,r,i,o,a,s,c,u,l,d,h,p,f,v,m,g,_,y,b,S,k;function w(e){e.startTime<s.timeStamp&&(c.value=e.processingStart-e.startTime,c.entries.push(e),tt.add(c),l())}function I(e){var t=e.startTime;t<f.timeStamp&&(v.value=t,v.entries.push(e)),h()}function C(e){"first-contentful-paint"===e.name&&(k&&k.disconnect(),e.startTime<y.timeStamp&&(b.value=e.startTime,b.entries.push(e),tt.add(b),_()))}},publish:function(e){e.sendPipeline([function(t,n){var r,i=[];for(r in t)i.push(r+"="+t[r]);var o=-1===e.config.performanceUrl.indexOf("?")?"?":"&";n({url:e.config.webVitalsUrl+o+i.join("&"),type:R.VITALS,log:t,sendBeacon:!0})}],R.VITALS)(rt)},destroy:function(){this.option.publish=function(){}}}),ot=0,at=(r(Ze=ut,W=Ye=W),Ze.prototype=null===W?Object.create(W):(lt.prototype=W.prototype,new lt),ut.prototype.getBean=function(e){var t=this;return void 0===e&&(e=[]),""+Object.getOwnPropertyNames(this.bean).filter((function(t){return-1===e.indexOf(t)})).map((function(e){return"from"===e?"from="+t.getCurrentPageUrl():e+"="+t.bean[e]})).join("&")},ut.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href;return"function"==typeof this.config.urlHandler&&(e=this.config.urlHandler()),encodeURIComponent(e)},ut.prototype.ready=function(){function e(){var n,r,i,o;t.reportRequestQueue.length&&(n=t.reportRequestQueue.splice(0,1)[0],r=n.options,i=n.success,o=n.fail,t.$request(r,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return null==i?void 0:i.apply(r,t)}finally{e()}}),(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return null==o?void 0:o.apply(r,t)}finally{e()}})))}var t=this;e(),this.isReportReady=!0},ut.prototype.request=function(e,t,n){this.config.reportImmediately||this.isReportReady?this.$request(e,t,n):this.reportRequestQueue.push({options:e,success:t,fail:n})},ut.prototype.$request=function(e,t,n){var r,i,o,a;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)return a=e.url,!1!==e.addBean&&(a=a+(-1===a.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=a,a=e.method||"get",(e=(i=this.config.onBeforeRequest)?i(e,this):e)?e.url?void((null!=e&&e.sendBeacon||this.sendNow)&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(e.url,e.data):((r=new XMLHttpRequest).sendByAegis=!0,r.addEventListener("readystatechange",(function(){4===r.readyState&&(400<=r.status||0===r.status?null!=n&&n(r.response):null!=t&&t(r.response))})),"get"===a.toLocaleLowerCase()?(r.open("get",(i=e.url,o=e.data,"string"!=typeof i?"":"object"==typeof o&&o?(a=Object.getOwnPropertyNames(o).map((function(e){var t=o[e];return e+"="+("string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)))})).join("&").replace(/eval/gi,"evaI"),i+(-1===i.indexOf("?")?"?":"&")+a):i)),r.send()):(r.open("post",e.url),e.contentType&&r.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),r.send(e.data)))):console.warn("Please handle the parameters reasonably, options.url is necessary"):console.warn("Sending request blocked")},ut.useAsyncPlugin=function(e,t){var n=(t=void 0===t?{}:t).exportsConstructor,r=void 0===n?"aegis-plugin-"+ot:n,i=(n=t.onAegisInit,void 0===n?function(){}:n),o=(n=t.onAegisInitAndPluginLoaded,void 0===n?function(){}:n);if(ot+=1,"string"!=typeof e)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof i||"function"!=typeof o)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new q({name:"asyncPlugin",onNewAegis:function(t){try{i(t),ut.asyncPlugin[e]?o(t,window[ut.asyncPlugin[e]]):(n=e,a=r,s=function(n){n||(ut.asyncPlugin[e]=r,n=window[r],o(t,n))},c=document.createElement("script"),u=document.head,"function"==typeof a&&(s=a,a=""),c.src=n,c.setAttribute("name",a),c.name=a,c.setAttribute("crossorigin","anonymous"),c.crossorigin="anonymous",c.defer=!0,c.hasLoaded=!1,c.onreadystatechange=function(){c.hasLoaded||c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(c.hasLoaded=!0,"function"==typeof s&&s(!1),setTimeout((function(){u.contains(c)&&u.removeChild(c)})))},c.onload=c.onreadystatechange,c.onerror=function(){"function"==typeof s&&s(!0),setTimeout((function(){u.contains(c)&&u.removeChild(c)}))},"complete"===document.readyState?u.appendChild(c):window.addEventListener("load",(function(){u.appendChild(c)})))}catch(n){console.log("error on below is caused by "+e+" "),console.error(n)}var n,a,s,c,u}}))},ut.prototype.publishPluginsLogs=function(){var e=ut.installedPlugins.find((function(e){return"reportAssetSpeed"===e.name}));null!=e&&e.option.collectNotReportedLog(this)},ut.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=void 0===e?{}:e,t=void 0===t?{}:t)},ut.sessionID="session-"+Date.now(),ut.asyncPlugin={},ut.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.2/flog.core.min.js"},ut),st=new q({name:"offlineLog"}),ct=(W=st=new q({name:"offlineLog",onNewAegis:function(e){Xe(at.urls.flog,e.config)}}),new q({name:"spa"}),new q({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState;var e=(null==(e=location.href)?void 0:e.split("?"))[0];this.$fireUrl=e,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv)},wr:function(e){var t=history[e],n="__"+e+"__hasWrittenByTamSpa";return"function"==typeof t&&!history[n]&&(Object.defineProperty(history,n,{value:!0,enumerable:!1}),function(){var n=t.apply(this,arguments),r=null;return"function"==typeof Event?r=new Event(e):(r=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),window.dispatchEvent(r),n})},sendPv:function(){var e=this;setTimeout((function(){var t=location.href,n=(null==(n=location.href)?void 0:n.split("?"))[0];n&&n!==e.$fireUrl&&(e.$walk((function(e){e.sendPipeline([function(n,r){r({url:e.config.pvUrl+"?from="+encodeURIComponent(t),beanFilter:["from"],type:R.PV})}],R.PV)(null)})),e.$fireUrl=n)}),0)},destroy:function(){window.removeEventListener("replaceState",this.option.sendPv),window.removeEventListener("pushState",this.option.sendPv),window.removeEventListener("popstate",this.option.sendPv)}}));function ut(e){var t,n,r,o,a,s=Ye.call(this,e)||this;s.sendNow=!1,s.isReportReady=!1,s.reportRequestQueue=[],s.speedLogPipeline=k([g(s),(o=s.config,a={},function(e,t){var n,r;o.speedSample?(r="object"==typeof o.repeat?o.repeat:{repeat:o.repeat},n=+r.speed||+r.repeat||5,Array.isArray(e)?(r=e.filter((function(e){var t=!a[e.url]||a[e.url]<n;return a[e.url]=1+~~a[e.url],t}))).length&&t(r):(!a[e.url]||a[e.url]<n)&&(a[e.url]=1+~~a[e.url],t(e))):t(e)}),(r=s,function(e,t){Pe((function(n){r.extendBean("netType",n),t(e)}))}),function(e,t){s.lifeCycle.emit("beforeReportSpeed",e);var n=s.config.beforeReportSpeed;if((e="function"==typeof n?e.filter((function(e){return!1!==n(e)})):e).length)return t(e)},function(e){return s.sendPipeline([function(e,t){var n,r,o,a;t({type:R.SPEED,url:""+s.config.speedUrl,method:"post",data:(t=e,n=i(i({},s.bean),{from:s.getCurrentPageUrl()}),o={fetch:[],static:[],bridge:[]},a=new FormData,Array.isArray(t)?t.forEach((function(e){var t=K(e);o[e.type].push(t)})):(r=K(t),o[t.type].push(r)),a.append("payload",M(i({duration:o},n))),a),log:e})}],R.SPEED)(e)}]),e.asyncPlugin=!0;try{"undefined"!=typeof document&&(e.uin=e.uin||(null!=(t=document.cookie.match(/\buin=\D+(\d*)/))?t:[])[1]||(null!=(n=document.cookie.match(/\bilive_uin=\D*(\d+)/))?n:[])[1]||""),s.init(e),s.extendBean("sessionId",ut.sessionID),s.extendBean("from",s.getCurrentPageUrl()),"undefined"!=typeof document&&s.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&s.extendBean("ext1",encodeURIComponent(e.ext1)),e.ext2&&s.extendBean("ext2",encodeURIComponent(e.ext2)),e.ext3&&s.extendBean("ext3",encodeURIComponent(e.ext3))}catch(e){console.warn(e),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),s.sendSDKError(e)}return s}function lt(){this.constructor=Ze}new q({name:"ie"}),new q({name:"onClose"});var dt=new q({name:"onClose",onNewAegis:function(){var e,t=this;Z.desktop()?(e=window.onunload,window.onunload=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.publishNotReportedLog(),null!=e&&e.call.apply(e,o([window],n))}):E(this.publishNotReportedLog.bind(this),!0)},publishNotReportedLog:function(){var e=this;this.$walk((function(t){t.sendNow=!0,t.publishPluginsLogs(),e.publishThrottlePipeLogs(t)}))},publishThrottlePipeLogs:function(e){null!=e&&e.speedLogPipeline([]),null!=e&&e.eventPipeline([]),null!=e&&e.customTimePipeline([]),null!=e&&e.normalLogPipeline([])}});return new q({name:"aid"}),at.use(Ue),at.use(ye),at.use(X),at.use(Ve),at.use(it),at.use(G),at.use(Oe),at.use(W),at.use(ct),at.use(dt),at.use(be),at}))},9662:function(e,t,n){var r=n(614),i=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},9670:function(e,t,n){var r=n(111),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},1318:function(e,t,n){var r=n(5656),i=n(1400),o=n(6244),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c),l=i(a,u);if(e&&n!=n){while(u>l)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},3658:function(e,t,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(i(e)&&!a(e,"length").writable)throw o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},4326:function(e,t,n){var r=n(1702),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},9920:function(e,t,n){var r=n(2597),i=n(3887),o=n(1236),a=n(3070);e.exports=function(e,t,n){for(var s=i(t),c=a.f,u=o.f,l=0;l<s.length;l++){var d=s[l];r(e,d)||n&&r(n,d)||c(e,d,u(t,d))}}},8880:function(e,t,n){var r=n(9781),i=n(3070),o=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7045:function(e,t,n){var r=n(6339),i=n(3070);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},8052:function(e,t,n){var r=n(614),i=n(3070),o=n(6339),a=n(3072);e.exports=function(e,t,n,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:t;if(r(n)&&o(n,u,s),s.global)c?e[t]=n:a(t,n);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(l){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},3072:function(e,t,n){var r=n(2474),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},5117:function(e,t,n){"use strict";var r=n(6330),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+r(t)+" of "+r(e))}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var r=n(2474),i=n(111),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},7207:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},8113:function(e,t,n){var r=n(5005);e.exports=r("navigator","userAgent")||""},7392:function(e,t,n){var r,i,o=n(2474),a=n(8113),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(r=l.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var r=n(2474),i=n(1236).f,o=n(8880),a=n(8052),s=n(3072),c=n(9920),u=n(4705);e.exports=function(e,t){var n,l,d,h,p,f,v=e.target,m=e.global,g=e.stat;if(l=m?r:g?r[v]||s(v,{}):(r[v]||{}).prototype,l)for(d in t){if(p=t[d],e.dontCallGetSet?(f=i(l,d),h=f&&f.value):h=l[d],n=u(m?d:v+(g?".":"#")+d,e.forced),!n&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(e.sham||h&&h.sham)&&o(p,"sham",!0),a(l,d,p,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var r=n(4374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(e,t,n){var r=n(9781),i=n(2597),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},1702:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.call,a=r&&i.bind.bind(o,o);e.exports=r?a:function(e){return function(){return o.apply(e,arguments)}}},5005:function(e,t,n){var r=n(2474),i=n(614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},8173:function(e,t,n){var r=n(9662),i=n(8554);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},2474:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:function(e){e.exports={}},4664:function(e,t,n){var r=n(9781),i=n(7293),o=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var r=n(1702),i=n(7293),o=n(4326),a=Object,s=r("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?s(e,""):a(e)}:a},2788:function(e,t,n){var r=n(1702),i=n(614),o=n(5465),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},9909:function(e,t,n){var r,i,o,a=n(4811),s=n(2474),c=n(111),u=n(8880),l=n(2597),d=n(5465),h=n(6200),p=n(3501),f="Object already initialized",v=s.TypeError,m=s.WeakMap,g=function(e){return o(e)?i(e):r(e,{})},_=function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}};if(a||d.state){var y=d.state||(d.state=new m);y.get=y.get,y.has=y.has,y.set=y.set,r=function(e,t){if(y.has(e))throw v(f);return t.facade=e,y.set(e,t),t},i=function(e){return y.get(e)||{}},o=function(e){return y.has(e)}}else{var b=h("state");p[b]=!0,r=function(e,t){if(l(e,b))throw v(f);return t.facade=e,u(e,b,t),t},i=function(e){return l(e,b)?e[b]:{}},o=function(e){return l(e,b)}}e.exports={set:r,get:i,has:o,enforce:g,getterFor:_}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},614:function(e,t,n){var r=n(4154),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4705:function(e,t,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,a=function(e,t){var n=c[s(e)];return n==l||n!=u&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,n){var r=n(614),i=n(4154),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var r=n(5005),i=n(614),o=n(7976),a=n(3307),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,s(e))}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(7293),i=n(614),o=n(2597),a=n(9781),s=n(6530).CONFIGURABLE,c=n(2788),u=n(9909),l=u.enforce,d=u.get,h=Object.defineProperty,p=a&&!r((function(){return 8!==h((function(){}),"length",{value:8}).length})),f=String(String).split("String"),v=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||s&&e.name!==t)&&(a?h(e,"name",{value:t,configurable:!0}):e.name=t),p&&n&&o(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=l(e);return o(r,"source")||(r.source=f.join("string"==typeof t?t:"")),e};Function.prototype.toString=v((function(){return i(this)&&d(this).source||c(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},3070:function(e,t,n){var r=n(9781),i=n(4664),o=n(3353),a=n(9670),s=n(4948),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=r?o?function(e,t,n){if(a(e),t=s(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=l(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:d in n?n[d]:r[d],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return u(e,t,n)}catch(r){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),i=n(6916),o=n(5296),a=n(9114),s=n(5656),c=n(4948),u=n(2597),l=n(4664),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=c(t),l)try{return d(e,t)}catch(n){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},8006:function(e,t,n){var r=n(6324),i=n(748),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),i=n(2597),o=n(5656),a=n(1318).indexOf,s=n(3501),c=r([].push);e.exports=function(e,t){var n,r=o(e),u=0,l=[];for(n in r)!i(s,n)&&i(r,n)&&c(l,n);while(t.length>u)i(r,n=t[u++])&&(~a(l,n)||c(l,n));return l}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},2140:function(e,t,n){var r=n(6916),i=n(614),o=n(111),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!o(s=r(n,e)))return s;if(i(n=e.valueOf)&&!o(s=r(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!o(s=r(n,e)))return s;throw a("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),i=n(1702),o=n(8006),a=n(5181),s=n(9670),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?c(t,n(e)):t}},7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4488:function(e,t,n){var r=n(8554),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},6200:function(e,t,n){var r=n(2309),i=n(9711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:function(e,t,n){var r=n(2474),i=n(3072),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},2309:function(e,t,n){var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,n){var r=n(7392),i=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:function(e,t,n){var r=n(9303),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},5656:function(e,t,n){var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),i=Object;e.exports=function(e){return i(r(e))}},7593:function(e,t,n){var r=n(6916),i=n(111),o=n(2190),a=n(8173),s=n(2140),c=n(5112),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,c=a(e,l);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!i(n)||o(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4948:function(e,t,n){var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var r=n(1702),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},3307:function(e,t,n){var r=n(6293);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),i=n(7293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(e,t,n){var r=n(2474),i=n(614),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5112:function(e,t,n){var r=n(2474),i=n(2309),o=n(2597),a=n(9711),s=n(6293),c=n(3307),u=i("wks"),l=r.Symbol,d=l&&l["for"],h=c?l:l&&l.withoutSetter||a;e.exports=function(e){if(!o(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&o(l,e)?u[e]=l[e]:u[e]=c&&d?d(t):h(t)}return u[e]}},7658:function(e,t,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),a=n(3658),s=n(7207),c=n(7293),u=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}();r({target:"Array",proto:!0,arity:1,forced:u||l},{push:function(e){var t=i(this),n=o(t),r=arguments.length;s(n+r);for(var c=0;c<r;c++)t[n]=arguments[c],n++;return a(t,n),n}})},541:function(e,t,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),a=n(3658),s=n(5117),c=n(7207),u=1!==[].unshift(0),l=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();r({target:"Array",proto:!0,arity:1,forced:u||l},{unshift:function(e){var t=i(this),n=o(t),r=arguments.length;if(r){c(n+r);var u=n;while(u--){var l=u+r;u in t?t[l]=t[u]:s(t,l)}for(var d=0;d<r;d++)t[d]=arguments[d]}return a(t,n+r)}})},2087:function(e,t,n){var r=n(2474),i=n(9781),o=n(7045),a=n(7066),s=n(7293),c=r.RegExp,u=c.prototype,l=i&&s((function(){var e=!0;try{c(".","d")}catch(l){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",i=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in e&&(o.hasIndices="d"),o)i(a,o[a]);var s=Object.getOwnPropertyDescriptor(u,"flags").get.call(t);return s!==r||n!==r}));l&&o(u,"flags",{configurable:!0,get:a})},9996:function(e){"use strict";var t=function(e){return n(e)&&!r(e)};function n(e){return!!e&&"object"===typeof e}function r(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||a(e)}var i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103;function a(e){return e.$$typeof===o}function s(e){return Array.isArray(e)?[]:{}}function c(e,n){var r=n&&!0===n.clone;return r&&t(e)?d(s(e),e,n):e}function u(e,n,r){var i=e.slice();return n.forEach((function(n,o){"undefined"===typeof i[o]?i[o]=c(n,r):t(n)?i[o]=d(e[o],n,r):-1===e.indexOf(n)&&i.push(c(n,r))})),i}function l(e,n,r){var i={};return t(e)&&Object.keys(e).forEach((function(t){i[t]=c(e[t],r)})),Object.keys(n).forEach((function(o){t(n[o])&&e[o]?i[o]=d(e[o],n[o],r):i[o]=c(n[o],r)})),i}function d(e,t,n){var r=Array.isArray(t),i=Array.isArray(e),o=n||{arrayMerge:u},a=r===i;if(a){if(r){var s=o.arrayMerge||u;return s(e,t,n)}return l(e,t,n)}return c(t,n)}d.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return d(e,n,t)}))};var h=d;e.exports=h},6507:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=102)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},102:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-alert-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-alert",class:[e.typeClass,e.center?"is-center":"","is-"+e.effect],attrs:{role:"alert"}},[e.showIcon?n("i",{staticClass:"el-alert__icon",class:[e.iconClass,e.isBigIcon]}):e._e(),n("div",{staticClass:"el-alert__content"},[e.title||e.$slots.title?n("span",{staticClass:"el-alert__title",class:[e.isBoldTitle]},[e._t("title",[e._v(e._s(e.title))])],2):e._e(),e.$slots.default&&!e.description?n("p",{staticClass:"el-alert__description"},[e._t("default")],2):e._e(),e.description&&!e.$slots.default?n("p",{staticClass:"el-alert__description"},[e._v(e._s(e.description))]):e._e(),n("i",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"el-alert__closebtn",class:{"is-customed":""!==e.closeText,"el-icon-close":""===e.closeText},on:{click:function(t){e.close()}}},[e._v(e._s(e.closeText))])])])])},i=[];r._withStripped=!0;var o={success:"el-icon-success",warning:"el-icon-warning",error:"el-icon-error"},a={name:"ElAlert",props:{title:{type:String,default:""},description:{type:String,default:""},type:{type:String,default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,default:"light",validator:function(e){return-1!==["light","dark"].indexOf(e)}}},data:function(){return{visible:!0}},methods:{close:function(){this.visible=!1,this.$emit("close")}},computed:{typeClass:function(){return"el-alert--"+this.type},iconClass:function(){return o[this.type]||"el-icon-info"},isBigIcon:function(){return this.description||this.$slots.default?"is-big":""},isBoldTitle:function(){return this.description||this.$slots.default?"is-bold":""}}},s=a,c=n(0),u=Object(c["a"])(s,r,i,!1,null,null,null);u.options.__file="packages/alert/src/main.vue";var l=u.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},6426:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=96)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},96:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?n("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",[e._t("default")],2):e._e()])},i=[];r._withStripped=!0;var o={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.$options.propsData.hasOwnProperty("disabled")?this.disabled:(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},a=o,s=n(0),c=Object(s["a"])(a,r,i,!1,null,null,null);c.options.__file="packages/button/src/button.vue";var u=c.exports;u.install=function(e){e.component(u.name,u)};t["default"]=u}})},1937:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=114)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},114:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-collapse-item",class:{"is-active":e.isActive,"is-disabled":e.disabled}},[n("div",{attrs:{role:"tab","aria-expanded":e.isActive,"aria-controls":"el-collapse-content-"+e.id,"aria-describedby":"el-collapse-content-"+e.id}},[n("div",{staticClass:"el-collapse-item__header",class:{focusing:e.focusing,"is-active":e.isActive},attrs:{role:"button",id:"el-collapse-head-"+e.id,tabindex:e.disabled?void 0:0},on:{click:e.handleHeaderClick,keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleEnterClick(t))},focus:e.handleFocus,blur:function(t){e.focusing=!1}}},[e._t("title",[e._v(e._s(e.title))]),n("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":e.isActive}})],2)]),n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":"el-collapse-head-"+e.id,id:"el-collapse-content-"+e.id}},[n("div",{staticClass:"el-collapse-item__content"},[e._t("default")],2)])])],1)},i=[];r._withStripped=!0;var o=n(29),a=n.n(o),s=n(4),c=n.n(s),u=n(3),l={name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[c.a],components:{ElCollapseTransition:a.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1,id:Object(u["generateId"])()}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},disabled:Boolean},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1}},methods:{handleFocus:function(){var e=this;setTimeout((function(){e.isClick?e.isClick=!1:e.focusing=!0}),50)},handleHeaderClick:function(){this.disabled||(this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0)},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},d=l,h=n(0),p=Object(h["a"])(d,r,i,!1,null,null,null);p.options.__file="packages/collapse/src/collapse-item.vue";var f=p.exports;f.install=function(e){e.component(f.name,f)};t["default"]=f},29:function(e,t){e.exports=n(2743)},3:function(e,t){e.exports=n(3104)},4:function(e,t){e.exports=n(2477)}})},2428:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=113)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},113:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[e._t("default")],2)},i=[];r._withStripped=!0;var o={name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(e){this.activeNames=[].concat(e)}},methods:{setActiveNames:function(e){e=[].concat(e);var t=this.accordion?e[0]:e;this.activeNames=e,this.$emit("input",t),this.$emit("change",t)},handleItemClick:function(e){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==e.name?e.name:"");else{var t=this.activeNames.slice(0),n=t.indexOf(e.name);n>-1?t.splice(n,1):t.push(e.name),this.setActiveNames(t)}}},created:function(){this.$on("item-click",this.handleItemClick)}},a=o,s=n(0),c=Object(s["a"])(a,r,i,!1,null,null,null);c.options.__file="packages/collapse/src/collapse.vue";var u=c.exports;u.install=function(e){e.component(u.name,u)};t["default"]=u}})},7626:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=75)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},11:function(e,t){e.exports=n(4222)},21:function(e,t){e.exports=n(167)},4:function(e,t){e.exports=n(2477)},75:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?n("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?n("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?n("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?n("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},i=[];r._withStripped=!0;var o=n(4),a=n.n(o),s=n(11),c=n.n(s),u=void 0,l="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",d=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function h(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),r=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),i=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),o=d.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";");return{contextStyle:o,paddingSize:r,borderSize:i,boxSizing:n}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u||(u=document.createElement("textarea"),document.body.appendChild(u));var r=h(e),i=r.paddingSize,o=r.borderSize,a=r.boxSizing,s=r.contextStyle;u.setAttribute("style",s+";"+l),u.value=e.value||e.placeholder||"";var c=u.scrollHeight,d={};"border-box"===a?c+=o:"content-box"===a&&(c-=i),u.value="";var p=u.scrollHeight-i;if(null!==t){var f=p*t;"border-box"===a&&(f=f+i+o),c=Math.max(f,c),d.minHeight=f+"px"}if(null!==n){var v=p*n;"border-box"===a&&(v=v+i+o),c=Math.min(v,c)}return d.height=c+"px",u.parentNode&&u.parentNode.removeChild(u),u=null,d}var f=n(9),v=n.n(f),m=n(21),g={name:"ElInput",componentName:"ElInput",mixins:[a.a,c.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return v()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var n=e.minRows,r=e.maxRows;this.textareaCalcStyle=p(this.$refs.textarea,n,r)}else this.textareaCalcStyle={minHeight:p(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(e){this.$emit("compositionstart",e),this.isComposing=!0},handleCompositionUpdate:function(e){this.$emit("compositionupdate",e);var t=e.target.value,n=t[t.length-1]||"";this.isComposing=!Object(m["isKorean"])(n)},handleCompositionEnd:function(e){this.$emit("compositionend",e),this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var n=null,r=0;r<t.length;r++)if(t[r].parentNode===this.$el){n=t[r];break}if(n){var i={suffix:"append",prefix:"prepend"},o=i[e];this.$slots[o]?n.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},_=g,y=n(0),b=Object(y["a"])(_,r,i,!1,null,null,null);b.options.__file="packages/input/src/input.vue";var S=b.exports;S.install=function(e){e.component(S.name,S)};t["default"]=S},9:function(e,t){e.exports=n(1615)}})},6445:function(e,t,n){"use strict";t.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]=function(e){function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return 1===n.length&&"object"===r(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),e.replace(o,(function(t,r,o,a){var s=void 0;return"{"===e[a-1]&&"}"===e[a+t.length]?o:(s=(0,i.hasOwn)(n,o)?n[o]:null,null===s||void 0===s?"":s)}))}return t};var i=n(3104),o=/(%|)\{([0-9a-zA-Z_]+)\}/g},1802:function(e,t,n){"use strict";t.__esModule=!0,t.i18n=t.use=t.t=void 0;var r=n(1877),i=d(r),o=n(144),a=d(o),s=n(9996),c=d(s),u=n(6445),l=d(u);function d(e){return e&&e.__esModule?e:{default:e}}var h=(0,l.default)(a.default),p=i.default,f=!1,v=function(){var e=Object.getPrototypeOf(this||a.default).$t;if("function"===typeof e&&a.default.locale)return f||(f=!0,a.default.locale(a.default.config.lang,(0,c.default)(p,a.default.locale(a.default.config.lang)||{},{clone:!0}))),e.apply(this,arguments)},m=t.t=function(e,t){var n=v.apply(this,arguments);if(null!==n&&void 0!==n)return n;for(var r=e.split("."),i=p,o=0,a=r.length;o<a;o++){var s=r[o];if(n=i[s],o===a-1)return h(n,t);if(!n)return"";i=n}return""},g=t.use=function(e){p=e||p},_=t.i18n=function(e){v=e||v};t["default"]={use:g,t:m,i18n:_}},1877:function(e,t){"use strict";t.__esModule=!0,t["default"]={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},empty:{description:"暂无数据"}}}},6769:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=79)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},10:function(e,t){e.exports=n(7626)},13:function(e,t){e.exports=n(2680)},14:function(e,t){e.exports=n(6426)},2:function(e,t){e.exports=n(4594)},20:function(e,t){e.exports=n(1802)},23:function(e,t){e.exports=n(4823)},48:function(e,t){e.exports=n(4677)},6:function(e,t){e.exports=n(2084)},7:function(e,t){e.exports=n(144)},79:function(e,t,n){"use strict";n.r(t);var r=n(7),i=n.n(r),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{staticClass:"el-message-box",class:[e.customClass,e.center&&"el-message-box--center"]},[null!==e.title?n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[e.icon&&e.center?n("div",{class:["el-message-box__status",e.icon]}):e._e(),n("span",[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.handleAction(e.distinguishCancelAndClose?"close":"cancel")},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction(e.distinguishCancelAndClose?"close":"cancel")}}},[n("i",{staticClass:"el-message-box__close el-icon-close"})]):e._e()]):e._e(),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[e.icon&&!e.center&&""!==e.message?n("div",{class:["el-message-box__status",e.icon]}):e._e(),""!==e.message?n("div",{staticClass:"el-message-box__message"},[e._t("default",[e.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:e._s(e.message)}}):n("p",[e._v(e._s(e.message))])])],2):e._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[n("el-input",{ref:"input",attrs:{type:e.inputType,placeholder:e.inputPlaceholder},nativeOn:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputEnter(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),n("div",{staticClass:"el-message-box__errormsg",style:{visibility:e.editorErrorMessage?"visible":"hidden"}},[e._v(e._s(e.editorErrorMessage))])],1)]),n("div",{staticClass:"el-message-box__btns"},[e.showCancelButton?n("el-button",{class:[e.cancelButtonClasses],attrs:{loading:e.cancelButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("cancel")}},nativeOn:{click:function(t){e.handleAction("cancel")}}},[e._v("\n          "+e._s(e.cancelButtonText||e.t("el.messagebox.cancel"))+"\n        ")]):e._e(),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[e.confirmButtonClasses],attrs:{loading:e.confirmButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("confirm")}},nativeOn:{click:function(t){e.handleAction("confirm")}}},[e._v("\n          "+e._s(e.confirmButtonText||e.t("el.messagebox.confirm"))+"\n        ")])],1)])])])},a=[];o._withStripped=!0;var s=n(13),c=n.n(s),u=n(6),l=n.n(u),d=n(10),h=n.n(d),p=n(14),f=n.n(p),v=n(2),m=n(20),g=n(48),_=n.n(g),y=void 0,b={success:"success",info:"info",warning:"warning",error:"error"},S={mixins:[c.a,l.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:h.a,ElButton:f.a},computed:{icon:function(){var e=this.type,t=this.iconClass;return t||(e&&b[e]?"el-icon-"+b[e]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var e=this,t=this.uid;return function(){e.$nextTick((function(){t===e.uid&&e.doClose()}))}},doClose:function(){var e=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),y.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){e.action&&e.callback(e.action,e)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(e){("prompt"!==this.$type||"confirm"!==e||this.validate())&&(this.action=e,"function"===typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(e,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var e=this.inputPattern;if(e&&!e.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(m["t"])("el.messagebox.error"),Object(v["addClass"])(this.getInputElement(),"invalid"),!1;var t=this.inputValidator;if("function"===typeof t){var n=t(this.inputValue);if(!1===n)return this.editorErrorMessage=this.inputErrorMessage||Object(m["t"])("el.messagebox.error"),Object(v["addClass"])(this.getInputElement(),"invalid"),!1;if("string"===typeof n)return this.editorErrorMessage=n,Object(v["addClass"])(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(v["removeClass"])(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var e=this.$el.querySelector(".el-message-box__btns .el-button"),t=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return e||t},getInputElement:function(){var e=this.$refs.input.$refs;return e.input||e.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(n){"prompt"===t.$type&&null!==e&&t.validate()}))}},visible:function(e){var t=this;e&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){t.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,y=new _.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(e?setTimeout((function(){t.$refs.input&&t.$refs.input.$el&&t.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(v["removeClass"])(this.getInputElement(),"invalid")))}},mounted:function(){var e=this;this.$nextTick((function(){e.closeOnHashChange&&window.addEventListener("hashchange",e.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){y.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},k=S,w=n(0),T=Object(w["a"])(k,o,a,!1,null,null,null);T.options.__file="packages/message-box/src/main.vue";var E=T.exports,I=n(9),C=n.n(I),x=n(23),R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},O=i.a.extend(E),P=void 0,D=void 0,L=[],N=function(e){if(P){var t=P.callback;"function"===typeof t&&(D.showInput?t(D.inputValue,e):t(e)),P.resolve&&("confirm"===e?D.showInput?P.resolve({value:D.inputValue,action:e}):P.resolve(e):!P.reject||"cancel"!==e&&"close"!==e||P.reject(e))}},M=function(){D=new O({el:document.createElement("div")}),D.callback=N},U=function e(){if(D||M(),D.action="",(!D.visible||D.closeTimer)&&L.length>0){P=L.shift();var t=P.options;for(var n in t)t.hasOwnProperty(n)&&(D[n]=t[n]);void 0===t.callback&&(D.callback=N);var r=D.callback;D.callback=function(t,n){r(t,n),e()},Object(x["isVNode"])(D.message)?(D.$slots.default=[D.message],D.message=null):delete D.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(e){void 0===D[e]&&(D[e]=!0)})),document.body.appendChild(D.$el),i.a.nextTick((function(){D.visible=!0}))}},j=function e(t,n){if(!i.a.prototype.$isServer){if("string"===typeof t||Object(x["isVNode"])(t)?(t={message:t},"string"===typeof arguments[1]&&(t.title=arguments[1])):t.callback&&!n&&(n=t.callback),"undefined"!==typeof Promise)return new Promise((function(r,i){L.push({options:C()({},A,e.defaults,t),callback:n,resolve:r,reject:i}),U()}));L.push({options:C()({},A,e.defaults,t),callback:n}),U()}};j.setDefaults=function(e){j.defaults=e},j.alert=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":R(t))?(n=t,t=""):void 0===t&&(t=""),j(C()({title:t,message:e,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},n))},j.confirm=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":R(t))?(n=t,t=""):void 0===t&&(t=""),j(C()({title:t,message:e,$type:"confirm",showCancelButton:!0},n))},j.prompt=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":R(t))?(n=t,t=""):void 0===t&&(t=""),j(C()({title:t,message:e,showCancelButton:!0,showInput:!0,$type:"prompt"},n))},j.close=function(){D.doClose(),D.visible=!1,L=[],P=null};var V=j;t["default"]=V},9:function(e,t){e.exports=n(1615)}})},6473:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=81)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},13:function(e,t){e.exports=n(2680)},17:function(e,t){e.exports=n(5389)},23:function(e,t){e.exports=n(4823)},7:function(e,t){e.exports=n(144)},81:function(e,t,n){"use strict";n.r(t);var r=n(7),i=n.n(r),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-message",e.type&&!e.iconClass?"el-message--"+e.type:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:e.clearTimer,mouseleave:e.startTimer}},[e.iconClass?n("i",{class:e.iconClass}):n("i",{class:e.typeClass}),e._t("default",[e.dangerouslyUseHTMLString?n("p",{staticClass:"el-message__content",domProps:{innerHTML:e._s(e.message)}}):n("p",{staticClass:"el-message__content"},[e._v(e._s(e.message))])]),e.showClose?n("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:e.close}}):e._e()],2)])},a=[];o._withStripped=!0;var s={success:"success",info:"info",warning:"warning",error:"error"},c={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+s[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(e){e&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){27===e.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},u=c,l=n(0),d=Object(l["a"])(u,o,a,!1,null,null,null);d.options.__file="packages/message/src/main.vue";var h=d.exports,p=n(13),f=n(23),v=n(17),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=i.a.extend(h),_=void 0,y=[],b=1,S=function e(t){if(!i.a.prototype.$isServer){t=t||{},"string"===typeof t&&(t={message:t});var n=t.onClose,r="message_"+b++;t.onClose=function(){e.close(r,n)},_=new g({data:t}),_.id=r,Object(f["isVNode"])(_.message)&&(_.$slots.default=[_.message],_.message=null),_.$mount(),document.body.appendChild(_.$el);var o=t.offset||20;return y.forEach((function(e){o+=e.$el.offsetHeight+16})),_.verticalOffset=o,_.visible=!0,_.$el.style.zIndex=p["PopupManager"].nextZIndex(),y.push(_),_}};["success","warning","info","error"].forEach((function(e){S[e]=function(t){return Object(v["isObject"])(t)&&!Object(f["isVNode"])(t)?S(m({},t,{type:e})):S({type:e,message:t})}})),S.close=function(e,t){for(var n=y.length,r=-1,i=void 0,o=0;o<n;o++)if(e===y[o].id){i=y[o].$el.offsetHeight,r=o,"function"===typeof t&&t(y[o]),y.splice(o,1);break}if(!(n<=1||-1===r||r>y.length-1))for(var a=r;a<n-1;a++){var s=y[a].$el;s.style["top"]=parseInt(s.style["top"],10)-i-16+"px"}},S.closeAll=function(){for(var e=y.length-1;e>=0;e--)y[e].close()};var k=S;t["default"]=k}})},2477:function(e,t){"use strict";function n(e,t,r){this.$children.forEach((function(i){var o=i.$options.componentName;o===e?i.$emit.apply(i,[t].concat(r)):n.apply(i,[e,t].concat([r]))}))}t.__esModule=!0,t["default"]={methods:{dispatch:function(e,t,n){var r=this.$parent||this.$root,i=r.$options.componentName;while(r&&(!i||i!==e))r=r.$parent,r&&(i=r.$options.componentName);r&&r.$emit.apply(r,[t].concat(n))},broadcast:function(e,t,r){n.call(this,e,t,r)}}}},8618:function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){return{methods:{focus:function(){this.$refs[e].focus()}}}}},2084:function(e,t,n){"use strict";t.__esModule=!0;var r=n(1802);t["default"]={methods:{t:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.t.apply(this,t)}}}},4222:function(e,t,n){"use strict";t.__esModule=!0;n(3104);t["default"]={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},5614:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=54)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},3:function(e,t){e.exports=n(3104)},34:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)},i=[];r._withStripped=!0;var o=n(4),a=n.n(o),s=n(3),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={mixins:[a.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,r=n.remote,i=n.valueKey;if(!this.created&&!r){if(i&&"object"===("undefined"===typeof e?"undefined":c(e))&&"object"===("undefined"===typeof t?"undefined":c(t))&&e[i]===t[i])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(s["getValueByPath"])(e,n)===Object(s["getValueByPath"])(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(s["getValueByPath"])(e,n)===Object(s["getValueByPath"])(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(s["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple,r=n?t:[t],i=this.select.cachedOptions.indexOf(this),o=r.indexOf(this);i>-1&&o<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},l=u,d=n(0),h=Object(d["a"])(l,r,i,!1,null,null,null);h.options.__file="packages/select/src/option.vue";t["a"]=h.exports},4:function(e,t){e.exports=n(2477)},54:function(e,t,n){"use strict";n.r(t);var r=n(34);r["a"].install=function(e){e.component(r["a"].name,r["a"])},t["default"]=r["a"]}})},7122:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=133)}({133:function(e,t,n){"use strict";n.r(t);var r=n(16),i=n(39),o=n.n(i),a=n(3),s=n(2),c={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function u(e){var t=e.move,n=e.size,r=e.bar,i={},o="translate"+r.axis+"("+t+"%)";return i[r.size]=n,i.transform=o,i.msTransform=o,i.webkitTransform=o,i}var l={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return c[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,n=this.move,r=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+r.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:u({size:t,move:n,bar:r})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),n=this.$refs.thumb[this.bar.offset]/2,r=100*(t-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(s["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(s["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var n=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),r=this.$refs.thumb[this.bar.offset]-t,i=100*(n-r)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=i*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(s["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(s["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},d={name:"ElScrollbar",components:{Bar:l},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=o()(),n=this.wrapStyle;if(t){var r="-"+t+"px",i="margin-bottom: "+r+"; margin-right: "+r+";";Array.isArray(this.wrapStyle)?(n=Object(a["toObject"])(this.wrapStyle),n.marginRight=n.marginBottom=r):"string"===typeof this.wrapStyle?n+=i:n=i}var s=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),c=e("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[s]]),u=void 0;return u=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[s]])]:[c,e(l,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(l,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},u)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e=void 0,t=void 0,n=this.wrap;n&&(e=100*n.clientHeight/n.scrollHeight,t=100*n.clientWidth/n.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(r["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(r["removeResizeListener"])(this.$refs.resize,this.update)},install:function(e){e.component(d.name,d)}};t["default"]=d},16:function(e,t){e.exports=n(6567)},2:function(e,t){e.exports=n(4594)},3:function(e,t){e.exports=n(3104)},39:function(e,t){e.exports=n(1301)}})},7186:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=62)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},10:function(e,t){e.exports=n(7626)},12:function(e,t){e.exports=n(1080)},15:function(e,t){e.exports=n(7122)},16:function(e,t){e.exports=n(6567)},19:function(e,t){e.exports=n(2823)},21:function(e,t){e.exports=n(167)},22:function(e,t){e.exports=n(8618)},3:function(e,t){e.exports=n(3104)},32:function(e,t){e.exports=n(8275)},34:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)},i=[];r._withStripped=!0;var o=n(4),a=n.n(o),s=n(3),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={mixins:[a.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,r=n.remote,i=n.valueKey;if(!this.created&&!r){if(i&&"object"===("undefined"===typeof e?"undefined":c(e))&&"object"===("undefined"===typeof t?"undefined":c(t))&&e[i]===t[i])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(s["getValueByPath"])(e,n)===Object(s["getValueByPath"])(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(s["getValueByPath"])(e,n)===Object(s["getValueByPath"])(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(s["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple,r=n?t:[t],i=this.select.cachedOptions.indexOf(this),o=r.indexOf(this);i>-1&&o<0&&this.select.cachedOptions.splice(i,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},l=u,d=n(0),h=Object(d["a"])(l,r,i,!1,null,null,null);h.options.__file="packages/select/src/option.vue";t["a"]=h.exports},38:function(e,t){e.exports=n(7698)},4:function(e,t){e.exports=n(2477)},5:function(e,t){e.exports=n(499)},6:function(e,t){e.exports=n(2084)},62:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.handleNavigate("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.handleNavigate("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.debouncedOnInputChange,compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.handleNavigate("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.handleNavigate("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)},i=[];r._withStripped=!0;var o=n(4),a=n.n(o),s=n(22),c=n.n(s),u=n(6),l=n.n(u),d=n(10),h=n.n(d),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":e.$parent.multiple},e.popperClass],style:{minWidth:e.minWidth}},[e._t("default")],2)},f=[];p._withStripped=!0;var v=n(5),m=n.n(v),g={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[m.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},_=g,y=n(0),b=Object(y["a"])(_,p,f,!1,null,null,null);b.options.__file="packages/select/src/select-dropdown.vue";var S=b.exports,k=n(34),w=n(38),T=n.n(w),E=n(15),I=n.n(E),C=n(19),x=n.n(C),R=n(12),A=n.n(R),O=n(16),P=n(32),D=n.n(P),L=n(3),N={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"===typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}},M=n(21),U={mixins:[a.a,l.a,c()("reference"),N],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(L["isIE"])()&&!Object(L["isEdge"])()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.selectDisabled&&this.inputHovering&&e;return t},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:h.a,ElSelectMenu:S,ElOption:k["a"],ElTag:T.a,ElScrollbar:I.a},directives:{Clickoutside:A.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(L["valueEquals"])(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleNavigate:function(e){this.isOnComposition||this.navigateOptions(e)},handleComposition:function(e){var t=this,n=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(n)}));else{var r=n[n.length-1]||"";this.isOnComposition=!Object(M["isKorean"])(r)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"===typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");D()(n,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(L["valueEquals"])(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,n="[object object]"===Object.prototype.toString.call(e).toLowerCase(),r="[object null]"===Object.prototype.toString.call(e).toLowerCase(),i="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var a=this.cachedOptions[o],s=n?Object(L["getValueByPath"])(a.value,this.valueKey)===Object(L["getValueByPath"])(e,this.valueKey):a.value===e;if(s){t=a;break}}if(t)return t;var c=n||r||i?"":String(e),u={value:e,currentLabel:c};return this.multiple&&(u.hitState=!1),u},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach((function(t){n.push(e.getOption(t))})),this.selected=n,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.filterable&&!this.visible&&(this.menuVisibleOnFocus=!0),this.visible=!0),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,n=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],r=e.$refs.tags,i=r?Math.round(r.getBoundingClientRect().height):0,o=e.initialInputHeight||40;n.style.height=0===e.selected.length?o+"px":Math.max(r?i+(i>o?6:0):0,o)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var n=this;if(this.multiple){var r=(this.value||[]).slice(),i=this.getValueIndex(r,e.value);i>-1?r.splice(i,1):(this.multipleLimit<=0||r.length<this.multipleLimit)&&r.push(e.value),this.$emit("input",r),this.emitChange(r),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){n.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(n){var r=this.valueKey,i=-1;return e.some((function(e,n){return Object(L["getValueByPath"])(e,r)===Object(L["getValueByPath"])(t,r)&&(i=n,!0)})),i}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var n=this.selected.indexOf(t);if(n>-1&&!this.selectDisabled){var r=this.value.slice();r.splice(n,1),this.$emit("input",r),this.emitChange(r),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var n=0;n!==this.options.length;++n){var r=this.options[n];if(this.query){if(!r.disabled&&!r.groupDisabled&&r.visible){this.hoverIndex=n;break}}else if(r.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(L["getValueByPath"])(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=x()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=x()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(O["addResizeListener"])(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var n={medium:36,small:32,mini:28},r=t.$el.querySelector("input");this.initialInputHeight=r.getBoundingClientRect().height||n[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(O["removeResizeListener"])(this.$el,this.handleResize)}},j=U,V=Object(y["a"])(j,r,i,!1,null,null,null);V.options.__file="packages/select/src/select.vue";var F=V.exports;F.install=function(e){e.component(F.name,F)};t["default"]=F}})},7698:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=132)}({0:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},132:function(e,t,n){"use strict";n.r(t);var r,i,o={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,n=this.tagSize,r=this.hit,i=this.effect,o=["el-tag",t?"el-tag--"+t:"",n?"el-tag--"+n:"",i?"el-tag--"+i:"",r&&"is-hit"],a=e("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?a:e("transition",{attrs:{name:"el-zoom-in-center"}},[a])}},a=o,s=n(0),c=Object(s["a"])(a,r,i,!1,null,null,null);c.options.__file="packages/tag/src/tag.vue";var u=c.exports;u.install=function(e){e.component(u.name,u)};t["default"]=u}})},4561:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=138)}({138:function(e,t,n){"use strict";n.r(t);var r=n(5),i=n.n(r),o=n(19),a=n.n(o),s=n(2),c=n(3),u=n(7),l=n.n(u),d={name:"ElTooltip",mixins:[i.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(c["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new l.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=a()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var r=n.data=n.data||{};return r.staticClass=this.addTooltipClass(r.staticClass),n},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(s["on"])(this.referenceElm,"mouseenter",this.show),Object(s["on"])(this.referenceElm,"mouseleave",this.hide),Object(s["on"])(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(s["on"])(this.referenceElm,"blur",this.handleBlur),Object(s["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(s["addClass"])(this.referenceElm,"focusing"):Object(s["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,n=0;n<e.length;n++)if(e[n]&&e[n].tag){t=e[n];break}return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(s["off"])(e,"mouseenter",this.show),Object(s["off"])(e,"mouseleave",this.hide),Object(s["off"])(e,"focus",this.handleFocus),Object(s["off"])(e,"blur",this.handleBlur),Object(s["off"])(e,"click",this.removeFocusing))},install:function(e){e.component(d.name,d)}};t["default"]=d},19:function(e,t){e.exports=n(2823)},2:function(e,t){e.exports=n(4594)},3:function(e,t){e.exports=n(3104)},5:function(e,t){e.exports=n(499)},7:function(e,t){e.exports=n(144)}})},2743:function(e,t,n){"use strict";t.__esModule=!0;var r=n(4594);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){i(this,e)}return e.prototype.beforeEnter=function(e){(0,r.addClass)(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},e.prototype.enter=function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},e.prototype.afterEnter=function(e){(0,r.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},e.prototype.beforeLeave=function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},e.prototype.leave=function(e){0!==e.scrollHeight&&((0,r.addClass)(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},e.prototype.afterLeave=function(e){(0,r.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},e}();t["default"]={name:"ElCollapseTransition",functional:!0,render:function(e,t){var n=t.children,r={on:new o};return e("transition",r,n)}}},4677:function(e,t,n){"use strict";t.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(6583),o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var s,c=c||{};c.Dialog=function(e,t,n){var i=this;if(this.dialogNode=e,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"===typeof t?this.focusAfterClosed=document.getElementById(t):"object"===("undefined"===typeof t?"undefined":r(t))?this.focusAfterClosed=t:this.focusAfterClosed=null,"string"===typeof n?this.focusFirst=document.getElementById(n):"object"===("undefined"===typeof n?"undefined":r(n))?this.focusFirst=n:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():o.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,s=function(e){i.trapFocus(e)},this.addListeners()},c.Dialog.prototype.addListeners=function(){document.addEventListener("focus",s,!0)},c.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",s,!0)},c.Dialog.prototype.closeDialog=function(){var e=this;this.removeListeners(),this.focusAfterClosed&&setTimeout((function(){e.focusAfterClosed.focus()}))},c.Dialog.prototype.trapFocus=function(e){o.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(e.target)?this.lastFocus=e.target:(o.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&o.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},t["default"]=c.Dialog},6583:function(e,t){"use strict";t.__esModule=!0;var n=n||{};n.Utils=n.Utils||{},n.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];if(n.Utils.attemptFocus(r)||n.Utils.focusFirstDescendant(r))return!0}return!1},n.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var r=e.childNodes[t];if(n.Utils.attemptFocus(r)||n.Utils.focusLastDescendant(r))return!0}return!1},n.Utils.attemptFocus=function(e){if(!n.Utils.isFocusable(e))return!1;n.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(t){}return n.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},n.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},n.Utils.triggerEvent=function(e,t){var n=void 0;n=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var r=document.createEvent(n),i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return r.initEvent.apply(r,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r),e},n.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},t["default"]=n.Utils},1080:function(e,t,n){"use strict";t.__esModule=!0;var r=n(144),i=a(r),o=n(4594);function a(e){return e&&e.__esModule?e:{default:e}}var s=[],c="@@clickoutsideContext",u=void 0,l=0;function d(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&r.target&&i.target)||e.contains(r.target)||e.contains(i.target)||e===r.target||n.context.popperElm&&(n.context.popperElm.contains(r.target)||n.context.popperElm.contains(i.target))||(t.expression&&e[c].methodName&&n.context[e[c].methodName]?n.context[e[c].methodName]():e[c].bindingFn&&e[c].bindingFn())}}!i.default.prototype.$isServer&&(0,o.on)(document,"mousedown",(function(e){return u=e})),!i.default.prototype.$isServer&&(0,o.on)(document,"mouseup",(function(e){s.forEach((function(t){return t[c].documentHandler(e,u)}))})),t["default"]={bind:function(e,t,n){s.push(e);var r=l++;e[c]={id:r,documentHandler:d(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[c].documentHandler=d(e,t,n),e[c].methodName=t.expression,e[c].bindingFn=t.value},unbind:function(e){for(var t=s.length,n=0;n<t;n++)if(s[n][c].id===e[c].id){s.splice(n,1);break}delete e[c]}}},4594:function(e,t,n){"use strict";t.__esModule=!0,t.isInContainer=t.getScrollContainer=t.isScroll=t.getStyle=t.once=t.off=t.on=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hasClass=v,t.addClass=m,t.removeClass=g,t.setStyle=y;var i=n(144),o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var s=o.default.prototype.$isServer,c=/([\:\-\_]+(.))/g,u=/^moz([A-Z])/,l=s?0:Number(document.documentMode),d=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},h=function(e){return e.replace(c,(function(e,t,n,r){return r?n.toUpperCase():n})).replace(u,"Moz$1")},p=t.on=function(){return!s&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)}}(),f=t.off=function(){return!s&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)}}();t.once=function(e,t,n){var r=function r(){n&&n.apply(this,arguments),f(e,t,r)};p(e,t,r)};function v(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function m(e,t){if(e){for(var n=e.className,r=(t||"").split(" "),i=0,o=r.length;i<o;i++){var a=r[i];a&&(e.classList?e.classList.add(a):v(e,a)||(n+=" "+a))}e.classList||e.setAttribute("class",n)}}function g(e,t){if(e&&t){for(var n=t.split(" "),r=" "+e.className+" ",i=0,o=n.length;i<o;i++){var a=n[i];a&&(e.classList?e.classList.remove(a):v(e,a)&&(r=r.replace(" "+a+" "," ")))}e.classList||e.setAttribute("class",d(r))}}var _=t.getStyle=l<9?function(e,t){if(!s){if(!e||!t)return null;t=h(t),"float"===t&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(n){return 1}default:return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(n){return e.style[t]}}}:function(e,t){if(!s){if(!e||!t)return null;t=h(t),"float"===t&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(r){return e.style[t]}}};function y(e,t,n){if(e&&t)if("object"===("undefined"===typeof t?"undefined":r(t)))for(var i in t)t.hasOwnProperty(i)&&y(e,i,t[i]);else t=h(t),"opacity"===t&&l<9?e.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":e.style[t]=n}var b=t.isScroll=function(e,t){if(!s){var n=null!==t&&void 0!==t,r=_(e,n?t?"overflow-y":"overflow-x":"overflow");return r.match(/(scroll|auto|overlay)/)}};t.getScrollContainer=function(e,t){if(!s){var n=e;while(n){if([window,document,document.documentElement].includes(n))return window;if(b(n,t))return n;n=n.parentNode}return n}},t.isInContainer=function(e,t){if(s||!e||!t)return!1;var n=e.getBoundingClientRect(),r=void 0;return r=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right}},1615:function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t]||{};for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];void 0!==o&&(e[i]=o)}}return e}},8335:function(e,t,n){"use strict";var r,i;"function"===typeof Symbol&&Symbol.iterator;(function(o,a){r=a,i="function"===typeof r?r.call(t,n,t,e):r,void 0===i||(e.exports=i)})(0,(function(){var e=window,t={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function n(e,n,r){this._reference=e.jquery?e[0]:e,this.state={};var i="undefined"===typeof n||null===n,o=n&&"[object Object]"===Object.prototype.toString.call(n);return this._popper=i||o?this.parse(o?n:{}):n.jquery?n[0]:n,this._options=Object.assign({},t,r),this._options.modifiers=this._options.modifiers.map(function(e){if(-1===this._options.modifiersIgnored.indexOf(e))return"applyStyle"===e&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[e]||e}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),d(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function r(t){var n=t.style.display,r=t.style.visibility;t.style.display="block",t.style.visibility="hidden";t.offsetWidth;var i=e.getComputedStyle(t),o=parseFloat(i.marginTop)+parseFloat(i.marginBottom),a=parseFloat(i.marginLeft)+parseFloat(i.marginRight),s={width:t.offsetWidth+a,height:t.offsetHeight+o};return t.style.display=n,t.style.visibility=r,s}function i(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function o(e){var t=Object.assign({},e);return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function a(e,t){var n,r=0;for(n in e){if(e[n]===t)return r;r++}return null}function s(t,n){var r=e.getComputedStyle(t,null);return r[n]}function c(t){var n=t.offsetParent;return n!==e.document.body&&n?n:e.document.documentElement}function u(t){var n=t.parentNode;return n?n===e.document?e.document.body.scrollTop||e.document.body.scrollLeft?e.document.body:e.document.documentElement:-1!==["scroll","auto"].indexOf(s(n,"overflow"))||-1!==["scroll","auto"].indexOf(s(n,"overflow-x"))||-1!==["scroll","auto"].indexOf(s(n,"overflow-y"))?n:u(t.parentNode):t}function l(t){return t!==e.document.body&&("fixed"===s(t,"position")||(t.parentNode?l(t.parentNode):t))}function d(e,t){function n(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}Object.keys(t).forEach((function(r){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&n(t[r])&&(i="px"),e.style[r]=t[r]+i}))}function h(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function p(e){var t={width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop};return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function f(e){var t=e.getBoundingClientRect(),n=-1!=navigator.userAgent.indexOf("MSIE"),r=n&&"HTML"===e.tagName?-e.scrollTop:t.top;return{left:t.left,top:r,right:t.right,bottom:t.bottom,width:t.right-t.left,height:t.bottom-r}}function v(e,t,n){var r=f(e),i=f(t);if(n){var o=u(t);i.top+=o.scrollTop,i.bottom+=o.scrollTop,i.left+=o.scrollLeft,i.right+=o.scrollLeft}var a={top:r.top-i.top,left:r.left-i.left,bottom:r.top-i.top+r.height,right:r.left-i.left+r.width,width:r.width,height:r.height};return a}function m(t){for(var n=["","ms","webkit","moz","o"],r=0;r<n.length;r++){var i=n[r]?n[r]+t.charAt(0).toUpperCase()+t.slice(1):t;if("undefined"!==typeof e.document.body.style[i])return i}return null}return n.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[m("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},n.prototype.update=function(){var e={instance:this,styles:{}};e.placement=this._options.placement,e._originalPlacement=this._options.placement,e.offsets=this._getOffsets(this._popper,this._reference,e.placement),e.boundaries=this._getBoundaries(e,this._options.boundariesPadding,this._options.boundariesElement),e=this.runModifiers(e,this._options.modifiers),"function"===typeof this.state.updateCallback&&this.state.updateCallback(e)},n.prototype.onCreate=function(e){return e(this),this},n.prototype.onUpdate=function(e){return this.state.updateCallback=e,this},n.prototype.parse=function(t){var n={tagName:"div",classNames:["popper"],attributes:[],parent:e.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};t=Object.assign({},n,t);var r=e.document,i=r.createElement(t.tagName);if(s(i,t.classNames),c(i,t.attributes),"node"===t.contentType?i.appendChild(t.content.jquery?t.content[0]:t.content):"html"===t.contentType?i.innerHTML=t.content:i.textContent=t.content,t.arrowTagName){var o=r.createElement(t.arrowTagName);s(o,t.arrowClassNames),c(o,t.arrowAttributes),i.appendChild(o)}var a=t.parent.jquery?t.parent[0]:t.parent;if("string"===typeof a){if(a=r.querySelectorAll(t.parent),a.length>1&&console.warn("WARNING: the given `parent` query("+t.parent+") matched more than one element, the first one will be used"),0===a.length)throw"ERROR: the given `parent` doesn't exists!";a=a[0]}return a.length>1&&a instanceof Element===!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),a=a[0]),a.appendChild(i),i;function s(e,t){t.forEach((function(t){e.classList.add(t)}))}function c(e,t){t.forEach((function(t){e.setAttribute(t.split(":")[0],t.split(":")[1]||"")}))}},n.prototype._getPosition=function(e,t){var n=c(t);if(this._options.forceAbsolute)return"absolute";var r=l(t,n);return r?"fixed":"absolute"},n.prototype._getOffsets=function(e,t,n){n=n.split("-")[0];var i={};i.position=this.state.position;var o="fixed"===i.position,a=v(t,c(e),o),s=r(e);return-1!==["right","left"].indexOf(n)?(i.top=a.top+a.height/2-s.height/2,i.left="left"===n?a.left-s.width:a.right):(i.left=a.left+a.width/2-s.width/2,i.top="top"===n?a.top-s.height:a.bottom),i.width=s.width,i.height=s.height,{popper:i,reference:a}},n.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),e.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var t=u(this._reference);t!==e.document.body&&t!==e.document.documentElement||(t=e),t.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=t}},n.prototype._removeEventListeners=function(){e.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},n.prototype._getBoundaries=function(t,n,r){var i,o,a={};if("window"===r){var s=e.document.body,l=e.document.documentElement;o=Math.max(s.scrollHeight,s.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight),i=Math.max(s.scrollWidth,s.offsetWidth,l.clientWidth,l.scrollWidth,l.offsetWidth),a={top:0,right:i,bottom:o,left:0}}else if("viewport"===r){var d=c(this._popper),h=u(this._popper),f=p(d),v=function(e){return e==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):e.scrollTop},m=function(e){return e==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):e.scrollLeft},g="fixed"===t.offsets.popper.position?0:v(h),_="fixed"===t.offsets.popper.position?0:m(h);a={top:0-(f.top-g),right:e.document.documentElement.clientWidth-(f.left-_),bottom:e.document.documentElement.clientHeight-(f.top-g),left:0-(f.left-_)}}else a=c(this._popper)===r?{top:0,left:0,right:r.clientWidth,bottom:r.clientHeight}:p(r);return a.left+=n,a.right-=n,a.top=a.top+n,a.bottom=a.bottom-n,a},n.prototype.runModifiers=function(e,t,n){var r=t.slice();return void 0!==n&&(r=this._options.modifiers.slice(0,a(this._options.modifiers,n))),r.forEach(function(t){h(t)&&(e=t.call(this,e))}.bind(this)),e},n.prototype.isModifierRequired=function(e,t){var n=a(this._options.modifiers,e);return!!this._options.modifiers.slice(0,n).filter((function(e){return e===t})).length},n.prototype.modifiers={},n.prototype.modifiers.applyStyle=function(e){var t,n={position:e.offsets.popper.position},r=Math.round(e.offsets.popper.left),i=Math.round(e.offsets.popper.top);return this._options.gpuAcceleration&&(t=m("transform"))?(n[t]="translate3d("+r+"px, "+i+"px, 0)",n.top=0,n.left=0):(n.left=r,n.top=i),Object.assign(n,e.styles),d(this._popper,n),this._popper.setAttribute("x-placement",e.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&e.offsets.arrow&&d(e.arrowElement,e.offsets.arrow),e},n.prototype.modifiers.shift=function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets.reference,a=o(e.offsets.popper),s={y:{start:{top:i.top},end:{top:i.top+i.height-a.height}},x:{start:{left:i.left},end:{left:i.left+i.width-a.width}}},c=-1!==["bottom","top"].indexOf(n)?"x":"y";e.offsets.popper=Object.assign(a,s[c][r])}return e},n.prototype.modifiers.preventOverflow=function(e){var t=this._options.preventOverflowOrder,n=o(e.offsets.popper),r={left:function(){var t=n.left;return n.left<e.boundaries.left&&(t=Math.max(n.left,e.boundaries.left)),{left:t}},right:function(){var t=n.left;return n.right>e.boundaries.right&&(t=Math.min(n.left,e.boundaries.right-n.width)),{left:t}},top:function(){var t=n.top;return n.top<e.boundaries.top&&(t=Math.max(n.top,e.boundaries.top)),{top:t}},bottom:function(){var t=n.top;return n.bottom>e.boundaries.bottom&&(t=Math.min(n.top,e.boundaries.bottom-n.height)),{top:t}}};return t.forEach((function(t){e.offsets.popper=Object.assign(n,r[t]())})),e},n.prototype.modifiers.keepTogether=function(e){var t=o(e.offsets.popper),n=e.offsets.reference,r=Math.floor;return t.right<r(n.left)&&(e.offsets.popper.left=r(n.left)-t.width),t.left>r(n.right)&&(e.offsets.popper.left=r(n.right)),t.bottom<r(n.top)&&(e.offsets.popper.top=r(n.top)-t.height),t.top>r(n.bottom)&&(e.offsets.popper.top=r(n.bottom)),e},n.prototype.modifiers.flip=function(e){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),e;if(e.flipped&&e.placement===e._originalPlacement)return e;var t=e.placement.split("-")[0],n=i(t),r=e.placement.split("-")[1]||"",a=[];return a="flip"===this._options.flipBehavior?[t,n]:this._options.flipBehavior,a.forEach(function(s,c){if(t===s&&a.length!==c+1){t=e.placement.split("-")[0],n=i(t);var u=o(e.offsets.popper),l=-1!==["right","bottom"].indexOf(t);(l&&Math.floor(e.offsets.reference[t])>Math.floor(u[n])||!l&&Math.floor(e.offsets.reference[t])<Math.floor(u[n]))&&(e.flipped=!0,e.placement=a[c+1],r&&(e.placement+="-"+r),e.offsets.popper=this._getOffsets(this._popper,this._reference,e.placement).popper,e=this.runModifiers(e,this._options.modifiers,this._flip))}}.bind(this)),e},n.prototype.modifiers.offset=function(e){var t=this._options.offset,n=e.offsets.popper;return-1!==e.placement.indexOf("left")?n.top-=t:-1!==e.placement.indexOf("right")?n.top+=t:-1!==e.placement.indexOf("top")?n.left-=t:-1!==e.placement.indexOf("bottom")&&(n.left+=t),e},n.prototype.modifiers.arrow=function(e){var t=this._options.arrowElement,n=this._options.arrowOffset;if("string"===typeof t&&(t=this._popper.querySelector(t)),!t)return e;if(!this._popper.contains(t))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),e;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),e;var i={},a=e.placement.split("-")[0],s=o(e.offsets.popper),c=e.offsets.reference,u=-1!==["left","right"].indexOf(a),l=u?"height":"width",d=u?"top":"left",h=u?"left":"top",p=u?"bottom":"right",f=r(t)[l];c[p]-f<s[d]&&(e.offsets.popper[d]-=s[d]-(c[p]-f)),c[d]+f>s[p]&&(e.offsets.popper[d]+=c[d]+f-s[p]);var v=c[d]+(n||c[l]/2-f/2),m=v-s[d];return m=Math.max(Math.min(s[l]-f-8,m),8),i[d]=m,i[h]="",e.offsets.arrow=i,e.arrowElement=t,e},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var i=Object.keys(r),o=0,a=i.length;o<a;o++){var s=i[o],c=Object.getOwnPropertyDescriptor(r,s);void 0!==c&&c.enumerable&&(t[s]=r[s])}}}return t}}),n}))},2680:function(e,t,n){"use strict";t.__esModule=!0,t.PopupManager=void 0;var r=n(144),i=h(r),o=n(1615),a=h(o),s=n(7562),c=h(s),u=n(1301),l=h(u),d=n(4594);function h(e){return e&&e.__esModule?e:{default:e}}var p=1,f=void 0;t["default"]={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+p++,c.default.register(this._popupId,this)},beforeDestroy:function(){c.default.deregister(this._popupId),c.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(e){var t=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,i.default.nextTick((function(){t.open()})))}else this.close()}},methods:{open:function(e){var t=this;this.rendered||(this.rendered=!0);var n=(0,a.default)({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var r=Number(n.openDelay);r>0?this._openTimer=setTimeout((function(){t._openTimer=null,t.doOpen(n)}),r):this.doOpen(n)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var t=this.$el,n=e.modal,r=e.zIndex;if(r&&(c.default.zIndex=r),n&&(this._closing&&(c.default.closeModal(this._popupId),this._closing=!1),c.default.openModal(this._popupId,c.default.nextZIndex(),this.modalAppendToBody?void 0:t,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!(0,d.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,d.getStyle)(document.body,"paddingRight"),10)),f=(0,l.default)();var i=document.documentElement.clientHeight<document.body.scrollHeight,o=(0,d.getStyle)(document.body,"overflowY");f>0&&(i||"scroll"===o)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+f+"px"),(0,d.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=c.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var t=Number(this.closeDelay);t>0?this._closeTimer=setTimeout((function(){e._closeTimer=null,e.doClose()}),t):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){c.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,d.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},t.PopupManager=c.default},7562:function(e,t,n){"use strict";t.__esModule=!0;var r=n(144),i=a(r),o=n(4594);function a(e){return e&&e.__esModule?e:{default:e}}var s=!1,c=!1,u=void 0,l=function(){if(!i.default.prototype.$isServer){var e=h.modalDom;return e?s=!0:(s=!1,e=document.createElement("div"),h.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){h.doOnModalClick&&h.doOnModalClick()}))),e}},d={},h={modalFade:!0,getInstance:function(e){return d[e]},register:function(e,t){e&&t&&(d[e]=t)},deregister:function(e){e&&(d[e]=null,delete d[e])},nextZIndex:function(){return h.zIndex++},modalStack:[],doOnModalClick:function(){var e=h.modalStack[h.modalStack.length-1];if(e){var t=h.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,n,r,a){if(!i.default.prototype.$isServer&&e&&void 0!==t){this.modalFade=a;for(var c=this.modalStack,u=0,d=c.length;u<d;u++){var h=c[u];if(h.id===e)return}var p=l();if((0,o.addClass)(p,"v-modal"),this.modalFade&&!s&&(0,o.addClass)(p,"v-modal-enter"),r){var f=r.trim().split(/\s+/);f.forEach((function(e){return(0,o.addClass)(p,e)}))}setTimeout((function(){(0,o.removeClass)(p,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(p):document.body.appendChild(p),t&&(p.style.zIndex=t),p.tabIndex=0,p.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:r})}},closeModal:function(e){var t=this.modalStack,n=l();if(t.length>0){var r=t[t.length-1];if(r.id===e){if(r.modalClass){var i=r.modalClass.trim().split(/\s+/);i.forEach((function(e){return(0,o.removeClass)(n,e)}))}t.pop(),t.length>0&&(n.style.zIndex=t[t.length-1].zIndex)}else for(var a=t.length-1;a>=0;a--)if(t[a].id===e){t.splice(a,1);break}}0===t.length&&(this.modalFade&&(0,o.addClass)(n,"v-modal-leave"),setTimeout((function(){0===t.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",h.modalDom=void 0),(0,o.removeClass)(n,"v-modal-leave")}),200))}};Object.defineProperty(h,"zIndex",{configurable:!0,get:function(){return c||(u=u||(i.default.prototype.$ELEMENT||{}).zIndex||2e3,c=!0),u},set:function(e){u=e}});var p=function(){if(!i.default.prototype.$isServer&&h.modalStack.length>0){var e=h.modalStack[h.modalStack.length-1];if(!e)return;var t=h.getInstance(e.id);return t}};i.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=p();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}})),t["default"]=h},6567:function(e,t,n){"use strict";t.__esModule=!0,t.removeResizeListener=t.addResizeListener=void 0;var r=n(1033),i=a(r),o=n(4592);function a(e){return e&&e.__esModule?e:{default:e}}var s="undefined"===typeof window,c=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if(r=t.next(),r.done)break;i=r.value}var o=i,a=o.target.__resizeListeners__||[];a.length&&a.forEach((function(e){e()}))}};t.addResizeListener=function(e,t){s||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new i.default((0,o.debounce)(16,c)),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},t.removeResizeListener=function(e,t){e&&e.__resizeListeners__&&(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||e.__ro__.disconnect())}},8275:function(e,t,n){"use strict";t.__esModule=!0,t["default"]=a;var r=n(144),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!i.default.prototype.$isServer)if(t){var n=[],r=t.offsetParent;while(r&&e!==r&&e.contains(r))n.push(r),r=r.offsetParent;var o=t.offsetTop+n.reduce((function(e,t){return e+t.offsetTop}),0),a=o+t.offsetHeight,s=e.scrollTop,c=s+e.clientHeight;o<s?e.scrollTop=o:a>c&&(e.scrollTop=a-e.clientHeight)}else e.scrollTop=0}},1301:function(e,t,n){"use strict";t.__esModule=!0,t["default"]=function(){if(i.default.prototype.$isServer)return 0;if(void 0!==a)return a;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),a=t-r,a};var r=n(144),i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var a=void 0},167:function(e,t){"use strict";function n(e){return void 0!==e&&null!==e}function r(e){var t=/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi;return t.test(e)}t.__esModule=!0,t.isDef=n,t.isKorean=r},5389:function(e,t,n){"use strict";t.__esModule=!0,t.isDefined=t.isUndefined=t.isFunction=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isString=s,t.isObject=c,t.isHtmlElement=u;var i=n(144),o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return e&&e.nodeType===Node.ELEMENT_NODE}var l=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)};"object"===("undefined"===typeof Int8Array?"undefined":r(Int8Array))||!o.default.prototype.$isServer&&"function"===typeof document.childNodes||(t.isFunction=l=function(e){return"function"===typeof e||!1}),t.isFunction=l;t.isUndefined=function(e){return void 0===e},t.isDefined=function(e){return void 0!==e&&null!==e}},3104:function(e,t,n){"use strict";t.__esModule=!0,t.isEmpty=t.isEqual=t.arrayEquals=t.looseEqual=t.capitalize=t.kebabCase=t.autoprefixer=t.isFirefox=t.isEdge=t.isIE=t.coerceTruthyValueToArray=t.arrayFind=t.arrayFindIndex=t.escapeRegexpString=t.valueEquals=t.generateId=t.getValueByPath=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.noop=u,t.hasOwn=l,t.toObject=h,t.getPropByPath=p,t.rafThrottle=_,t.objToArray=y;var i=n(144),o=s(i),a=n(5389);function s(e){return e&&e.__esModule?e:{default:e}}var c=Object.prototype.hasOwnProperty;function u(){}function l(e,t){return c.call(e,t)}function d(e,t){for(var n in t)e[n]=t[n];return e}function h(e){for(var t={},n=0;n<e.length;n++)e[n]&&d(t,e[n]);return t}t.getValueByPath=function(e,t){t=t||"";for(var n=t.split("."),r=e,i=null,o=0,a=n.length;o<a;o++){var s=n[o];if(!r)break;if(o===a-1){i=r[s];break}r=r[s]}return i};function p(e,t,n){var r=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var i=t.split("."),o=0,a=i.length;o<a-1;++o){if(!r&&!n)break;var s=i[o];if(!(s in r)){if(n)throw new Error("please transfer a valid prop path to form item!");break}r=r[s]}return{o:r,k:i[o],v:r?r[i[o]]:null}}t.generateId=function(){return Math.floor(1e4*Math.random())},t.valueEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Array))return!1;if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0},t.escapeRegexpString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var f=t.arrayFindIndex=function(e,t){for(var n=0;n!==e.length;++n)if(t(e[n]))return n;return-1},v=(t.arrayFind=function(e,t){var n=f(e,t);return-1!==n?e[n]:void 0},t.coerceTruthyValueToArray=function(e){return Array.isArray(e)?e:e?[e]:[]},t.isIE=function(){return!o.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},t.isEdge=function(){return!o.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},t.isFirefox=function(){return!o.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},t.autoprefixer=function(e){if("object"!==("undefined"===typeof e?"undefined":r(e)))return e;var t=["transform","transition","animation"],n=["ms-","webkit-"];return t.forEach((function(t){var r=e[t];t&&r&&n.forEach((function(n){e[n+t]=r}))})),e},t.kebabCase=function(e){var t=/([^-])([A-Z])/g;return e.replace(t,"$1-$2").replace(t,"$1-$2").toLowerCase()},t.capitalize=function(e){return(0,a.isString)(e)?e.charAt(0).toUpperCase()+e.slice(1):e},t.looseEqual=function(e,t){var n=(0,a.isObject)(e),r=(0,a.isObject)(t);return n&&r?JSON.stringify(e)===JSON.stringify(t):!n&&!r&&String(e)===String(t)}),m=t.arrayEquals=function(e,t){if(e=e||[],t=t||[],e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!v(e[n],t[n]))return!1;return!0},g=(t.isEqual=function(e,t){return Array.isArray(e)&&Array.isArray(t)?m(e,t):v(e,t)},t.isEmpty=function(e){if(null==e)return!0;if("boolean"===typeof e)return!1;if("number"===typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1});function _(e){var t=!1;return function(){for(var n=this,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(r){e.apply(n,i),t=!1})))}}function y(e){return Array.isArray(e)?e:g(e)?[]:[e]}},4823:function(e,t,n){"use strict";t.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isVNode=o;var i=n(3104);function o(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":r(e))&&(0,i.hasOwn)(e,"componentOptions")}},499:function(e,t,n){"use strict";t.__esModule=!0;var r=n(144),i=a(r),o=n(2680);function a(e){return e&&e.__esModule?e:{default:e}}var s=i.default.prototype.$isServer?function(){}:n(8335),c=function(e){return e.stopPropagation()};t["default"]={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(e){this.showPopper=e,this.$emit("input",e)}},showPopper:function(e){this.disabled||(e?this.updatePopper():this.destroyPopper(),this.$emit("input",e))}},methods:{createPopper:function(){var e=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var t=this.popperOptions,n=this.popperElm=this.popperElm||this.popper||this.$refs.popper,r=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!r&&this.$slots.reference&&this.$slots.reference[0]&&(r=this.referenceElm=this.$slots.reference[0].elm),n&&r&&(this.visibleArrow&&this.appendArrow(n),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),t.placement=this.currentPlacement,t.offset=this.offset,t.arrowOffset=this.arrowOffset,this.popperJS=new s(r,n,t),this.popperJS.onCreate((function(t){e.$emit("created",e),e.resetTransformOrigin(),e.$nextTick(e.updatePopper)})),"function"===typeof t.onUpdate&&this.popperJS.onUpdate(t.onUpdate),this.popperJS._popper.style.zIndex=o.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",c))}},updatePopper:function(){var e=this.popperJS;e?(e.update(),e._popper&&(e._popper.style.zIndex=o.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(e){!this.popperJS||this.showPopper&&!e||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var e={top:"bottom",bottom:"top",left:"right",right:"left"},t=this.popperJS._popper.getAttribute("x-placement").split("-")[0],n=e[t];this.popperJS._popper.style.transformOrigin="string"===typeof this.transformOrigin?this.transformOrigin:["top","bottom"].indexOf(t)>-1?"center "+n:n+" center"}},appendArrow:function(e){var t=void 0;if(!this.appended){for(var n in this.appended=!0,e.attributes)if(/^_v-/.test(e.attributes[n].name)){t=e.attributes[n].name;break}var r=document.createElement("div");t&&r.setAttribute(t,""),r.setAttribute("x-arrow",""),r.className="popper__arrow",e.appendChild(r)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",c),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},1033:function(e,t,n){"use strict";n.r(t);var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,o=function(){return"undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),a=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)}}(),s=2;function c(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&u()}function c(){a(o)}function u(){var e=Date.now();if(n){if(e-i<s)return;r=!0}else n=!0,r=!1,setTimeout(c,t);i=e}return u}var u=20,l=["top","right","bottom","left","width","height","size","weight"],d="undefined"!==typeof MutationObserver,h=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=c(this.refresh.bind(this),u)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),d?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,r=l.some((function(e){return!!~n.indexOf(e)}));r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),p=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||o},v=E(0,0,0,0);function m(e){return parseFloat(e)||0}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){var r=e["border-"+n+"-width"];return t+m(r)}),0)}function _(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var o=i[r],a=e["padding-"+o];n[o]=m(a)}return n}function y(e){var t=e.getBBox();return E(0,0,t.width,t.height)}function b(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return v;var r=f(e).getComputedStyle(e),i=_(r),o=i.left+i.right,a=i.top+i.bottom,s=m(r.width),c=m(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=g(r,"left","right")+o),Math.round(c+a)!==n&&(c-=g(r,"top","bottom")+a)),!k(e)){var u=Math.round(s+o)-t,l=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return E(i.left,i.top,s,c)}var S=function(){return"undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"===typeof e.getBBox}}();function k(e){return e===f(e).document.documentElement}function w(e){return i?S(e)?y(e):b(e):v}function T(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return p(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}function E(e,t,n,r){return{x:e,y:t,width:n,height:r}}var I=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=w(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),C=function(){function e(e,t){var n=T(t);p(this,{target:e,contentRect:n})}return e}(),x=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new I(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new C(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),R="undefined"!==typeof WeakMap?new WeakMap:new r,A=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=h.getInstance(),r=new x(t,n,this);R.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach((function(e){A.prototype[e]=function(){var t;return(t=R.get(this))[e].apply(t,arguments)}}));var O=function(){return"undefined"!==typeof o.ResizeObserver?o.ResizeObserver:A}();t["default"]=O},7854:function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){"use strict";var e=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};e.prototype.stringify=function(){return this.content},e.prototype.toString=function(){return this.stringify()},e.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var t=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n};"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self;function r(e,t){return t={exports:{}},e(t,t.exports),t.exports}var i=r((function(e,t){(function(t,n){e.exports=n()})(0,(function(){function e(e){var t=e&&"object"===typeof e;return t&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){var i=r&&!0===r.clone;return i&&e(n)?o(t(n),n,r):n}function r(t,r,i){var a=t.slice();return r.forEach((function(r,s){"undefined"===typeof a[s]?a[s]=n(r,i):e(r)?a[s]=o(t[s],r,i):-1===t.indexOf(r)&&a.push(n(r,i))})),a}function i(t,r,i){var a={};return e(t)&&Object.keys(t).forEach((function(e){a[e]=n(t[e],i)})),Object.keys(r).forEach((function(s){e(r[s])&&t[s]?a[s]=o(t[s],r[s],i):a[s]=n(r[s],i)})),a}function o(e,t,o){var a=Array.isArray(t),s=o||{arrayMerge:r},c=s.arrayMerge||r;return a?Array.isArray(e)?c(e,t,o):n(t,o):i(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return o(e,n,t)}))},o}))})),o=r((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),a=function(e){return Object.keys(e).map((function(t){var n=e[t].toString().replace(/"/g,"&quot;");return t+'="'+n+'"'})).join(" ")},s=o.svg,c=o.xlink,u={};u[s.name]=s.uri,u[c.name]=c.uri;var l=function(e,t){void 0===e&&(e="");var n=i(u,t||{}),r=a(n);return"<svg "+r+">"+e+"</svg>"},d=function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},n.createFromExistingNode=function(e){return new n({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},n.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},n.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"===typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},n.prototype.render=function(){var e=this.stringify();return t(l(e)).childNodes[0]},n.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(n.prototype,r),n}(e);return d}))},5348:function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){"use strict";"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self;function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}var t=e((function(e,t){(function(t,n){e.exports=n()})(0,(function(){function e(e){var t=e&&"object"===typeof e;return t&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){var i=r&&!0===r.clone;return i&&e(n)?o(t(n),n,r):n}function r(t,r,i){var a=t.slice();return r.forEach((function(r,s){"undefined"===typeof a[s]?a[s]=n(r,i):e(r)?a[s]=o(t[s],r,i):-1===t.indexOf(r)&&a.push(n(r,i))})),a}function i(t,r,i){var a={};return e(t)&&Object.keys(t).forEach((function(e){a[e]=n(t[e],i)})),Object.keys(r).forEach((function(s){e(r[s])&&t[s]?a[s]=o(t[s],r[s],i):a[s]=n(r[s],i)})),a}function o(e,t,o){var a=Array.isArray(t),s=o||{arrayMerge:r},c=s.arrayMerge||r;return a?Array.isArray(e)?c(e,t,o):n(t,o):i(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return o(e,n,t)}))},o}))}));function r(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).map((function(e){e(n)})),(e["*"]||[]).map((function(e){e(t,n)}))}}}var i=e((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),o=function(e){return Object.keys(e).map((function(t){var n=e[t].toString().replace(/"/g,"&quot;");return t+'="'+n+'"'})).join(" ")},a=i.svg,s=i.xlink,c={};c[a.name]=a.uri,c[s.name]=s.uri;var u,l=function(e,n){void 0===e&&(e="");var r=t(c,n||{}),i=o(r);return"<svg "+i+">"+e+"</svg>"},d=i.svg,h=i.xlink,p={attrs:(u={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},u[d.name]=d.uri,u[h.name]=h.uri,u)},f=function(e){this.config=t(p,e||{}),this.symbols=[]};f.prototype.add=function(e){var t=this,n=t.symbols,r=this.find(e.id);return r?(n[n.indexOf(r)]=e,!1):(n.push(e),!0)},f.prototype.remove=function(e){var t=this,n=t.symbols,r=this.find(e);return!!r&&(n.splice(n.indexOf(r),1),r.destroy(),!0)},f.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},f.prototype.has=function(e){return null!==this.find(e)},f.prototype.stringify=function(){var e=this.config,t=e.attrs,n=this.symbols.map((function(e){return e.stringify()})).join("");return l(n,t)},f.prototype.toString=function(){return this.stringify()},f.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var v=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};v.prototype.stringify=function(){return this.content},v.prototype.toString=function(){return this.stringify()},v.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var m=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},g=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"===typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return m(l(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(v),_={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},y=function(e){return Array.prototype.slice.call(e,0)},b={isChrome:function(){return/chrome/i.test(navigator.userAgent)},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},isEdge:function(){return/edge/i.test(navigator.userAgent)}},S=function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),window.dispatchEvent(n)},k=function(e){var t=[];return y(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)})),t},w=function(e){return(e||window.location.href).split("#")[0]},T=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,r){S(e,{oldUrl:r,newUrl:n})}))}])},E="linearGradient, radialGradient, pattern, mask, clipPath",I=function(e,t){return void 0===t&&(t=E),y(e.querySelectorAll("symbol")).forEach((function(e){y(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e};function C(e,t){var n=y(e).reduce((function(e,n){if(!n.attributes)return e;var r=y(n.attributes),i=t?r.filter(t):r;return e.concat(i)}),[]);return n}var x=i.xlink.uri,R="xlink:href",A=/[{}|\\\^\[\]`"<>]/g;function O(e){return e.replace(A,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}function P(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(e,t,n){return y(e).forEach((function(e){var r=e.getAttribute(R);if(r&&0===r.indexOf(t)){var i=r.replace(t,n);e.setAttributeNS(x,R,i)}})),e}var L,N=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],M=N.map((function(e){return"["+e+"]"})).join(","),U=function(e,t,n,r){var i=O(n),o=O(r),a=e.querySelectorAll(M),s=C(a,(function(e){var t=e.localName,n=e.value;return-1!==N.indexOf(t)&&-1!==n.indexOf("url("+i)}));s.forEach((function(e){return e.value=e.value.replace(new RegExp(P(i),"g"),o)})),D(t,i,o)},j={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"},V=function(e){function n(n){var i=this;void 0===n&&(n={}),e.call(this,t(_,n));var o=r();this._emitter=o,this.node=null;var a=this,s=a.config;if(s.autoConfigure&&this._autoConfigure(n),s.syncUrlsWithBaseTag){var c=document.getElementsByTagName("base")[0].getAttribute("href");o.on(j.MOUNT,(function(){return i.updateUrls("#",c)}))}var u=this._handleLocationChange.bind(this);this._handleLocationChange=u,s.listenLocationChangeEvent&&window.addEventListener(s.locationChangeEvent,u),s.locationChangeAngularEmitter&&T(s.locationChangeEvent),o.on(j.MOUNT,(function(e){s.moveGradientsOutsideSymbol&&I(e)})),o.on(j.SYMBOL_MOUNT,(function(e){s.moveGradientsOutsideSymbol&&I(e.parentNode),(b.isIE()||b.isEdge())&&k(e)}))}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},n.prototype._autoConfigure=function(e){var t=this,n=t.config;"undefined"===typeof e.syncUrlsWithBaseTag&&(n.syncUrlsWithBaseTag="undefined"!==typeof document.getElementsByTagName("base")[0]),"undefined"===typeof e.locationChangeAngularEmitter&&(n.locationChangeAngularEmitter="undefined"!==typeof window.angular),"undefined"===typeof e.moveGradientsOutsideSymbol&&(n.moveGradientsOutsideSymbol=b.isFirefox())},n.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,r=t.newUrl;this.updateUrls(n,r)},n.prototype.add=function(t){var n=this,r=e.prototype.add.call(this,t);return this.isMounted&&r&&(t.mount(n.node),this._emitter.emit(j.SYMBOL_MOUNT,t.node)),r},n.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var r="string"===typeof e?document.querySelector(e):e;return n.node=r,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(j.SYMBOL_MOUNT,e.node)})),y(r.querySelectorAll("symbol")).forEach((function(e){var t=g.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(j.MOUNT,r),r},n.prototype.destroy=function(){var e=this,t=e.config,n=e.symbols,r=e._emitter;n.forEach((function(e){return e.destroy()})),r.off("*"),window.removeEventListener(t.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},n.prototype.mount=function(e,t){void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1);var n=this;if(n.isMounted)return n.node;var r="string"===typeof e?document.querySelector(e):e,i=n.render();return this.node=i,t&&r.childNodes[0]?r.insertBefore(i,r.childNodes[0]):r.appendChild(i),this._emitter.emit(j.MOUNT,i),i},n.prototype.render=function(){return m(this.stringify())},n.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},n.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return U(this.node,n,w(e)+"#",w(t)+"#"),!0},Object.defineProperties(n.prototype,i),n}(f),F=e((function(e){
/*!
  * domready (c) Dustin Diaz 2014 - License MIT
  */
!function(t,n){e.exports=n()}(0,(function(){var e,t=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,e=function(){n.removeEventListener(i,e),o=1;while(e=t.shift())e()}),function(e){o?setTimeout(e,0):t.push(e)}}))})),B="__SVG_SPRITE_NODE__",$="__SVG_SPRITE__",H=!!window[$];H?L=window[$]:(L=new V({attrs:{id:B,"aria-hidden":"true"}}),window[$]=L);var z=function(){var e=document.getElementById(B);e?L.attach(e):L.mount(document.body,!0)};document.body?z():F(z);var W=L;return W}))},2823:function(e,t,n){var r=n(8563);e.exports=function(e,t,n){return void 0===n?r(e,t,!1):r(e,n,!1!==t)}},4592:function(e,t,n){var r=n(8563),i=n(2823);e.exports={throttle:r,debounce:i}},8563:function(e){e.exports=function(e,t,n,r){var i,o=0;function a(){var a=this,s=Number(new Date)-o,c=arguments;function u(){o=Number(new Date),n.apply(a,c)}function l(){i=void 0}r&&!i&&u(),i&&clearTimeout(i),void 0===r&&s>e?u():!0!==t&&(i=setTimeout(r?l:u,void 0===r?e-s:e))}return"boolean"!==typeof t&&(r=n,n=t,t=void 0),a}},8024:function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(x){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(x){return{type:"throw",arg:x}}}e.wrap=u;var d={};function h(){}function p(){}function f(){}var v={};c(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==t&&n.call(g,o)&&(v=g);var _=f.prototype=h.prototype=Object.create(v);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=f,c(_,"constructor",f),c(f,"constructor",p),p.displayName=c(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(_),c(_,s,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t,n){return v=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},v.apply(null,arguments)}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return v(e,arguments,h(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)},m(e)}function g(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){var t=f();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=y(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},b.apply(this,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function I(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},x=function(e){return e&&e.Math==Math&&e},R=x("object"==typeof globalThis&&globalThis)||x("object"==typeof window&&window)||x("object"==typeof self&&self)||x("object"==typeof C&&C)||function(){return this}()||Function("return this")(),A={},O=function(e){try{return!!e()}catch(t){return!0}},P=!O((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),D=!O((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),L=D,N=Function.prototype.call,M=L?N.bind(N):function(){return N.apply(N,arguments)},U={},j={}.propertyIsEnumerable,V=Object.getOwnPropertyDescriptor,F=V&&!j.call({1:2},1);U.f=F?function(e){var t=V(this,e);return!!t&&t.enumerable}:j;var B,$,H=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},z=D,W=Function.prototype,q=W.call,G=z&&W.bind.bind(q,q),J=function(e){return z?G(e):function(){return q.apply(e,arguments)}},K=J,Q=K({}.toString),X=K("".slice),Y=function(e){return X(Q(e),8,-1)},Z=Y,ee=J,te=function(e){if("Function"===Z(e))return ee(e)},ne=O,re=Y,ie=Object,oe=te("".split),ae=ne((function(){return!ie("z").propertyIsEnumerable(0)}))?function(e){return"String"==re(e)?oe(e,""):ie(e)}:ie,se=function(e){return null==e},ce=se,ue=TypeError,le=function(e){if(ce(e))throw ue("Can't call method on "+e);return e},de=ae,he=le,pe=function(e){return de(he(e))},fe="object"==typeof document&&document.all,ve={all:fe,IS_HTMLDDA:void 0===fe&&void 0!==fe},me=ve.all,ge=ve.IS_HTMLDDA?function(e){return"function"==typeof e||e===me}:function(e){return"function"==typeof e},_e=ge,ye=ve.all,be=ve.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:_e(e)||e===ye}:function(e){return"object"==typeof e?null!==e:_e(e)},Se=R,ke=ge,we=function(e){return ke(e)?e:void 0},Te=function(e,t){return arguments.length<2?we(Se[e]):Se[e]&&Se[e][t]},Ee=te({}.isPrototypeOf),Ie=Te("navigator","userAgent")||"",Ce=R,xe=Ie,Re=Ce.process,Ae=Ce.Deno,Oe=Re&&Re.versions||Ae&&Ae.version,Pe=Oe&&Oe.v8;Pe&&($=(B=Pe.split("."))[0]>0&&B[0]<4?1:+(B[0]+B[1])),!$&&xe&&(!(B=xe.match(/Edge\/(\d+)/))||B[1]>=74)&&(B=xe.match(/Chrome\/(\d+)/))&&($=+B[1]);var De=$,Le=De,Ne=O,Me=!!Object.getOwnPropertySymbols&&!Ne((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Le&&Le<41})),Ue=Me&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,je=Te,Ve=ge,Fe=Ee,Be=Object,$e=Ue?function(e){return"symbol"==typeof e}:function(e){var t=je("Symbol");return Ve(t)&&Fe(t.prototype,Be(e))},He=String,ze=function(e){try{return He(e)}catch(t){return"Object"}},We=ge,qe=ze,Ge=TypeError,Je=function(e){if(We(e))return e;throw Ge(qe(e)+" is not a function")},Ke=Je,Qe=se,Xe=function(e,t){var n=e[t];return Qe(n)?void 0:Ke(n)},Ye=M,Ze=ge,et=be,tt=TypeError,nt={exports:{}},rt=R,it=Object.defineProperty,ot=function(e,t){try{it(rt,e,{value:t,configurable:!0,writable:!0})}catch(r){rt[e]=t}return t},at=ot,st="__core-js_shared__",ct=R[st]||at(st,{}),ut=ct;(nt.exports=function(e,t){return ut[e]||(ut[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"});var lt=le,dt=Object,ht=function(e){return dt(lt(e))},pt=ht,ft=te({}.hasOwnProperty),vt=Object.hasOwn||function(e,t){return ft(pt(e),t)},mt=te,gt=0,_t=Math.random(),yt=mt(1..toString),bt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+yt(++gt+_t,36)},St=R,kt=nt.exports,wt=vt,Tt=bt,Et=Me,It=Ue,Ct=kt("wks"),xt=St.Symbol,Rt=xt&&xt.for,At=It?xt:xt&&xt.withoutSetter||Tt,Ot=function(e){if(!wt(Ct,e)||!Et&&"string"!=typeof Ct[e]){var t="Symbol."+e;Et&&wt(xt,e)?Ct[e]=xt[e]:Ct[e]=It&&Rt?Rt(t):At(t)}return Ct[e]},Pt=M,Dt=be,Lt=$e,Nt=Xe,Mt=function(e,t){var n,r;if("string"===t&&Ze(n=e.toString)&&!et(r=Ye(n,e)))return r;if(Ze(n=e.valueOf)&&!et(r=Ye(n,e)))return r;if("string"!==t&&Ze(n=e.toString)&&!et(r=Ye(n,e)))return r;throw tt("Can't convert object to primitive value")},Ut=TypeError,jt=Ot("toPrimitive"),Vt=function(e,t){if(!Dt(e)||Lt(e))return e;var n,r=Nt(e,jt);if(r){if(void 0===t&&(t="default"),n=Pt(r,e,t),!Dt(n)||Lt(n))return n;throw Ut("Can't convert object to primitive value")}return void 0===t&&(t="number"),Mt(e,t)},Ft=Vt,Bt=$e,$t=function(e){var t=Ft(e,"string");return Bt(t)?t:t+""},Ht=be,zt=R.document,Wt=Ht(zt)&&Ht(zt.createElement),qt=function(e){return Wt?zt.createElement(e):{}},Gt=qt,Jt=!P&&!O((function(){return 7!=Object.defineProperty(Gt("div"),"a",{get:function(){return 7}}).a})),Kt=P,Qt=M,Xt=U,Yt=H,Zt=pe,en=$t,tn=vt,nn=Jt,rn=Object.getOwnPropertyDescriptor;A.f=Kt?rn:function(e,t){if(e=Zt(e),t=en(t),nn)try{return rn(e,t)}catch(r){}if(tn(e,t))return Yt(!Qt(Xt.f,e,t),e[t])};var on={},an=P&&O((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),sn=be,cn=String,un=TypeError,ln=function(e){if(sn(e))return e;throw un(cn(e)+" is not an object")},dn=P,hn=Jt,pn=an,fn=ln,vn=$t,mn=TypeError,gn=Object.defineProperty,_n=Object.getOwnPropertyDescriptor,yn="enumerable",bn="configurable",Sn="writable";on.f=dn?pn?function(e,t,n){if(fn(e),t=vn(t),fn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Sn in n&&!n.writable){var r=_n(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:bn in n?n.configurable:r.configurable,enumerable:yn in n?n.enumerable:r.enumerable,writable:!1})}return gn(e,t,n)}:gn:function(e,t,n){if(fn(e),t=vn(t),fn(n),hn)try{return gn(e,t,n)}catch(i){}if("get"in n||"set"in n)throw mn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var kn=on,wn=H,Tn=P?function(e,t,n){return kn.f(e,t,wn(1,n))}:function(e,t,n){return e[t]=n,e},En={exports:{}},In=P,Cn=vt,xn=Function.prototype,Rn=In&&Object.getOwnPropertyDescriptor,An=Cn(xn,"name"),On={EXISTS:An,PROPER:An&&"something"===function(){}.name,CONFIGURABLE:An&&(!In||In&&Rn(xn,"name").configurable)},Pn=ge,Dn=ct,Ln=te(Function.toString);Pn(Dn.inspectSource)||(Dn.inspectSource=function(e){return Ln(e)});var Nn,Mn,Un,jn=Dn.inspectSource,Vn=ge,Fn=R.WeakMap,Bn=Vn(Fn)&&/native code/.test(String(Fn)),$n=nt.exports,Hn=bt,zn=$n("keys"),Wn=function(e){return zn[e]||(zn[e]=Hn(e))},qn={},Gn=Bn,Jn=R,Kn=be,Qn=Tn,Xn=vt,Yn=ct,Zn=Wn,er=qn,tr="Object already initialized",nr=Jn.TypeError,rr=Jn.WeakMap;if(Gn||Yn.state){var ir=Yn.state||(Yn.state=new rr);ir.get=ir.get,ir.has=ir.has,ir.set=ir.set,Nn=function(e,t){if(ir.has(e))throw nr(tr);return t.facade=e,ir.set(e,t),t},Mn=function(e){return ir.get(e)||{}},Un=function(e){return ir.has(e)}}else{var or=Zn("state");er[or]=!0,Nn=function(e,t){if(Xn(e,or))throw nr(tr);return t.facade=e,Qn(e,or,t),t},Mn=function(e){return Xn(e,or)?e[or]:{}},Un=function(e){return Xn(e,or)}}var ar={set:Nn,get:Mn,has:Un,enforce:function(e){return Un(e)?Mn(e):Nn(e,{})},getterFor:function(e){return function(t){var n;if(!Kn(t)||(n=Mn(t)).type!==e)throw nr("Incompatible receiver, "+e+" required");return n}}},sr=O,cr=ge,ur=vt,lr=P,dr=On.CONFIGURABLE,hr=jn,pr=ar.enforce,fr=ar.get,vr=Object.defineProperty,mr=lr&&!sr((function(){return 8!==vr((function(){}),"length",{value:8}).length})),gr=String(String).split("String"),_r=En.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!ur(e,"name")||dr&&e.name!==t)&&(lr?vr(e,"name",{value:t,configurable:!0}):e.name=t),mr&&n&&ur(n,"arity")&&e.length!==n.arity&&vr(e,"length",{value:n.arity});try{n&&ur(n,"constructor")&&n.constructor?lr&&vr(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var r=pr(e);return ur(r,"source")||(r.source=gr.join("string"==typeof t?t:"")),e};Function.prototype.toString=_r((function(){return cr(this)&&fr(this).source||hr(this)}),"toString");var yr=ge,br=on,Sr=En.exports,kr=ot,wr=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(yr(n)&&Sr(n,o,r),r.global)i?e[t]=n:kr(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(s){}i?e[t]=n:br.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},Tr={},Er=Math.ceil,Ir=Math.floor,Cr=Math.trunc||function(e){var t=+e;return(t>0?Ir:Er)(t)},xr=function(e){var t=+e;return t!=t||0===t?0:Cr(t)},Rr=xr,Ar=Math.max,Or=Math.min,Pr=function(e,t){var n=Rr(e);return n<0?Ar(n+t,0):Or(n,t)},Dr=xr,Lr=Math.min,Nr=function(e){return e>0?Lr(Dr(e),9007199254740991):0},Mr=Nr,Ur=function(e){return Mr(e.length)},jr=pe,Vr=Pr,Fr=Ur,Br=function(e){return function(t,n,r){var i,o=jr(t),a=Fr(o),s=Vr(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},$r={includes:Br(!0),indexOf:Br(!1)},Hr=vt,zr=pe,Wr=$r.indexOf,qr=qn,Gr=te([].push),Jr=function(e,t){var n,r=zr(e),i=0,o=[];for(n in r)!Hr(qr,n)&&Hr(r,n)&&Gr(o,n);for(;t.length>i;)Hr(r,n=t[i++])&&(~Wr(o,n)||Gr(o,n));return o},Kr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qr=Jr,Xr=Kr.concat("length","prototype");Tr.f=Object.getOwnPropertyNames||function(e){return Qr(e,Xr)};var Yr={};Yr.f=Object.getOwnPropertySymbols;var Zr=Te,ei=Tr,ti=Yr,ni=ln,ri=te([].concat),ii=Zr("Reflect","ownKeys")||function(e){var t=ei.f(ni(e)),n=ti.f;return n?ri(t,n(e)):t},oi=vt,ai=ii,si=A,ci=on,ui=O,li=ge,di=/#|\.prototype\./,hi=function(e,t){var n=fi[pi(e)];return n==mi||n!=vi&&(li(t)?ui(t):!!t)},pi=hi.normalize=function(e){return String(e).replace(di,".").toLowerCase()},fi=hi.data={},vi=hi.NATIVE="N",mi=hi.POLYFILL="P",gi=hi,_i=R,yi=A.f,bi=Tn,Si=wr,ki=ot,wi=function(e,t,n){for(var r=ai(t),i=ci.f,o=si.f,a=0;a<r.length;a++){var s=r[a];oi(e,s)||n&&oi(n,s)||i(e,s,o(t,s))}},Ti=gi,Ei=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,u=e.stat;if(n=c?_i:u?_i[s]||ki(s,{}):(_i[s]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(a=yi(n,r))&&a.value:n[r],!Ti(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;wi(o,i)}(e.sham||i&&i.sham)&&bi(o,"sham",!0),Si(n,r,o,e)}},Ii=Je,Ci=D,xi=te(te.bind),Ri=function(e,t){return Ii(e),void 0===t?e:Ci?xi(e,t):function(){return e.apply(t,arguments)}},Ai=Y,Oi=Array.isArray||function(e){return"Array"==Ai(e)},Pi={};Pi[Ot("toStringTag")]="z";var Di="[object z]"===String(Pi),Li=Di,Ni=ge,Mi=Y,Ui=Ot("toStringTag"),ji=Object,Vi="Arguments"==Mi(function(){return arguments}()),Fi=Li?Mi:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=ji(e),Ui))?n:Vi?Mi(t):"Object"==(r=Mi(t))&&Ni(t.callee)?"Arguments":r},Bi=te,$i=O,Hi=ge,zi=Fi,Wi=jn,qi=function(){},Gi=[],Ji=Te("Reflect","construct"),Ki=/^\s*(?:class|function)\b/,Qi=Bi(Ki.exec),Xi=!Ki.exec(qi),Yi=function(e){if(!Hi(e))return!1;try{return Ji(qi,Gi,e),!0}catch(t){return!1}},Zi=function(e){if(!Hi(e))return!1;switch(zi(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Xi||!!Qi(Ki,Wi(e))}catch(t){return!0}};Zi.sham=!0;var eo=!Ji||$i((function(){var e;return Yi(Yi.call)||!Yi(Object)||!Yi((function(){e=!0}))||e}))?Zi:Yi,to=Oi,no=eo,ro=be,io=Ot("species"),oo=Array,ao=function(e){var t;return to(e)&&(t=e.constructor,(no(t)&&(t===oo||to(t.prototype))||ro(t)&&null===(t=t[io]))&&(t=void 0)),void 0===t?oo:t},so=function(e,t){return new(ao(e))(0===t?0:t)},co=Ri,uo=ae,lo=ht,ho=Ur,po=so,fo=te([].push),vo=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,d){for(var h,p,f=lo(c),v=uo(f),m=co(u,l),g=ho(v),_=0,y=d||po,b=t?y(c,g):n||a?y(c,0):void 0;g>_;_++)if((s||_ in v)&&(p=m(h=v[_],_,f),e))if(t)b[_]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return _;case 2:fo(b,h)}else switch(e){case 4:return!1;case 7:fo(b,h)}return o?-1:r||i?i:b}},mo={forEach:vo(0),map:vo(1),filter:vo(2),some:vo(3),every:vo(4),find:vo(5),findIndex:vo(6),filterReject:vo(7)},go=O,_o=De,yo=Ot("species"),bo=function(e){return _o>=51||!go((function(){var t=[];return(t.constructor={})[yo]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},So=mo.map;Ei({target:"Array",proto:!0,forced:!bo("map")},{map:function(e){return So(this,e,arguments.length>1?arguments[1]:void 0)}});var ko=mo.filter;Ei({target:"Array",proto:!0,forced:!bo("filter")},{filter:function(e){return ko(this,e,arguments.length>1?arguments[1]:void 0)}});var wo=Fi,To=Di?{}.toString:function(){return"[object "+wo(this)+"]"};Di||wr(Object.prototype,"toString",To,{unsafe:!0});var Eo=Ei,Io=O,Co=pe,xo=A.f,Ro=P,Ao=Io((function(){xo(1)}));Eo({target:"Object",stat:!0,forced:!Ro||Ao,sham:!Ro},{getOwnPropertyDescriptor:function(e,t){return xo(Co(e),t)}});let Oo=!0,Po=!0;function Do(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Lo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function No(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Oo=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Mo(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Po=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Uo(){if("object"==typeof window){if(Oo)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function jo(e,t){Po&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Vo(e){return"[object Object]"===Object.prototype.toString.call(e)}function Fo(e){return Vo(e)?Object.keys(e).reduce((function(t,n){const r=Vo(e[n]),i=r?Fo(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function Bo(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?Bo(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{Bo(e,e.get(t),n)}))})))}function $o(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&Bo(e,n,i)}))})),i}const Ho=Uo;function zo(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),Ho("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Ho("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function Wo(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function qo(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Lo(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Go(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Jo(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function Ko(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>$o(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Lo(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>$o(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Qo(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function Xo(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Qo(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Yo(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Zo(e,t){Lo(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var ea=Object.freeze({__proto__:null,shimMediaStream:Wo,shimOnTrack:qo,shimGetSendersWithDtmf:Go,shimGetStats:Jo,shimSenderReceiverGetStats:Ko,shimAddTrackRemoveTrackWithNative:Qo,shimAddTrackRemoveTrack:Xo,shimPeerConnection:Yo,fixNegotiationNeeded:Zo,shimGetUserMedia:zo,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),ta={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var a=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,i){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(ta);var na=ta.exports,ra=ta.exports;function ia(e,t,n,r,i){var o=ra.writeRtpDescription(e.kind,t);if(o+=ra.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=ra.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var s="msid:"+(r?r.id:"-")+" "+a+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+ra.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+ra.localCName+"\r\n"),o}function oa(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function aa(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function sa(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function ca(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var ua=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function r(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var i=function(n){var r=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){r[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw ca("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=ra.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},i.prototype.addTrack=function(t,n){if(this._isClosed)throw ca("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw ca("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},i.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},i.prototype.removeTrack=function(t){if(this._isClosed)throw ca("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw ca("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},i.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},i.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},i.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,s=!a||0===Object.keys(a).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var c=ra.writeCandidate(a);o.candidate=Object.assign(o.candidate,ra.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var u=ra.getMediaSections(r._localDescription.sdp);u[o.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",r._localDescription.sdp=ra.getDescription(r._localDescription.sdp)+u.join("");var l=r.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),s||r._dispatchEvent("icecandidate",o),l&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,n,r){var i=oa(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:ra.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(ca("TypeError",'Unsupported type "'+e.type+'"'));if(!aa("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(ca("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=ra.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=ra.parseRtpParameters(e);r.transceivers[t].localCapabilities=n})),r.transceivers.forEach((function(e,t){r._gather(e.mid,t)}));else if("answer"===e.type){t=ra.splitSections(r._remoteDescription.sdp),n=t.shift();var i=ra.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=r.transceivers[t],a=o.iceGatherer,s=o.iceTransport,c=o.dtlsTransport,u=o.localCapabilities,l=o.remoteCapabilities;if((!ra.isRejected(e)||0!==ra.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var d=ra.getIceParameters(e,n),h=ra.getDtlsParameters(e,n);i&&(h.role="server"),r.usingBundle&&0!==t||(r._gather(o.mid,t),"new"===s.state&&s.start(a,d,i?"controlling":"controlled"),"new"===c.state&&c.start(h));var p=oa(u,l);r._transceive(o,p.codecs.length>0,!1)}}))}return r._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(ca("TypeError",'Unsupported type "'+i.type+'"'));if(!aa("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return Promise.reject(ca("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var a={};o.remoteStreams.forEach((function(e){a[e.id]=e}));var s=[],c=ra.splitSections(i.sdp),u=c.shift(),l=ra.matchPrefix(u,"a=ice-lite").length>0,d=ra.matchPrefix(u,"a=group:BUNDLE ").length>0;o.usingBundle=d;var h=ra.matchPrefix(u,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!h&&h.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(r,c){var h=ra.splitLines(r),p=ra.getKind(r),f=ra.isRejected(r)&&0===ra.matchPrefix(r,"a=bundle-only").length,v=h[0].substr(2).split(" ")[2],m=ra.getDirection(r,u),g=ra.parseMsid(r),_=ra.getMid(r)||ra.generateIdentifier();if(f||"application"===p&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))o.transceivers[c]={mid:_,kind:p,protocol:v,rejected:!0};else{var y,b,S,k,w,T,E,I,C;!f&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(p,!0));var x,R,A=ra.parseRtpParameters(r);f||(x=ra.getIceParameters(r,u),(R=ra.getDtlsParameters(r,u)).role="client"),E=ra.parseRtpEncodingParameters(r);var O=ra.parseRtcpParameters(r),P=ra.matchPrefix(r,"a=end-of-candidates",u).length>0,D=ra.matchPrefix(r,"a=candidate:").map((function(e){return ra.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!f&&d&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||f)"answer"!==i.type||f||(b=(y=o.transceivers[c]).iceGatherer,S=y.iceTransport,k=y.dtlsTransport,w=y.rtpReceiver,T=y.sendEncodingParameters,I=y.localCapabilities,o.transceivers[c].recvEncodingParameters=E,o.transceivers[c].remoteCapabilities=A,o.transceivers[c].rtcpParameters=O,D.length&&"new"===S.state&&(!l&&!P||d&&0!==c?D.forEach((function(e){sa(y.iceTransport,e)})):S.setRemoteCandidates(D)),d&&0!==c||("new"===S.state&&S.start(b,x,"controlling"),"new"===k.state&&k.start(R)),!oa(y.localCapabilities,y.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&y.sendEncodingParameters[0].rtx&&delete y.sendEncodingParameters[0].rtx,o._transceive(y,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!w||"sendrecv"!==m&&"sendonly"!==m?delete y.rtpReceiver:(C=w.track,g?(a[g.stream]||(a[g.stream]=new e.MediaStream),n(C,a[g.stream]),s.push([C,w,a[g.stream]])):(a.default||(a.default=new e.MediaStream),n(C,a.default),s.push([C,w,a.default]))));else{(y=o.transceivers[c]||o._createTransceiver(p)).mid=_,y.iceGatherer||(y.iceGatherer=o._createIceGatherer(c,d)),D.length&&"new"===y.iceTransport.state&&(!P||d&&0!==c?D.forEach((function(e){sa(y.iceTransport,e)})):y.iceTransport.setRemoteCandidates(D)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),T=y.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,N=!1;"sendrecv"===m||"sendonly"===m?(N=!y.rtpReceiver,w=y.rtpReceiver||new e.RTCRtpReceiver(y.dtlsTransport,p),N&&(C=w.track,g&&"-"===g.stream||(g?(a[g.stream]||(a[g.stream]=new e.MediaStream,Object.defineProperty(a[g.stream],"id",{get:function(){return g.stream}})),Object.defineProperty(C,"id",{get:function(){return g.track}}),L=a[g.stream]):(a.default||(a.default=new e.MediaStream),L=a.default)),L&&(n(C,L),y.associatedRemoteMediaStreams.push(L)),s.push([C,w,L]))):y.rtpReceiver&&y.rtpReceiver.track&&(y.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===y.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),y.associatedRemoteMediaStreams=[]),y.localCapabilities=I,y.remoteCapabilities=A,y.rtpReceiver=w,y.rtcpParameters=O,y.sendEncodingParameters=T,y.recvEncodingParameters=E,o._transceive(o.transceivers[c],!1,N)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(a).forEach((function(t){var n=a[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout((function(){o._dispatchEvent("addstream",i)}))}s.forEach((function(e){var t=e[0],i=e[1];n.id===e[2].id&&r(o,t,i,[n])}))}})),s.forEach((function(e){e[2]||r(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},i.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(ca("InvalidStateError","Can not call createOffer after close"));var r=n.transceivers.filter((function(e){return"audio"===e.kind})).length,i=n.transceivers.filter((function(e){return"video"===e.kind})).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(r=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(i=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--r<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)}));r>0||i>0;)r>0&&(n._createTransceiver("audio"),r--),i>0&&(n._createTransceiver("video"),i--);var a=ra.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(r,i){var o=r.track,a=r.kind,s=r.mid||ra.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(i,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(a);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var u=r.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,a)),r.localCapabilities=c,r.sendEncodingParameters=u})),"max-compat"!==n._config.bundlePolicy&&(a+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){a+=ia(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),a+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,a+="a="+ra.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(a+="a=end-of-candidates\r\n"))}));var s=new e.RTCSessionDescription({type:"offer",sdp:a});return Promise.resolve(s)},i.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(ca("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(ca("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var r=ra.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(r+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n";var i=ra.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,o){if(!(o+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?r+="m=application 0 DTLS/SCTP 5000\r\n":r+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var a;e.stream&&("audio"===e.kind?a=e.stream.getAudioTracks()[0]:"video"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var s=oa(e.localCapabilities,e.remoteCapabilities);!s.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=ia(e,s,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")}}));var o=new e.RTCSessionDescription({type:"answer",sdp:r});return Promise.resolve(o)},i.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,i){if(!n._remoteDescription)return i(ca("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<n.transceivers.length;a++)if(n.transceivers[a].mid===e.sdpMid){o=a;break}var s=n.transceivers[o];if(!s)return i(ca("OperationError","Can not add ICE candidate"));if(s.rejected)return r();var c=Object.keys(e.candidate).length>0?ra.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return r();if(c.component&&1!==c.component)return r();if((0===o||o>0&&s.iceTransport!==n.transceivers[0].iceTransport)&&!sa(s.iceTransport,c))return i(ca("OperationError","Can not add ICE candidate"));var u=e.candidate.trim();0===u.indexOf("a=")&&(u=u.substr(2)),(t=ra.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(c.type?u:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=ra.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var l=0;l<n.transceivers.length&&(n.transceivers[l].rejected||(n.transceivers[l].iceTransport.addRemoteCandidate({}),(t=ra.getMediaSections(n._remoteDescription.sdp))[l]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=ra.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));l++);r()}))},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw ca("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var o=["createOffer","createAnswer"];return o.forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),i};function la(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function da(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function ha(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=ua(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&jo("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}(e.iceServers,t.version),Uo("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function pa(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var fa=Object.freeze({__proto__:null,shimPeerConnection:ha,shimReplaceTrack:pa,shimGetUserMedia:la,shimGetDisplayMedia:da});function va(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){jo("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function ma(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ga(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function _a(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ya(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Lo(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ba(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){jo("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function Sa(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ka(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function wa(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Ta(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Ea(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var Ia=Object.freeze({__proto__:null,shimOnTrack:ma,shimPeerConnection:ga,shimSenderGetStats:_a,shimReceiverGetStats:ya,shimRemoveStream:ba,shimRTCDataChannel:Sa,shimAddTransceiver:ka,shimGetParameters:wa,shimCreateOffer:Ta,shimCreateAnswer:Ea,shimGetUserMedia:va,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function Ca(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function xa(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function Ra(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function Aa(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Oa(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Oa(e){return e&&void 0!==e.video?Object.assign({},e,{video:Fo(e.video)}):e}function Pa(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(jo("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Da(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function La(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function Na(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Ma=Object.freeze({__proto__:null,shimLocalStreamsAPI:Ca,shimRemoteStreamsAPI:xa,shimCallbacksAPI:Ra,shimGetUserMedia:Aa,shimConstraints:Oa,shimRTCIceServerUrls:Pa,shimTrackEventTransceiver:Da,shimCreateOfferLegacy:La,shimAudioContext:Na});function Ua(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=na.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Lo(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function ja(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=na.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=na.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=na.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function Va(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Lo(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Fa(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Ba(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function $a(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var Ha=Object.freeze({__proto__:null,shimRTCIceCandidate:Ua,shimMaxMessageSize:ja,shimSendThrowTypeError:Va,shimConnectionState:Fa,removeExtmapAllowMixed:Ba,shimAddIceCandidateNullOrEmpty:$a});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=Uo,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Do(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Do(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=Do(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Do(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:Ha,extractVersion:Do,disableLog:No,disableWarnings:Mo};switch(r.browser){case"chrome":if(!ea||!Yo||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=ea,$a(e,r),zo(e,r),Wo(e),Yo(e,r),qo(e),Xo(e,r),Go(e),Jo(e),Ko(e),Zo(e,r),Ua(e),Fa(e),ja(e,r),Va(e),Ba(e,r);break;case"firefox":if(!Ia||!ga||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Ia,$a(e,r),va(e,r),ga(e,r),ma(e),ba(e),_a(e),ya(e),Sa(e),ka(e),wa(e),Ta(e),Ea(e),Ua(e),Fa(e),ja(e,r),Va(e);break;case"edge":if(!fa||!ha||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=fa,la(e),da(e),ha(e,r),pa(e),ja(e,r),Va(e);break;case"safari":if(!Ma||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Ma,$a(e,r),Pa(e),La(e),Ra(e),Ca(e),xa(e),Da(e),Aa(e),Na(e),Ua(e),ja(e,r),Va(e),Ba(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var za="4.15.0",Wa={},qa=Jr,Ga=Kr,Ja=Object.keys||function(e){return qa(e,Ga)},Ka=P,Qa=an,Xa=on,Ya=ln,Za=pe,es=Ja;Wa.f=Ka&&!Qa?Object.defineProperties:function(e,t){Ya(e);for(var n,r=Za(t),i=es(t),o=i.length,a=0;o>a;)Xa.f(e,n=i[a++],r[n]);return e};var ts,ns=Te("document","documentElement"),rs=ln,is=Wa,os=Kr,as=qn,ss=ns,cs=qt,us=Wn("IE_PROTO"),ls=function(){},ds=function(e){return"<script>"+e+"<\/script>"},hs=function(e){e.write(ds("")),e.close();var t=e.parentWindow.Object;return e=null,t},ps=function(){try{ts=new ActiveXObject("htmlfile")}catch(i){}var e,t;ps="undefined"!=typeof document?document.domain&&ts?hs(ts):((t=cs("iframe")).style.display="none",ss.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ds("document.F=Object")),e.close(),e.F):hs(ts);for(var n=os.length;n--;)delete ps.prototype[os[n]];return ps()};as[us]=!0;var fs=Object.create||function(e,t){var n;return null!==e?(ls.prototype=rs(e),n=new ls,ls.prototype=null,n[us]=e):n=ps(),void 0===t?n:is.f(n,t)},vs=Ot,ms=fs,gs=on.f,_s=vs("unscopables"),ys=Array.prototype;null==ys[_s]&&gs(ys,_s,{configurable:!0,value:ms(null)});var bs,Ss,ks,ws=function(e){ys[_s][e]=!0},Ts={},Es=!O((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Is=vt,Cs=ge,xs=ht,Rs=Es,As=Wn("IE_PROTO"),Os=Object,Ps=Os.prototype,Ds=Rs?Os.getPrototypeOf:function(e){var t=xs(e);if(Is(t,As))return t[As];var n=t.constructor;return Cs(n)&&t instanceof n?n.prototype:t instanceof Os?Ps:null},Ls=O,Ns=ge,Ms=be,Us=Ds,js=wr,Vs=Ot("iterator"),Fs=!1;[].keys&&("next"in(ks=[].keys())?(Ss=Us(Us(ks)))!==Object.prototype&&(bs=Ss):Fs=!0);var Bs=!Ms(bs)||Ls((function(){var e={};return bs[Vs].call(e)!==e}));Bs&&(bs={}),Ns(bs[Vs])||js(bs,Vs,(function(){return this}));var $s={IteratorPrototype:bs,BUGGY_SAFARI_ITERATORS:Fs},Hs=on.f,zs=vt,Ws=Ot("toStringTag"),qs=function(e,t,n){e&&!n&&(e=e.prototype),e&&!zs(e,Ws)&&Hs(e,Ws,{configurable:!0,value:t})},Gs=$s.IteratorPrototype,Js=fs,Ks=H,Qs=qs,Xs=Ts,Ys=function(){return this},Zs=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Js(Gs,{next:Ks(+!r,n)}),Qs(e,i,!1),Xs[i]=Ys,e},ec=ge,tc=String,nc=TypeError,rc=te,ic=ln,oc=function(e){if("object"==typeof e||ec(e))return e;throw nc("Can't set "+tc(e)+" as a prototype")},ac=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=rc(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(i){}return function(n,r){return ic(n),oc(r),t?e(n,r):n.__proto__=r,n}}():void 0),sc=Ei,cc=M,uc=ge,lc=Zs,dc=Ds,hc=ac,pc=qs,fc=Tn,vc=wr,mc=Ts,gc=On.PROPER,_c=On.CONFIGURABLE,yc=$s.IteratorPrototype,bc=$s.BUGGY_SAFARI_ITERATORS,Sc=Ot("iterator"),kc="keys",wc="values",Tc="entries",Ec=function(){return this},Ic=function(e,t,n,r,i,o,a){lc(n,t,r);var s,c,u,l=function(e){if(e===i&&v)return v;if(!bc&&e in p)return p[e];switch(e){case kc:case wc:case Tc:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,p=e.prototype,f=p[Sc]||p["@@iterator"]||i&&p[i],v=!bc&&f||l(i),m="Array"==t&&p.entries||f;if(m&&(s=dc(m.call(new e)))!==Object.prototype&&s.next&&(dc(s)!==yc&&(hc?hc(s,yc):uc(s[Sc])||vc(s,Sc,Ec)),pc(s,d,!0)),gc&&i==wc&&f&&f.name!==wc&&(_c?fc(p,"name",wc):(h=!0,v=function(){return cc(f,this)})),i)if(c={values:l(wc),keys:o?v:l(kc),entries:l(Tc)},a)for(u in c)(bc||h||!(u in p))&&vc(p,u,c[u]);else sc({target:t,proto:!0,forced:bc||h},c);return p[Sc]!==v&&vc(p,Sc,v,{name:i}),mc[t]=v,c},Cc=function(e,t){return{value:e,done:t}},xc=pe,Rc=ws,Ac=Ts,Oc=ar,Pc=on.f,Dc=Ic,Lc=Cc,Nc=P,Mc="Array Iterator",Uc=Oc.set,jc=Oc.getterFor(Mc),Vc=Dc(Array,"Array",(function(e,t){Uc(this,{type:Mc,target:xc(e),index:0,kind:t})}),(function(){var e=jc(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,Lc(void 0,!0)):Lc("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),Fc=Ac.Arguments=Ac.Array;if(Rc("keys"),Rc("values"),Rc("entries"),Nc&&"values"!==Fc.name)try{Pc(Fc,"name",{value:"values"})}catch(Yq){}var Bc={exports:{}},$c={},Hc=$t,zc=on,Wc=H,qc=function(e,t,n){var r=Hc(t);r in e?zc.f(e,r,Wc(0,n)):e[r]=n},Gc=Pr,Jc=Ur,Kc=qc,Qc=Array,Xc=Math.max,Yc=function(e,t,n){for(var r=Jc(e),i=Gc(t,r),o=Gc(void 0===n?r:n,r),a=Qc(Xc(o-i,0)),s=0;i<o;i++,s++)Kc(a,s,e[i]);return a.length=s,a},Zc=Y,eu=pe,tu=Tr.f,nu=Yc,ru="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];$c.f=function(e){return ru&&"Window"==Zc(e)?function(e){try{return tu(e)}catch(Yq){return nu(ru)}}(e):tu(eu(e))};var iu=O((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),ou=O,au=be,su=Y,cu=iu,uu=Object.isExtensible,lu=ou((function(){uu(1)}))||cu?function(e){return!!au(e)&&(!cu||"ArrayBuffer"!=su(e))&&(!uu||uu(e))}:uu,du=!O((function(){return Object.isExtensible(Object.preventExtensions({}))})),hu=Ei,pu=te,fu=qn,vu=be,mu=vt,gu=on.f,_u=Tr,yu=$c,bu=lu,Su=du,ku=!1,wu=bt("meta"),Tu=0,Eu=function(e){gu(e,wu,{value:{objectID:"O"+Tu++,weakData:{}}})},Iu=Bc.exports={enable:function(){Iu.enable=function(){},ku=!0;var e=_u.f,t=pu([].splice),n={};n[wu]=1,e(n).length&&(_u.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===wu){t(r,i,1);break}return r},hu({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:yu.f}))},fastKey:function(e,t){if(!vu(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!mu(e,wu)){if(!bu(e))return"F";if(!t)return"E";Eu(e)}return e[wu].objectID},getWeakData:function(e,t){if(!mu(e,wu)){if(!bu(e))return!0;if(!t)return!1;Eu(e)}return e[wu].weakData},onFreeze:function(e){return Su&&ku&&bu(e)&&!mu(e,wu)&&Eu(e),e}};fu[wu]=!0;var Cu=Ts,xu=Ot("iterator"),Ru=Array.prototype,Au=function(e){return void 0!==e&&(Cu.Array===e||Ru[xu]===e)},Ou=Fi,Pu=Xe,Du=se,Lu=Ts,Nu=Ot("iterator"),Mu=function(e){if(!Du(e))return Pu(e,Nu)||Pu(e,"@@iterator")||Lu[Ou(e)]},Uu=M,ju=Je,Vu=ln,Fu=ze,Bu=Mu,$u=TypeError,Hu=function(e,t){var n=arguments.length<2?Bu(e):t;if(ju(n))return Vu(Uu(n,e));throw $u(Fu(e)+" is not iterable")},zu=M,Wu=ln,qu=Xe,Gu=function(e,t,n){var r,i;Wu(e);try{if(!(r=qu(e,"return"))){if("throw"===t)throw n;return n}r=zu(r,e)}catch(Yq){i=!0,r=Yq}if("throw"===t)throw n;if(i)throw r;return Wu(r),n},Ju=Ri,Ku=M,Qu=ln,Xu=ze,Yu=Au,Zu=Ur,el=Ee,tl=Hu,nl=Mu,rl=Gu,il=TypeError,ol=function(e,t){this.stopped=e,this.result=t},al=ol.prototype,sl=function(e,t,n){var r,i,o,a,s,c,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),v=Ju(t,l),m=function(e){return r&&rl(r,"normal",e),new ol(!0,e)},g=function(e){return d?(Qu(e),f?v(e[0],e[1],m):v(e[0],e[1])):f?v(e,m):v(e)};if(h)r=e.iterator;else if(p)r=e;else{if(!(i=nl(e)))throw il(Xu(e)+" is not iterable");if(Yu(i)){for(o=0,a=Zu(e);a>o;o++)if((s=g(e[o]))&&el(al,s))return s;return new ol(!1)}r=tl(e,i)}for(c=h?e.next:r.next;!(u=Ku(c,r)).done;){try{s=g(u.value)}catch(Yq){rl(r,"throw",Yq)}if("object"==typeof s&&s&&el(al,s))return s}return new ol(!1)},cl=Ee,ul=TypeError,ll=function(e,t){if(cl(t,e))return e;throw ul("Incorrect invocation")},dl=Ot("iterator"),hl=!1;try{var pl=0,fl={next:function(){return{done:!!pl++}},return:function(){hl=!0}};fl[dl]=function(){return this},Array.from(fl,(function(){throw 2}))}catch(Yq){}var vl=function(e,t){if(!t&&!hl)return!1;var n=!1;try{var r={};r[dl]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(Yq){}return n},ml=ge,gl=be,_l=ac,yl=function(e,t,n){var r,i;return _l&&ml(r=t.constructor)&&r!==n&&gl(i=r.prototype)&&i!==n.prototype&&_l(e,i),e},bl=Ei,Sl=R,kl=te,wl=gi,Tl=wr,El=Bc.exports,Il=sl,Cl=ll,xl=ge,Rl=se,Al=be,Ol=O,Pl=vl,Dl=qs,Ll=yl,Nl=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=Sl[e],s=a&&a.prototype,c=a,u={},l=function(e){var t=kl(s[e]);Tl(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!Al(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!Al(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!Al(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(wl(e,!xl(a)||!(i||s.forEach&&!Ol((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,o),El.enable();else if(wl(e,!0)){var d=new c,h=d[o](i?{}:-0,1)!=d,p=Ol((function(){d.has(1)})),f=Pl((function(e){new a(e)})),v=!i&&Ol((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));f||((c=t((function(e,t){Cl(e,s);var n=Ll(new a,e,c);return Rl(t)||Il(t,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=c),(p||v)&&(l("delete"),l("has"),r&&l("get")),(v||h)&&l(o),i&&s.clear&&delete s.clear}return u[e]=c,bl({global:!0,constructor:!0,forced:c!=a},u),Dl(c,e),i||n.setStrong(c,e,r),c},Ml=wr,Ul=function(e,t,n){for(var r in t)Ml(e,r,t[r],n);return e},jl=Te,Vl=on,Fl=P,Bl=Ot("species"),$l=function(e){var t=jl(e),n=Vl.f;Fl&&t&&!t[Bl]&&n(t,Bl,{configurable:!0,get:function(){return this}})},Hl=on.f,zl=fs,Wl=Ul,ql=Ri,Gl=ll,Jl=se,Kl=sl,Ql=Ic,Xl=Cc,Yl=$l,Zl=P,ed=Bc.exports.fastKey,td=ar.set,nd=ar.getterFor,rd={getConstructor:function(e,t,n,r){var i=e((function(e,i){Gl(e,o),td(e,{type:t,index:zl(null),first:void 0,last:void 0,size:0}),Zl||(e.size=0),Jl(i)||Kl(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=nd(t),s=function(e,t,n){var r,i,o=a(e),s=c(e,t);return s?s.value=n:(o.last=s={index:i=ed(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),Zl?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},c=function(e,t){var n,r=a(e),i=ed(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Wl(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Zl?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=c(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),Zl?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=ql(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),Wl(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Zl&&Hl(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=nd(t),o=nd(r);Ql(e,t,(function(e,t){td(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?Xl("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,Xl(void 0,!0))}),n?"entries":"values",!n,!0),Yl(t)}};Nl("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),rd);var id=Fi,od=String,ad=function(e){if("Symbol"===id(e))throw TypeError("Cannot convert a Symbol value to a string");return od(e)},sd=te,cd=xr,ud=ad,ld=le,dd=sd("".charAt),hd=sd("".charCodeAt),pd=sd("".slice),fd=function(e){return function(t,n){var r,i,o=ud(ld(t)),a=cd(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=hd(o,a))<55296||r>56319||a+1===s||(i=hd(o,a+1))<56320||i>57343?e?dd(o,a):r:e?pd(o,a,a+2):i-56320+(r-55296<<10)+65536}},vd={codeAt:fd(!1),charAt:fd(!0)},md=vd.charAt,gd=ad,_d=ar,yd=Ic,bd=Cc,Sd="String Iterator",kd=_d.set,wd=_d.getterFor(Sd);yd(String,"String",(function(e){kd(this,{type:Sd,string:gd(e),index:0})}),(function(){var e,t=wd(this),n=t.string,r=t.index;return r>=n.length?bd(void 0,!0):(e=md(n,r),t.index+=e.length,bd(e,!1))}));var Td={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ed=qt("span").classList,Id=Ed&&Ed.constructor&&Ed.constructor.prototype,Cd=Id===Object.prototype?void 0:Id,xd=R,Rd=Td,Ad=Cd,Od=Vc,Pd=Tn,Dd=Ot,Ld=Dd("iterator"),Nd=Dd("toStringTag"),Md=Od.values,Ud=function(e,t){if(e){if(e[Ld]!==Md)try{Pd(e,Ld,Md)}catch(Yq){e[Ld]=Md}if(e[Nd]||Pd(e,Nd,t),Rd[t])for(var n in Od)if(e[n]!==Od[n])try{Pd(e,n,Od[n])}catch(Yq){e[n]=Od[n]}}};for(var jd in Rd)Ud(xd[jd]&&xd[jd].prototype,jd);Ud(Ad,"DOMTokenList");var Vd=D,Fd=Function.prototype,Bd=Fd.apply,$d=Fd.call,Hd="object"==typeof Reflect&&Reflect.apply||(Vd?$d.bind(Bd):function(){return $d.apply(Bd,arguments)}),zd=te([].slice),Wd=TypeError,qd=function(e,t){if(e<t)throw Wd("Not enough arguments");return e},Gd=R,Jd=Hd,Kd=ge,Qd=zd,Xd=qd,Yd=/MSIE .\./.test(Ie),Zd=Gd.Function,eh=function(e){return Yd?function(t,n){var r=Xd(arguments.length,1)>2,i=Kd(t)?t:Zd(t),o=r?Qd(arguments,2):void 0;return e(r?function(){Jd(i,this,o)}:i,n)}:e},th={setTimeout:eh(Gd.setTimeout),setInterval:eh(Gd.setInterval)},nh=th.setInterval;Ei({global:!0,bind:!0,forced:R.setInterval!==nh},{setInterval:nh});var rh=th.setTimeout;Ei({global:!0,bind:!0,forced:R.setTimeout!==rh},{setTimeout:rh}),Nl("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),rd);var ih=P,oh=Oi,ah=TypeError,sh=Object.getOwnPropertyDescriptor,ch=ih&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(Yq){return Yq instanceof TypeError}}(),uh=TypeError,lh=function(e){if(e>9007199254740991)throw uh("Maximum allowed index exceeded");return e},dh=ze,hh=TypeError,ph=function(e,t){if(!delete e[t])throw hh("Cannot delete property "+dh(t)+" of "+dh(e))},fh=Ei,vh=ht,mh=Pr,gh=xr,_h=Ur,yh=ch?function(e,t){if(oh(e)&&!sh(e,"length").writable)throw ah("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},bh=lh,Sh=so,kh=qc,wh=ph,Th=bo("splice"),Eh=Math.max,Ih=Math.min;fh({target:"Array",proto:!0,forced:!Th},{splice:function(e,t){var n,r,i,o,a,s,c=vh(this),u=_h(c),l=mh(e,u),d=arguments.length;for(0===d?n=r=0:1===d?(n=0,r=u-l):(n=d-2,r=Ih(Eh(gh(t),0),u-l)),bh(u+n-r),i=Sh(c,r),o=0;o<r;o++)(a=l+o)in c&&kh(i,o,c[a]);if(i.length=r,n<r){for(o=l;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:wh(c,s);for(o=u;o>u-r+n;o--)wh(c,o-1)}else if(n>r)for(o=u-r;o>l;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:wh(c,s);for(o=0;o<n;o++)c[o+l]=arguments[o+2];return yh(c,u-r+n),i}});var Ch=O,xh=function(e,t){var n=[][e];return!!n&&Ch((function(){n.call(null,t||function(){return 1},1)}))},Rh=mo.forEach,Ah=xh("forEach")?[].forEach:function(e){return Rh(this,e,arguments.length>1?arguments[1]:void 0)};Ei({target:"Array",proto:!0,forced:[].forEach!=Ah},{forEach:Ah});var Oh=R,Ph=Td,Dh=Cd,Lh=Ah,Nh=Tn,Mh=function(e){if(e&&e.forEach!==Lh)try{Nh(e,"forEach",Lh)}catch(Yq){e.forEach=Lh}};for(var Uh in Ph)Ph[Uh]&&Mh(Oh[Uh]&&Oh[Uh].prototype);Mh(Dh);var jh=Ei,Vh=ae,Fh=pe,Bh=xh,$h=te([].join),Hh=Vh!=Object,zh=Bh("join",",");jh({target:"Array",proto:!0,forced:Hh||!zh},{join:function(e){return $h(Fh(this),void 0===e?",":e)}});var Wh=Ei,qh=O,Gh=Oi,Jh=be,Kh=ht,Qh=Ur,Xh=lh,Yh=qc,Zh=so,ep=bo,tp=De,np=Ot("isConcatSpreadable"),rp=tp>=51||!qh((function(){var e=[];return e[np]=!1,e.concat()[0]!==e})),ip=ep("concat"),op=function(e){if(!Jh(e))return!1;var t=e[np];return void 0!==t?!!t:Gh(e)};Wh({target:"Array",proto:!0,arity:1,forced:!rp||!ip},{concat:function(e){var t,n,r,i,o,a=Kh(this),s=Zh(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(op(o=-1===t?a:arguments[t]))for(i=Qh(o),Xh(c+i),n=0;n<i;n++,c++)n in o&&Yh(s,c,o[n]);else Xh(c+1),Yh(s,c++,o);return s.length=c,s}});var ap=te,sp=wr,cp=Date.prototype,up="Invalid Date",lp="toString",dp=ap(cp.toString),hp=ap(cp.getTime);String(new Date(NaN))!=up&&sp(cp,lp,(function(){var e=hp(this);return e==e?dp(this):up}));var pp=xr,fp=ad,vp=le,mp=RangeError,gp=function(e){var t=fp(vp(this)),n="",r=pp(e);if(r<0||1/0==r)throw mp("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},_p=te,yp=Nr,bp=ad,Sp=le,kp=_p(gp),wp=_p("".slice),Tp=Math.ceil,Ep=function(e){return function(t,n,r){var i,o,a=bp(Sp(t)),s=yp(n),c=a.length,u=void 0===r?" ":bp(r);return s<=c||""==u?a:((o=kp(u,Tp((i=s-c)/u.length))).length>i&&(o=wp(o,0,i)),e?a+o:o+a)}},Ip={start:Ep(!1),end:Ep(!0)},Cp=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Ie),xp=Ip.start;Ei({target:"String",proto:!0,forced:Cp},{padStart:function(e){return xp(this,e,arguments.length>1?arguments[1]:void 0)}});var Rp=ln,Ap=function(){var e=Rp(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},Op=O,Pp=R.RegExp,Dp=Op((function(){var e=Pp("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Lp=Dp||Op((function(){return!Pp("a","y").sticky})),Np={BROKEN_CARET:Dp||Op((function(){var e=Pp("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:Lp,UNSUPPORTED_Y:Dp},Mp=O,Up=R.RegExp,jp=Mp((function(){var e=Up(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Vp=O,Fp=R.RegExp,Bp=Vp((function(){var e=Fp("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),$p=M,Hp=te,zp=ad,Wp=Ap,qp=Np,Gp=nt.exports,Jp=fs,Kp=ar.get,Qp=jp,Xp=Bp,Yp=Gp("native-string-replace",String.prototype.replace),Zp=RegExp.prototype.exec,ef=Zp,tf=Hp("".charAt),nf=Hp("".indexOf),rf=Hp("".replace),of=Hp("".slice),af=function(){var e=/a/,t=/b*/g;return $p(Zp,e,"a"),$p(Zp,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),sf=qp.BROKEN_CARET,cf=void 0!==/()??/.exec("")[1];(af||cf||sf||Qp||Xp)&&(ef=function(e){var t,n,r,i,o,a,s,c=this,u=Kp(c),l=zp(e),d=u.raw;if(d)return d.lastIndex=c.lastIndex,t=$p(ef,d,l),c.lastIndex=d.lastIndex,t;var h=u.groups,p=sf&&c.sticky,f=$p(Wp,c),v=c.source,m=0,g=l;if(p&&(f=rf(f,"y",""),-1===nf(f,"g")&&(f+="g"),g=of(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==tf(l,c.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,m++),n=new RegExp("^(?:"+v+")",f)),cf&&(n=new RegExp("^"+v+"$(?!\\s)",f)),af&&(r=c.lastIndex),i=$p(Zp,p?n:c,g),p?i?(i.input=of(i.input,m),i[0]=of(i[0],m),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:af&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),cf&&i&&i.length>1&&$p(Yp,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&h)for(i.groups=a=Jp(null),o=0;o<h.length;o++)a[(s=h[o])[0]]=i[s[1]];return i});var uf=ef;Ei({target:"RegExp",proto:!0,forced:/./.exec!==uf},{exec:uf});var lf=te,df=wr,hf=uf,pf=O,ff=Ot,vf=Tn,mf=ff("species"),gf=RegExp.prototype,_f=function(e,t,n,r){var i=ff(e),o=!pf((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!pf((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[mf]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||n){var s=lf(/./[i]),c=t(i,""[e],(function(e,t,n,r,i){var a=lf(e),c=t.exec;return c===hf||c===gf.exec?o&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));df(String.prototype,e,c[0]),df(gf,i,c[1])}r&&vf(gf[i],"sham",!0)},yf=vd.charAt,bf=function(e,t,n){return t+(n?yf(e,t).length:1)},Sf=te,kf=ht,wf=Math.floor,Tf=Sf("".charAt),Ef=Sf("".replace),If=Sf("".slice),Cf=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,xf=/\$([$&'`]|\d{1,2})/g,Rf=M,Af=ln,Of=ge,Pf=Y,Df=uf,Lf=TypeError,Nf=function(e,t){var n=e.exec;if(Of(n)){var r=Rf(n,e,t);return null!==r&&Af(r),r}if("RegExp"===Pf(e))return Rf(Df,e,t);throw Lf("RegExp#exec called on incompatible receiver")},Mf=Hd,Uf=M,jf=te,Vf=_f,Ff=O,Bf=ln,$f=ge,Hf=se,zf=xr,Wf=Nr,qf=ad,Gf=le,Jf=bf,Kf=Xe,Qf=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,c=xf;return void 0!==i&&(i=kf(i),c=Cf),Ef(o,c,(function(o,c){var u;switch(Tf(c,0)){case"$":return"$";case"&":return e;case"`":return If(t,0,n);case"'":return If(t,a);case"<":u=i[If(c,1,-1)];break;default:var l=+c;if(0===l)return o;if(l>s){var d=wf(l/10);return 0===d?o:d<=s?void 0===r[d-1]?Tf(c,1):r[d-1]+Tf(c,1):o}u=r[l-1]}return void 0===u?"":u}))},Xf=Nf,Yf=Ot("replace"),Zf=Math.max,ev=Math.min,tv=jf([].concat),nv=jf([].push),rv=jf("".indexOf),iv=jf("".slice),ov="$0"==="a".replace(/./,"$0"),av=!!/./[Yf]&&""===/./[Yf]("a","$0"),sv=!Ff((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));Vf("replace",(function(e,t,n){var r=av?"$":"$0";return[function(e,n){var r=Gf(this),i=Hf(e)?void 0:Kf(e,Yf);return i?Uf(i,e,r,n):Uf(t,qf(r),e,n)},function(e,i){var o=Bf(this),a=qf(e);if("string"==typeof i&&-1===rv(i,r)&&-1===rv(i,"$<")){var s=n(t,o,a,i);if(s.done)return s.value}var c=$f(i);c||(i=qf(i));var u=o.global;if(u){var l=o.unicode;o.lastIndex=0}for(var d=[];;){var h=Xf(o,a);if(null===h)break;if(nv(d,h),!u)break;""===qf(h[0])&&(o.lastIndex=Jf(a,Wf(o.lastIndex),l))}for(var p,f="",v=0,m=0;m<d.length;m++){for(var g=qf((h=d[m])[0]),_=Zf(ev(zf(h.index),a.length),0),y=[],b=1;b<h.length;b++)nv(y,void 0===(p=h[b])?p:String(p));var S=h.groups;if(c){var k=tv([g],y,_,a);void 0!==S&&nv(k,S);var w=qf(Mf(i,void 0,k))}else w=Qf(g,a,_,y,S,i);_>=v&&(f+=iv(a,v,_)+w,v=_+g.length)}return f+iv(a,v)}]}),!sv||!ov||av);var cv=M,uv=vt,lv=Ee,dv=Ap,hv=RegExp.prototype,pv=function(e){var t=e.flags;return void 0!==t||"flags"in hv||uv(e,"flags")||!lv(hv,e)?t:cv(dv,e)},fv=On.PROPER,vv=wr,mv=ln,gv=ad,_v=O,yv=pv,bv="toString",Sv=RegExp.prototype.toString,kv=_v((function(){return"/a/b"!=Sv.call({source:"a",flags:"b"})})),wv=fv&&Sv.name!=bv;(kv||wv)&&vv(RegExp.prototype,bv,(function(){var e=mv(this);return"/"+gv(e.source)+"/"+gv(yv(e))}),{unsafe:!0});var Tv=O,Ev=Ot("iterator"),Iv=!Tv((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Ev]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),Cv=Yc,xv=Math.floor,Rv=function(e,t){var n=e.length,r=xv(n/2);return n<8?Av(e,t):Ov(e,Rv(Cv(e,0,r),t),Rv(Cv(e,r),t),t)},Av=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},Ov=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},Pv=Rv,Dv=Ei,Lv=R,Nv=M,Mv=te,Uv=P,jv=Iv,Vv=wr,Fv=Ul,Bv=qs,$v=Zs,Hv=ar,zv=ll,Wv=ge,qv=vt,Gv=Ri,Jv=Fi,Kv=ln,Qv=be,Xv=ad,Yv=fs,Zv=H,em=Hu,tm=Mu,nm=qd,rm=Pv,im=Ot("iterator"),om="URLSearchParams",am="URLSearchParamsIterator",sm=Hv.set,cm=Hv.getterFor(om),um=Hv.getterFor(am),lm=Object.getOwnPropertyDescriptor,dm=function(e){if(!Uv)return Lv[e];var t=lm(Lv,e);return t&&t.value},hm=dm("fetch"),pm=dm("Request"),fm=dm("Headers"),vm=pm&&pm.prototype,mm=fm&&fm.prototype,gm=Lv.RegExp,_m=Lv.TypeError,ym=Lv.decodeURIComponent,bm=Lv.encodeURIComponent,Sm=Mv("".charAt),km=Mv([].join),wm=Mv([].push),Tm=Mv("".replace),Em=Mv([].shift),Im=Mv([].splice),Cm=Mv("".split),xm=Mv("".slice),Rm=/\+/g,Am=Array(4),Om=function(e){return Am[e-1]||(Am[e-1]=gm("((?:%[\\da-f]{2}){"+e+"})","gi"))},Pm=function(e){try{return ym(e)}catch(Yq){return e}},Dm=function(e){var t=Tm(e,Rm," "),n=4;try{return ym(t)}catch(Yq){for(;n;)t=Tm(t,Om(n--),Pm);return t}},Lm=/[!'()~]|%20/g,Nm={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Mm=function(e){return Nm[e]},Um=function(e){return Tm(bm(e),Lm,Mm)},jm=$v((function(e,t){sm(this,{type:am,iterator:em(cm(e).entries),kind:t})}),"Iterator",(function(){var e=um(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),Vm=function(e){this.entries=[],this.url=null,void 0!==e&&(Qv(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Sm(e,0)?xm(e,1):e:Xv(e)))};Vm.prototype={type:om,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,c=tm(e);if(c)for(n=(t=em(e,c)).next;!(r=Nv(n,t)).done;){if(o=(i=em(Kv(r.value))).next,(a=Nv(o,i)).done||(s=Nv(o,i)).done||!Nv(o,i).done)throw _m("Expected sequence with length 2");wm(this.entries,{key:Xv(a.value),value:Xv(s.value)})}else for(var u in e)qv(e,u)&&wm(this.entries,{key:u,value:Xv(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=Cm(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=Cm(t,"="),wm(this.entries,{key:Dm(Em(n)),value:Dm(km(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],wm(n,Um(e.key)+"="+Um(e.value));return km(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Fm=function(){zv(this,Bm);var e=arguments.length>0?arguments[0]:void 0;sm(this,new Vm(e))},Bm=Fm.prototype;if(Fv(Bm,{append:function(e,t){nm(arguments.length,2);var n=cm(this);wm(n.entries,{key:Xv(e),value:Xv(t)}),n.updateURL()},delete:function(e){nm(arguments.length,1);for(var t=cm(this),n=t.entries,r=Xv(e),i=0;i<n.length;)n[i].key===r?Im(n,i,1):i++;t.updateURL()},get:function(e){nm(arguments.length,1);for(var t=cm(this).entries,n=Xv(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){nm(arguments.length,1);for(var t=cm(this).entries,n=Xv(e),r=[],i=0;i<t.length;i++)t[i].key===n&&wm(r,t[i].value);return r},has:function(e){nm(arguments.length,1);for(var t=cm(this).entries,n=Xv(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){nm(arguments.length,1);for(var n,r=cm(this),i=r.entries,o=!1,a=Xv(e),s=Xv(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?Im(i,c--,1):(o=!0,n.value=s));o||wm(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=cm(this);rm(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=cm(this).entries,r=Gv(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new jm(this,"keys")},values:function(){return new jm(this,"values")},entries:function(){return new jm(this,"entries")}},{enumerable:!0}),Vv(Bm,im,Bm.entries,{name:"entries"}),Vv(Bm,"toString",(function(){return cm(this).serialize()}),{enumerable:!0}),Bv(Fm,om),Dv({global:!0,constructor:!0,forced:!jv},{URLSearchParams:Fm}),!jv&&Wv(fm)){var $m=Mv(mm.has),Hm=Mv(mm.set),zm=function(e){if(Qv(e)){var t,n=e.body;if(Jv(n)===om)return t=e.headers?new fm(e.headers):new fm,$m(t,"content-type")||Hm(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Yv(e,{body:Zv(0,Xv(n)),headers:Zv(0,t)})}return e};if(Wv(hm)&&Dv({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return hm(e,arguments.length>1?zm(arguments[1]):{})}}),Wv(pm)){var Wm=function(e){return zv(this,vm),new pm(e,arguments.length>1?zm(arguments[1]):{})};vm.constructor=Wm,Wm.prototype=vm,Dv({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Wm})}}var qm={URLSearchParams:Fm,getState:cm},Gm=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},Jm=M,Km=ln,Qm=se,Xm=le,Ym=Gm,Zm=ad,eg=Xe,tg=Nf;_f("search",(function(e,t,n){return[function(t){var n=Xm(this),r=Qm(t)?void 0:eg(t,e);return r?Jm(r,t,n):new RegExp(t)[e](Zm(n))},function(e){var r=Km(this),i=Zm(e),o=n(t,r,i);if(o.done)return o.value;var a=r.lastIndex;Ym(a,0)||(r.lastIndex=0);var s=tg(r,i);return Ym(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]})),(new Date).getTime();var ng=0,rg=function(){return(new Date).getTime()+ng},ig=function(){var e=new Date;return e.setTime(rg()),e.toLocaleString()},og=M,ag=ln,sg=se,cg=Nr,ug=ad,lg=le,dg=Xe,hg=bf,pg=Nf;_f("match",(function(e,t,n){return[function(t){var n=lg(this),r=sg(t)?void 0:dg(t,e);return r?og(r,t,n):new RegExp(t)[e](ug(n))},function(e){var r=ag(this),i=ug(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return pg(r,i);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=pg(r,i));){var l=ug(s[0]);c[u]=l,""===l&&(r.lastIndex=hg(i,cg(r.lastIndex),a)),u++}return 0===u?null:c}]}));var fg=be,vg=Y,mg=Ot("match"),gg=function(e){var t;return fg(e)&&(void 0!==(t=e[mg])?!!t:"RegExp"==vg(e))},_g=on.f,yg=P,bg=R,Sg=te,kg=gi,wg=yl,Tg=Tn,Eg=Tr.f,Ig=Ee,Cg=gg,xg=ad,Rg=pv,Ag=Np,Og=function(e,t,n){n in e||_g(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},Pg=wr,Dg=O,Lg=vt,Ng=ar.enforce,Mg=$l,Ug=jp,jg=Bp,Vg=Ot("match"),Fg=bg.RegExp,Bg=Fg.prototype,$g=bg.SyntaxError,Hg=Sg(Bg.exec),zg=Sg("".charAt),Wg=Sg("".replace),qg=Sg("".indexOf),Gg=Sg("".slice),Jg=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Kg=/a/g,Qg=/a/g,Xg=new Fg(Kg)!==Kg,Yg=Ag.MISSED_STICKY,Zg=Ag.UNSUPPORTED_Y,e_=yg&&(!Xg||Yg||Ug||jg||Dg((function(){return Qg[Vg]=!1,Fg(Kg)!=Kg||Fg(Qg)==Qg||"/a/i"!=Fg(Kg,"i")})));if(kg("RegExp",e_)){for(var t_=function(e,t){var n,r,i,o,a,s,c=Ig(Bg,this),u=Cg(e),l=void 0===t,d=[],h=e;if(!c&&u&&l&&e.constructor===t_)return e;if((u||Ig(Bg,e))&&(e=e.source,l&&(t=Rg(h))),e=void 0===e?"":xg(e),t=void 0===t?"":xg(t),h=e,Ug&&"dotAll"in Kg&&(r=!!t&&qg(t,"s")>-1)&&(t=Wg(t,/s/g,"")),n=t,Yg&&"sticky"in Kg&&(i=!!t&&qg(t,"y")>-1)&&Zg&&(t=Wg(t,/y/g,"")),jg&&(o=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,c=!1,u=0,l="";r<=n;r++){if("\\"===(t=zg(e,r)))t+=zg(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:Hg(Jg,Gg(e,r+1))&&(r+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||Lg(a,l))throw new $g("Invalid capture group name");a[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],d=o[1]),a=wg(Fg(e,t),c?this:Bg,t_),(r||i||d.length)&&(s=Ng(a),r&&(s.dotAll=!0,s.raw=t_(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=zg(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+zg(e,++r);return i}(e),n)),i&&(s.sticky=!0),d.length&&(s.groups=d)),e!==h)try{Tg(a,"source",""===h?"(?:)":h)}catch(Yq){}return a},n_=Eg(Fg),r_=0;n_.length>r_;)Og(t_,Fg,n_[r_++]);Bg.constructor=t_,t_.prototype=Bg,Pg(bg,"RegExp",t_,{constructor:!0})}Mg("RegExp");var i_=te(1..valueOf),o_="\t\n\v\f\r                　\u2028\u2029\ufeff",a_=le,s_=ad,c_=te("".replace),u_="[\t\n\v\f\r                　\u2028\u2029\ufeff]",l_=RegExp("^"+u_+u_+"*"),d_=RegExp(u_+u_+"*$"),h_=function(e){return function(t){var n=s_(a_(t));return 1&e&&(n=c_(n,l_,"")),2&e&&(n=c_(n,d_,"")),n}},p_={start:h_(1),end:h_(2),trim:h_(3)},f_=P,v_=R,m_=te,g_=gi,__=wr,y_=vt,b_=yl,S_=Ee,k_=$e,w_=Vt,T_=O,E_=Tr.f,I_=A.f,C_=on.f,x_=i_,R_=p_.trim,A_="Number",O_=v_.Number,P_=O_.prototype,D_=v_.TypeError,L_=m_("".slice),N_=m_("".charCodeAt),M_=function(e){var t=w_(e,"number");return"bigint"==typeof t?t:U_(t)},U_=function(e){var t,n,r,i,o,a,s,c,u=w_(e,"number");if(k_(u))throw D_("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=R_(u),43===(t=N_(u,0))||45===t){if(88===(n=N_(u,2))||120===n)return NaN}else if(48===t){switch(N_(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=L_(u,2)).length,s=0;s<a;s++)if((c=N_(o,s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(g_(A_,!O_(" 0o1")||!O_("0b1")||O_("+0x1"))){for(var j_,V_=function(e){var t=arguments.length<1?0:O_(M_(e)),n=this;return S_(P_,n)&&T_((function(){x_(n)}))?b_(Object(t),n,V_):t},F_=f_?E_(O_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),B_=0;F_.length>B_;B_++)y_(O_,j_=F_[B_])&&!y_(V_,j_)&&C_(V_,j_,I_(O_,j_));V_.prototype=P_,P_.constructor=V_,__(v_,A_,V_,{constructor:!0})}var $_=Ei,H_=$r.indexOf,z_=xh,W_=te([].indexOf),q_=!!W_&&1/W_([1],1,-0)<0,G_=z_("indexOf");$_({target:"Array",proto:!0,forced:q_||!G_},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return q_?W_(this,e,t)||0:H_(this,e,t)}});var J_=ht,K_=Ds,Q_=Es;Ei({target:"Object",stat:!0,forced:O((function(){K_(1)})),sham:!Q_},{getPrototypeOf:function(e){return K_(J_(e))}});var X_=Hd,Y_=Je,Z_=ln;Ei({target:"Reflect",stat:!0,forced:!O((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,n){return X_(Y_(e),t,Z_(n))}});var ey=P,ty=On.EXISTS,ny=te,ry=on.f,iy=Function.prototype,oy=ny(iy.toString),ay=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,sy=ny(ay.exec);ey&&!ty&&ry(iy,"name",{configurable:!0,get:function(){try{return sy(ay,oy(this))[1]}catch(Yq){return""}}});var cy=Ei,uy=Date,ly=te(uy.prototype.getTime);cy({target:"Date",stat:!0},{now:function(){return ly(new uy)}});var dy,hy,py,fy,vy="process"==Y(R.process),my=eo,gy=ze,_y=TypeError,yy=function(e){if(my(e))return e;throw _y(gy(e)+" is not a constructor")},by=ln,Sy=yy,ky=se,wy=Ot("species"),Ty=function(e,t){var n,r=by(e).constructor;return void 0===r||ky(n=by(r)[wy])?t:Sy(n)},Ey=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ie),Iy=R,Cy=Hd,xy=Ri,Ry=ge,Ay=vt,Oy=O,Py=ns,Dy=zd,Ly=qt,Ny=qd,My=Ey,Uy=vy,jy=Iy.setImmediate,Vy=Iy.clearImmediate,Fy=Iy.process,By=Iy.Dispatch,$y=Iy.Function,Hy=Iy.MessageChannel,zy=Iy.String,Wy=0,qy={},Gy="onreadystatechange";try{dy=Iy.location}catch(Yq){}var Jy=function(e){if(Ay(qy,e)){var t=qy[e];delete qy[e],t()}},Ky=function(e){return function(){Jy(e)}},Qy=function(e){Jy(e.data)},Xy=function(e){Iy.postMessage(zy(e),dy.protocol+"//"+dy.host)};jy&&Vy||(jy=function(e){Ny(arguments.length,1);var t=Ry(e)?e:$y(e),n=Dy(arguments,1);return qy[++Wy]=function(){Cy(t,void 0,n)},hy(Wy),Wy},Vy=function(e){delete qy[e]},Uy?hy=function(e){Fy.nextTick(Ky(e))}:By&&By.now?hy=function(e){By.now(Ky(e))}:Hy&&!My?(fy=(py=new Hy).port2,py.port1.onmessage=Qy,hy=xy(fy.postMessage,fy)):Iy.addEventListener&&Ry(Iy.postMessage)&&!Iy.importScripts&&dy&&"file:"!==dy.protocol&&!Oy(Xy)?(hy=Xy,Iy.addEventListener("message",Qy,!1)):hy=Gy in Ly("script")?function(e){Py.appendChild(Ly("script")).onreadystatechange=function(){Py.removeChild(this),Jy(e)}}:function(e){setTimeout(Ky(e),0)});var Yy,Zy,eb,tb,nb,rb,ib,ob,ab={set:jy,clear:Vy},sb=R,cb=/ipad|iphone|ipod/i.test(Ie)&&void 0!==sb.Pebble,ub=/web0s(?!.*chrome)/i.test(Ie),lb=R,db=Ri,hb=A.f,pb=ab.set,fb=Ey,vb=cb,mb=ub,gb=vy,_b=lb.MutationObserver||lb.WebKitMutationObserver,yb=lb.document,bb=lb.process,Sb=lb.Promise,kb=hb(lb,"queueMicrotask"),wb=kb&&kb.value;wb||(Yy=function(){var e,t;for(gb&&(e=bb.domain)&&e.exit();Zy;){t=Zy.fn,Zy=Zy.next;try{t()}catch(Yq){throw Zy?tb():eb=void 0,Yq}}eb=void 0,e&&e.enter()},fb||gb||mb||!_b||!yb?!vb&&Sb&&Sb.resolve?((ib=Sb.resolve(void 0)).constructor=Sb,ob=db(ib.then,ib),tb=function(){ob(Yy)}):gb?tb=function(){bb.nextTick(Yy)}:(pb=db(pb,lb),tb=function(){pb(Yy)}):(nb=!0,rb=yb.createTextNode(""),new _b(Yy).observe(rb,{characterData:!0}),tb=function(){rb.data=nb=!nb}));var Tb=wb||function(e){var t={fn:e,next:void 0};eb&&(eb.next=t),Zy||(Zy=t,tb()),eb=t},Eb=R,Ib=function(e){try{return{error:!1,value:e()}}catch(Yq){return{error:!0,value:Yq}}},Cb=function(){this.head=null,this.tail=null};Cb.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var xb=Cb,Rb=R.Promise,Ab="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Ob=!Ab&&!vy&&"object"==typeof window&&"object"==typeof document,Pb=R,Db=Rb,Lb=ge,Nb=gi,Mb=jn,Ub=Ot,jb=Ob,Vb=Ab,Fb=De;Db&&Db.prototype;var Bb=Ub("species"),$b=!1,Hb=Lb(Pb.PromiseRejectionEvent),zb=Nb("Promise",(function(){var e=Mb(Db),t=e!==String(Db);if(!t&&66===Fb)return!0;if(!Fb||Fb<51||!/native code/.test(e)){var n=new Db((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Bb]=r,!($b=n.then((function(){}))instanceof r))return!0}return!t&&(jb||Vb)&&!Hb})),Wb={CONSTRUCTOR:zb,REJECTION_EVENT:Hb,SUBCLASSING:$b},qb={},Gb=Je,Jb=TypeError,Kb=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw Jb("Bad Promise constructor");t=e,n=r})),this.resolve=Gb(t),this.reject=Gb(n)};qb.f=function(e){return new Kb(e)};var Qb,Xb,Yb,Zb=Ei,eS=vy,tS=R,nS=M,rS=wr,iS=ac,oS=qs,aS=$l,sS=Je,cS=ge,uS=be,lS=ll,dS=Ty,hS=ab.set,pS=Tb,fS=function(e,t){var n=Eb.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},vS=Ib,mS=xb,gS=ar,_S=Rb,yS=qb,bS="Promise",SS=Wb.CONSTRUCTOR,kS=Wb.REJECTION_EVENT,wS=Wb.SUBCLASSING,TS=gS.getterFor(bS),ES=gS.set,IS=_S&&_S.prototype,CS=_S,xS=IS,RS=tS.TypeError,AS=tS.document,OS=tS.process,PS=yS.f,DS=PS,LS=!!(AS&&AS.createEvent&&tS.dispatchEvent),NS="unhandledrejection",MS=function(e){var t;return!(!uS(e)||!cS(t=e.then))&&t},US=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&$S(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(RS("Promise-chain cycle")):(r=MS(n))?nS(r,n,c,u):c(n)):u(o)}catch(Yq){l&&!i&&l.exit(),u(Yq)}},jS=function(e,t){e.notified||(e.notified=!0,pS((function(){for(var n,r=e.reactions;n=r.get();)US(n,e);e.notified=!1,t&&!e.rejection&&FS(e)})))},VS=function(e,t,n){var r,i;LS?((r=AS.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),tS.dispatchEvent(r)):r={promise:t,reason:n},!kS&&(i=tS["on"+e])?i(r):e===NS&&fS("Unhandled promise rejection",n)},FS=function(e){nS(hS,tS,(function(){var t,n=e.facade,r=e.value;if(BS(e)&&(t=vS((function(){eS?OS.emit("unhandledRejection",r,n):VS(NS,n,r)})),e.rejection=eS||BS(e)?2:1,t.error))throw t.value}))},BS=function(e){return 1!==e.rejection&&!e.parent},$S=function(e){nS(hS,tS,(function(){var t=e.facade;eS?OS.emit("rejectionHandled",t):VS("rejectionhandled",t,e.value)}))},HS=function(e,t,n){return function(r){e(t,r,n)}},zS=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,jS(e,!0))},WS=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw RS("Promise can't be resolved itself");var r=MS(t);r?pS((function(){var n={done:!1};try{nS(r,t,HS(WS,n,e),HS(zS,n,e))}catch(Yq){zS(n,Yq,e)}})):(e.value=t,e.state=1,jS(e,!1))}catch(Yq){zS({done:!1},Yq,e)}}};if(SS&&(xS=(CS=function(e){lS(this,xS),sS(e),nS(Qb,this);var t=TS(this);try{e(HS(WS,t),HS(zS,t))}catch(Yq){zS(t,Yq)}}).prototype,(Qb=function(e){ES(this,{type:bS,done:!1,notified:!1,parent:!1,reactions:new mS,rejection:!1,state:0,value:void 0})}).prototype=rS(xS,"then",(function(e,t){var n=TS(this),r=PS(dS(this,CS));return n.parent=!0,r.ok=!cS(e)||e,r.fail=cS(t)&&t,r.domain=eS?OS.domain:void 0,0==n.state?n.reactions.add(r):pS((function(){US(r,n)})),r.promise})),Xb=function(){var e=new Qb,t=TS(e);this.promise=e,this.resolve=HS(WS,t),this.reject=HS(zS,t)},yS.f=PS=function(e){return e===CS||void 0===e?new Xb(e):DS(e)},cS(_S)&&IS!==Object.prototype)){Yb=IS.then,wS||rS(IS,"then",(function(e,t){var n=this;return new CS((function(e,t){nS(Yb,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete IS.constructor}catch(Yq){}iS&&iS(IS,xS)}Zb({global:!0,constructor:!0,wrap:!0,forced:SS},{Promise:CS}),oS(CS,bS,!1),aS(bS);var qS=Rb,GS=Wb.CONSTRUCTOR||!vl((function(e){qS.all(e).then(void 0,(function(){}))})),JS=M,KS=Je,QS=qb,XS=Ib,YS=sl;Ei({target:"Promise",stat:!0,forced:GS},{all:function(e){var t=this,n=QS.f(t),r=n.resolve,i=n.reject,o=XS((function(){var n=KS(t.resolve),o=[],a=0,s=1;YS(e,(function(e){var c=a++,u=!1;s++,JS(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var ZS=Ei,ek=Wb.CONSTRUCTOR,tk=Rb,nk=Te,rk=ge,ik=wr,ok=tk&&tk.prototype;if(ZS({target:"Promise",proto:!0,forced:ek,real:!0},{catch:function(e){return this.then(void 0,e)}}),rk(tk)){var ak=nk("Promise").prototype.catch;ok.catch!==ak&&ik(ok,"catch",ak,{unsafe:!0})}var sk=M,ck=Je,uk=qb,lk=Ib,dk=sl;Ei({target:"Promise",stat:!0,forced:GS},{race:function(e){var t=this,n=uk.f(t),r=n.reject,i=lk((function(){var i=ck(t.resolve);dk(e,(function(e){sk(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var hk=M,pk=qb;Ei({target:"Promise",stat:!0,forced:Wb.CONSTRUCTOR},{reject:function(e){var t=pk.f(this);return hk(t.reject,void 0,e),t.promise}});var fk=ln,vk=be,mk=qb,gk=Ei,_k=Wb.CONSTRUCTOR,yk=function(e,t){if(fk(e),vk(t)&&t.constructor===e)return t;var n=mk.f(e);return(0,n.resolve)(t),n.promise};Te("Promise"),gk({target:"Promise",stat:!0,forced:_k},{resolve:function(e){return yk(this,e)}});var bk=R,Sk=O,kk=ad,wk=p_.trim,Tk=te("".charAt),Ek=bk.parseFloat,Ik=bk.Symbol,Ck=Ik&&Ik.iterator,xk=1/Ek("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0||Ck&&!Sk((function(){Ek(Object(Ck))}))?function(e){var t=wk(kk(e)),n=Ek(t);return 0===n&&"-"==Tk(t,0)?-0:n}:Ek;Ei({global:!0,forced:parseFloat!=xk},{parseFloat:xk});var Rk=window.navigator&&window.navigator.userAgent||"",Ak=/AppleWebKit\/([\d.]+)/i.exec(Rk);Ak&&parseFloat(Ak.pop());var Ok=/iPad/i.test(Rk),Pk=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Macintosh/.test(Rk),Dk=/iPhone/i.test(Rk)&&!Ok,Lk=/iPod/i.test(Rk),Nk=Dk||Ok||Lk||Pk,Mk=/Android/i.test(Rk);Mk&&function(){var e=Rk.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),Mk&&/webkit/i.test(Rk);var Uk=/Firefox/i.test(Rk),jk=Uk&&function(){var e=Rk.match(/Firefox\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Vk=/Edge\//i.test(Rk),Fk=Vk&&function(){var e=Rk.match(/Edge\/(\d+)/i);if(e&&e[1])return e[1]}(),Bk=/Edg\//i.test(Rk),$k=Bk&&function(){var e=Rk.match(/Edg\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Hk=/SogouMobileBrowser\//i.test(Rk),zk=Hk&&function(){var e=Rk.match(/SogouMobileBrowser\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),Wk=/MetaSr\s/i.test(Rk),qk=Wk&&function(){var e=Rk.match(/MetaSr(\s\d+(\.\d+)+)/);return e&&e[1]?parseFloat(e[1]):null}(),Gk=/TBS\/\d+/i.test(Rk),Jk=Gk&&function(){var e=Rk.match(/TBS\/(\d+)/i);if(e&&e[1])return e[1]}(),Kk=/XWEB\/\d+/i.test(Rk),Qk=Kk&&function(){var e=Rk.match(/XWEB\/(\d+)/i);if(e&&e[1])return e[1]}();/MSIE\s8\.0/.test(Rk),/MSIE\/\d+/i.test(Rk)&&function(){var e=/MSIE\s(\d+)\.\d/.exec(Rk),t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(Rk)&&/rv:11.0/.test(Rk)&&(t=11)}();var Xk=/(micromessenger|webbrowser)/i.test(Rk),Yk=Xk&&function(){var e=Rk.match(/MicroMessenger\/(\d+)/i);if(e&&e[1])return e[1]}(),Zk=!Gk&&/MQQBrowser\/\d+/i.test(Rk)&&/COVC\/\d+/i.test(Rk),ew=!Gk&&/MQQBrowser\/\d+/i.test(Rk)&&!/COVC\/\d+/i.test(Rk),tw=(ew||Zk)&&function(){var e=Rk.match(/ MQQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),nw=!Gk&&/ QQBrowser\/\d+/i.test(Rk),rw=nw&&function(){var e=Rk.match(/ QQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),iw=!Gk&&/QQBrowserLite\/\d+/i.test(Rk),ow=iw&&function(){var e=Rk.match(/QQBrowserLite\/([\d.]+)/);return e&&e[1]?e[1]:null}(),aw=!Gk&&/MQBHD\/\d+/i.test(Rk),sw=aw&&function(){var e=Rk.match(/MQBHD\/([\d.]+)/);return e&&e[1]?e[1]:null}(),cw=/Windows/i.test(Rk),uw=!Nk&&/MAC OS X/i.test(Rk),lw=!Mk&&/Linux/i.test(Rk);/MicroMessenger/i.test(Rk);var dw=/UCBrowser/i.test(Rk);/Electron/i.test(Rk);var hw,pw,fw=/MiuiBrowser/i.test(Rk),vw=fw&&function(){var e=Rk.match(/MiuiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),mw=/HuaweiBrowser/i.test(Rk),gw=/Huawei/i.test(Rk),_w=mw&&function(){var e=Rk.match(/HuaweiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),yw=/SamsungBrowser/i.test(Rk),bw=yw&&function(){var e=Rk.match(/SamsungBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Sw=/HeyTapBrowser/i.test(Rk),kw=Sw&&function(){var e=Rk.match(/HeyTapBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),ww=/VivoBrowser/i.test(Rk),Tw=ww&&function(){var e=Rk.match(/VivoBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Ew=function(){var e=Rk.match(/Chrome\/(\d+)/);return e&&e[1]?Number(e[1]):null},Iw=/Chrome/i.test(Rk),Cw=!Vk&&!Wk&&!Hk&&!Gk&&!Kk&&!Bk&&!nw&&!fw&&!mw&&!yw&&!Sw&&!ww&&/Chrome/i.test(Rk),xw=Cw&&Ew(),Rw=Cw&&function(){var e=Rk.match(/Chrome\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Aw=!Iw&&!ew&&!Zk&&!iw&&!aw&&/Safari/i.test(Rk),Ow=function(){if(Aw){var e=Rk.match(/Version\/([\d.]+)/);if(e&&e[1])return e[1]}return""}(),Pw=/Android.*(wv|.0.0.0)/.test(Rk),Dw=function(){if(Pk)return Ow;if(Nk){var e=Rk.match(/OS (\d+)_(\d+)/i);if(e&&e[1]){var t=e[1];return e[2]&&(t+=".".concat(e[2])),t}}return""}(),Lw="15.1"===Ow,Nw="15.1"===Dw,Mw=14===(hw=Number(Dw.split(".")[0]))||13===hw,Uw="file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname,jw=function(){if(lR(pw))try{pw=window.localStorage}catch(Yq){PA.warn(Yq),pw=!1}return pw},Vw=new Map([[Uk,["Firefox",jk]],[Bk,["Edg",$k]],[Cw,["Chrome",Rw]],[Aw,["Safari",Ow]],[Gk,["TBS",Jk]],[Kk,["XWEB",Qk]],[Xk&&Dk,["WeChat",Yk]],[nw,["QQ(Win)",rw]],[ew,["QQ(Mobile)",tw]],[Zk,["QQ(Mobile X5)",tw]],[iw,["QQ(Mac)",ow]],[aw,["QQ(iPad)",sw]],[fw,["MI",vw]],[mw,["HW",_w]],[yw,["Samsung",bw]],[Sw,["OPPO",kw]],[ww,["VIVO",Tw]],[Vk,["EDGE",Fk]],[Hk,["SogouMobile",zk]],[Wk,["Sogou",qk]]]);function Fw(){var e="unknown",t="unknown";return Vw.get(!0)&&(e=Vw.get(!0)[0],t=Vw.get(!0)[1]),{name:e,version:t}}var Bw=ht,$w=Ja;Ei({target:"Object",stat:!0,forced:O((function(){$w(1)}))},{keys:function(e){return $w(Bw(e))}});var Hw="canvas",zw="audio",Ww="video",qw="screen",Gw="small",Jw="big",Kw="auxiliary",Qw="smallVideo",Xw="user",Yw="environment",Zw="mute",eT="unmute",tT="ended",nT="playing",rT="pause",iT="error",oT="loadeddata",aT="audioinput",sT="videoinput",cT="detail",uT="text",lT="main",dT="backup",hT="banned",pT="kick",fT="user_time_out",vT="room_disband",mT="sei-message",gT="PLAYING",_T="PAUSED",yT="STOPPED",bT="inactive",ST="sendonly",kT="recvonly",wT="add",TT="remove",ET="replace",IT="track",CT="wss://trtc.rtc.qq.com",xT="wss://webrtc.qq.com",RT="qcloud",AT="trtc",OT="webrtc",PT="",DT="jssdk_log",LT="jssdk_event",NT="jssdk_new_endreport",MT=function(e){return PT=e},UT=1,jT=2,VT="live",FT=20,BT=21,$T="anchor",HT="audience",zT="5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV",WT="224d130c-7b5c-415b-aaa2-79c2eb5a6df2",qT=2,GT=lT,JT=Kw,KT="unknown",QT="DISCONNECTED",XT="CONNECTING",YT="RECONNECTING",ZT="CONNECTED",eE="new",tE="connecting",nE="failed",rE="closed",iE="disconnected",oE="connected",aE="completed",sE=30,cE="join",uE="delta-join",lE="rejoin",dE="leave",hE="delta-leave",pE="publish",fE="delta-publish",vE="unpublish",mE="subscribe",gE="unsubscribe",_E="uplink-connection",yE="uplink-reconnection",bE="downlink-connection",SE="downlink-reconnection",kE="setLocalDescription",wE="setRemoteDescription",TE="iceConnectionState",EE="stream-initialize",IE="websocketConnectionState",CE="websocketReconnectionState",xE="update-stream",RE="recover-subscription",AE="start-mix-transcode",OE="stop-mix-transcode",PE="player-error",DE="schedule",LE="load-worklet",NE="unsubscribe",ME="subscribe_change",UE="unified-plan",jE="plan-b",VE={MANUAL:"manual",PRESET_LAYOUT:"preset-layout"},FE={REMOTE:"$PLACE_HOLDER_REMOTE$"},BE={IT_AUDIO_VIDEO:0,IT_PICTURE:2,IT_CANVAS:3,IT_PURE_AUDIO:4,IT_PURE_VIDEO:5},$E="string",HE="number",zE="boolean",WE="array",qE="object",GE={ADD:wT,REMOVE:TT},JE={unknown:0,wifi:1,"4g":2,"3g":3,"2g":4,wired:5},KE=-1,QE=0,XE=1,YE=Jw,ZE=Gw,eI=6048e5,tI="schedule.rtc.qq.com",nI="schedule.rtc.qcloud.com",rI="schedule.rtc.tencentcloud.com",iI="schedule-ecdn.rtc.tencentcloud.com",oI="TRTC",aI="Client",sI="LocalStream",cI="RemoteStream",uI="Stream",lI="web.sdk.qcloud.com",dI="web.sdk.tencent.cn",hI="web.sdk.cloud.tencent.cn",pI="https://console.cloud.tencent.com/trtc",fI="https://".concat(lI,"/trtc/webrtc/doc"),vI="".concat(fI,"/zh-cn/"),mI="trtc_error_assistance",gI="default",_I="communications",yI={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5},bI=Object.keys(yI),SI=["normal leave","timeout leave","kick","role change"],kI=2e3,wI="ric",TI="raf",EI="interval",II="timeout",CI=le,xI=ad,RI=/"/g,AI=te("".replace),OI=function(e,t,n,r){var i=xI(CI(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+AI(xI(r),RI,"&quot;")+'"'),o+">"+i+"</"+t+">"},PI=O,DI=function(e){return PI((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))},LI=OI;Ei({target:"String",proto:!0,forced:DI("link")},{link:function(e){return LI(this,"a","href",e)}}),Ei({target:"Array",stat:!0},{isArray:Oi});var NI=$r.includes,MI=ws;Ei({target:"Array",proto:!0,forced:O((function(){return!Array(1).includes()}))},{includes:function(e){return NI(this,e,arguments.length>1?arguments[1]:void 0)}}),MI("includes");var UI=gg,jI=TypeError,VI=function(e){if(UI(e))throw jI("The method doesn't accept regular expressions");return e},FI=Ot("match"),BI=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[FI]=!1,"/./"[e](t)}catch(i){}}return!1},$I=Ei,HI=VI,zI=le,WI=ad,qI=BI,GI=te("".indexOf);$I({target:"String",proto:!0,forced:!qI("includes")},{includes:function(e){return!!~GI(WI(zI(this)),WI(HI(e)),arguments.length>1?arguments[1]:void 0)}});var JI="AVOID_REPEATED_CALL",KI="INVALID_PARAMETER_REQUIRED",QI="INVALID_PARAMETER_TYPE",XI="INVALID_PARAMETER_EMPTY",YI="INVALID_PARAMETER_INSTANCE",ZI="INVALID_PARAMETER_RANGE",eC="API_CALL_TIMEOUT",tC="SIGNAL_CHANNEL_RECONNECTION_FAILED",nC="SIGNAL_CHANNEL_SETUP_FAILED",rC="ERROR_MESSAGE",iC="EXCHANGE_SDP_TIMEOUT",oC="DOWNLINK_RECONNECTION_FAILED",aC="EXCHANGE_SDP_FAILED",sC="UPLINK_RECONNECTION_FAILED",cC="INVALID_PURE_AUDIO",uC="INVALID_STREAMID",lC="INVALID_USER_DEFINE_RECORDID",dC="INVALID_USER_DEFINE_PUSH_ARGS",hC="INVALID_PROXY",pC="INVALID_JOIN",fC="INVALID_ROOMID_STRING",vC="INVALID_ROOMID_INTEGER",mC="JOIN_ROOM_TIMEOUT",gC="JOIN_ROOM_FAILED",_C="REJOIN_ROOM_FAILED",yC="INVALID_DESTROY",bC="INVALID_PUBLISH",SC="INVALID_UNPUBLISH",kC="INVALID_AUDIENCE",wC="INVALID_INITIALIZE",TC="INVALID_DUPLICATE_PUBLISHING",EC="INVALID_REMOTE_STREAM",IC="SUBSCRIBE_FAILED",CC="INVALID_ROLE",xC="INVALID_OPERATION_SWITCH_ROLE",RC="SWITCH_ROLE_TIMEOUT",AC="SWITCH_ROLE_FAILED",OC="CLIENT_BANNED",PC="INVALID_OPERATION_START_PUBLISH_CDN",DC="INVALID_OPERATION_STOP_PUBLISH_CDN",LC="INVALID_STREAM_ID",NC="START_PUBLISH_CDN_FAILED",MC="STOP_PUBLISH_CDN_FAILED",UC="START_MIX_TRANSCODE",jC="STOP_MIX_TRANSCODE",VC="INVALID_AUDIO_VOLUME",FC="ENABLE_SMALL_STREAM_PUBLISHED",BC="DISABLE_SMALL_STREAM_PUBLISHED",$C="NOT_SUPPORTED_SMALL_STREAM",HC="INVALID_SMALL_STREAM_PROFILE",zC="INVALID_PARAMETER_REMOTE_STREAM",WC="INVALID_SWITCH_DEVICE",qC="INVALID_SWITCH_DEVICE_PUBLISHING",GC="INVALID_REPLACE_TRACK",JC="INVALID_INITIALIZE_LOCAL_STREAM",KC="INVALID_ADD_TRACK_REPETITIVE",QC="INVALID_ADD_TRACK_REMOVING",XC="INVALID_ADD_TRACK_PUBLISHING",YC="INVALID_STREAM_INITIALIZED",ZC="INVALID_ADD_TRACK_NUMBER",ex="INVALID_REMOVE_AUDIO_TRACK",tx="INVALID_REMOVE_AUDIO_ADDING",nx="INVALID_REMOVE_AUDIO_ON",rx="INVALID_REMOVE_TRACK_PUBLISHING",ix="INVALID_REMOVE_TRACK_NOT_PUBLISHING",ox="INVALID_REMOVE_TRACK_NUMBER",ax="INVALID_REPLACE_TRACK_NO_TRACK",sx="REPEAT_JOIN",cx="CLIENT_DESTROYED",ux="START_MIX_TRANSCODE_FAILED",lx="STOP_MIX_TRANSCODE_FAILED",dx="MIX_TRANSCODE_NOT_STARTED",hx="CANNOT_LESS_THAN_ZERO",px="MIX_PARAMS_VIDEO_FRAMERATE",fx="MIX_PARAMS_VIDEO_GOP",vx="MIX_PARAMS_AUDIO_BITRATE",mx="MIX_PARAMS_USER_Z_ORDER",gx="MIX_PARAMS_NOT_SELF",_x="MIX_PARAMS_USER_STREAM",yx="INVALID_ELEMENT_ID",bx="INVALID_ELEMENT_ID_TYPE",Sx="PLAY_FAILED",kx="INVALID_CREATE_STREAM_SOURCE",wx="INVALID_CREATE_STREAM_SCREEN",Tx="INVALID_CREATE_STREAM_AUDIO",Ex="INVALID_CREATE_STREAM_SCREEN_AUDIO",Ix="NOT_SUPPORTED_HTTP",Cx="NOT_SUPPORTED_WEBRTC",xx="NOT_SUPPORTED_PROFILE",Rx="NOT_SUPPORTED_H264ENCODE",Ax="NOT_SUPPORTED_H264DECODE",Ox="NOT_SUPPORTED_TRACK",Px="NOT_SUPPORTED_SWITCH_DEVICE",Dx="NOT_SUPPORTED_CAPTURE",Lx="NOT_SUPPORTED_AUX",Nx="MICROPHONE_NOT_FOUND",Mx="CAMERA_NOT_FOUND",Ux="SIGNAL_RESPONSE_FAILED",jx="CATCH_HANDLER_ERROR",Vx="API_NOT_EXIST",Fx="CONNECTION_CLOSED",Bx="SUBSCRIBE_ALL_FALSE",$x="SEI_NOT_SUPPORT",Hx="SEI_DISABLED",zx="SEI_EMPTY",Wx="SEI_OVERSIZE",qx="SEI_BEFORE_PUBLISH",Gx="SEI_NOT_VIDEO",Jx="CALL_FREQUENCY_LIMIT",Kx="CONNECTION_ABORTED",Qx="API_CALL_ABORTED",Xx="DUPLICATE_AUX",Yx={AVOID_REPEATED_CALL:function(e){return"previous ".concat(e.name,"() is ongoing, please avoid repeated calls.")},INVALID_PARAMETER_REQUIRED:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' is a required param when calling ").concat(r,"(), received: ").concat(i,".")},INVALID_PARAMETER_TYPE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value,o="".concat(t||n.name),a="";return a=Array.isArray(n.type)?n.type.join("|"):n.type,"'".concat(o,"' must be type of ").concat(a," when calling ").concat(r,"(), received type: ").concat(gR(i),".")},INVALID_PARAMETER_EMPTY:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' cannot be '").concat(i,"' when calling ").concat(r,"().")},INVALID_PARAMETER_INSTANCE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value,o="".concat(t||n.name),a="".concat(n.instanceOf.name||n.instanceOf);return"'".concat(o,"' must be instanceof ").concat(a," when calling ").concat(r,"(), received type: ").concat(gR(i),".")},INVALID_PARAMETER_RANGE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' must be one of ").concat(n.values.join("|")," when calling ").concat(r,"(), received: ").concat(i,".")},API_CALL_TIMEOUT:function(e){return"".concat(e.commandDesc||e.command," timeout observed.")},SIGNAL_CHANNEL_RECONNECTION_FAILED:"signal channel reconnection failed, please check your network.",SIGNAL_CHANNEL_SETUP_FAILED:function(e){return"SignalChannel setup failure: (errorCode: ".concat(e.errorCode,", errorMsg: ").concat(e.errorMsg," }).")},ERROR_MESSAGE:function(e){var t="".concat(e.type," failed");return e.message&&(t="".concat(t,": ").concat(e.message,".")),t},EXCHANGE_SDP_TIMEOUT:"exchange sdp timeout.",DOWNLINK_RECONNECTION_FAILED:"downlink reconnection failed, please check your network and re-join room.",EXCHANGE_SDP_FAILED:function(e){return"exchange sdp failed ".concat(e.errMsg,".")},UPDATE_OFFER_TIMEOUT:"update offer timeout observed.",UPLINK_RECONNECTION_FAILED:"uplink reconnection failed, please check your network and publish again.",INVALID_RECORDID:"recordId must be an integer number.",INVALID_PURE_AUDIO:"pureAudioPushMode must be 1 or 2.",INVALID_STREAMID:"streamId must be a sting literal within 64 bytes, and not be empty.",INVALID_USER_DEFINE_RECORDID:"userDefineRecordId must be a sting literal contains (a-zA-Z),(0-9), underline and hyphen, within 64 bytes, and not be empty.",INVALID_USER_DEFINE_PUSH_ARGS:"userDefinePushArgs must be a sting literal within 256 bytes, and not be empty.",INVALID_PROXY:'proxy server url must start with "wss://".',INVALID_JOIN:"duplicate join() called.",INVALID_ROOMID_STRING:function(e){return"'".concat(e,"' must be validate string when useStringRoomId is true.")},INVALID_ROOMID_INTEGER:function(e){return"'".concat(e,"' must be an integer between [1, 4294967294] when useStringRoomId is false.")},INVALID_SIGNAL_CHANNEL:"SignalChannel is not ready yet.",JOIN_ROOM_TIMEOUT:"join room timeout.",JOIN_ROOM_FAILED:function(e){var t=e.error,n=e.code;return"Failed to join room - ".concat(t," code: ").concat(n)},REJOIN_ROOM_FAILED:function(e){return"reJoin room: ".concat(e.roomId," failed, please check your network.")},INVALID_DESTROY:"please call leave() before destroy().",INVALID_PUBLISH:"please call join() before publish().",INVALID_UNPUBLISH:"stream has not been published yet.",INVALID_AUDIENCE:"no permission to publish() under live/".concat(HT,', please call switchRole("').concat($T,'") firstly before publish().'),INVALID_INITIALIZE:"cannot publish stream because stream is not initialized, is switching device, or has been closed.",INVALID_DUPLICATE_PUBLISHING:function(e){return"duplicate ".concat(e," stream publishing, please unpublish your prev ").concat(e," stream and then re-publish.")},INVALID_SUBSCRIBE_UNDEFINED:"stream is undefined or null.",INVALID_SUBSCRIBE_LOCAL:"stream cannot be LocalStream.",INVALID_REMOTE_STREAM:"remoteStream does not exist because it has been unpublished by remote peer.",SUBSCRIBE_FAILED:function(e){var t=e.message,n=e.stream;return"failed to subscribe ".concat(n.getUserId()," ").concat(n.getType()," stream, reason: ").concat(t,".")},INVALID_ROLE:"switchRole can only be called in live mode.",INVALID_PARAMETER_SWITCH_ROLE:"role could only be set to a value as ".concat($T," or ").concat(HT,"."),INVALID_OPERATION_SWITCH_ROLE:"please call join() before switchRole().",SWITCH_ROLE_TIMEOUT:"switchRole timeout.",SWITCH_ROLE_FAILED:function(e){return"switchRole failed, errCode: ".concat(e.code," errMsg: ").concat(e.message,".")},CLIENT_BANNED:function(e){return"client was banned because of "+e.message+"."},INVALID_OPERATION_START_PUBLISH_CDN:"please call startPublishCDNStream() after join room and publish the local stream.",INVALID_OPERATION_STOP_PUBLISH_CDN:"please call startPublishCDNStream() before stopPublishCDNStream().",START_PUBLISH_CDN_FAILED:function(e){return"startPublishCDNStream failed, errMsg: ".concat(e.message,".")},STOP_PUBLISH_CDN_FAILED:function(e){return"stopPublishCDNStream failed, errMsg: ".concat(e.message,".")},INVALID_STREAM_ID:function(e){return"'".concat(e,"' can only consist of uppercase and lowercase english letters (a-zA-Z), numbers (0-9), hyphens and underscores.")},START_MIX_TRANSCODE:"please call startMixTranscode() after join().",STOP_MIX_TRANSCODE:"please call stopMixTranscode() after startMixTranscode().",INVALID_AUDIO_VOLUME:"interval must be a number.",ENABLE_SMALL_STREAM_PUBLISHED:"Cannot enable small stream after localStream published.",DISABLE_SMALL_STREAM_PUBLISHED:"Cannot disable small stream after localStream published.",NOT_SUPPORTED_SMALL_STREAM:"your browser does not support opening small stream.",INVALID_SMALL_STREAM_PROFILE:"small stream profile is invalid.",INVALID_PARAMETER_REMOTE_STREAM:"remoteStream is invalid.",INVALID_OPERATION_CHANGE_SMALL:"cannot switch to the small stream without subscribing to the video of remoteStream.",REMOTE_NOT_PUBLISH_SMALL_STREAM:"remote peer does not publish small stream.",INVALID_SWITCH_DEVICE:"cannot switch device on current stream.",INVALID_SWITCH_DEVICE_PUBLISHING:"cannot switch device when publishing localStream.",INVALID_REPLACE_TRACK:"cannot replace track when publishing localStream.",INVALID_INITIALIZE_LOCAL_STREAM:"local stream has not initialized yet.",INVALID_ADD_TRACK_REPETITIVE:"previous addTrack is ongoing, please avoid repetitive execution.",INVALID_ADD_TRACK_REMOVING:"cannot add track when a track is removing.",INVALID_ADD_TRACK_PUBLISHING:"cannot add track when publishing localStream.",INVALID_STREAM_INITIALIZED:"your local stream haven't been initialized yet.",INVALID_ADD_TRACK_NUMBER:"a Stream has at most one audio track and one video track.",INVALID_REMOVE_AUDIO_TRACK:"remove audio track is not supported on your browser.",INVALID_REMOVE_AUDIO_ADDING:"cannot remove track when a track is adding.",INVALID_REMOVE_AUDIO_ON:"previous removeTrack is ongoing, please avoid repetitive execution.",INVALID_REMOVE_TRACK_PUBLISHING:"cannot remove track when publishing localStream.",INVALID_REMOVE_TRACK_NOT_PUBLISHING:"the track to be removed is not being publishing.",INVALID_REMOVE_TRACK_NUMBER:"remove the only video track is not supported, please use replaceTrack or muteVideo.",INVALID_REPLACE_TRACK_NO_TRACK:function(e){return"cannot replace ".concat(e.kind," track because stream has not ").concat(e.kind," track")},START_MIX_TRANSCODE_FAILED:function(e){return"startMixTranscode failed, errMsg: ".concat(e.message,".")},STOP_MIX_TRANSCODE_FAILED:function(e){return"stopMixTranscode failed, errMsg: ".concat(e.message,".")},MIX_TRANSCODE_NOT_STARTED:"mixTranscode has not been started.",CANNOT_LESS_THAN_ZERO:function(e){var t=e.key,n=e.rule,r=e.fnName;return e.value,"'".concat(t||n.name,"' cannot be less than 0 when calling ").concat(r,"().")},MIX_PARAMS_VIDEO_FRAMERATE:"'config.videoFramerate' should be an integer between 0 and 30, excluding 0.",MIX_PARAMS_VIDEO_GOP:"'config.videoGOP' should be an integer between 1 and 8.",MIX_PARAMS_AUDIO_BITRATE:"'config.audioBitrate' should be an integer between 32 and 192.",MIX_PARAMS_USER_Z_ORDER:function(e){return"'".concat(e,"' is required and must be between 1 and 15.")},MIX_PARAMS_NOT_SELF:"'config.mixUsers' must contain self.",MIX_PARAMS_USER_STREAM:"'config.videoWidth' and 'config.videoHeight' of output stream should be contain all mix stream.",INVALID_PLAY:"duplicate play() call observed, please stop() firstly.",INVALID_ELEMENT_ID:function(e){var t=e.key,n=e.fnName;return"'".concat(t,"' is not found in the document object when calling ").concat(n,"().")},INVALID_ELEMENT_ID_TYPE:function(e){var t=e.key,n=e.fnName,r=e.type;return"the element corresponding to '".concat(t,"' must be instanceof HTMLDivElement when calling ").concat(n,"(), received: ").concat(r,".")},PLAY_FAILED:function(e){return"".concat(e.media," play failed，browser exception: ").concat(e.error.toString())},INVALID_USERID:"userId cannot be all spaces.",INVALID_CREATE_STREAM_SOURCE:"LocalStream must be created by createStream() with either audio/video or audioSource/videoSource, but can not be mixed with audio/video and audioSource/videoSource.",INVALID_CREATE_STREAM_SCREEN:"screen/video cannot be both true.",INVALID_CREATE_STREAM_AUDIO:"audio/screenAudio cannot be both true.",INVALID_CREATE_STREAM_SCREEN_AUDIO:"when screen is true, screenAudio can be configured.",NOT_SUPPORTED_HTTP:"http protocol does not support the ability to capture and publish streams, please use the https protocol.",NOT_SUPPORTED_WEBRTC:"your browser or environment does not support full WebRTC capabilities.",NOT_SUPPORTED_PROFILE:"your browser does not support setVideoProfile.",NOT_SUPPORTED_MEDIA:"your browser or environment does not support navigator.mediaDevices.",NOT_SUPPORTED_H264ENCODE:"your device does not support H.264 encoding.",NOT_SUPPORTED_H264DECODE:"your device does not support H.264 decoding.",NOT_SUPPORTED_TRACK:function(e){return"".concat(e,"Track is not supported on your browser.")},NOT_SUPPORTED_SWITCH_DEVICE:"switchDevice is not supported on your browser.",NOT_SUPPORTED_CAPTURE:"Your browser or environment does not support screen sharing, please check whether the browser version.",MICROPHONE_NOT_FOUND:"no microphone detected, please check your microphone and the configuration on TRTC.createStream.",CAMERA_NOT_FOUND:"no camera detected, please check your camera and the configuration on TRTC.createStream.",SIGNAL_RESPONSE_FAILED:function(e){return"".concat(e.signalResponse," failed, response code is ").concat(e.code," , errMsg: ").concat(e.message,".")},CATCH_HANDLER_ERROR:function(e){var t=e.name,n=e.event;return"an error was caught on ".concat(t,".on('").concat(n,"', handler), please check your code on 'handler'.")},API_NOT_EXIST:function(e){var t=e.name;return"experimental api ".concat(t," does not exist.")},REPEAT_JOIN:function(e){return"[".concat(e,"] is calling client.join api or has already joined room, please avoid repeated join.")},CONNECTION_CLOSED:"remoteStream has been unsubscribed or unpublished by remote user.",SUBSCRIBE_ALL_FALSE:"cannot subscribe when both audio & video are false, use client.unsubscribe() instead",CLIENT_DESTROYED:function(e){var t=e.funName;return"failed to call ".concat(t,"() because client was destroyed.")},SEI_NOT_SUPPORT:function(e){return"not support to sendSEIMessage".concat(!1===e?" without using h264 codec":"")},SEI_DISABLED:"SEI is disabled, to enable SEI: TRTC.createClient({ enableSEI: true })",SEI_EMPTY:"buffer cannot be empty",SEI_OVERSIZE:function(e){return"buffer size(".concat(e,") is over 1000 Bytes")},SEI_BEFORE_PUBLISH:"please call sendSEIMessage() after publish() success",SEI_NOT_VIDEO:"cannot send sei when localStream has not video.",CALL_FREQUENCY_LIMIT:function(e){var t=e.isSize,n=e.name,r=e.timesInSecond,i=e.maxSizeInSecond;return"api ".concat(n," call ").concat(t?"size":"times"," is over ").concat(t?i+" bytes":r," in a second.")},CONNECTION_ABORTED:function(e){return"connection aborted due to: "+e},API_CALL_ABORTED:function(e){return e.message.includes("REMOTE_STREAM_NOT_EXIST")?"Subscribe ".concat(e.stream.getUserId()," ").concat(e.stream.getType()," stream aborted, reason: remote user ").concat(e.stream.getUserId()," unpublished stream."):"API aborted, reason: ".concat(e.message)},DUPLICATE_AUX:"only one auxiliary stream can be published in a room.",NOT_SUPPORTED_AUX:"publish auxiliary stream is not supported on your browser."},Zx=function(e,t){return t?fI+"/"+e+"/"+t:fI+"/"+e+"/index.html"},eR=function(){if(!jw())return!1;var e=localStorage.getItem(mI);e&&!function(e){var t=e.saveTime&&(new Date).getTime()-e.saveTime>=eI,n=!e.saveVersion||e.saveVersion!==za;return t||n}(JSON.parse(e))||(PA.info("init debug info"),function(){var e=new XMLHttpRequest;if(e.open("GET","https://web.sdk.qcloud.com/trtc/webrtc/download/error-message/0.0.3/script.js",!1),e.send(null),4===e.readyState&&200===e.status){var t=document.createElement("script");t.type="text/javascript",t.text=e.responseText,document.body.appendChild(t),localStorage.setItem(mI,JSON.stringify({message:e.responseText,saveTime:(new Date).getTime(),saveVersion:za})),document.body.removeChild(t)}}())};function tR(e){var t=e.key,n=e.data,r=e.link,i=e.addDocLink,o=void 0===i||i,a="",s="",c="";uR(Yx[t])?a=Yx[t](n):dR(Yx[t])&&(a=Yx[t]);var u=function(){if(window.TRTC_ERROR_INFO&&window.TRTC_ERROR_LINK)return{TRTC_ERROR_INFO:window.TRTC_ERROR_INFO,TRTC_ERROR_LINK:window.TRTC_ERROR_LINK};var e=localStorage.getItem(mI);if(e){e=JSON.parse(e);var t=document.createElement("script");t.type="text/javascript",t.text=e.message,document.body.appendChild(t);var n=window.TRTC_ERROR_INFO,r=window.TRTC_ERROR_LINK;return document.body.removeChild(t),{TRTC_ERROR_INFO:n,TRTC_ERROR_LINK:r}}return{}}(),l=u.TRTC_ERROR_INFO,d=u.TRTC_ERROR_LINK;r?c="".concat(r.className,".html#").concat(r.fnName):d&&d[t]&&(uR(d[t])?c=d[t](n):dR(d[t])&&(c=d[t]));var h=a;return wR()&&(l&&l[t]&&(uR(l[t])?s=l[t](n):dR(l[t])&&(s=l[t])),s&&(h=o?s+"\n请查看文档: "+Zx("zh-cn",c)+"\n\n":s+"\n\n",h+=a)),o&&(h+=" \nRefer to: "+Zx("en",c)+"\n"),h}var nR=function(){return function(e){var t=window.location.search.match(new RegExp("(\\?|&)"+e+"=([^&]*)(&|$)"));return t?decodeURIComponent(t[2]):""}("trtc_env")},rR=function(e){return(e=Number(e))>0&&e<14e8},iR=function(e,t){var n;n=PT||(rR(e)?"https://apisgp.my-imcloud.com":"https://yun.tim.qq.com");var r=Math.floor(Math.random()*Math.pow(2,31));return"".concat(n,"/v5/AVQualityReportSvc/C2S?random=").concat(r,"&sdkappid=").concat(e,"&cmdtype=").concat(t)};function oR(){var e=navigator.userAgent,t=navigator.connection,n=e.match(/NetType\/\w+/)?e.match(/NetType\/\w+/)[0]:"";"3gnet"===(n=n.toLowerCase().replace("nettype/",""))&&(n="3g");var r=t&&t.type&&t.type.toLowerCase(),i=t&&t.effectiveType&&t.effectiveType.toLowerCase();"slow-2"===i&&(i="2g");var o=n||"unknown";if(r)switch(r){case"cellular":case"wimax":o=i||"unknown";break;case"wifi":o="wifi";break;case"ethernet":o="wired";break;case"none":case"other":case"unknown":o="unknown"}return o}var aR=function(e){if(!e||"object"!==i(e)||"[object Object]"!=Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)};function sR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<=1?n:sR(e-1,n,t+n)}function cR(e){var t=Math.round(e/2)+1;return t>6?13e3:1e3*sR(t)}var uR=function(e){return"function"==typeof e},lR=function(e){return void 0===e},dR=function(e){return"string"==typeof e},hR=function(e){return"number"==typeof e},pR=function(e){return"boolean"==typeof e},fR=function(e){return"object"===gR(e)},vR=function(e){return"array"===gR(e)},mR=function(e){return gR(e)==="MediaStreamTrack".toLowerCase()};function gR(e){return Reflect.apply(Object.prototype.toString,e,[]).replace(/^\[object\s(\w+)\]$/,"$1").toLowerCase()}function _R(e){var t={};return t.urls="turn:".concat(e.url),lR(e.username)||lR(e.credential)||(t.username=e.username,t.credential=e.credential,t.credentialType="password",lR(e.credentialType)||(t.credentialType=e.credentialType)),t}function yR(){return performance&&performance.now?Math.floor(performance.now()):Date.now()}function bR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"big";if(!dR(e))return 0;var n=e.split(".");return"big"===t?(Number(n[0])<<24|Number(n[1])<<16|Number(n[2])<<8|Number(n[3]))>>>0:(Number(n[3])<<24|Number(n[2])<<16|Number(n[1])<<8|Number(n[0]))>>>0}var SR,kR,wR=function(){var e=navigator.language||navigator.userLanguage;return"zh"===e.substr(0,2)},TR=(SR=!1,kR=document.visibilityState,function(){document.visibilityState!==kR&&PA.info("visibility change: ".concat(document.visibilityState)),SR||(document.addEventListener("visibilitychange",(function(){PA.info("visibility change: "+document.visibilityState),kR=document.visibilityState})),SR=!0)});window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var ER=function(){return new window.AudioContext},IR=function(){var e;return function(){return e||(e=new window.AudioContext,e.onstatechange=function(){PA.info("gain context state: ".concat(e.state)),"suspended"===e.state?(e.resume(),document.addEventListener("click",e.resume)):"interrupted"===e.state?e.resume():document.removeEventListener("click",e.resume)},e)}}(),CR=!!window.AudioWorkletNode,xR=function(e,t){var n=e.emit;return e.emit=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];try{n.apply(e,i)}catch(Yq){var a=tR({key:jx,data:{name:t,event:i[0]},addDocLink:!1});PA.warn(a+"\n\n"+Yq.stack)}},e},RR=function(e){return+e<10?"0".concat(e):e},AR=function(e){var t=e.match(/^\d+\.\d+\.\d+/)[0];if(!t)return e;var n=t.split("."),r=RR(n[1])+RR(n[2]);return n[1]-15>0&&(n[1]="15"),n[2]-15>0&&(n[2]="15"),n.join(".")+"."+r};function OR(e){var t=e.url,n=e.body,r=e.method,i=e.timeout,o=new XMLHttpRequest;return new Promise((function(e,a){o.onload=function(t){if(o.status>=200&&o.status<300&&o.responseText.length>0)try{var n=JSON.parse(o.response);e({data:n})}catch(Yq){e({data:o.response})}else o.status>0&&a({code:o.status,message:"request failed, readyState:".concat(o.readyState," status:").concat(o.status," loaded size:").concat(t.loaded)})};var s=function(e){a({code:o.readyState,message:"request ".concat(e.type,", readyState:").concat(o.readyState," status:").concat(o.status," loaded size:").concat(e.loaded)})};o.onerror=s,o.onabort=s,o.ontimeout=s,o.timeout=i||5e3,o.open(r||"POST",t,!0),o.send(n)}))}var PR={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(PR);var DR=PR.exports,LR=new DR,NR=1,MR=2,UR=3,jR=4,VR=5,FR=20,BR=21,$R=22,HR=23,zR=24,WR=27,qR=28,GR=29,JR=30,KR=33,QR=31,XR=32,YR=100,ZR=101,eA=102,tA=103,nA=110,rA=111,iA=112,oA=113,aA=114,sA=115,cA=116,uA=120,lA=121,dA=122,hA=123,pA=130,fA=131,vA=132,mA=133,gA=134,_A=135,yA=136,bA=137,SA=200,kA=201,wA=300,TA=301,EA=302,IA=303;function CA(e){var t=e.retryFunction,n=e.settings,i=e.onError,o=e.onRetrying,s=e.onRetryFailed,c=e.context;return function(){for(var e=this,u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];var h=n.retries||5,p=0,f=-1,v=0,m=function(){var u=a(r().mark((function a(u,d){var g,_,y,b;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return g=c||e,r.prev=1,r.next=4,t.apply(g,l);case 4:_=r.sent,p=0,u(_),r.next=14;break;case 9:r.prev=9,r.t0=r.catch(1),y=function(){clearTimeout(f),p=0,v=2,d(r.t0)},b=function(){2!==v&&p<h?(p++,v=1,uR(o)&&o.call(g,p,y),f=setTimeout((function(){f=-1,m(u,d)}),lR(n.timeout)?1e3:n.timeout)):(y(),uR(s)&&s.call(g,r.t0))},uR(i)?i.call(g,r.t0,b,d):b();case 14:case"end":return r.stop()}}),a,null,[[1,9]])})));return function(e,t){return u.apply(this,arguments)}}();return new Promise(m)}}var xA=u((function e(t){s(this,e),this.log=t.log,this.level=t.level,this.userId=t.userId,this.sdkAppId=t.sdkAppId,this.forAllJoinedClients=t.forAllJoinedClients,this.uploaded=!1})),RA=function(){function e(t){s(this,e),this.id_=t.id,this.userId_=t.userId,this.sdkAppId_=t.sdkAppId,this.type_=t.type,this.isLocal_=!pR(t.isLocal)||t.isLocal}return u(e,[{key:"setUserId",value:function(e){this.userId_=e}},{key:"setSdkAppId",value:function(e){this.sdkAppId_=e}},{key:"log",value:function(e,t){PA.log({log:"[".concat(this.isLocal_?"↑":"↓").concat(this.id_,"] ").concat(this.type_?this.type_+" ":"").concat(t),level:e,forAllJoinedClients:lR(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_})}},{key:"info",value:function(e){this.log(yI.INFO,e)}},{key:"debug",value:function(e){this.log(yI.DEBUG,e)}},{key:"warn",value:function(e){this.log(yI.WARN,e)}},{key:"error",value:function(e){this.log(yI.ERROR,e)}}]),e}(),AA=!(Nk||Mk),OA=function(){function e(){var t=this;s(this,e),this.clients_=new Set,this.queue_=[],this.timeoutId_=-1,this.logLevel_=yI.DEBUG,this.logLevelToUpload_=yI.INFO,this.enableUploadLog_=!0,this.isAbleToUpload_=!1,this.startUpload(),this.checkURLParam(),LR.on(JR,(function(e){var n=e.client;return t.clients_.add(n)})),LR.on(KR,(function(e){var n=e.client;return t.clients_.delete(n)})),LR.on(QR,(function(e){e&&aR(e.config)&&bI[e.config.logLevelToUpload]&&(t.logLevelToUpload_=e.config.logLevelToUpload)})),LR.on(jR,this.setIsAbleToUpload,this),LR.on(VR,this.setIsAbleToUpload,this)}var t,n;return u(e,[{key:"getIsAbleToUpload",value:function(){return this.isAbleToUpload_}},{key:"setIsAbleToUpload",value:function(){this.isAbleToUpload_=!0,LR.off(jR,this.setIsAbleToUpload,this),LR.off(VR,this.setIsAbleToUpload,this)}},{key:"startUpload",value:(n=a(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upload();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:this.timeoutId_=setTimeout((function(){return t.startUpload()}),2e3);case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return n.apply(this,arguments)})},{key:"stopUpload",value:function(){-1!==this.timeoutId_&&(clearTimeout(this.timeoutId_),this.timeoutId_=-1)}},{key:"getLogsToUpload",value:function(){var e=this,t={map:new Map,splicedQueue:[]};if(this.queue_[0].forAllJoinedClients&&0===this.clients_.size)return t;for(var n=0,r=function(){if(50===n)return"break";var r=e.queue_[n];r.forAllJoinedClients?e.clients_.forEach((function(e){if(e.getIsJoined()){var n=e.getUserId(),i=e.getSDKAppId();t.map.has(n)?t.map.get(n).logs.push(r):t.map.set(n,{userId:n,sdkAppId:i,logs:[r]})}})):t.map.has(r.userId)?t.map.get(r.userId).logs.push(r):t.map.set(r.userId,{userId:r.userId,sdkAppId:r.sdkAppId,logs:[r]})};n<this.queue_.length;n++)if("break"===r())break;return t.map.size>0&&(t.splicedQueue=this.queue_.splice(0,n)),t}},{key:"upload",value:(t=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue_.length&&this.isAbleToUpload_){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getLogsToUpload(),n=t.map,i=t.splicedQueue,0!==n.size){e.next=5;break}return e.abrupt("return");case 5:e.prev=5,o=k(n.values()),a=0;case 8:if(!(a<o.length)){e.next=16;break}return s=o[a],c=s.userId,u=s.sdkAppId,l=s.logs,e.next=12,this.uploadLogWithRetry(JSON.stringify({timestamp:ig(),sdkAppId:String(u),userId:c,version:za,log:l.map((function(e){return e.log})).join("\n")}),u);case 12:l.forEach((function(e){return e.uploaded=!0}));case 13:a++,e.next=8;break;case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(5);case 20:d=i.filter((function(e){return!e.uploaded})),d.length>0&&(this.queue_=d.concat(this.queue_));case 22:case"end":return e.stop()}}),e,this,[[5,18]])}))),function(){return t.apply(this,arguments)})},{key:"uploadLogWithRetry",value:function(e,t){return CA({retryFunction:function(){return OR({url:iR(t,DT),body:e,timeout:5e3})},settings:{retries:3,timeout:1e3},onError:function(e,t){t()}})()}},{key:"getPrefix",value:function(e){var t=new Date;return t.setTime(rg()),String.prototype.padStart?"[".concat(t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),":").concat(t.getMilliseconds().toString().padStart(3,"0"),"] <").concat(bI[e],">"):"[".concat(t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),":").concat(t.getMilliseconds(),"] <").concat(bI[e],">")}},{key:"getLogLevel",value:function(){return this.logLevel_}},{key:"setLogLevel",value:function(e){lR(bI[e])||(this.logLevel_!==e&&this.info("setLogLevel ".concat(e)),this.logLevel_=e)}},{key:"enableUploadLog",value:function(){this.enableUploadLog_=!0}},{key:"disableUploadLog",value:function(){this.enableUploadLog_=!1}},{key:"log",value:function(e){var t=e.log,n=e.level,r=e.forAllJoinedClients,i=void 0===r||r,o=e.userId,a=e.sdkAppId;if(t="".concat(this.getPrefix(n)," ").concat(t),this.enableUploadLog_&&n>=this.logLevelToUpload_&&this.queue_.push(new xA({log:t,level:n,userId:o,sdkAppId:a,forAllJoinedClients:i})),!(n<this.logLevel_)){var s=bI[n]?bI[n].toLowerCase():"info";AA?console[s]("%cTRTC%c%s","padding: 1px 4px;border-radius: 3px;color: #fff;background: #1E88E5;","display: inline",t):console[s](t)}}},{key:"debug",value:function(e){this.log({log:e,level:yI.DEBUG})}},{key:"info",value:function(e){this.log({log:e,level:yI.INFO})}},{key:"warn",value:function(e){this.log({log:e,level:yI.WARN})}},{key:"error",value:function(e){this.log({log:e,level:yI.ERROR})}},{key:"createLogger",value:function(e){return new RA(e)}},{key:"checkURLParam",value:function(){var e=new URLSearchParams(location.search).get("logLevelToUpload");bI[e]&&(this.logLevelToUpload_=e)}}]),e}(),PA=new OA,DA=!0,LA=be,NA=Math.floor,MA=Number.isInteger||function(e){return!LA(e)&&isFinite(e)&&NA(e)===e};Ei({target:"Number",stat:!0},{isInteger:MA});var UA,jA=Ei,VA=te,FA=A.f,BA=Nr,$A=ad,HA=VI,zA=le,WA=BI,qA=VA("".startsWith),GA=VA("".slice),JA=Math.min,KA=WA("startsWith");jA({target:"String",proto:!0,forced:!(!KA&&(UA=FA(String.prototype,"startsWith"),UA&&!UA.writable))&&!KA},{startsWith:function(e){var t=$A(zA(this));HA(e);var n=BA(JA(arguments.length>1?arguments[1]:void 0,t.length)),r=$A(e);return qA?qA(t,r,n):GA(t,n,n+r.length)===r}});var QA=P,XA=te,YA=M,ZA=O,eO=Ja,tO=Yr,nO=U,rO=ht,iO=ae,oO=Object.assign,aO=Object.defineProperty,sO=XA([].concat),cO=!oO||ZA((function(){if(QA&&1!==oO({b:1},oO(aO({},"a",{enumerable:!0,get:function(){aO(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=oO({},e)[n]||eO(oO({},t)).join("")!=r}))?function(e,t){for(var n=rO(e),r=arguments.length,i=1,o=tO.f,a=nO.f;r>i;)for(var s,c=iO(arguments[i++]),u=o?sO(eO(c),o(c)):eO(c),l=u.length,d=0;l>d;)s=u[d++],QA&&!YA(a,c,s)||(n[s]=c[s]);return n}:oO,uO=cO;Ei({target:"Object",stat:!0,arity:2,forced:Object.assign!==uO},{assign:uO});var lO=te,dO=Je,hO=be,pO=vt,fO=zd,vO=D,mO=Function,gO=lO([].concat),_O=lO([].join),yO={},bO=function(e,t,n){if(!pO(yO,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";yO[t]=mO("C,a","return new C("+_O(r,",")+")")}return yO[t](e,n)},SO=vO?mO.bind:function(e){var t=dO(this),n=t.prototype,r=fO(arguments,1),i=function(){var n=gO(r,fO(arguments));return this instanceof i?bO(t,n.length,n):t.apply(e,n)};return hO(n)&&(i.prototype=n),i},kO=SO;Ei({target:"Function",proto:!0,forced:Function.bind!==kO},{bind:kO});var wO=Ei,TO=mo.findIndex,EO=ws,IO="findIndex",CO=!0;IO in[]&&Array(1).findIndex((function(){CO=!1})),wO({target:"Array",proto:!0,forced:CO},{findIndex:function(e){return TO(this,e,arguments.length>1?arguments[1]:void 0)}}),EO(IO);var xO=P,RO=te,AO=Ja,OO=pe,PO=RO(U.f),DO=RO([].push),LO=function(e){return function(t){for(var n,r=OO(t),i=AO(r),o=i.length,a=0,s=[];o>a;)n=i[a++],xO&&!PO(r,n)||DO(s,e?[n,r[n]]:r[n]);return s}},NO={entries:LO(!0),values:LO(!1)}.values;Ei({target:"Object",stat:!0},{values:function(e){return NO(e)}});var MO=1,UO=5,jO=2,VO=3,FO=4,BO="DISCONNECTED",$O="CONNECTING",HO="RECONNECTING",zO="CONNECTED",WO={CLIENT_BANNED:9,CHANNEL_SETUP_RESULT:19,CHANNEL_RECONNECT_RESULT:514,JOIN_ROOM_RESULT:20,PEER_JOIN:4134,PEER_LEAVE:4135,STREAM_ADDED:16,STREAM_REMOVED:18,UPLINK_NETWORK_STATS:22,UPDATE_REMOTE_MUTE_STAT:23,PUBLISH_RESULT:4098,PUBLISH_STATE_CHANGE_RESULT:4112,UNPUBLISH_RESULT:4100,SUBSCRIBE_RESULT:4102,UNSUBSCRIBE_RESULT:4104,SUBSCRIBE_CHANGE_RESULT:4106,MUTE_RESULT:4108,UPDATE_OFFER_RESULT:4128,START_PUBLISH_TENCENT_CDN_RES:1286,STOP_PUBLISH_TENCENT_CDN_RES:1288,START_PUBLISH_GIVEN_CDN_RES:777,STOP_PUBLISH_GIVEN_CDN_RES:779,START_MIX_TRANSCODE_RES:781,STOP_MIX_TRANSCODE_RES:783,USER_LIST_RES:4137,SWITCH_ROLE_RES:4110,UPDATE_CONSTRAINT_CONFIG_RES:772},qO=[WO.UPDATE_REMOTE_MUTE_STAT,WO.UPLINK_NETWORK_STATS,WO.USER_LIST_RES,WO.MUTE_RESULT],GO={CLIENT_BANNED:"client-banned",CHANNEL_SETUP_RESULT:"channel-setup-result",CHANNEL_RECONNECT_RESULT:"channel-reconnect-result",JOIN_ROOM_RESULT:"join-room-result",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",UPLINK_NETWORK_STATS:"uplink-network-stats",UPDATE_REMOTE_MUTE_STAT:"update-remote-mute-stat",PUBLISH_RESULT:"publish-result",PUBLISH_STATE_CHANGE_RESULT:"publish-state-change-result",UNPUBLISH_RESULT:"unpublish-result",SUBSCRIBE_RESULT:"subscribe-result",SUBSCRIBE_CHANGE_RESULT:"subscribe-change-result",UNSUBSCRIBE_RESULT:"unsubscribe-result",UPDATE_OFFER_RESULT:"update-offer-result",START_PUBLISH_TENCENT_CDN_RES:"start-publish-tencent-cdn-res",STOP_PUBLISH_TENCENT_CDN_RES:"stop-publish-tencent-cdn-res",START_PUBLISH_GIVEN_CDN_RES:"start-publish-given-cdn-res",STOP_PUBLISH_GIVEN_CDN_RES:"stop-publish-given-cdn-res",START_MIX_TRANSCODE_RES:"start-mix-transcode-res",STOP_MIX_TRANSCODE_RES:"stop-mix-transcode-res",USER_LIST_RES:"user-list-res",SWITCH_ROLE_RES:"switch_role_res",MUTE_RESULT:"mute-result",UPDATE_CONSTRAINT_CONFIG_RES:"update-contraint-config-res"},JO="publish_change",KO="publish_state_change",QO="join",XO="leave",YO="quality_report",ZO="mute_uplink",eP="publish",tP="unpublish",nP="subscribe",rP="unsubscribe",iP="subscribe_change",oP="start_publishing",aP="stop_publishing",sP="start_push_user_cdn",cP="stop_push_user_cdn",uP="start_mcu_mix",lP="stop_mcu_mix",dP="get_user_list",hP="change_role",pP="update_constraint_config",fP={INVALID_PARAMETER:4096,INVALID_OPERATION:4097,NOT_SUPPORTED:4098,DEVICE_NOT_FOUND:4099,INITIALIZE_FAILED:4100,SIGNAL_CHANNEL_SETUP_FAILED:16385,SIGNAL_CHANNEL_ERROR:16386,ICE_TRANSPORT_ERROR:16387,JOIN_ROOM_FAILED:16388,CREATE_OFFER_FAILED:16389,SIGNAL_CHANNEL_RECONNECTION_FAILED:16390,UPLINK_RECONNECTION_FAILED:16391,DOWNLINK_RECONNECTION_FAILED:16392,REMOTE_STREAM_NOT_EXIST:16400,CLIENT_BANNED:16448,SERVER_TIMEOUT:16449,SUBSCRIPTION_TIMEOUT:16450,PLAY_NOT_ALLOWED:16451,DEVICE_AUTO_RECOVER_FAILED:16452,START_PUBLISH_CDN_FAILED:16453,STOP_PUBLISH_CDN_FAILED:16454,START_MIX_TRANSCODE_FAILED:16455,STOP_MIX_TRANSCODE_FAILED:16456,NOT_SUPPORTED_H264:16457,SWITCH_ROLE_FAILED:16458,API_CALL_TIMEOUT:16459,SCHEDULE_FAILED:16460,API_CALL_ABORTED:16461,UNKNOWN:65535},vP=function(e){d(n,e);var t=_(n);function n(e){var r,i=e.name,o=void 0===i?"RtcError":i,a=e.message,c=e.code,u=void 0===c?fP.UNKNOWN:c,l=e.extraCode,d=void 0===l?0:l,h=e.constraint;s(this,n);var p="<".concat(function(e){for(var t in fP)if(fP[t]===e)return t;return"UNKNOWN"}(u)," 0x").concat(u.toString(16),">");return(r=t.call(this,a+"".concat(h?" constraint: ".concat(h):"")+"".concat(null!=a&&a.includes(p)?"":" "+p))).code_=u,r.extraCode_=d,r.name=o,r.message_=a,h&&(r.constraint=h),r}return u(n,[{key:"getCode",value:function(){return this.code_}},{key:"getExtraCode",value:function(){return this.extraCode_}}]),n}(m(Error)),mP=32768,gP=32769,_P=32770,yP=32771,bP=32772,SP=32773,kP=32774,wP=32775,TP=32777,EP=32778,IP=32779,CP=32780,xP=32781,RP=32782,AP=32783,OP=32784,PP=32785,DP=32786,LP=32787,NP=32788,MP=32789,UP=32790,jP=32791,VP=32792,FP=32793,BP=32794,$P=32795,HP=32796,zP=32797,WP=32798,qP=32799,GP=32800,JP=32801,KP=32802,QP=32803,XP=32804,YP=new Map,ZP=function(e,t){var n=YP.get(e);n||(YP.set(e,[]),n=YP.get(e)),n.push(t)},eD=function(e){var t=YP.get(e),n=[];return t?(YP.delete(e),n=t.map((function(e){return{uint32_event_id:e.eventId,uint64_date:e.timestamp,str_userid:e.remoteUserId,str_event_json:e.eventDesc}}))):n=[],n},tD=Object.prototype.hasOwnProperty;function nD(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(aR(e))switch(Object.prototype.toString.call(e)){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var t in e)if(tD.call(e,t))return!1;return!0}return!1}var rD=function(){function e(){s(this,e);var t=Fw(),n=t.name,r=t.version;this.roomIdMap_=new Map,this.configs_={sdkAppId:"",userId:"",version:za,env:RT,browserVersion:n+r,ua:navigator.userAgent}}return u(e,[{key:"setConfig",value:function(e){var t=e.sdkAppId,n=e.env,r=e.userId,i=e.roomId;t!==this.configs_.sdkAppId&&(this.configs_.sdkAppId=String(t)),this.configs_.env=n,this.configs_.userId=r,this.roomIdMap_.set(r,String(i))}},{key:"logEvent",value:function(e){if(!Uw){var n=t(t(t({},e),this.configs_),{},{userId:e.userId||this.configs_.userId});lR(n.code)&&(n.code="failed"===n.result?fP.UNKNOWN:0),this.sendRequest(iR(this.configs_.sdkAppId,LT),n)}}},{key:"logSuccessEvent",value:function(e){Uw||(this.logEvent(t(t({},e),{},{result:"success",roomId:this.roomIdMap_.get(e.userId)})),this.configs_.env===RT&&this.uploadEventToKibana(t(t({},e),{},{result:"success"})))}},{key:"logFailedEvent",value:function(e){if(!Uw){var n=e.eventType,r=e.code,i=e.error,o=e.userId,a={roomId:this.roomIdMap_.get(o),userId:o,eventType:n,result:"failed",code:r||(i instanceof vP?i.getExtraCode()||i.getCode():fP.UNKNOWN)};this.logEvent(a),this.configs_.env===RT&&this.uploadEventToKibana(t(t({},a),{},{error:i}))}}},{key:"uploadEventToKibana",value:function(e){var t="stat-".concat(e.eventType,"-").concat(e.result);"delta-join"!==e.eventType&&"delta-leave"!==e.eventType&&"delta-publish"!==e.eventType||(t="".concat(e.eventType,":").concat(e.delta)),this.uploadEvent({log:t,userId:e.userId}),"failed"===e.result&&(t="stat-".concat(e.eventType,"-").concat(e.result,"-").concat(e.code),this.uploadEvent({log:t,userId:e.userId,error:e.error}))}},{key:"uploadEvent",value:function(e){var t=e.log,n=e.userId,r=e.error,i={timestamp:ig(),sdkAppId:this.configs_.sdkAppId,userId:n||this.configs_.userId,version:this.configs_.version,log:t};r&&(i.errorInfo=r.message),this.sendRequest(iR(this.configs_.sdkAppId,DT),i)}},{key:"sendRequest",value:function(e,t){var n=this;PA.getIsAbleToUpload()?OR({url:e,body:JSON.stringify(t)}).catch((function(){})):setTimeout((function(){n.sendRequest(e,t)}),1e3)}}]),e}(),iD=new rD,oD=function(){function e(t){s(this,e),this.client_=t.client,this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.userSig_=t.userSig,this.url_=t.url,this.backupUrl_=t.backupUrl;var n="?sdkAppId=".concat(encodeURIComponent(this.sdkAppId_),"&userId=").concat(encodeURIComponent(this.userId_),"&userSig=").concat(encodeURIComponent(this.userSig_));this.urlWithParam_="".concat(this.url_).concat(n),this.backupUrlWithParam_="".concat(this.backupUrl_).concat(n),this.isConnected_=!1,this.isConnecting_=!1,this.socketInUse_=null,this.socket_=null,this.backupSocket_=null,this.backupTimer_=-1,this.signalInfo_={},this.currentState_=BO,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.seq_=0,this.log_=PA.createLogger({id:"ws|"+this.userId_,userId:this.userId_,sdkAppId:this.sdkAppId_}),this.emitter_=new DR}return u(e,[{key:"connect",value:function(){var e=this;return new Promise((function(t,n){e.log_.info("connect to url: ".concat(e.urlWithParam_)),e.emitConnectionStateChanged($O),e.socket_=new WebSocket(e.urlWithParam_),e.bindSocket(e.socket_),e.backupTimer_=setTimeout((function(){e.isConnected_||(e.log_.info("trying to connect to backupUrl"),e.tryConnectBackup())}),5e3),e.once(VO,t),e.once(FO,n)}))}},{key:"tryConnectBackup",value:function(){this.backupSocket_||(this.unbindAndCloseSocket(lT),this.log_.debug("try to connect to url: ".concat(this.backupUrlWithParam_)),this.backupSocket_=new WebSocket(this.backupUrlWithParam_),this.bindSocket(this.backupSocket_))}},{key:"bindSocket",value:function(e){e.onopen=this.onopen.bind(this),e.onclose=this.onclose.bind(this),e.onerror=this.onerror.bind(this),e.onmessage=this.onmessage.bind(this)}},{key:"unbindSocket",value:function(e){e.onopen=function(){},e.onclose=function(){},e.onerror=function(){},e.onmessage=function(){}}},{key:"unbindAndCloseSocket",value:function(e){if(e===lT){if(this.socket_){this.unbindSocket(this.socket_);try{this.socket_.close(1e3)}catch(Yq){}this.socket_=null}}else if(this.backupSocket_){this.unbindSocket(this.backupSocket_);try{this.backupSocket_.close(1e3)}catch(Yq){}this.backupSocket_=null}}},{key:"clearBackupTimer",value:function(){-1!==this.backupTimer_&&(clearTimeout(this.backupTimer_),this.backupTimer_=-1)}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"onopen",value:function(e){if(!this.isConnected_){this.isConnected_=!0,this.isConnecting_=!1,this.clearBackupTimer(),e.target===this.socket_?(this.unbindAndCloseSocket(dT),this.socketInUse_=this.socket_):(this.unbindAndCloseSocket(lT),this.socketInUse_=this.backupSocket_);var t=e.target.url;this.log_.info("websocket[".concat(t,"] is connected")),this.currentState_===$O?this.addSignalEvent(jP,"signal channel is connected"):this.currentState_===HO&&this.addSignalEvent($P,"signal channel reconnect success"),this.emitConnectionStateChanged(zO),this.emitter_.emit(VO)}}},{key:"onclose",value:function(e){var t=e.target.url,n=e.target===this.socketInUse_;this.log_.info("websocket[".concat(t," InUse: ").concat(n,"] is closed with code: ").concat(e.code)),e.target===this.socketInUse_&&(this.isConnected_=!1,this.emitConnectionStateChanged(BO),this.addSignalEvent(UP,"signal channel is disconnected"),e.wasClean&&1e3===e.code||(this.log_.warn("onclose code:".concat(e.code," reason:").concat(e.reason)),this.log_.warn("close current websocket and schedule a reconnect timeout"),this.socketInUse_.onclose=function(){},this.socketInUse_.close(4011),this.socket_=this.backupSocket_=this.socketInUse_=null,this.reconnect(lT)))}},{key:"onerror",value:function(e){var t=e.target.url;this.log_.error("websocket[".concat(t,"] error observed")),this.isConnected_?e.target===this.socketInUse_&&(this.isConnected_=!1,this.unbindAndCloseSocket(lT),this.unbindAndCloseSocket(dT),this.socketInUse_=null,this.reconnect(lT)):(this.isReconnecting_||iD.logFailedEvent({userId:this.client_.getUserId(),eventType:IE,code:fP.UNKNOWN}),e.target==this.socket_?(this.unbindAndCloseSocket(lT),this.reconnect(dT)):(this.unbindAndCloseSocket(dT),this.reconnect(lT))),this.isConnecting_=!1,this.isConnected_=!1}},{key:"onmessage",value:function(e){if(this.isConnected_){var t=JSON.parse(e.data),n=t.cmd,r=t.data,i=Object.values(WO),o=Object.keys(WO)[i.indexOf(n)],a=GO[o];switch(qO.includes(n)||(this.log_.debug("received msg: ".concat(e.data)),this.log_.info("Received event: [ ".concat(a||"unknown cmd: "+n," ]"))),n){case WO.CHANNEL_SETUP_RESULT:if(0===t.code)this.signalInfo_.clientIp=r.clientIp,this.signalInfo_.signalIp=r.signalInnerIp,this.signalInfo_.tinyId=t.tinyId,r.svrTime&&function(e){ng=e-(new Date).getTime();var t=new Date;t.setTime(e),PA.info("baseTime from server: "+t+" offset: "+ng)}(r.svrTime),this.log_.info("ChannelSetup Success"),iD.logSuccessEvent({userId:this.userId_,eventType:IE}),this.emitter_.emit(MO,{signalInfo:this.signalInfo_});else{var s=new vP({code:fP.SIGNAL_CHANNEL_SETUP_FAILED,extraCode:t.code,message:tR({key:nC,data:{errorCode:t.code,errorMsg:t.message}})});this.log_.error("".concat(t.code,", ").concat(t.message)),this.close(),iD.logFailedEvent({userId:this.userId_,eventType:IE,error:s}),this.emitter_.emit(UO,s)}break;case WO.JOIN_ROOM_RESULT:0===t.code&&(this.signalInfo_.relayIp=r.relayOuterIp,this.signalInfo_.relayInnerIp=r.relayInnerIp,this.signalInfo_.relayPort=r.relayPort,this.log_.info("signalIp:".concat(this.signalInfo_.signalIp," clientIp:").concat(this.signalInfo_.clientIp," relayIp: ").concat(this.signalInfo_.relayIp))),this.emitter_.emit(a,{data:t});break;case WO.CHANNEL_RECONNECT_RESULT:0===t.code?(this.log_.warn("reconnect success"),this.stopReconnection(),iD.logSuccessEvent({userId:this.userId_,eventType:CE}),this.client_.syncUserList(),this.client_.checkConnectionsToReconnect()):(this.log_.warn("reconnect failed, ".concat(t.code," ").concat(t.message)),this.client_.reJoin());break;default:this.emitter_.emit(a,{data:t})}}}},{key:"addSignalEvent",value:function(e,t){ZP(this.userId_,{eventId:e,eventDesc:t,timestamp:rg(),userId:this.userId_,tinyId:this.signalInfo_.tinyId})}},{key:"reconnect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lT;if(this.isConnecting_||-1!==this.reconnectionTimer_)this.log_.info("signal channel is reconnecting, ignoring current reconnection");else{if(this.reconnectionCount_>=sE){this.log_.warn("SDK has tried reconnect signal channel for ".concat(sE," times, but all failed. please check your network"));var n=new vP({code:fP.SIGNAL_CHANNEL_RECONNECTION_FAILED,message:tR({key:tC})});return iD.logFailedEvent({userId:this.client_.getUserId(),eventType:CE,error:n}),this.addSignalEvent(HP,"signal channel reconnect fail"),void this.emitter_.emit(FO,n)}this.isConnecting_=!0,this.reconnectionCount_++,this.currentState_!==HO&&(this.emitConnectionStateChanged(HO),this.addSignalEvent(BP,"signal channel is reconnecting")),this.log_.warn("reconnecting to ".concat(t," signal channel [").concat(this.reconnectionCount_,"/").concat(sE,"]"));var r=this.getReconnectionUrl(t);t===lT?(this.socket_=new WebSocket(r),this.bindSocket(this.socket_)):(this.backupSocket_=new WebSocket(r),this.bindSocket(this.backupSocket_));var i=cR(this.reconnectionCount_);this.reconnectionTimer_=setTimeout((function(){e.log_.warn("reconnect ".concat(t," signal channel timeout(").concat(i/1e3,"s), close and try again")),e.isConnecting_=!1,e.clearReconnectionTimer(),e.unbindAndCloseSocket(t),e.reconnect(t===lT?dT:lT)}),i)}}},{key:"isConnected",value:function(){return this.isConnected_}},{key:"isReconnecting_",get:function(){return-1!==this.reconnectionTimer_}},{key:"getReconnectionUrl",value:function(e){var t=e===lT?this.urlWithParam_:this.backupUrlWithParam_;if(!nD(this.signalInfo_)&&-1===t.indexOf("&rc=1")){var n=this.client_.getRoomId(),r=this.client_.getUseStringRoomId();t+="&rc=1&relayInnerIp=".concat(this.signalInfo_.relayInnerIp,"&relayOuterIp=").concat(this.signalInfo_.relayIp,"&relayPort=").concat(this.signalInfo_.relayPort,"&roomId=").concat(n,"&useStringRoomId=").concat(r)}return t}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isConnected_){var n={cmd:e,data:t,userId:this.userId_,tinyId:this.signalInfo_.tinyId,seq:++this.seq_};return this.socketInUse_.send(JSON.stringify(n)),n.seq}}},{key:"sendWaitForResponse",value:function(e){var t=this,n=e.command,r=e.data,i=e.timeout,o=void 0===i?5e3:i,a=e.responseCommand,s=e.commandDesc,c=e.enableLog,u=void 0===c||c;return new Promise((function(e,i){var c=setTimeout((function(){t.off(a,l);var e=new vP({code:fP.API_CALL_TIMEOUT,message:tR({key:eC,data:{commandDesc:s,command:n}})});u&&t.log_.warn(e),i(e)}),o),l=function n(r){r.data.seq===d&&(clearTimeout(c),t.off(a,n),e(r))};t.on(a,l);var d=t.send(n,r)}))}},{key:"sendWaitForResponseWithRetry",value:function(){var e=this,t=arguments.length<=0?void 0:arguments[0],n=t.commandDesc,r=t.command,i=t.retries,o=void 0===i?0:i,a=t.retryTimeout,s=void 0===a?0:a;return CA({retryFunction:this.sendWaitForResponse,onRetrying:function(t){e.log_.warn("".concat(n||r," timeout observed, retrying [").concat(t,"/").concat(o,"]"))},settings:{retries:o,timeout:s},context:this}).apply(void 0,arguments)}},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"getSignalInfo",value:function(){return this.signalInfo_}},{key:"stopReconnection",value:function(){this.isReconnecting_&&(this.reconnectionCount_=0,this.clearReconnectionTimer())}},{key:"close",value:function(){this.log_.info("close SignalChannel"),this.clearBackupTimer(),this.stopReconnection(),this.isConnecting_=!1,this.isConnected_=!1,this.socketInUse_=null,this.unbindAndCloseSocket(lT),this.unbindAndCloseSocket(dT),this.emitConnectionStateChanged(BO)}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"removeListener",value:function(e,t,n){this.emitter_.removeListener(e,t,n)}},{key:"once",value:function(e,t,n){this.emitter_.once(e,t,n)}},{key:"off",value:function(e,t,n){this.emitter_.off(e,t,n)}},{key:"emitConnectionStateChanged",value:function(e){e!==this.currentState_&&(this.emitter_.emit(jO,{prevState:this.currentState_,state:e}),this.currentState_=e)}}]),e}(),aD=Ei,sD=mo.find,cD=ws,uD="find",lD=!0;uD in[]&&Array(1).find((function(){lD=!1})),aD({target:"Array",proto:!0,forced:lD},{find:function(e){return sD(this,e,arguments.length>1?arguments[1]:void 0)}}),cD(uD);var dD={},hD={},pD={exports:{}},fD=pD.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(fD).forEach((function(e){fD[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,r){var i=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:i&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:i?n[e.name]:n;!function(e,n,r,i){if(i&&!r)n[i]=t(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(n[r[o]]=t(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},r=pD.exports,i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var s=0;s<(r[t]||[]).length;s+=1){var c=r[t][s];if(c.reg.test(i))return n(c,a,i)}})),t.media=o,t};var o=function(e,n){var r=n.split(/=(.+)/,2);return 2===r.length?e[r[0]]=t(r[1]):1===r.length&&n.length>1&&(e[r[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],r=e.split(" ").map(t),i=0;i<r.length;i+=3)n.push({component:r[i],ip:r[i+1],port:r[i+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,r=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),r=!0),{scid:n,paused:r}}))}))}}(hD);var vD=pD.exports,mD=/%[sdv%]/g,gD=function(e){var t=1,n=arguments,r=n.length;return e.replace(mD,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},_D=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return gD.apply(null,r)},yD=["v","o","s","i","u","e","p","c","b","t","r","z","a"],bD=["i","c","b","a"],SD=hD,kD=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||yD,r=t.innerOrder||bD,i=[];return n.forEach((function(t){vD[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(_D(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(_D(t,n,e))}))}))})),e.media.forEach((function(e){i.push(_D("m",vD.m[0],e)),r.forEach((function(t){vD[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(_D(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(_D(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"};dD.write=kD,dD.parse=SD.parse,dD.parseParams=SD.parseParams,dD.parseFmtpConfig=SD.parseFmtpConfig,dD.parsePayloads=SD.parsePayloads,dD.parseRemoteCandidates=SD.parseRemoteCandidates,dD.parseImageAttributes=SD.parseImageAttributes,dD.parseSimulcastStreamList=SD.parseSimulcastStreamList;var wD=function(e){return dD.parse(e)},TD=function(e){return dD.write(e)},ED=function(e){var t=wD(e);return t.media.forEach((function(e){e.type===zw&&e.fmtp.forEach((function(e){e.config+=";sprop-stereo=1;stereo=1"}))})),TD(t)};function ID(e){var t=wD(e);return t.media.forEach((function(e){if(e.type===Ww){var t=new Set;e.rtp.forEach((function(e){var n=e.payload;return"H264"===e.codec&&t.add(n)})),e.fmtp.forEach((function(e){var n=e.payload,r=e.config.match(/apt=(\d+)/);r&&r[1]&&t.has(Number(r[1]))&&t.add(n)}));var n=function(e){var n=e.payload;return!t.has(n)};e.rtp=e.rtp.filter(n),e.rtcpFb=e.rtcpFb.filter(n),e.fmtp=e.fmtp.filter(n),e.payloads=e.payloads.split(" ").filter((function(e){return!t.has(Number(e))})).join(" ")}})),TD(t)}var CD,xD,RD,AD,OD=Ei,PD=te,DD=xr,LD=i_,ND=gp,MD=O,UD=RangeError,jD=String,VD=Math.floor,FD=PD(ND),BD=PD("".slice),$D=PD(1..toFixed),HD=function(e,t,n){return 0===t?n:t%2==1?HD(e,t-1,n*e):HD(e*e,t/2,n)},zD=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=VD(i/1e7)},WD=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=VD(r/t),r=r%t*1e7},qD=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=jD(e[t]);n=""===n?r:n+FD("0",7-r.length)+r}return n};OD({target:"Number",proto:!0,forced:MD((function(){return"0.000"!==$D(8e-5,3)||"1"!==$D(.9,0)||"1.25"!==$D(1.255,2)||"1000000000000000128"!==$D(0xde0b6b3a7640080,0)}))||!MD((function(){$D({})}))},{toFixed:function(e){var t,n,r,i,o=LD(this),a=DD(e),s=[0,0,0,0,0,0],c="",u="0";if(a<0||a>20)throw UD("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return jD(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*HD(2,69,1))-69)<0?o*HD(2,-t,1):o/HD(2,t,1),n*=4503599627370496,(t=52-t)>0){for(zD(s,0,n),r=a;r>=7;)zD(s,1e7,0),r-=7;for(zD(s,HD(10,r,1),0),r=t-1;r>=23;)WD(s,1<<23),r-=23;WD(s,1<<r),zD(s,1,1),WD(s,2),u=qD(s)}else zD(s,0,n),zD(s,1<<-t,0),u=qD(s)+FD("0",a);return a>0?c+((i=u.length)<=a?"0."+FD("0",a-i)+u:BD(u,0,i-a)+"."+BD(u,i-a)):c+u}});var GD=(null===(CD=window)||void 0===CD?void 0:CD.requestIdleCallback)||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1e3)},JD=(null===(xD=window)||void 0===xD?void 0:xD.cancelIdleCallback)||function(e){clearTimeout(e)},KD=(null===(RD=window)||void 0===RD?void 0:RD.cancelAnimationFrame)||(null===(AD=window)||void 0===AD?void 0:AD.mozCancelAnimationFrame),QD=function(){function e(){s(this,e)}return u(e,null,[{key:"generateTaskID",value:function(){return this.currentTaskID++}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:II,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;r=t(t({},e===EI?{delay:2e3,count:0,backgroundTask:!0}:e===wI?{delay:1e4,count:0}:e===TI?{fps:60,delay:16.6,count:0,backgroundTask:!0}:{delay:2e3,count:0,backgroundTask:!0}),r),fR(n)&&(r=t(t({},r),n)),uR(e)&&(n=e,e=II);var i=t({taskID:this.generateTaskID(),loopCount:0,intervalID:null,timeoutID:null,rafID:null,ricID:null,taskName:e,callback:n},r);return this.taskMap.set(i.taskID,i),this[e](i),i.taskID}},{key:"interval",value:function(e){var t=this;return e.intervalID=setInterval((function(){e.callback(),e.loopCount+=1,t.isBreakLoop(e)}),e.delay)}},{key:"timeout",value:function(e){var t=this;return e.timeoutID=setTimeout((function n(){if(e.callback(),e.loopCount+=1,!t.isBreakLoop(e))return e.timeoutID=setTimeout(n,e.delay)}),e.delay)}},{key:"ric",value:function(e){var t,n=this,r=yR();return e.ricID=GD((function i(){if((t=yR()-r)>=e.delay&&(r=yR()-Math.floor(t%e.delay),e.callback(),e.loopCount+=1),!n.isBreakLoop(e))return e.ricID=GD(i,{timeout:e.delay})}),{timeout:e.delay})}},{key:"raf",value:function(e){var t=this;e.delay=(1e3/e.fps).toFixed(2);var n,r=yR(),i=function i(){if(document.hidden&&e.backgroundTask){if(n=yR()-r,r=yR(),e.callback(),e.loopCount+=1,t.isBreakLoop(e))return;return e.timeoutID=setTimeout(i,e.delay-Math.floor(n%e.delay))}if((n=yR()-r)>=e.delay&&(r=yR()-Math.floor(n%e.delay),e.callback(),e.loopCount+=1),!t.isBreakLoop(e))return e.rafID=requestAnimationFrame(i)};if(e.rafID=requestAnimationFrame(i),e.backgroundTask){var o=function(){if(document.hidden){var t=yR()-r;t>=e.delay?i():e.timeoutID=setTimeout(i,e.delay-t)}};document.addEventListener("visibilitychange",o),e.onVisibilitychange=o,document.hidden&&o()}return e.taskID}},{key:"hasTask",value:function(e){return this.taskMap.has(e)}},{key:"clearTask",value:function(e){if(!this.taskMap.has(e))return!0;var t=this.taskMap.get(e),n=t.intervalID,r=t.timeoutID,i=t.rafID,o=t.ricID,a=t.onVisibilitychange;return n&&clearInterval(n),r&&clearTimeout(r),i&&KD(i),o&&JD(o),a&&document.removeEventListener("visibilitychange",a),this.taskMap.delete(e),!0}},{key:"isBreakLoop",value:function(e){return!this.taskMap.has(e.taskID)||0!==e.count&&e.loopCount>=e.count&&(this.clearTask(e.taskID),!0)}}]),e}();l(QD,"taskMap",new Map),l(QD,"currentTaskID",1);var XD=function(){function e(){s(this,e),this.prefix_="TRTC",this.queue_=new Map,this.checkStorage()}return u(e,[{key:"getRealKey",value:function(e){return"".concat(this.prefix_,"_").concat(e)}},{key:"checkStorage",value:function(){var e=this;if(jw()){var t=Object.keys(localStorage).filter((function(t){if(t.startsWith(e.prefix_)){var n=JSON.parse(localStorage.getItem(t));if(n&&n.expiresIn<Date.now())return!0}return!1}));t.forEach((function(e){return localStorage.removeItem(e)}))}}},{key:"doFlush",value:function(){if(jw())try{var e,t=E(this.queue_);try{for(t.s();!(e=t.n()).done;){var n=S(e.value,2),r=n[0],i=n[1];localStorage.setItem(r,JSON.stringify(i))}}catch(a){t.e(a)}finally{t.f()}}catch(Yq){PA.warn(Yq)}}},{key:"getItem",value:function(e){if(!jw())return null;try{var t=JSON.parse(localStorage.getItem(this.getRealKey(e)));return t&&t.expiresIn>=Date.now()?t.value:null}catch(Yq){PA.warn(Yq)}}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(jw())try{var r={expiresIn:Date.now()+eI,value:t};n?localStorage.setItem(this.getRealKey(e),JSON.stringify(r)):(this.queue_.set(this.getRealKey(e),r),QD.hasTask(this.intervalId_)||(this.intervalId_=QD.run(wI,this.doFlush.bind(this),{count:1})))}catch(Yq){PA.warn(Yq)}}},{key:"deleteItem",value:function(e){if(!jw())return!1;try{return e=this.getRealKey(e),this.queue_.delete(e),localStorage.removeItem(e),!0}catch(Yq){return PA.warn(Yq),!1}}},{key:"clear",value:function(){if(jw())try{localStorage.clear()}catch(Yq){PA.warn(Yq)}}}]),e}(),YD=new XD,ZD={result:!1,detail:{isBrowserSupported:!1,isWebRTCSupported:!1,isMediaDevicesSupported:!1,isH264EncodeSupported:!1,isVp8EncodeSupported:!1,isH264DecodeSupported:!1,isVp8DecodeSupported:!1}},eL="checkResult",tL=function(){return!dw&&!Vk&&!(Bk&&$k<80)&&!(Uk&&jk<56)},nL=function(){return["RTCPeerConnection","webkitRTCPeerConnection","RTCIceGatherer"].filter((function(e){return e in window})).length>0},rL=function(){if(!navigator.mediaDevices)return!1;var e=["getUserMedia","enumerateDevices"];return e.filter((function(e){return e in navigator.mediaDevices})).length===e.length},iL=function(){var e=a(r().mark((function e(){var t,n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ZD.detail.isH264EncodeSupported||!ZD.detail.isVp8EncodeSupported){e.next=2;break}return e.abrupt("return",{isH264EncodeSupported:ZD.detail.isH264EncodeSupported,isVp8EncodeSupported:ZD.detail.isVp8EncodeSupported});case 2:return t="",n=!1,i=!1,e.prev=5,o=new RTCPeerConnection,(a=document.createElement(Hw)).getContext("2d"),s=a.captureStream(0),o.addTrack(s.getVideoTracks()[0],s),e.next=13,o.createOffer();case 13:return-1!==(t=e.sent).sdp.toLowerCase().indexOf("h264")&&(n=!0),-1!==t.sdp.toLowerCase().indexOf("vp8")&&(i=!0),o.close(),ZD.detail.isH264EncodeSupported=n,ZD.detail.isVp8EncodeSupported=i,e.abrupt("return",{isH264EncodeSupported:ZD.detail.isH264EncodeSupported,isVp8EncodeSupported:ZD.detail.isVp8EncodeSupported});case 22:return e.prev=22,e.t0=e.catch(5),e.abrupt("return",{isH264EncodeSupported:!1,isVp8EncodeSupported:!1});case 25:case"end":return e.stop()}}),e,null,[[5,22]])})));return function(){return e.apply(this,arguments)}}();function oL(){return aL.apply(this,arguments)}function aL(){return aL=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a(r().mark((function e(t){var n,i,o,s,c,u,l,d,h,p,f,v,m,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={encode:!1,decode:!1},i=null,e.prev=2,o=document.createElement("canvas"),s=o.getContext("2d"),o.width=640,o.height=480,c=setInterval((function(){s.fillText("test",Math.floor(640*Math.random()),Math.floor(480*Math.random()))}),33),u=-1,l=-1,i=function(){clearInterval(u),clearInterval(c),clearTimeout(l),h.close(),p.close(),d.getTracks().forEach((function(e){return e.stop()}))},l=setTimeout((function(){i(),t(n)}),3e3),d=o.captureStream(),h=new RTCPeerConnection({}),p=new RTCPeerConnection({offerToReceiveAudio:!0,offerToReceiveVideo:!0}),h.addEventListener("icecandidate",(function(e){return p.addIceCandidate(e.candidate)})),p.addEventListener("icecandidate",(function(e){return h.addIceCandidate(e.candidate)})),h.addTrack(d.getVideoTracks()[0],d),e.next=20,h.createOffer();case 20:return f=e.sent,e.next=23,h.setLocalDescription(f);case 23:return e.next=25,p.setRemoteDescription(f);case 25:return e.next=27,p.createAnswer();case 27:return v=e.sent,m=wD(v.sdp),g=m.media[0].rtp.findIndex((function(e){return"H264"===e.codec})),m.media[0].rtp=[m.media[0].rtp[g]],m.media[0].fmtp=m.media[0].fmtp.filter((function(e){return e.payload===m.media[0].rtp[0].payload})),m.media[0].rtcpFb=m.media[0].rtcpFb.filter((function(e){return e.payload===m.media[0].rtp[0].payload})),v.sdp=TD(m),e.next=36,p.setLocalDescription(v);case 36:return e.next=38,h.setRemoteDescription(v);case 38:u=setInterval(a(r().mark((function e(){var o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.encode&&n.decode&&(i(),t(n)),e.next=3,h.getStats();case 3:return o=e.sent,e.next=6,p.getStats();case 6:a=e.sent,n.encode||o.forEach((function(e){"outbound-rtp"===e.type&&e.mediaType===Ww&&e.framesEncoded>0&&(n.encode=!0)})),n.decode||a.forEach((function(e){"inbound-rtp"===e.type&&e.mediaType===Ww&&e.framesDecoded>0&&(n.decode=!0)}));case 9:case"end":return e.stop()}}),e)}))),500),e.next=46;break;case 41:e.prev=41,e.t0=e.catch(2),i(),PA.warn(e.t0),t(n);case 46:case"end":return e.stop()}}),e,null,[[2,41]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),aL.apply(this,arguments)}var sL=function(){var e=a(r().mark((function e(){var t,n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ZD.detail.isH264DecodeSupported||!ZD.detail.isVp8DecodeSupported){e.next=2;break}return e.abrupt("return",{isH264DecodeSupported:ZD.detail.isH264DecodeSupported,isVp8DecodeSupported:ZD.detail.isVp8DecodeSupported});case 2:return t="",n=!1,i=!1,e.prev=5,o=new RTCPeerConnection,e.next=9,o.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1});case 9:return-1!==(t=e.sent).sdp.toLowerCase().indexOf("h264")&&(n=!0),-1!==t.sdp.toLowerCase().indexOf("vp8")&&(i=!0),o.close(),e.abrupt("return",{isH264DecodeSupported:n,isVp8DecodeSupported:i});case 16:return e.prev=16,e.t0=e.catch(5),e.abrupt("return",{isH264DecodeSupported:!1,isVp8DecodeSupported:!1});case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),cL=function(){var e=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d,h,p,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lL()){e.next=2;break}return e.abrupt("return",ZD);case 2:return t=tL(),n=nL(),i=rL(),e.next=7,iL();case 7:return o=e.sent,a=o.isH264EncodeSupported,s=o.isVp8EncodeSupported,e.next=12,sL();case 12:if(c=e.sent,u=c.isH264DecodeSupported,l=c.isVp8DecodeSupported,a&&s){e.next=21;break}return e.next=18,iL();case 18:d=e.sent,a=d.isH264EncodeSupported,s=d.isVp8EncodeSupported;case 21:if(!(a&&u&&(Sw||ww||Pw)&&!Gk&&Ew()<79)){e.next=29;break}return e.next=24,oL();case 24:h=e.sent,p=h.encode,f=h.decode,a=p,u=f;case 29:return ZD.result=t&&n&&i&&(a||s)&&(u||l),ZD.detail.isBrowserSupported=t,ZD.detail.isWebRTCSupported=n,ZD.detail.isMediaDevicesSupported=i,ZD.detail.isH264EncodeSupported=a,ZD.detail.isVp8EncodeSupported=s,ZD.detail.isH264DecodeSupported=u,ZD.detail.isVp8DecodeSupported=l,dL(),YD.setItem(eL,{ua:navigator.userAgent,checkResult:ZD},!0),e.abrupt("return",ZD);case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),uL=function(e,t){var n=null;return function(){if(n)return n;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.apply(t||this,i)).then((function(e){return n=null,e})).catch((function(e){throw n=null,e})),n}}(cL);function lL(){return Object.keys(ZD.detail).findIndex((function(e){return!ZD.detail[e]}))>=0}function dL(){lL()&&(PA.warn(tR({key:Cx})),PA.info("".concat(navigator.userAgent," ").concat(JSON.stringify(ZD.detail))))}function hL(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)}function pL(){return"RTCPeerConnection"in window&&"getReceivers"in window.RTCPeerConnection.prototype}function fL(){return"RTCPeerConnection"in window&&"getSenders"in window.RTCPeerConnection.prototype}function vL(){return"RTCPeerConnection"in window&&"getTransceivers"in window.RTCPeerConnection.prototype}function mL(){return"RTCPeerConnection"in window&&"addTransceiver"in window.RTCPeerConnection.prototype}function gL(){return"RTCRtpSender"in window&&"replaceTrack"in window.RTCRtpSender.prototype}function _L(){return"RTCRtpSender"in window&&"setParameters"in window.RTCRtpSender.prototype&&fL()}function yL(){return!!lR(navigator.mediaDevices)&&(PA.error(Yx.NOT_SUPPORTED_MEDIA),!0)}function bL(){return"http:"===location.protocol&&!Uw&&(PA.warn(tR({key:Ix})),!0)}var SL="RTCRtpSender"in window&&"createEncodedStreams"in window.RTCRtpSender.prototype&&Ew()>=86;function kL(e){return!("candidate-pair"!==e.type||!e.nominated||"in-progress"!==e.state&&"succeeded"!==e.state)&&!(pR(e.selected)&&!e.selected)}var wL=new Map([[Mk,"Android"],[Nk,"iOS"],[cw,"Windows"],[uw,"MacOS"],[lw,"Linux"]]);function TL(){var e="unknown";return wL.get(!0)&&(e=wL.get(!0)),e}function EL(){var e="";return screen.width&&(e+=(screen.width?screen.width*window.devicePixelRatio:"")+" * "+(screen.height?screen.height*window.devicePixelRatio:"")),e}function IL(){var e=!1;return(navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)&&(e=!0),e}function CL(){for(var e={isSupported:!1},t=["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"],n=0;n<t.length;n++)if(t[n]in window){e.isSupported=!0;break}return e.isSupported}function xL(){return!(Xk||Nk||xw&&xw<63)&&!(!tL()||!("captureStream"in HTMLCanvasElement.prototype))}var RL=window.MediaStreamTrack&&"getSettings"in MediaStreamTrack.prototype,AL=window.MediaStreamTrack&&"getCapabilities"in MediaStreamTrack.prototype,OL=function(){var e,t,n;return(null===(e=window)||void 0===e?void 0:e.OffscreenCanvas)&&(null===(t=window)||void 0===t?void 0:t.MediaStreamTrackProcessor)&&(null===(n=window)||void 0===n?void 0:n.MediaStreamTrackGenerator)};!function(){bL();var e=YD.getItem(eL);e&&e.ua===navigator.userAgent&&(ZD=e.checkResult),uL()}();var PL={STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",STREAM_UPDATED:"stream-updated",STREAM_PUBLISHED:"stream-published",STREAM_SUBSCRIBED:"stream-subscribed",STREAM_UNSUBSCRIBED:"stream-unsubscribed",STATE_CHANGED:"state-changed",ERROR:"error",CONNECTION_STATE_CHANGED:"connection-state-changed",SEI_MESSAGE:mT},DL={STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",STREAM_UPDATED:"stream-updated",STREAM_SUBSCRIBED:"stream-subscribed",CONNECTION_STATE_CHANGED:"connection-state-changed",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",MUTE_AUDIO:"mute-audio",MUTE_VIDEO:"mute-video",UNMUTE_AUDIO:"unmute-audio",UNMUTE_VIDEO:"unmute-video",CLIENT_BANNED:"client-banned",NETWORK_QUALITY:"network-quality",AUDIO_VOLUME:"audio-volume",SEI_MESSAGE:mT,ERROR:"error"},LL="player-state-changed",NL="screen-sharing-stopped",ML="connection-state-changed",UL="device-auto-recovered",jL="error",VL="player-state-changed",FL=OI;Ei({target:"String",proto:!0,forced:DI("small")},{small:function(){return FL(this,"small","","")}});var BL,$L=function(){function e(t){s(this,e);var n=t.getUserId();this.log_=PA.createLogger({id:n,userId:n,sdkAppId:t.getSDKAppId()}),this.prevReportTime_=0,this.prevReport_={},this.prevEncoderImplementation_="",this.prevQualityLimitationReason_="",this.prevDecoderImplementationMap_=new Map}var t,n,i,o;return u(e,[{key:"statInterval",get:function(){return 0===this.prevReportTime_?2:(Date.now()-this.prevReportTime_)/1e3}},{key:"getSenderStats",value:(o=a(r().mark((function e(t){var n,i,o,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={audio:{bytesSent:0,packetsSent:0,audioLevel:0,totalAudioEnergy:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},small:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},auxiliary:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},rtt:0},i=t.getPeerConnection(),o=t.getSSRC(),!i){e.next=14;break}return e.prev=4,e.next=7,i.getStats();case 7:e.sent.forEach((function(e){if("outbound-rtp"===e.type)if(e.mediaType===Ww){if(!Uk&&lR(e.trackId))return;e.ssrc!==o.video||lR(e.encoderImplementation)||a.prevEncoderImplementation_===e.encoderImplementation||(a.log_.info("encoderImplementation change to ".concat(e.encoderImplementation)),a.prevEncoderImplementation_=e.encoderImplementation),e.ssrc!==o.video||lR(e.qualityLimitationReason)||a.prevQualityLimitationReason_===e.qualityLimitationReason||(a.log_.info("qualityLimitationReason change to ".concat(e.qualityLimitationReason)),a.prevQualityLimitationReason_=e.qualityLimitationReason);var r=Ww;e.ssrc===o.small?r=Gw:e.ssrc===o.auxiliary&&(r=Kw),n[r].bytesSent=e.bytesSent,n[r].packetsSent=e.packetsSent,n[r].framesEncoded=e.framesEncoded}else e.mediaType===zw&&(n.audio.bytesSent=e.bytesSent,n.audio.packetsSent=e.packetsSent);else if("candidate-pair"===e.type)kL(e)&&hR(e.currentRoundTripTime)&&(n.rtt=Math.floor(1e3*e.currentRoundTripTime));else if("track"===e.type){if(!lR(e.frameWidth)){var i=Gw;e.trackIdentifier===t.getVideoTrackId(Ww)?i=Ww:e.trackIdentifier===t.getVideoTrackId(Kw)&&(i=Kw),n[i].frameWidth=e.frameWidth,n[i].frameHeight=e.frameHeight,n[i].framesSent=e.framesSent}var s;if(lR(e.audioLevel)){if(Aw)n.audio.audioLevel=(null===(s=t.getLocalStream())||void 0===s?void 0:s.getInternalAudioLevel())||0}else n.audio.audioLevel=e.audioLevel||0}else"media-source"===e.type&&(e.kind===zw?(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0):e.kind===Ww&&(e.trackIdentifier===t.getVideoTrackId(Ww)?n.video.fpsCapture=e.framesPerSecond:e.trackIdentifier===t.getVideoTrackId(Kw)?n.auxiliary.fpsCapture=e.framesPerSecond:n.small.fpsCapture=e.framesPerSecond))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.log_.warn("failed to getStats on sender connection "+e.t0);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return o.apply(this,arguments)})},{key:"getReceiverStats",value:(i=a(r().mark((function e(t){var n,i,o,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={tinyId:t.getTinyId(),userId:t.getUserId(),rtt:0,hasAudio:!1,hasVideo:!1,hasAuxiliary:!1,audio:{bytesReceived:0,packetsReceived:0,packetsLost:0,jitter:0,audioLevel:0,totalAudioEnergy:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0},auxiliary:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0}},!(i=t.getPeerConnection())){e.next=15;break}return e.prev=3,o=t.getSSRC(),a=t.getTrackState(),e.next=8,i.getStats();case 8:e.sent.forEach((function(e){if("inbound-rtp"===e.type){if(e.mediaType===zw&&e.ssrc===o.audio&&a.audio)n.audio.packetsReceived=e.packetsReceived,n.audio.bytesReceived=e.bytesReceived,n.audio.packetsLost=e.packetsLost,n.audio.jitter=e.jitter,n.hasAudio=!0;else if(e.mediaType===Ww){if(Uk&&0===e.bytesReceived)return;e.ssrc===o.video&&a.video&&(n.video.packetsReceived=e.packetsReceived,n.video.bytesReceived=e.bytesReceived,n.video.packetsLost=e.packetsLost,n.video.framesReceived=e.framesReceived,n.video.framesDecoded=e.framesDecoded,n.video.fpsDecoded=e.framesPerSecond,n.hasVideo=!0,!e.decoderImplementation||s.prevDecoderImplementationMap_.has(n.userId)&&s.prevDecoderImplementationMap_.get(n.userId)===e.decoderImplementation||(s.log_.info("".concat(n.userId," decoderImplementation change to ").concat(e.decoderImplementation)),s.prevDecoderImplementationMap_.set(n.userId,e.decoderImplementation))),e.ssrc===o.auxiliary&&a.auxiliary&&(n.auxiliary.packetsReceived=e.packetsReceived,n.auxiliary.bytesReceived=e.bytesReceived,n.auxiliary.packetsLost=e.packetsLost,n.auxiliary.framesReceived=e.framesReceived,n.auxiliary.framesDecoded=e.framesDecoded,n.auxiliary.fpsDecoded=e.framesPerSecond,n.hasAuxiliary=!0)}}else"track"===e.type?(lR(e.frameWidth)||(e.trackIdentifier===t.getMainStreamVideoTrackId()&&(n.video.frameWidth=e.frameWidth,n.video.frameHeight=e.frameHeight),e.trackIdentifier===t.getAuxStreamVideoTrackId()&&(n.auxiliary.frameWidth=e.frameWidth,n.auxiliary.frameHeight=e.frameHeight)),lR(e.audioLevel)||(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0)):"candidate-pair"===e.type&&kL(e)&&hR(e.currentRoundTripTime)&&(n.rtt=Math.floor(1e3*e.currentRoundTripTime))})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),this.log_.warn("failed to getStats on receiver connection "+e.t0);case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(e){return i.apply(this,arguments)})},{key:"getStats",value:(n=a(r().mark((function e(t,n){var i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},!t){e.next=5;break}return e.next=4,this.getSenderStats(t);case 4:i=e.sent;case 5:o=[],a=E(n),e.prev=7,a.s();case 9:if((s=a.n()).done){e.next=17;break}return(c=S(s.value,2))[0],u=c[1],e.next=13,this.getReceiverStats(u);case 13:l=e.sent,o.push(l);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:return e.abrupt("return",{senderStats:i,receiverStats:o});case 26:case"end":return e.stop()}}),e,this,[[7,19,22,25]])}))),function(e,t){return n.apply(this,arguments)})},{key:"getDifferenceValue",value:function(e,t){if(nD(e))return t;var n=t-e;return n<0?0:n}},{key:"prepareReport",value:function(e){var t=this,n=e.stats,r=e.report,i=e.freezeMap;if(!nD(n.senderStats)){var o;o={uint32_audio_level:1e8*n.senderStats.audio.audioLevel,uint32_audio_energy:1e6*n.senderStats.audio.totalAudioEnergy,uint32_audio_codec_bitrate:n.senderStats.audio.bytesSent,audioLevel:n.senderStats.audio.audioLevel};var a=[],s={uint32_video_stream_type:2,uint32_video_codec_fps:n.senderStats.video.framesSent,uint32_video_capture_fps:n.senderStats.video.fpsCapture,uint32_video_width:n.senderStats.video.frameWidth,uint32_video_height:n.senderStats.video.frameHeight,uint32_video_codec_bitrate:n.senderStats.video.bytesSent,uint32_video_enc_fps:n.senderStats.video.framesEncoded};if(a.push(s),n.senderStats.small.bytesSent){var c={uint32_video_stream_type:3,uint32_video_codec_fps:n.senderStats.small.framesSent||0,uint32_video_capture_fps:n.senderStats.small.fpsCapture||0,uint32_video_width:n.senderStats.small.frameWidth||0,uint32_video_height:n.senderStats.small.frameHeight||0,uint32_video_codec_bitrate:n.senderStats.small.bytesSent,uint32_video_enc_fps:n.senderStats.small.framesEncoded||0};a.push(c)}if(n.senderStats.auxiliary.bytesSent){var u={uint32_video_stream_type:7,uint32_video_codec_fps:n.senderStats.auxiliary.framesSent||0,uint32_video_capture_fps:n.senderStats.auxiliary.fpsCapture||0,uint32_video_width:n.senderStats.auxiliary.frameWidth||0,uint32_video_height:n.senderStats.auxiliary.frameHeight||0,uint32_video_codec_bitrate:n.senderStats.auxiliary.bytesSent,uint32_video_enc_fps:n.senderStats.auxiliary.framesEncoded||0};a.push(u)}var l={uint32_bitrate:0,uint32_rtt:n.senderStats.rtt};r.msg_up_stream_info={msg_audio_status:o,msg_video_status:a,msg_network_status:l}}var d=this.statInterval;r.msg_down_stream_info=[],n.receiverStats.forEach((function(e){var t={};if(t.msg_user_info={str_identifier:e.userId,uint64_tinyid:e.tinyId},t.msg_network_status={uint32_rtt:e.rtt},t.msg_video_status={},e.hasAudio){var n={uint32_audio_codec_bitrate:e.audio.bytesReceived,uint32_audio_total_bitrate:e.audio.bytesReceived,uint32_audio_level:1e8*e.audio.audioLevel,uint32_audio_energy:1e6*e.audio.totalAudioEnergy,uint32_audio_receive:e.audio.packetsReceived,uint32_audio_origin_lost:e.audio.packetsLost,audioLevel:e.audio.audioLevel};t.msg_audio_status=n}if(t.msg_video_status=[],e.hasVideo){var o=i.get(e.userId+"_"+GT),a=o?o.duration:0,s={uint32_video_stream_type:2,uint32_video_receive_fps:e.video.framesReceived,uint32_video_width:e.video.frameWidth,uint32_video_height:e.video.frameHeight,uint32_video_codec_bitrate:e.video.bytesReceived,uint32_video_receive:e.video.packetsReceived,uint32_video_origin_lost:e.video.packetsLost,uint32_video_block_time:a,uint32_video_dec_fps:e.video.framesDecoded};t.msg_video_status.push(s)}if(e.hasAuxiliary){var c=i.get(e.userId+"_"+JT),u=c?c.duration:0,l={uint32_video_stream_type:7,uint32_video_receive_fps:e.auxiliary.framesReceived,uint32_video_width:e.auxiliary.frameWidth,uint32_video_height:e.auxiliary.frameHeight,uint32_video_codec_bitrate:e.auxiliary.bytesReceived,uint32_video_receive:e.auxiliary.packetsReceived+e.auxiliary.packetsLost,uint32_video_origin_lost:e.auxiliary.packetsLost,uint32_video_block_time:u,uint32_video_dec_fps:e.auxiliary.framesDecoded};t.msg_video_status.push(l)}r.msg_down_stream_info.push(t)}));var h=this.prevReport_;if(this.prevReport_=JSON.parse(JSON.stringify(r)),r.msg_up_stream_info.msg_audio_status&&h.msg_up_stream_info.msg_audio_status){var p=h.msg_up_stream_info.msg_audio_status,f=r.msg_up_stream_info.msg_audio_status,v=this.getDifferenceValue(p.uint32_audio_codec_bitrate,f.uint32_audio_codec_bitrate);f.uint32_audio_codec_bitrate=Math.round(8*v/d),r.msg_up_stream_info.msg_network_status.uint32_bitrate+=f.uint32_audio_codec_bitrate}var m=h.msg_up_stream_info.msg_video_status;r.msg_up_stream_info.msg_video_status.forEach((function(e){var n=m.find((function(t){return t.uint32_video_stream_type===e.uint32_video_stream_type}));if(!n||0===n.uint32_video_codec_bitrate)return e.uint32_video_codec_bitrate=0,e.uint32_video_enc_fps=0,void(e.uint32_video_codec_fps=0);var i=n.uint32_video_codec_bitrate,o=n.uint32_video_enc_fps,a=n.uint32_video_codec_fps,s=t.getDifferenceValue(i,e.uint32_video_codec_bitrate);e.uint32_video_codec_bitrate=Math.round(8*s/d),r.msg_up_stream_info.msg_network_status.uint32_bitrate+=e.uint32_video_codec_bitrate,e.uint32_video_enc_fps=Math.round(t.getDifferenceValue(o,e.uint32_video_enc_fps)/d),e.uint32_video_codec_fps=Math.round(t.getDifferenceValue(a,e.uint32_video_codec_fps)/d)}));var g=r.msg_down_stream_info,_=h.msg_down_stream_info;return g.forEach((function(e){var n=_.find((function(t){return t.msg_user_info.uint64_tinyid===e.msg_user_info.uint64_tinyid}));if(n){if(e.msg_audio_status&&n.msg_audio_status){var r=e.msg_audio_status,i=n.msg_audio_status;r.uint32_audio_origin_lost=t.getDifferenceValue(i.uint32_audio_origin_lost,r.uint32_audio_origin_lost),r.uint32_audio_receive=t.getDifferenceValue(i.uint32_audio_receive,r.uint32_audio_receive),r.uint32_audio_receive+=r.uint32_audio_origin_lost;var o=t.getDifferenceValue(i.uint32_audio_codec_bitrate,r.uint32_audio_codec_bitrate);r.uint32_audio_codec_bitrate=Math.round(8*o/d),r.uint32_audio_total_bitrate=Math.round(8*o/d)}if(e.msg_video_status&&n.msg_video_status){var a=e.msg_video_status,s=n.msg_video_status;a.forEach((function(e){var n=s.find((function(t){return t.uint32_video_stream_type===e.uint32_video_stream_type}));if(!n)return e.uint32_video_receive=0,e.uint32_video_origin_lost=0,e.uint32_video_codec_bitrate=0,e.uint32_video_receive_fps=0,void(e.uint32_video_dec_fps=0);var r=n.uint32_video_receive,i=n.uint32_video_origin_lost,o=n.uint32_video_codec_bitrate,a=n.uint32_video_receive_fps,c=n.uint32_video_dec_fps;e.uint32_video_origin_lost=t.getDifferenceValue(i,e.uint32_video_origin_lost),e.uint32_video_receive=t.getDifferenceValue(r,e.uint32_video_receive)+e.uint32_video_origin_lost;var u=t.getDifferenceValue(o,e.uint32_video_codec_bitrate);e.uint32_video_codec_bitrate=Math.round(8*u/d);var l=t.getDifferenceValue(a,e.uint32_video_receive_fps);e.uint32_video_receive_fps=Math.round(l/d),e.uint32_video_dec_fps=Math.round(t.getDifferenceValue(c,e.uint32_video_dec_fps)/d)}))}}})),r}},{key:"getStatsReport",value:(t=a(r().mark((function e(t){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uplinkConnection,i=t.downlinkConnections,o=t.freezeMap,a={msg_up_stream_info:{msg_audio_status:{uint32_audio_format:0,uint32_audio_sample_rate:0,uint32_audio_codec_bitrate:0,uint32_audio_receive:0,uint32_audio_origin_lost:0,uint32_audio_level:0,uint32_audio_energy:0,audioLevel:0},msg_video_status:[{uint32_video_stream_type:0,uint32_video_codec_fps:0,uint32_video_capture_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_codec_bitrate:0,uint32_video_receive:0,uint32_video_origin_lost:0,uint32_video_final_lost:0,uint32_video_enc_fps:0}],msg_network_status:{uint32_bitrate:0,uint32_rtt:0,uint32_lost:0}},msg_down_stream_info:[{msg_user_info:{str_identifier:"",uint64_tinyid:""},msg_audio_status:{uint32_audio_format:0,uint32_audio_sample_rate:0,uint32_audio_codec_bitrate:0,uint32_audio_total_bitrate:0,uint32_audio_level:0,uint32_audio_energy:0,uint32_audio_receive:0,uint32_audio_origin_lost:0,uint32_audio_final_lost:0,audioLevel:0},msg_video_status:[{uint32_video_stream_type:0,uint32_video_receive_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_codec_bitrate:0,uint32_video_receive:0,uint32_video_origin_lost:0,uint32_video_block_time:0,uint32_video_dec_fps:0}],msg_network_status:{uint32_bitrate:0,uint32_rtt:0,uint32_lost:0,uint32_jitter:0}}]},e.next=4,this.getStats(n,i);case 4:return s=e.sent,"{}"===JSON.stringify(this.prevReport_)&&(this.prevReport_=JSON.parse(JSON.stringify(a))),this.prepareReport({stats:s,report:a,freezeMap:o,uplinkConnection:n,downlinkConnections:i}),this.prevReportTime_=Date.now(),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"reset",value:function(){this.prevReportTime_=0,this.prevReport_={},this.prevEncoderImplementation_="",this.prevQualityLimitationReason_="",this.prevDecoderImplementationMap_=new Map}}]),e}(),HL=function(){function e(t){var n=t.signalChannel,r=t.connections,i=t.client;s(this,e),this.client_=i,this.signalChannel_=n,this.connections_=r,this.client_=i,this.log_=PA.createLogger({id:"q|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),this.uplinkConnection_=null,this.uplinkNetworkQuality_=0,this.uplinkRTT_=0,this.uplinkLoss_=0,this.downlinkNetworkQuality_=0,this.downlinkRTT_=0,this.downlinkLoss_=0,this.downlinkPrevStatMap_=new Map,this.downlinkLossAndRTTMap_=new Map,this.interval_=-1,this.emitter_=new DR,this.initialize()}var t,n;return u(e,[{key:"uplinkNetworkQuality",get:function(){return this.uplinkNetworkQuality_},set:function(e){e!==this.uplinkNetworkQuality_&&this.log_.info("uplink network quality change ".concat(this.uplinkNetworkQuality," -> ").concat(e,", rtt: ").concat(this.uplinkRTT_,", loss: ").concat(this.uplinkLoss_)),this.uplinkNetworkQuality_=e}},{key:"downlinkNetworkQuality",get:function(){return this.downlinkNetworkQuality_},set:function(e){if(e!==this.downlinkNetworkQuality_){var t=this.getAverageLossAndRTT(k(this.downlinkLossAndRTTMap_.values())),n=t.rtt,r=t.loss;this.log_.info("downlink network quality change ".concat(this.downlinkNetworkQuality," -> ").concat(e,", rtt: ").concat(n,", loss: ").concat(r))}this.downlinkNetworkQuality_=e}},{key:"initialize",value:function(){var e=this;this.signalChannel_.on(GO.UPLINK_NETWORK_STATS,(function(t){e.handleUplinkNetworkQuality(t)})),this.signalChannel_.on(jO,this.handleSignalConnectionStateChange.bind(this)),this.start()}},{key:"handleUplinkNetworkQuality",value:function(e){if(!this.uplinkConnection_)return this.uplinkNetworkQuality=0,this.uplinkLoss_=0,void(this.uplinkRTT_=0);var t=this.uplinkConnection_.getPeerConnection();if(t&&this.isPeerConnectionDisconnected(t))return this.uplinkNetworkQuality=6,this.uplinkLoss_=0,void(this.uplinkRTT_=0);if(0===e.data.code){var n=e.data.data,r=n.expectAudPkg+n.expectVidPkg,i=n.recvAudPkg+n.recvVidPkg,o=r-i,a=n.delay;if(a&&this.updateDelay(a),0===r&&0===i)return;this.uplinkLoss_=o<=0?0:Math.round(o/r*100),this.uplinkRTT_=n.rtt,this.uplinkNetworkQuality=this.getNetworkQuality(this.uplinkLoss_,this.uplinkRTT_)}}},{key:"handleDownlinkNetworkQuality",value:(n=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d,h,p,f,v,m,g=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connections_&&0!==this.connections_.size){e.next=3;break}return this.downlinkNetworkQuality=0,e.abrupt("return");case 3:if(t=k(this.connections_.values()),n=t.filter((function(e){return e.getPeerConnection()&&e.getPeerConnection().connectionState===oE})),t.filter((function(e){return e.getPeerConnection()&&g.isPeerConnectionDisconnected(e.getPeerConnection())})).length!==t.length){e.next=9;break}return this.downlinkNetworkQuality=6,e.abrupt("return");case 9:i=0;case 10:if(!(i<n.length)){e.next=31;break}return o=n[i].getPeerConnection(),e.next=14,this.getStat(o);case 14:if(a=e.sent,s=a.rtt,c=a.totalPacketsLost,u=a.totalPacketsReceived,this.downlinkPrevStatMap_.has(o)){e.next=21;break}return this.downlinkPrevStatMap_.set(o,{totalPacketsLost:c,totalPacketsReceived:u}),e.abrupt("continue",28);case 21:l=0,d=this.downlinkPrevStatMap_.get(o),h=c-d.totalPacketsLost,p=u-d.totalPacketsReceived,l=h<=0||p<0?0:Math.round(h/(h+p)*100),this.downlinkPrevStatMap_.set(o,{totalPacketsLost:c,totalPacketsReceived:u}),this.downlinkLossAndRTTMap_.set(o,{rtt:s,loss:l,userId:n[i].getUserId()});case 28:i++,e.next=10;break;case 31:if(k(this.downlinkPrevStatMap_.keys()).forEach((function(e){g.isPeerConnectionDisconnected(e)&&(g.downlinkPrevStatMap_.delete(e),g.downlinkLossAndRTTMap_.delete(e))})),0!==this.downlinkLossAndRTTMap_.size){e.next=34;break}return e.abrupt("return");case 34:f=this.getAverageLossAndRTT(k(this.downlinkLossAndRTTMap_.values())),v=f.rtt,m=f.loss,this.downlinkRTT_=v,this.downlinkLoss_=m,this.downlinkNetworkQuality=this.getNetworkQuality(m,v);case 38:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getStat",value:(t=a(r().mark((function e(t){var n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={rtt:0,totalPacketsLost:0,totalPacketsReceived:0},t&&pL()){e.next=3;break}return e.abrupt("return",n);case 3:i=t.getReceivers(),e.prev=4,o=0;case 6:if(!(o<i.length)){e.next=15;break}return a=i[o],e.next=10,a.getStats();case 10:e.sent.forEach((function(e){"candidate-pair"===e.type&&hR(e.currentRoundTripTime)&&(n.rtt=Math.round(1e3*e.currentRoundTripTime)),"inbound-rtp"!==e.type||e.mediaType!==zw&&e.mediaType!==Ww||(n.totalPacketsLost+=e.packetsLost,n.totalPacketsReceived+=e.packetsReceived)}));case 12:o++,e.next=6;break;case 15:return e.abrupt("return",n);case 18:return e.prev=18,e.t0=e.catch(4),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[4,18]])}))),function(e){return t.apply(this,arguments)})},{key:"getAverageLossAndRTT",value:function(e){var t={rtt:0,loss:0};return Array.isArray(e)&&e.length>0&&(e.forEach((function(e){t.rtt+=e.rtt,t.loss+=e.loss})),Object.keys(t).forEach((function(n){t[n]=Math.round(t[n]/e.length)}))),t}},{key:"getNetworkQuality",value:function(e,t){return e>50||t>500?5:e>30||t>350?4:e>20||t>200?3:e>10||t>100?2:e>=0||t>=0?1:0}},{key:"handleSignalConnectionStateChange",value:function(e){e.state===BO?(this.uplinkRTT_=0,this.uplinkLoss_=0,this.uplinkNetworkQuality=6):e.state===zO&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}},{key:"handleUplinkConnectionStateChange",value:function(e){var t=e.state;t===QT?(this.uplinkLoss_=0,this.uplinkRTT_=0,this.uplinkNetworkQuality=6):t===ZT&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}},{key:"isPeerConnectionDisconnected",value:function(e){return!(!e||e.connectionState!==iE&&e.connectionState!==nE&&e.connectionState!==rE)}},{key:"setUplinkConnection",value:function(e){this.uplinkConnection_=e,this.uplinkConnection_?this.uplinkConnection_.on(PL.CONNECTION_STATE_CHANGED,this.handleUplinkConnectionStateChange.bind(this)):(this.uplinkNetworkQuality=0,this.uplinkRTT_=0,this.uplinkLoss_=0)}},{key:"start",value:function(){var e=this;-1===this.interval_?(this.log_.info("start network quality calculating"),this.interval_=QD.run(wI,(function(){e.handleDownlinkNetworkQuality(),LR.emit(wA,{client:e.client_,uplinkNetworkQuality:e.uplinkNetworkQuality,downlinkNetworkQuality:e.downlinkNetworkQuality,uplinkRTT:e.uplinkRTT_,uplinkLoss:e.uplinkLoss_,downlinkRTT:e.downlinkRTT_,downlinkLoss:e.downlinkLoss_,downlinkLossAndRTTMap:e.downlinkLossAndRTTMap_}),e.emitter_.emit(DL.NETWORK_QUALITY,{uplinkNetworkQuality:e.uplinkNetworkQuality,downlinkNetworkQuality:e.downlinkNetworkQuality,uplinkRTT:e.uplinkRTT_,uplinkLoss:e.uplinkLoss_,downlinkRTT:e.downlinkRTT_,downlinkLoss:e.downlinkLoss_})}),{delay:2e3})):this.log_.info("network quality calculating is already started")}},{key:"stop",value:function(){this.log_.info("stop network quality calculating"),-1!==this.interval_&&(QD.clearTask(this.interval_),this.interval_=-1),this.downlinkLossAndRTTMap_.clear(),this.downlinkPrevStatMap_.clear()}},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"updateDelay",value:function(e){var t=this;e.forEach((function(e){var n=e.srcTinyId,r=e.videoDelay,i=e.audioDelay,o=t.connections_.get(n);o&&o.setDelay({videoDelay:r,audioDelay:i})}))}}]),e}(),zL=function(){function e(t){s(this,e),this.log_=PA.createLogger({id:t.client.getUserId(),userId:t.client.getUserId(),sdkAppId:t.client.getSDKAppId()}),this.localStream_=null,this.prevDevices_=[],this.initialize()}var t,n;return u(e,[{key:"initialize",value:function(){navigator.mediaDevices&&(this.onDeviceChange=this.onDeviceChange.bind(this),navigator.mediaDevices.addEventListener("devicechange",this.onDeviceChange))}},{key:"destroy",value:function(){navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",this.onDeviceChange)}},{key:"onDeviceChange",value:(n=a(r().mark((function e(){var t,n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localStream_&&this.localStream_.getMediaStream()&&!this.localStream_.getScreen()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Xq.getDevices();case 4:t=e.sent,n=t.filter((function(e){return o.prevDevices_.findIndex((function(t){var n=t.deviceId;return e.deviceId===n}))<0})),i=this.prevDevices_.filter((function(e){return t.findIndex((function(t){var n=t.deviceId;return e.deviceId===n}))<0})),n.length>0&&this.handleDeviceAdded(this.prevDevices_,n),i.length>0&&this.handleDeviceRemoved(t,i),this.prevDevices_=t;case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setLocalStream",value:(t=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,Xq.getDevices();case 3:this.prevDevices_=e.sent;case 4:this.localStream_=t;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleDeviceAdded",value:function(e,t){var n,r;this.log_.warn("devicesAdded: ".concat(JSON.stringify(t))),this.localStream_.updateDeviceIdInUse();var i=t.filter((function(e){return e.kind===sT})),o=t.filter((function(e){return e.kind===aT})),a=e.filter((function(e){return e.kind===sT})),s=e.filter((function(e){return e.kind===aT})),c=i.length>0&&0===a.length&&"live"!==(null===(n=this.localStream_.getVideoTrack())||void 0===n?void 0:n.readyState),u=o.length>0&&0===s.length&&"live"!==(null===(r=this.localStream_.getAudioTrack())||void 0===r?void 0:r.readyState);if(u&&c)return this.log_.info("new microphone and camera detected, but there was no device before."),void this.localStream_.recoverCapture({audio:!0,video:!0,cameraId:i[0].deviceId,microphoneId:o[0].deviceId});c&&(this.log_.info("new camera detected, but there was no camera before."),this.localStream_.recoverCapture({audio:!1,video:!0,cameraId:i[0].deviceId})),u&&(this.log_.info("new microphone detected, but there was no microphone before."),this.localStream_.recoverCapture({audio:!0,video:!1,microphoneId:o[0].deviceId}))}},{key:"handleDeviceRemoved",value:function(e,t){this.log_.warn("devicesRemoved: ".concat(JSON.stringify(t))),this.localStream_.updateDeviceIdInUse();var n=!1,r=!1,i=this.localStream_.getCameraId(),o=this.localStream_.getMicrophoneId();if(o===gI){var a=this.localStream_.getMicrophoneGroupId(),s=e.filter((function(e){return e.deviceId===gI&&e.kind===aT}))[0];s&&s.groupId!==a&&(r=!0)}if(t.forEach((function(e){var t=e.deviceId;i.length>0&&t===i?n=!0:o.length>0&&t===o&&(r=!0)})),n&&r)return this.log_.warn("current camera and microphone in use is lost, cameraId: ".concat(i,", microphoneId: ").concat(o)),void((this.localStream_.getAudio()||this.localStream_.getVideo())&&this.localStream_.recoverCapture({video:!0,audio:!0}));n&&(this.log_.warn("current camera in use is lost, deviceId: ".concat(i)),this.localStream_.getVideo()&&this.localStream_.recoverCapture({video:!0,audio:!1})),r&&(this.log_.warn("current microphone in use is lost, deviceId: ".concat(o)),this.localStream_.getAudio()&&this.localStream_.recoverCapture({video:!1,audio:!0}))}}]),e}(),WL=En.exports,qL=on,GL=ln,JL=Gu,KL=Ri,QL=M,XL=ht,YL=function(e,t,n,r){try{return r?t(GL(n)[0],n[1]):t(n)}catch(Yq){JL(e,"throw",Yq)}},ZL=Au,eN=eo,tN=Ur,nN=qc,rN=Hu,iN=Mu,oN=Array,aN=te,sN=2147483647,cN=/[^\0-\u007E]/,uN=/[.\u3002\uFF0E\uFF61]/g,lN="Overflow: input needs wider integers to process",dN=RangeError,hN=aN(uN.exec),pN=Math.floor,fN=String.fromCharCode,vN=aN("".charCodeAt),mN=aN([].join),gN=aN([].push),_N=aN("".replace),yN=aN("".split),bN=aN("".toLowerCase),SN=function(e){return e+22+75*(e<26)},kN=function(e,t,n){var r=0;for(e=n?pN(e/700):e>>1,e+=pN(e/t);e>455;)e=pN(e/35),r+=36;return pN(r+36*e/(e+38))},wN=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=vN(e,n++);if(i>=55296&&i<=56319&&n<r){var o=vN(e,n++);56320==(64512&o)?gN(t,((1023&i)<<10)+(1023&o)+65536):(gN(t,i),n--)}else gN(t,i)}return t}(e);var n,r,i=e.length,o=128,a=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&gN(t,fN(r));var c=t.length,u=c;for(c&&gN(t,"-");u<i;){var l=sN;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<l&&(l=r);var d=u+1;if(l-o>pN((sN-a)/d))throw dN(lN);for(a+=(l-o)*d,o=l,n=0;n<e.length;n++){if((r=e[n])<o&&++a>sN)throw dN(lN);if(r==o){for(var h=a,p=36;;){var f=p<=s?1:p>=s+26?26:p-s;if(h<f)break;var v=h-f,m=36-f;gN(t,fN(SN(f+v%m))),h=pN(v/m),p+=36}gN(t,fN(SN(h))),s=kN(a,d,u==c),a=0,u++}}a++,o++}return mN(t,"")},TN=Ei,EN=P,IN=Iv,CN=R,xN=Ri,RN=te,AN=wr,ON=function(e,t,n){return n.get&&WL(n.get,t,{getter:!0}),n.set&&WL(n.set,t,{setter:!0}),qL.f(e,t,n)},PN=ll,DN=vt,LN=cO,NN=function(e){var t=XL(e),n=eN(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=KL(i,r>2?arguments[2]:void 0));var a,s,c,u,l,d,h=iN(t),p=0;if(!h||this===oN&&ZL(h))for(a=tN(t),s=n?new this(a):oN(a);a>p;p++)d=o?i(t[p],p):t[p],nN(s,p,d);else for(l=(u=rN(t,h)).next,s=n?new this:[];!(c=QL(l,u)).done;p++)d=o?YL(u,i,[c.value,p],!0):c.value,nN(s,p,d);return s.length=p,s},MN=Yc,UN=vd.codeAt,jN=function(e){var t,n,r=[],i=yN(_N(bN(e),uN,"."),".");for(t=0;t<i.length;t++)n=i[t],gN(r,hN(cN,n)?"xn--"+wN(n):n);return mN(r,".")},VN=ad,FN=qs,BN=qd,$N=qm,HN=ar,zN=HN.set,WN=HN.getterFor("URL"),qN=$N.URLSearchParams,GN=$N.getState,JN=CN.URL,KN=CN.TypeError,QN=CN.parseInt,XN=Math.floor,YN=Math.pow,ZN=RN("".charAt),eM=RN(/./.exec),tM=RN([].join),nM=RN(1..toString),rM=RN([].pop),iM=RN([].push),oM=RN("".replace),aM=RN([].shift),sM=RN("".split),cM=RN("".slice),uM=RN("".toLowerCase),lM=RN([].unshift),dM="Invalid scheme",hM="Invalid host",pM="Invalid port",fM=/[a-z]/i,vM=/[\d+-.a-z]/i,mM=/\d/,gM=/^0x/i,_M=/^[0-7]+$/,yM=/^\d+$/,bM=/^[\da-f]+$/i,SM=/[\0\t\n\r #%/:<>?@[\\\]^|]/,kM=/[\0\t\n\r #/:<>?@[\\\]^|]/,wM=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,TM=/[\t\n\r]/g,EM=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)lM(t,e%256),e=XN(e/256);return tM(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=nM(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},IM={},CM=LN({},IM,{" ":1,'"':1,"<":1,">":1,"`":1}),xM=LN({},CM,{"#":1,"?":1,"{":1,"}":1}),RM=LN({},xM,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),AM=function(e,t){var n=UN(e,0);return n>32&&n<127&&!DN(t,e)?e:encodeURIComponent(e)},OM={ftp:21,file:null,http:80,https:443,ws:80,wss:443},PM=function(e,t){var n;return 2==e.length&&eM(fM,ZN(e,0))&&(":"==(n=ZN(e,1))||!t&&"|"==n)},DM=function(e){var t;return e.length>1&&PM(cM(e,0,2))&&(2==e.length||"/"===(t=ZN(e,2))||"\\"===t||"?"===t||"#"===t)},LM=function(e){return"."===e||"%2e"===uM(e)},NM={},MM={},UM={},jM={},VM={},FM={},BM={},$M={},HM={},zM={},WM={},qM={},GM={},JM={},KM={},QM={},XM={},YM={},ZM={},eU={},tU={},nU=function(e,t,n){var r,i,o,a=VN(e);if(t){if(i=this.parse(a))throw KN(i);this.searchParams=null}else{if(void 0!==n&&(r=new nU(n,!0)),i=this.parse(a,null,r))throw KN(i);(o=GN(new qN)).bindURL(this),this.searchParams=o}};nU.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s,c=this,u=t||NM,l=0,d="",h=!1,p=!1,f=!1;for(e=VN(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=oM(e,wM,"")),e=oM(e,TM,""),r=NN(e);l<=r.length;){switch(i=r[l],u){case NM:if(!i||!eM(fM,i)){if(t)return dM;u=UM;continue}d+=uM(i),u=MM;break;case MM:if(i&&(eM(vM,i)||"+"==i||"-"==i||"."==i))d+=uM(i);else{if(":"!=i){if(t)return dM;d="",u=UM,l=0;continue}if(t&&(c.isSpecial()!=DN(OM,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&OM[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?u=JM:c.isSpecial()&&n&&n.scheme==c.scheme?u=jM:c.isSpecial()?u=$M:"/"==r[l+1]?(u=VM,l++):(c.cannotBeABaseURL=!0,iM(c.path,""),u=ZM)}break;case UM:if(!n||n.cannotBeABaseURL&&"#"!=i)return dM;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=MN(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=tU;break}u="file"==n.scheme?JM:FM;continue;case jM:if("/"!=i||"/"!=r[l+1]){u=FM;continue}u=HM,l++;break;case VM:if("/"==i){u=zM;break}u=YM;continue;case FM:if(c.scheme=n.scheme,i==BL)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=MN(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())u=BM;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=MN(n.path),c.query="",u=eU;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=MN(n.path),c.path.length--,u=YM;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=MN(n.path),c.query=n.query,c.fragment="",u=tU}break;case BM:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=YM;continue}u=zM}else u=HM;break;case $M:if(u=HM,"/"!=i||"/"!=ZN(d,l+1))continue;l++;break;case HM:if("/"!=i&&"\\"!=i){u=zM;continue}break;case zM:if("@"==i){h&&(d="%40"+d),h=!0,o=NN(d);for(var v=0;v<o.length;v++){var m=o[v];if(":"!=m||f){var g=AM(m,RM);f?c.password+=g:c.username+=g}else f=!0}d=""}else if(i==BL||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(h&&""==d)return"Invalid authority";l-=NN(d).length+1,d="",u=WM}else d+=i;break;case WM:case qM:if(t&&"file"==c.scheme){u=QM;continue}if(":"!=i||p){if(i==BL||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==d)return hM;if(t&&""==d&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(d))return a;if(d="",u=XM,t)return;continue}"["==i?p=!0:"]"==i&&(p=!1),d+=i}else{if(""==d)return hM;if(a=c.parseHost(d))return a;if(d="",u=GM,t==qM)return}break;case GM:if(!eM(mM,i)){if(i==BL||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=d){var _=QN(d,10);if(_>65535)return pM;c.port=c.isSpecial()&&_===OM[c.scheme]?null:_,d=""}if(t)return;u=XM;continue}return pM}d+=i;break;case JM:if(c.scheme="file","/"==i||"\\"==i)u=KM;else{if(!n||"file"!=n.scheme){u=YM;continue}if(i==BL)c.host=n.host,c.path=MN(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=MN(n.path),c.query="",u=eU;else{if("#"!=i){DM(tM(MN(r,l),""))||(c.host=n.host,c.path=MN(n.path),c.shortenPath()),u=YM;continue}c.host=n.host,c.path=MN(n.path),c.query=n.query,c.fragment="",u=tU}}break;case KM:if("/"==i||"\\"==i){u=QM;break}n&&"file"==n.scheme&&!DM(tM(MN(r,l),""))&&(PM(n.path[0],!0)?iM(c.path,n.path[0]):c.host=n.host),u=YM;continue;case QM:if(i==BL||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&PM(d))u=YM;else if(""==d){if(c.host="",t)return;u=XM}else{if(a=c.parseHost(d))return a;if("localhost"==c.host&&(c.host=""),t)return;d="",u=XM}continue}d+=i;break;case XM:if(c.isSpecial()){if(u=YM,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=BL&&(u=YM,"/"!=i))continue}else c.fragment="",u=tU;else c.query="",u=eU;break;case YM:if(i==BL||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=uM(s=d))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||iM(c.path,"")):LM(d)?"/"==i||"\\"==i&&c.isSpecial()||iM(c.path,""):("file"==c.scheme&&!c.path.length&&PM(d)&&(c.host&&(c.host=""),d=ZN(d,0)+":"),iM(c.path,d)),d="","file"==c.scheme&&(i==BL||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)aM(c.path);"?"==i?(c.query="",u=eU):"#"==i&&(c.fragment="",u=tU)}else d+=AM(i,xM);break;case ZM:"?"==i?(c.query="",u=eU):"#"==i?(c.fragment="",u=tU):i!=BL&&(c.path[0]+=AM(i,IM));break;case eU:t||"#"!=i?i!=BL&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":AM(i,IM)):(c.fragment="",u=tU);break;case tU:i!=BL&&(c.fragment+=AM(i,CM))}l++}},parseHost:function(e){var t,n,r;if("["==ZN(e,0)){if("]"!=ZN(e,e.length-1))return hM;if(t=function(e){var t,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,h=function(){return ZN(e,d)};if(":"==h()){if(":"!=ZN(e,1))return;d+=2,l=++u}for(;h();){if(8==u)return;if(":"!=h()){for(t=n=0;n<4&&eM(bM,h());)t=16*t+QN(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,u>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;d++}if(!eM(mM,h()))return;for(;eM(mM,h());){if(o=QN(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[u++]=t}else{if(null!==l)return;d++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c}(cM(e,1,-1)),!t)return hM;this.host=t}else if(this.isSpecial()){if(e=jN(e),eM(SM,e))return hM;if(t=function(e){var t,n,r,i,o,a,s,c=sM(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==ZN(i,0)&&(o=eM(gM,i)?16:8,i=cM(i,8==o?1:2)),""===i)a=0;else{if(!eM(10==o?yM:8==o?_M:bM,i))return e;a=QN(i,o)}iM(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=YN(256,5-t))return null}else if(a>255)return null;for(s=rM(n),r=0;r<n.length;r++)s+=n[r]*YN(256,3-r);return s}(e),null===t)return hM;this.host=t}else{if(eM(kM,e))return hM;for(t="",n=NN(e),r=0;r<n.length;r++)t+=AM(n[r],IM);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return DN(OM,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&PM(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",e.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=EM(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+tM(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw KN(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new rU(e.path[0]).origin}catch(Yq){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+EM(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(VN(e)+":",NM)},getUsername:function(){return this.username},setUsername:function(e){var t=NN(VN(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=AM(t[n],RM)}},getPassword:function(){return this.password},setPassword:function(e){var t=NN(VN(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=AM(t[n],RM)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?EM(e):EM(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,WM)},getHostname:function(){var e=this.host;return null===e?"":EM(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,qM)},getPort:function(){var e=this.port;return null===e?"":VN(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=VN(e))?this.port=null:this.parse(e,GM))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+tM(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,XM))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=VN(e))?this.query=null:("?"==ZN(e,0)&&(e=cM(e,1)),this.query="",this.parse(e,eU)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=VN(e))?("#"==ZN(e,0)&&(e=cM(e,1)),this.fragment="",this.parse(e,tU)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var rU=function(e){var t=PN(this,iU),n=BN(arguments.length,1)>1?arguments[1]:void 0,r=zN(t,new nU(e,!1,n));EN||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},iU=rU.prototype,oU=function(e,t){return{get:function(){return WN(this)[e]()},set:t&&function(e){return WN(this)[t](e)},configurable:!0,enumerable:!0}};if(EN&&(ON(iU,"href",oU("serialize","setHref")),ON(iU,"origin",oU("getOrigin")),ON(iU,"protocol",oU("getProtocol","setProtocol")),ON(iU,"username",oU("getUsername","setUsername")),ON(iU,"password",oU("getPassword","setPassword")),ON(iU,"host",oU("getHost","setHost")),ON(iU,"hostname",oU("getHostname","setHostname")),ON(iU,"port",oU("getPort","setPort")),ON(iU,"pathname",oU("getPathname","setPathname")),ON(iU,"search",oU("getSearch","setSearch")),ON(iU,"searchParams",oU("getSearchParams")),ON(iU,"hash",oU("getHash","setHash"))),AN(iU,"toJSON",(function(){return WN(this).serialize()}),{enumerable:!0}),AN(iU,"toString",(function(){return WN(this).serialize()}),{enumerable:!0}),JN){var aU=JN.createObjectURL,sU=JN.revokeObjectURL;aU&&AN(rU,"createObjectURL",xN(aU,JN)),sU&&AN(rU,"revokeObjectURL",xN(sU,JN))}FN(rU,"URL"),TN({global:!0,constructor:!0,forced:!IN,sham:!EN},{URL:rU});var cU,uU,lU=new Blob(["class VolumeMeter extends AudioWorkletProcessor{constructor(){super();this.volume=0;this.intervalTime=200;this.tick=this.intervalTime;this.isStop=false;this.port.onmessage=event=>{const{data}=event;switch(data.name){case'setIntervalTime':this.intervalTime=data.intervalTime;break;case'stop':this.isStop=true;break}}}process(inputs){const input=inputs[0];if(this.isStop){return false}if(input.length>0){const firstChannel=input[0];let sum=0;let rms;for(let i=0;i<firstChannel.length;++i){sum+=firstChannel[i]*firstChannel[i]}rms=Math.sqrt(sum/firstChannel.length);this.volume=Math.max(rms,this.volume*0.95);this.tick-=firstChannel.length;if(this.tick<0){this.tick+=(this.intervalTime/1000)*sampleRate;this.port.postMessage({volume:this.volume})}}return true}}registerProcessor('volume-meter',VolumeMeter);"],{type:"application/javascript"}),dU=!1,hU=function(){function e(t){s(this,e),this.context_=t.context,this.addModuleToContext()}var t;return u(e,[{key:"addModuleToContext",value:(t=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.context_.audioWorklet.addModule(URL.createObjectURL(lU));case 3:PA.info("worklet addModule success"),LR.emit(EA),dU=!0,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),PA.info("worklet addModule catch error. ".concat(e.t0.message)),LR.emit(IA);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return t.apply(this,arguments)})},{key:"initWorkletSuccess",get:function(){return dU}}]),e}(),pU=0,fU=function(){function e(t){s(this,e);var n=t.track,r=t.log,i=t.stream;this.volume_=0,this.log_=r,this.track_=n,this.stream_=i,cU||(cU=ER()),this.audioCtx_=cU,this.destination_=this.audioCtx_.destination;var o=new MediaStream;o.addTrack(this.track_),this.streamSource_=this.audioCtx_.createMediaStreamSource(o),this.audioWorkletNode_=null,this.scriptProcessorNode_=null,this.interval_=200,LR.on(TA,this.resume,this),LR.on(XR,this.handleAudioLevelInterval,this),CR?(LR.on(EA,this.initAudioWorklet,this),LR.on(IA,this.initScriptProcessor,this),this.preload()):this.initScriptProcessor(),pU+=1}return u(e,[{key:"preload",value:function(){uU?uU.initWorkletSuccess&&this.initAudioWorklet():uU=new hU({context:cU})}},{key:"initAudioWorklet",value:function(){var e=this;if(!this.audioWorkletNode_)try{this.audioWorkletNode_=new AudioWorkletNode(this.audioCtx_,"volume-meter"),this.audioWorkletNode_.port.onmessage=function(t){e.volume_=t.data.volume||0},this.streamSource_.connect(this.audioWorkletNode_).connect(this.destination_),this.handleAudioLevelInterval({interval:this.interval_}),iD.logSuccessEvent({userId:this.stream_.getUserId(),eventType:LE})}catch(Yq){iD.logFailedEvent({userId:this.stream_.getUserId(),eventType:LE}),this.initScriptProcessor()}}},{key:"initScriptProcessor",value:function(){var e=this;if(!this.scriptProcessorNode_)try{this.scriptProcessorNode_=this.audioCtx_.createScriptProcessor(2048,1,1),this.scriptProcessorNode_.onaudioprocess=function(t){for(var n=t.inputBuffer.getChannelData(0),r=0,i=0;i<n.length;++i)r+=n[i]*n[i];e.volume_=Math.sqrt(r/n.length)||0},this.streamSource_.connect(this.scriptProcessorNode_),this.scriptProcessorNode_.connect(this.destination_)}catch(Yq){this.log_.error("volumeMeter init script processor error: "+Yq)}}},{key:"destroy",value:function(){var e;this.streamSource_&&this.streamSource_.disconnect(),this.scriptProcessorNode_&&(this.scriptProcessorNode_.onaudioprocess=null,this.scriptProcessorNode_.disconnect()),this.audioWorkletNode_&&(this.audioWorkletNode_.port.postMessage({name:"stop"}),this.audioWorkletNode_.port.onmessage=null,this.audioWorkletNode_.disconnect()),this.audioWorkletNode_=null,this.scriptProcessorNode_=null,this.audioCtx_=null,LR.off(TA,this.resume,this),LR.off(XR,this.handleAudioLevelInterval,this),LR.off(EA,this.initAudioWorklet,this),LR.off(IA,this.initScriptProcessor,this),pU>0&&(pU-=1),0===pU&&(null===(e=cU)||void 0===e||e.close(),cU=null,uU=null)}},{key:"resume",value:function(){var e;null===(e=cU)||void 0===e||e.resume()}},{key:"getInternalAudioLevel",value:function(){return this.volume_}},{key:"getCalculatedVolume",value:function(){return this.volume_.toFixed(2)}},{key:"handleAudioLevelInterval",value:function(e){var t,n=e.interval;this.interval_=n,null===(t=this.audioWorkletNode_)||void 0===t||t.port.postMessage({name:"setIntervalTime",intervalTime:n})}}]),e}(),vU=function(){function e(t){s(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=t.track,t.gainedTrack&&(this.gainedTrack_=t.gainedTrack),this.div_=t.div,this.muted_=t.muted,this.outputDeviceId_=t.outputDeviceId,this.volume_=t.volume,this.pausedRetryCount_=5,this.emitter_=new DR,this.initializeElement(),this.state_="NONE",this.volumeMeter_=new fU({stream:this.stream_,track:this.gainedTrack_||this.track_,log:this.log_})}var t,n,i,o;return u(e,[{key:"isPlaying",get:function(){return this.state_===gT}},{key:"initializeElement",value:function(){if(this.isAudioElementInit()){var e=new MediaStream;e.addTrack(this.gainedTrack_||this.track_);var t=document.createElement(zw);t.srcObject=e,t.muted=this.muted_,t.setAttribute("id","audio_".concat(this.stream_.getId())),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_.appendChild(t),this.element_=t}this.handleEvents()}},{key:"setMuted",value:function(e){this.element_&&(this.element_.muted=e,this.muted_=e)}},{key:"play",value:(o=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.outputDeviceId_||!this.element_){e.next=3;break}return e.next=3,this.element_.setSinkId(this.outputDeviceId_);case 3:if(this.setVolume(this.volume_),e.prev=4,!this.element_){e.next=8;break}return e.next=8,this.element_.play();case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(4),t=tR({key:Sx,data:{media:"Audio",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=16;break}throw new vP({code:fP.PLAY_NOT_ALLOWED,message:t});case 16:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return o.apply(this,arguments)})},{key:"handleEvents",value:function(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_&&(this.element_.addEventListener(nT,this.handleElementEvent),this.element_.addEventListener(tT,this.handleElementEvent),this.element_.addEventListener(rT,this.handleElementEvent),this.element_.addEventListener(iT,this.handleElementEvent)),this.track_.addEventListener(tT,this.handleTrackEvent),this.track_.addEventListener(Zw,this.handleTrackEvent),this.track_.addEventListener(eT,this.handleTrackEvent),this.track_.readyState===tT&&this.handleTrackEvent({type:tT}),this.track_.muted&&this.handleTrackEvent({type:Zw})}},{key:"handleElementEvent",value:(i=a(r().mark((function e(t){var n,i,o,a,s,c,u,l=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,e.t0=n,e.next=e.t0===nT?4:e.t0===tT?9:e.t0===rT?12:e.t0===iT?21:32;break;case 4:return this.log_.info("audio player is playing"),this.state_=gT,LR.emit(tA,{stream:this.stream_}),this.emitter_.emit(VL,{state:this.state_,reason:nT}),e.abrupt("break",32);case 9:return this.log_.info("audio player is ended"),this.state_!==yT&&(this.state_=yT,this.emitter_.emit(VL,{state:this.state_,reason:tT})),e.abrupt("break",32);case 12:return this.log_.info("audio player is paused"),this.state_=_T,this.emitter_.emit(VL,{state:this.state_,reason:rT}),(i=this.div_&&document.getElementById(this.div_.id))||this.log_.warn("audio player has been remove, element ID: ".concat(this.div_.id)),o=Ew(),this.pausedRetryCount_>0&&(hR(o)&&o<=70||!i)&&(this.resume(),this.pausedRetryCount_--),Nk&&(this.interval_=QD.run((function(){l.element_&&l.state_===_T&&l.resume()}),{delay:3e3})),e.abrupt("break",32);case 21:if(!this.element_||!this.element_.error){e.next=31;break}return a="".concat(TL(),"/").concat(Fw().name,"/").concat(Fw().version),e.next=25,Xq.getSpeakers();case 25:s=e.sent,c=s[0].label,(u=s.find((function(e){return e.deviceId===l.outputDeviceId_})))&&(c=u.label),this.log_.error("audio player error observed. code: ".concat(this.element_.error.code," message: ").concat(this.element_.error.message," deviceInfo: ").concat(a," speaker: ").concat(c)),iD.uploadEvent("stat-".concat(this.stream_.getType(),"-audio-").concat(PE,"-").concat(this.element_.error.code,"-").concat(a,"-").concat(c),this.element_.error);case 31:return e.abrupt("break",32);case 32:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"handleTrackEvent",value:function(e){var t=e.type;switch(t){case tT:this.log_.info("audio player track is ended"),this.state_!==yT&&(this.state_=yT,this.emitter_.emit(VL,{state:this.state_,reason:tT})),LR.emit(bA,{stream:this.stream_,type:t});break;case Zw:this.log_.info("audio track is unable to provide media output"),this.stream_.isRemote()||TR(),this.state_!==_T&&(this.state_=_T,this.emitter_.emit(VL,{state:this.state_,reason:Zw})),LR.emit(yA,{stream:this.stream_,type:t});break;case eT:this.log_.info("audio track is able to provide media output"),this.state_===_T&&(this.state_=gT,this.emitter_.emit(VL,{state:this.state_,reason:eT}))}}},{key:"unbindEvents",value:function(){this.element_&&(this.element_.removeEventListener(nT,this.handleElementEvent),this.element_.removeEventListener(tT,this.handleElementEvent),this.element_.removeEventListener(rT,this.handleElementEvent),this.element_.removeEventListener(iT,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(tT,this.handleTrackEvent),this.track_.removeEventListener(Zw,this.handleTrackEvent),this.track_.removeEventListener(eT,this.handleTrackEvent))}},{key:"setSinkId",value:(n=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.outputDeviceId_===t){e.next=5;break}if(!this.element_){e.next=4;break}return e.next=4,this.element_.setSinkId(t);case 4:this.outputDeviceId_=t;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setVolume",value:function(e){this.element_&&(this.log_.info("audioElement setVolume to : ".concat(e)),this.element_.volume=e)}},{key:"getAudioLevel",value:function(){return this.volumeMeter_.getCalculatedVolume()}},{key:"getInternalAudioLevel",value:function(){return this.volumeMeter_.getInternalAudioLevel()}},{key:"stop",value:function(){this.unbindEvents(),this.element_&&(this.div_.removeChild(this.element_),this.element_.srcObject=null,this.element_=null),this.volumeMeter_&&(this.volumeMeter_.destroy(),this.volumeMeter_=null),this.interval_>0&&QD.clearTask(this.interval_)}},{key:"resume",value:(t=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.volumeMeter_&&this.volumeMeter_.resume(),!this.element_){e.next=5;break}return e.next=5,this.element_.play();case 5:e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(0),t=tR({key:Sx,data:{media:"Audio",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=13;break}throw new vP({code:fP.PLAY_NOT_ALLOWED,message:t});case 13:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return t.apply(this,arguments)})},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"isAudioElementInit",value:function(){return!("15.2"===Dw||"15.3"===Dw||"15.4"===Dw)||"local"!==this.stream_.getType()||!this.muted_||(this.log_.info("audioElement is muted."),!1)}}]),e}(),mU=On.PROPER,gU=O,_U=o_,yU=p_.trim;Ei({target:"String",proto:!0,forced:function(e){return gU((function(){return!!_U[e]()||"​᠎"!=="​᠎"[e]()||mU&&_U[e].name!==e}))}("trim")},{trim:function(){return yU(this)}});var bU="trtc_autoplay",SU="".concat(bU,"_mask"),kU="".concat(bU,"_wrapper"),wU="".concat(bU,"_header"),TU="".concat(bU,"_content"),EU="".concat(bU,"_action_wrapper"),IU="".concat(bU,"_question"),CU="".concat(bU,"_collapse"),xU="".concat(bU,"_action_confirm"),RU="".concat(bU,"_detail"),AU="#2473E8",OU="dialog",PU="".concat(OU,"-show"),DU="".concat(OU,"-1"),LU="".concat(OU,"-2"),NU=!1,MU=function(){return!!document.querySelector(".".concat(kU))},UU="".concat(fI,"/").concat(wR()?"zh-cn":"en","/tutorial-21-advanced-auto-play-policy.html"),jU="<br><a href='".concat(UU,"' target='_blank'>").concat(wR()?"其他方案？":"Any other solution?","</a>"),VU="".concat(wR()?"浏览器自动播放策略：在用户与页面产生交互（点击、触摸）之前，浏览器禁止播放有声媒体。该弹窗用于帮助用户恢复音视频播放。".concat(jU):"Autoplay Policy: Before user interacts with the web page (clicking, touching), page will not be allowed to play media with sound. This Dialog is used to help users resume playback. ".concat(jU)),FU=function(){function e(){if(s(this,e),this.dialogNode_=null,this.bodyPosition_="",this.content="音视频播放被浏览器拦截，请点击“恢复播放”。",wR()||(this.content='Media playback failed. Click the "Resume" to resume playback.'),!NU){var t=document.createElement("style");t.innerHTML=".".concat(SU,"{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.").concat(SU," div:not(.").concat(EU,"){display:block !important;}.").concat(kU,"{padding:14px;background:#fff;border-radius:3px;box-shadow:0px 3px 15px #434343;border:1px solid #d1cfcf;max-width:500px;}.").concat(kU," a{color:").concat(AU,";}.").concat(wU,"{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.").concat(TU,"{margin:8px 0;}.").concat(EU,"{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.").concat(CU,"{margin-right:auto;cursor:pointer}.").concat(IU,"{height:100%;line-height:16px;cursor:pointer;}.").concat(xU,"{margin-left:8px;color:#fff;background:").concat(AU,";padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.").concat(xU,":hover{opacity:0.9;}.").concat(CU,",.").concat(xU,",.").concat(TU,",.").concat(IU,"{font-size:14px;}@media screen and (max-width:750px){.").concat(kU,"{width:80vw;}}"),document.head.appendChild(t),NU=!0}this.showDetail_=!1,this.isCollapseClicked_=!1,this.isQuestionClicked_=!1,this.addDiaLog()}return u(e,[{key:"createDiaLog",value:function(){var e=document.createElement("template");e.innerHTML='<div class="'.concat(SU,"\"><div class='").concat(kU,"'><div class='").concat(wU,"'>").concat(location.host,"</div><div class='").concat(TU,"'>").concat(this.content,"</div><div class='").concat(RU,'\' style="visibility:hidden;width:100%;height:0;font-size:12px;color:gray;">').concat(VU,"</div><div class='").concat(EU,"'></div></div></div>").trim();var t=document.createElement("button");t.className=xU,t.innerText=wR()?"恢复播放":"Resume",t.onclick=this.onConfirm.bind(this);var n=document.createElement("div");n.className=IU,n.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n    <svg class="icon" width="18" height="18" p-id="2030" t="1639646523624" version="1.1" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">\n    <path d="m464 784.35c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z" p-id="2031"/>\n    <path d="m512 960c-247.04 0-448-200.96-448-448s200.96-448 448-448 448 200.96 448 448-200.96 448-448 448zm0-831.71c-211.58 0-383.71 172.13-383.71 383.71 0 211.55 172.13 383.71 383.71 383.71 211.55 0 383.71-172.16 383.71-383.71 0-211.58-172.16-383.71-383.71-383.71z" p-id="2032"/>\n    <path d="m512 673.7c-17.665 0-32.001-14.336-32.001-31.999v-54.112c0-52.353 40-92.352 75.328-127.65 25.887-25.92 52.672-52.672 52.672-74.017 0-53.343-43.072-96.735-95.999-96.735-53.823 0-95.999 41.536-95.999 94.559 0 17.665-14.336 31.999-32.001 31.999s-32.001-14.336-32.001-31.999c0-87.424 71.775-158.56 160-158.56s160 72.095 160 160.74c0 47.904-36.32 84.192-71.424 119.3-27.84 27.776-56.576 56.512-56.576 82.336v54.112c0 17.665-14.336 32.032-32.001 32.032z" p-id="2033"/>\n    </svg>\n    ',n.onclick=this.onQuestionClick.bind(this);var r=document.createElement("div");r.className=CU,r.innerText="".concat(wR()?"详情 >":"Detail >"),r.onclick=this.onCollapseClick.bind(this);var i=e.content.firstChild,o=i.querySelector(".".concat(EU));return o.appendChild(r),o.appendChild(n),o.appendChild(t),i}},{key:"addDiaLog",value:function(){MU()||(this.dialogNode_=this.createDiaLog(),document.body.appendChild(this.dialogNode_),this.dialogNode_.onclick=this.onConfirm.bind(this),this.dialogNode_.querySelector(".".concat(kU)).onclick=function(e){return e.stopPropagation()},this.bodyPosition_=document.body.style.position,document.body.style.position="fixed",PA.info("show autoplay dialog"),iD.uploadEvent({log:PU}))}},{key:"deleteDiaLog",value:function(){this.dialogNode_&&(document.body.removeChild(this.dialogNode_),document.body.style.position=this.bodyPosition_,this.dialogNode_=null)}},{key:"onConfirm",value:function(){PA.warn("confirm clicked, try resume stream"),LR.emit(TA),this.deleteDiaLog()}},{key:"onCollapseClick",value:function(){var e=this.dialogNode_.querySelector(".".concat(RU));e.style.visibility="".concat(this.showDetail_?"hidden":"visible"),e.style.height="".concat(this.showDetail_?0:"fit-content"),this.showDetail_=!this.showDetail_,this.isCollapseClicked_||iD.uploadEvent({log:DU}),this.isCollapseClicked_=!0}},{key:"onQuestionClick",value:function(){window.open(UU,"_blank"),this.isQuestionClicked_||iD.uploadEvent({log:LU}),this.isQuestionClicked_=!0}}]),e}(),BU=function(){function e(t){s(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=t.track,this.div_=t.div,this.muted_=t.muted,this.objectFit_=t.objectFit,this.mirror_=t.mirror,this.emitter_=new DR,this.initializeElement(),this.state_="NONE",this.pausedRetryCount_=5}var t;return u(e,[{key:"isPlaying",get:function(){return this.state_===gT}},{key:"initializeElement",value:function(){var e=new MediaStream;e.addTrack(this.track_);var t=document.createElement(Ww);t.srcObject=e,t.muted=!0;var n="width: 100%; height: 100%; object-fit: ".concat(this.objectFit_,";");this.mirror_&&(n+="transform: scaleX(-1);"),t.setAttribute("id","video_".concat(this.stream_.getId())),t.setAttribute("style",n),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_&&this.div_.appendChild(t),this.element_=t,this.handleEvents()}},{key:"setRect",value:function(e){var t=e.width,n=e.height;this.element_&&(this.element_.style.width=t+"px",this.element_.style.height=n+"px")}},{key:"setMirror",value:function(e){this.element_&&(this.element_.style.transform=e?"scaleX(-1)":"",this.mirror_=e)}},{key:"setObjectFit",value:function(e){this.element_&&(this.element_.style.objectFit="".concat(e),this.objectFit_=e)}},{key:"play",value:(t=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.element_.play();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),t=tR({key:Sx,data:{media:"Video",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=11;break}throw new vP({code:fP.PLAY_NOT_ALLOWED,message:t});case 11:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})},{key:"handleEvents",value:function(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_.addEventListener(nT,this.handleElementEvent),this.element_.addEventListener(tT,this.handleElementEvent),this.element_.addEventListener(rT,this.handleElementEvent),this.element_.addEventListener(iT,this.handleElementEvent),this.element_.addEventListener(oT,this.handleElementEvent),this.track_.addEventListener(tT,this.handleTrackEvent),this.track_.addEventListener(Zw,this.handleTrackEvent),this.track_.addEventListener(eT,this.handleTrackEvent),this.track_.readyState===tT&&this.handleTrackEvent({type:tT}),this.track_.muted&&this.handleTrackEvent({type:Zw})}},{key:"handleElementEvent",value:function(e){var t=this;switch(e.type){case nT:this.log_.info("video player is playing"),this.state_=gT,LR.emit(eA,{stream:this.stream_}),this.emitter_.emit(VL,{state:this.state_,reason:nT}),this.interval_&&(QD.clearTask(this.interval_),this.interval_=null);break;case tT:this.log_.info("video player is ended"),this.state_!==yT&&(this.state_=yT,this.emitter_.emit(VL,{state:this.state_,reason:tT}));break;case rT:this.log_.info("video player is paused"),this.div_&&!document.getElementById(this.div_.id)&&this.log_.warn("video player has been remove, element ID: ".concat(this.div_.id)),this.state_=_T,this.emitter_.emit(VL,{state:this.state_,reason:rT}),this.pausedRetryCount_>0&&!MU()&&(this.log_.info("video player auto resume when video paused"),this.resume(),this.pausedRetryCount_--),Nk&&(this.interval_=QD.run((function(){t.element_&&t.state_===_T&&t.resume()}),{delay:3e3}));break;case iT:if(this.element_&&this.element_.error){var n="".concat(TL(),"/").concat(Fw().name,"/").concat(Fw().version);this.log_.error("video player error observed. code: ".concat(this.element_.error.code," message: ").concat(this.element_.error.message," deviceInfo: ").concat(n)),iD.uploadEvent("stat-".concat(this.stream_.getType(),"-video-").concat(PE,"-").concat(this.element_.error.code,"-").concat(n),this.element_.error)}break;case oT:LR.emit(mA,{stream:this.stream_})}}},{key:"handleTrackEvent",value:function(e){var t=e.type;switch(t){case tT:this.log_.info("video track is ended"),LR.emit(_A,{stream:this.stream_,type:t}),this.state_!==yT&&(this.state_=yT,this.emitter_.emit(VL,{state:this.state_,reason:tT}));break;case Zw:this.log_.info("video track is unable to provide media output"),this.stream_.isRemote()||TR(),LR.emit(pA,{stream:this.stream_,type:t}),this.state_!==_T&&(this.state_=_T,this.emitter_.emit(VL,{state:this.state_,reason:Zw}));break;case eT:this.log_.info("video track is able to provide media output"),LR.emit(fA,{stream:this.stream_}),this.state_===_T&&(this.state_=gT,this.emitter_.emit(VL,{state:this.state_,reason:eT}))}}},{key:"unbindEvents",value:function(){this.element_&&(this.element_.removeEventListener(nT,this.handleElementEvent),this.element_.removeEventListener(tT,this.handleElementEvent),this.element_.removeEventListener(rT,this.handleElementEvent),this.element_.removeEventListener(iT,this.handleElementEvent),this.element_.removeEventListener(oT,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(tT,this.handleTrackEvent),this.track_.removeEventListener(Zw,this.handleTrackEvent),this.track_.removeEventListener(eT,this.handleTrackEvent))}},{key:"stop",value:function(){this.unbindEvents(),this.div_&&this.div_.removeChild(this.element_),this.element_.srcObject=null,this.element_=null,this.interval_&&QD.clearTask(this.interval_)}},{key:"resume",value:function(){return this.play()}},{key:"getVideoFrame",value:function(){var e=document.createElement("canvas");return e.width=this.element_.videoWidth,e.height=this.element_.videoHeight,e.getContext("2d").drawImage(this.element_,0,0),e.toDataURL("image/png")}},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"getElement",value:function(){return this.element_?this.element_:null}}]),e}(),$U="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,HU=xr,zU=Nr,WU=RangeError,qU=function(e){if(void 0===e)return 0;var t=HU(e),n=zU(t);if(t!==n)throw WU("Wrong length or index");return n},GU=Array,JU=Math.abs,KU=Math.pow,QU=Math.floor,XU=Math.log,YU=Math.LN2,ZU={pack:function(e,t,n){var r,i,o,a=GU(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?KU(2,-24)-KU(2,-77):0,d=e<0||0===e&&1/e<0?1:0,h=0;for((e=JU(e))!=e||1/0===e?(i=e!=e?1:0,r=c):(r=QU(XU(e)/YU),e*(o=KU(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?l/o:l*KU(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*KU(2,t),r+=u):(i=e*KU(2,u-1)*KU(2,t),r=0));t>=8;)a[h++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[h++]=255&r,r/=256,s-=8;return a[--h]|=128*d,a},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;s>0;)l=256*l+e[c--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===l)l=1-a;else{if(l===o)return n?NaN:u?-1/0:1/0;n+=KU(2,t),l-=a}return(u?-1:1)*n*KU(2,l-t)}},ej=ht,tj=Pr,nj=Ur,rj=function(e){for(var t=ej(this),n=nj(t),r=arguments.length,i=tj(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:tj(o,n);a>i;)t[i++]=e;return t},ij=R,oj=te,aj=P,sj=$U,cj=On,uj=Tn,lj=Ul,dj=O,hj=ll,pj=xr,fj=Nr,vj=qU,mj=ZU,gj=Ds,_j=ac,yj=Tr.f,bj=on.f,Sj=rj,kj=Yc,wj=qs,Tj=cj.PROPER,Ej=cj.CONFIGURABLE,Ij=ar.get,Cj=ar.set,xj="ArrayBuffer",Rj="DataView",Aj="Wrong index",Oj=ij.ArrayBuffer,Pj=Oj,Dj=Pj&&Pj.prototype,Lj=ij.DataView,Nj=Lj&&Lj.prototype,Mj=Object.prototype,Uj=ij.Array,jj=ij.RangeError,Vj=oj(Sj),Fj=oj([].reverse),Bj=mj.pack,$j=mj.unpack,Hj=function(e){return[255&e]},zj=function(e){return[255&e,e>>8&255]},Wj=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},qj=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Gj=function(e){return Bj(e,23,4)},Jj=function(e){return Bj(e,52,8)},Kj=function(e,t){bj(e.prototype,t,{get:function(){return Ij(this)[t]}})},Qj=function(e,t,n,r){var i=vj(n),o=Ij(e);if(i+t>o.byteLength)throw jj(Aj);var a=Ij(o.buffer).bytes,s=i+o.byteOffset,c=kj(a,s,s+t);return r?c:Fj(c)},Xj=function(e,t,n,r,i,o){var a=vj(n),s=Ij(e);if(a+t>s.byteLength)throw jj(Aj);for(var c=Ij(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),d=0;d<t;d++)c[u+d]=l[o?d:t-d-1]};if(sj){var Yj=Tj&&Oj.name!==xj;if(dj((function(){Oj(1)}))&&dj((function(){new Oj(-1)}))&&!dj((function(){return new Oj,new Oj(1.5),new Oj(NaN),1!=Oj.length||Yj&&!Ej})))Yj&&Ej&&uj(Oj,"name",xj);else{(Pj=function(e){return hj(this,Dj),new Oj(vj(e))}).prototype=Dj;for(var Zj,eV=yj(Oj),tV=0;eV.length>tV;)(Zj=eV[tV++])in Pj||uj(Pj,Zj,Oj[Zj]);Dj.constructor=Pj}_j&&gj(Nj)!==Mj&&_j(Nj,Mj);var nV=new Lj(new Pj(2)),rV=oj(Nj.setInt8);nV.setInt8(0,2147483648),nV.setInt8(1,2147483649),!nV.getInt8(0)&&nV.getInt8(1)||lj(Nj,{setInt8:function(e,t){rV(this,e,t<<24>>24)},setUint8:function(e,t){rV(this,e,t<<24>>24)}},{unsafe:!0})}else Dj=(Pj=function(e){hj(this,Dj);var t=vj(e);Cj(this,{bytes:Vj(Uj(t),0),byteLength:t}),aj||(this.byteLength=t)}).prototype,Lj=function(e,t,n){hj(this,Nj),hj(e,Dj);var r=Ij(e).byteLength,i=pj(t);if(i<0||i>r)throw jj("Wrong offset");if(i+(n=void 0===n?r-i:fj(n))>r)throw jj("Wrong length");Cj(this,{buffer:e,byteLength:n,byteOffset:i}),aj||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},Nj=Lj.prototype,aj&&(Kj(Pj,"byteLength"),Kj(Lj,"buffer"),Kj(Lj,"byteLength"),Kj(Lj,"byteOffset")),lj(Nj,{getInt8:function(e){return Qj(this,1,e)[0]<<24>>24},getUint8:function(e){return Qj(this,1,e)[0]},getInt16:function(e){var t=Qj(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Qj(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return qj(Qj(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return qj(Qj(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return $j(Qj(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return $j(Qj(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Xj(this,1,e,Hj,t)},setUint8:function(e,t){Xj(this,1,e,Hj,t)},setInt16:function(e,t){Xj(this,2,e,zj,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Xj(this,2,e,zj,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Xj(this,4,e,Wj,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Xj(this,4,e,Wj,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Xj(this,4,e,Gj,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Xj(this,8,e,Jj,t,arguments.length>2?arguments[2]:void 0)}});wj(Pj,xj),wj(Lj,Rj);var iV={ArrayBuffer:Pj,DataView:Lj},oV=Ei,aV=te,sV=O,cV=ln,uV=Pr,lV=Nr,dV=Ty,hV=iV.ArrayBuffer,pV=iV.DataView,fV=pV.prototype,vV=aV(hV.prototype.slice),mV=aV(fV.getUint8),gV=aV(fV.setUint8);oV({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:sV((function(){return!new hV(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(vV&&void 0===t)return vV(cV(this),e);for(var n=cV(this).byteLength,r=uV(e,n),i=uV(void 0===t?n:t,n),o=new(dV(this,hV))(lV(i-r)),a=new pV(this),s=new pV(o),c=0;r<i;)gV(s,c++,mV(a,r++));return o}}),Ei({global:!0,constructor:!0,forced:!$U},{DataView:iV.DataView});var _V=Ei,yV=Oi,bV=te([].reverse),SV=[1,2];_V({target:"Array",proto:!0,forced:String(SV)===String(SV.reverse())},{reverse:function(){return yV(this)&&(this.length=this.length),bV(this)}});var kV=Je,wV=ht,TV=ae,EV=Ur,IV=TypeError,CV=function(e){return function(t,n,r,i){kV(n);var o=wV(t),a=TV(o),s=EV(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw IV("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},xV={left:CV(!1),right:CV(!0)},RV=xV.left,AV=De,OV=vy;Ei({target:"Array",proto:!0,forced:!xh("reduce")||!OV&&AV>79&&AV<83},{reduce:function(e){var t=arguments.length;return RV(this,e,t,t>1?arguments[1]:void 0)}});var PV=$l,DV="ArrayBuffer",LV=iV.ArrayBuffer;Ei({global:!0,constructor:!0,forced:R.ArrayBuffer!==LV},{ArrayBuffer:LV}),PV(DV);var NV=Ei,MV=Oi,UV=eo,jV=be,VV=Pr,FV=Ur,BV=pe,$V=qc,HV=Ot,zV=zd,WV=bo("slice"),qV=HV("species"),GV=Array,JV=Math.max;NV({target:"Array",proto:!0,forced:!WV},{slice:function(e,t){var n,r,i,o=BV(this),a=FV(o),s=VV(e,a),c=VV(void 0===t?a:t,a);if(MV(o)&&(n=o.constructor,(UV(n)&&(n===GV||MV(n.prototype))||jV(n)&&null===(n=n[qV]))&&(n=void 0),n===GV||void 0===n))return zV(o,s,c);for(r=new(void 0===n?GV:n)(JV(c-s,0)),i=0;s<c;s++,i++)s in o&&$V(r,i,o[s]);return r.length=i,r}});var KV=R,QV=O,XV=te,YV=ad,ZV=p_.trim,eF=o_,tF=KV.parseInt,nF=KV.Symbol,rF=nF&&nF.iterator,iF=/^[+-]?0x/i,oF=XV(iF.exec),aF=8!==tF(eF+"08")||22!==tF(eF+"0x16")||rF&&!QV((function(){tF(Object(rF))}))?function(e,t){var n=ZV(YV(e));return tF(n,t>>>0||(oF(iF,n)?16:10))}:tF;Ei({global:!0,forced:parseInt!=aF},{parseInt:aF});var sF,cF,uF,lF={exports:{}},dF=$U,hF=P,pF=R,fF=ge,vF=be,mF=vt,gF=Fi,_F=ze,yF=Tn,bF=wr,SF=on.f,kF=Ee,wF=Ds,TF=ac,EF=Ot,IF=bt,CF=ar.enforce,xF=ar.get,RF=pF.Int8Array,AF=RF&&RF.prototype,OF=pF.Uint8ClampedArray,PF=OF&&OF.prototype,DF=RF&&wF(RF),LF=AF&&wF(AF),NF=Object.prototype,MF=pF.TypeError,UF=EF("toStringTag"),jF=IF("TYPED_ARRAY_TAG"),VF="TypedArrayConstructor",FF=dF&&!!TF&&"Opera"!==gF(pF.opera),BF=!1,$F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},HF={BigInt64Array:8,BigUint64Array:8},zF=function(e){var t=wF(e);if(vF(t)){var n=xF(t);return n&&mF(n,VF)?n.TypedArrayConstructor:zF(t)}},WF=function(e){if(!vF(e))return!1;var t=gF(e);return mF($F,t)||mF(HF,t)};for(sF in $F)(uF=(cF=pF[sF])&&cF.prototype)?CF(uF).TypedArrayConstructor=cF:FF=!1;for(sF in HF)(uF=(cF=pF[sF])&&cF.prototype)&&(CF(uF).TypedArrayConstructor=cF);if((!FF||!fF(DF)||DF===Function.prototype)&&(DF=function(){throw MF("Incorrect invocation")},FF))for(sF in $F)pF[sF]&&TF(pF[sF],DF);if((!FF||!LF||LF===NF)&&(LF=DF.prototype,FF))for(sF in $F)pF[sF]&&TF(pF[sF].prototype,LF);if(FF&&wF(PF)!==LF&&TF(PF,LF),hF&&!mF(LF,UF))for(sF in BF=!0,SF(LF,UF,{get:function(){return vF(this)?this[jF]:void 0}}),$F)pF[sF]&&yF(pF[sF],jF,sF);var qF={NATIVE_ARRAY_BUFFER_VIEWS:FF,TYPED_ARRAY_TAG:BF&&jF,aTypedArray:function(e){if(WF(e))return e;throw MF("Target is not a typed array")},aTypedArrayConstructor:function(e){if(fF(e)&&(!TF||kF(DF,e)))return e;throw MF(_F(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(hF){if(n)for(var i in $F){var o=pF[i];if(o&&mF(o.prototype,e))try{delete o.prototype[e]}catch(Yq){try{o.prototype[e]=t}catch(s){}}}LF[e]&&!n||bF(LF,e,n?t:FF&&AF[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(hF){if(TF){if(n)for(r in $F)if((i=pF[r])&&mF(i,e))try{delete i[e]}catch(Yq){}if(DF[e]&&!n)return;try{return bF(DF,e,n?t:FF&&DF[e]||t)}catch(Yq){}}for(r in $F)!(i=pF[r])||i[e]&&!n||bF(i,e,t)}},getTypedArrayConstructor:zF,isView:function(e){if(!vF(e))return!1;var t=gF(e);return"DataView"===t||mF($F,t)||mF(HF,t)},isTypedArray:WF,TypedArray:DF,TypedArrayPrototype:LF},GF=R,JF=O,KF=vl,QF=qF.NATIVE_ARRAY_BUFFER_VIEWS,XF=GF.ArrayBuffer,YF=GF.Int8Array,ZF=!QF||!JF((function(){YF(1)}))||!JF((function(){new YF(-1)}))||!KF((function(e){new YF,new YF(null),new YF(1.5),new YF(e)}),!0)||JF((function(){return 1!==new YF(new XF(2),1,void 0).length})),eB=xr,tB=RangeError,nB=function(e){var t=eB(e);if(t<0)throw tB("The argument can't be less than 0");return t},rB=RangeError,iB=function(e,t){var n=nB(e);if(n%t)throw rB("Wrong offset");return n},oB=Fi,aB=te("".slice),sB=Vt,cB=TypeError,uB=function(e){var t=sB(e,"number");if("number"==typeof t)throw cB("Can't convert number to bigint");return BigInt(t)},lB=Ri,dB=M,hB=yy,pB=ht,fB=Ur,vB=Hu,mB=Mu,gB=Au,_B=function(e){return"Big"===aB(oB(e),0,3)},yB=qF.aTypedArrayConstructor,bB=uB,SB=Ei,kB=R,wB=M,TB=P,EB=ZF,IB=qF,CB=iV,xB=ll,RB=H,AB=Tn,OB=MA,PB=Nr,DB=qU,LB=iB,NB=$t,MB=vt,UB=Fi,jB=be,VB=$e,FB=fs,BB=Ee,$B=ac,HB=Tr.f,zB=function(e){var t,n,r,i,o,a,s,c,u=hB(this),l=pB(e),d=arguments.length,h=d>1?arguments[1]:void 0,p=void 0!==h,f=mB(l);if(f&&!gB(f))for(c=(s=vB(l,f)).next,l=[];!(a=dB(c,s)).done;)l.push(a.value);for(p&&d>2&&(h=lB(h,arguments[2])),n=fB(l),r=new(yB(u))(n),i=_B(r),t=0;n>t;t++)o=p?h(l[t],t):l[t],r[t]=i?bB(o):+o;return r},WB=mo.forEach,qB=$l,GB=on,JB=A,KB=yl,QB=ar.get,XB=ar.set,YB=ar.enforce,ZB=GB.f,e$=JB.f,t$=Math.round,n$=kB.RangeError,r$=CB.ArrayBuffer,i$=r$.prototype,o$=CB.DataView,a$=IB.NATIVE_ARRAY_BUFFER_VIEWS,s$=IB.TYPED_ARRAY_TAG,c$=IB.TypedArray,u$=IB.TypedArrayPrototype,l$=IB.aTypedArrayConstructor,d$=IB.isTypedArray,h$="BYTES_PER_ELEMENT",p$="Wrong length",f$=function(e,t){l$(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},v$=function(e,t){ZB(e,t,{get:function(){return QB(this)[t]}})},m$=function(e){var t;return BB(i$,e)||"ArrayBuffer"==(t=UB(e))||"SharedArrayBuffer"==t},g$=function(e,t){return d$(e)&&!VB(t)&&t in e&&OB(+t)&&t>=0},_$=function(e,t){return t=NB(t),g$(e,t)?RB(2,e[t]):e$(e,t)},y$=function(e,t,n){return t=NB(t),!(g$(e,t)&&jB(n)&&MB(n,"value"))||MB(n,"get")||MB(n,"set")||n.configurable||MB(n,"writable")&&!n.writable||MB(n,"enumerable")&&!n.enumerable?ZB(e,t,n):(e[t]=n.value,e)};TB?(a$||(JB.f=_$,GB.f=y$,v$(u$,"buffer"),v$(u$,"byteOffset"),v$(u$,"byteLength"),v$(u$,"length")),SB({target:"Object",stat:!0,forced:!a$},{getOwnPropertyDescriptor:_$,defineProperty:y$}),lF.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=kB[i],c=s,u=c&&c.prototype,l={},d=function(e,t){ZB(e,t,{get:function(){return function(e,t){var n=QB(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=QB(e);n&&(i=(i=t$(i))<0?0:i>255?255:255&i),o.view[a](t*r+o.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};a$?EB&&(c=t((function(e,t,n,i){return xB(e,u),KB(jB(t)?m$(t)?void 0!==i?new s(t,LB(n,r),i):void 0!==n?new s(t,LB(n,r)):new s(t):d$(t)?f$(c,t):wB(zB,c,t):new s(DB(t)),e,c)})),$B&&$B(c,c$),WB(HB(s),(function(e){e in c||AB(c,e,s[e])})),c.prototype=u):(c=t((function(e,t,n,i){xB(e,u);var o,a,s,l=0,h=0;if(jB(t)){if(!m$(t))return d$(t)?f$(c,t):wB(zB,c,t);o=t,h=LB(n,r);var p=t.byteLength;if(void 0===i){if(p%r)throw n$(p$);if((a=p-h)<0)throw n$(p$)}else if((a=PB(i)*r)+h>p)throw n$(p$);s=a/r}else s=DB(t),o=new r$(a=s*r);for(XB(e,{buffer:o,byteOffset:h,byteLength:a,length:s,view:new o$(o)});l<s;)d(e,l++)})),$B&&$B(c,c$),u=c.prototype=FB(u$)),u.constructor!==c&&AB(u,"constructor",c),YB(u).TypedArrayConstructor=c,s$&&AB(u,s$,i);var h=c!=s;l[i]=c,SB({global:!0,constructor:!0,forced:h,sham:!a$},l),h$ in c||AB(c,h$,r),h$ in u||AB(u,h$,r),qB(i)}):lF.exports=function(){},(0,lF.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var b$=ht,S$=Pr,k$=Ur,w$=ph,T$=Math.min,E$=[].copyWithin||function(e,t){var n=b$(this),r=k$(n),i=S$(e,r),o=S$(t,r),a=arguments.length>2?arguments[2]:void 0,s=T$((void 0===a?r:S$(a,r))-o,r-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:w$(n,i),i+=c,o+=c;return n},I$=qF,C$=te(E$),x$=I$.aTypedArray;(0,I$.exportTypedArrayMethod)("copyWithin",(function(e,t){return C$(x$(this),e,t,arguments.length>2?arguments[2]:void 0)}));var R$=mo.every,A$=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("every",(function(e){return R$(A$(this),e,arguments.length>1?arguments[1]:void 0)}));var O$=rj,P$=uB,D$=Fi,L$=M,N$=O,M$=qF.aTypedArray,U$=qF.exportTypedArrayMethod,j$=te("".slice);U$("fill",(function(e){var t=arguments.length;M$(this);var n="Big"===j$(D$(this),0,3)?P$(e):+e;return L$(O$,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),N$((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})));var V$=Ur,F$=Ty,B$=qF.aTypedArrayConstructor,$$=qF.getTypedArrayConstructor,H$=function(e){return B$(F$(e,$$(e)))},z$=function(e,t){for(var n=0,r=V$(t),i=new e(r);r>n;)i[n]=t[n++];return i},W$=H$,q$=mo.filter,G$=function(e,t){return z$(W$(e),t)},J$=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("filter",(function(e){var t=q$(J$(this),e,arguments.length>1?arguments[1]:void 0);return G$(this,t)}));var K$=mo.find,Q$=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("find",(function(e){return K$(Q$(this),e,arguments.length>1?arguments[1]:void 0)}));var X$=mo.findIndex,Y$=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("findIndex",(function(e){return X$(Y$(this),e,arguments.length>1?arguments[1]:void 0)}));var Z$=mo.forEach,eH=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("forEach",(function(e){Z$(eH(this),e,arguments.length>1?arguments[1]:void 0)}));var tH=$r.includes,nH=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("includes",(function(e){return tH(nH(this),e,arguments.length>1?arguments[1]:void 0)}));var rH=$r.indexOf,iH=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("indexOf",(function(e){return rH(iH(this),e,arguments.length>1?arguments[1]:void 0)}));var oH=R,aH=O,sH=te,cH=qF,uH=Vc,lH=Ot("iterator"),dH=oH.Uint8Array,hH=sH(uH.values),pH=sH(uH.keys),fH=sH(uH.entries),vH=cH.aTypedArray,mH=cH.exportTypedArrayMethod,gH=dH&&dH.prototype,_H=!aH((function(){gH[lH].call([1])})),yH=!!gH&&gH.values&&gH[lH]===gH.values&&"values"===gH.values.name,bH=function(){return hH(vH(this))};mH("entries",(function(){return fH(vH(this))}),_H),mH("keys",(function(){return pH(vH(this))}),_H),mH("values",bH,_H||!yH,{name:"values"}),mH(lH,bH,_H||!yH,{name:"values"});var SH=qF.aTypedArray,kH=qF.exportTypedArrayMethod,wH=te([].join);kH("join",(function(e){return wH(SH(this),e)}));var TH=Hd,EH=pe,IH=xr,CH=Ur,xH=xh,RH=Math.min,AH=[].lastIndexOf,OH=!!AH&&1/[1].lastIndexOf(1,-0)<0,PH=xH("lastIndexOf"),DH=OH||!PH?function(e){if(OH)return TH(AH,this,arguments)||0;var t=EH(this),n=CH(t),r=n-1;for(arguments.length>1&&(r=RH(r,IH(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:AH,LH=Hd,NH=DH,MH=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return LH(NH,MH(this),t>1?[e,arguments[1]]:[e])}));var UH=mo.map,jH=H$,VH=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("map",(function(e){return UH(VH(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(jH(e))(t)}))}));var FH=xV.left,BH=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return FH(BH(this),e,t,t>1?arguments[1]:void 0)}));var $H=xV.right,HH=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return $H(HH(this),e,t,t>1?arguments[1]:void 0)}));var zH=qF.aTypedArray,WH=qF.exportTypedArrayMethod,qH=Math.floor;WH("reverse",(function(){for(var e,t=this,n=zH(t).length,r=qH(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}));var GH=R,JH=M,KH=qF,QH=Ur,XH=iB,YH=ht,ZH=O,ez=GH.RangeError,tz=GH.Int8Array,nz=tz&&tz.prototype,rz=nz&&nz.set,iz=KH.aTypedArray,oz=KH.exportTypedArrayMethod,az=!ZH((function(){var e=new Uint8ClampedArray(2);return JH(rz,e,{length:1,0:3},1),3!==e[1]})),sz=az&&KH.NATIVE_ARRAY_BUFFER_VIEWS&&ZH((function(){var e=new tz(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));oz("set",(function(e){iz(this);var t=XH(arguments.length>1?arguments[1]:void 0,1),n=YH(e);if(az)return JH(rz,this,n,t);var r=this.length,i=QH(n),o=0;if(i+t>r)throw ez("Wrong length");for(;o<i;)this[t+o]=n[o++]}),!az||sz);var cz=H$,uz=zd,lz=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("slice",(function(e,t){for(var n=uz(lz(this),e,t),r=cz(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),O((function(){new Int8Array(1).slice()})));var dz=mo.some,hz=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("some",(function(e){return dz(hz(this),e,arguments.length>1?arguments[1]:void 0)}));var pz=Ie.match(/firefox\/(\d+)/i),fz=!!pz&&+pz[1],vz=/MSIE|Trident/.test(Ie),mz=Ie.match(/AppleWebKit\/(\d+)\./),gz=!!mz&&+mz[1],_z=te,yz=O,bz=Je,Sz=Pv,kz=fz,wz=vz,Tz=De,Ez=gz,Iz=qF.aTypedArray,Cz=qF.exportTypedArrayMethod,xz=R.Uint16Array,Rz=xz&&_z(xz.prototype.sort),Az=!(!Rz||yz((function(){Rz(new xz(2),null)}))&&yz((function(){Rz(new xz(2),{})}))),Oz=!!Rz&&!yz((function(){if(Tz)return Tz<74;if(kz)return kz<67;if(wz)return!0;if(Ez)return Ez<602;var e,t,n=new xz(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(Rz(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));Cz("sort",(function(e){return void 0!==e&&bz(e),Oz?Rz(this,e):Sz(Iz(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!Oz||Az);var Pz=Nr,Dz=Pr,Lz=H$,Nz=qF.aTypedArray;(0,qF.exportTypedArrayMethod)("subarray",(function(e,t){var n=Nz(this),r=n.length,i=Dz(e,r);return new(Lz(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,Pz((void 0===t?r:Dz(t,r))-i))}));var Mz=Hd,Uz=qF,jz=O,Vz=zd,Fz=R.Int8Array,Bz=Uz.aTypedArray,$z=Uz.exportTypedArrayMethod,Hz=[].toLocaleString,zz=!!Fz&&jz((function(){Hz.call(new Fz(1))}));$z("toLocaleString",(function(){return Mz(Hz,zz?Vz(Bz(this)):Bz(this),Vz(arguments))}),jz((function(){return[1,2].toLocaleString()!=new Fz([1,2]).toLocaleString()}))||!jz((function(){Fz.prototype.toLocaleString.call([1,2])})));var Wz=qF.exportTypedArrayMethod,qz=O,Gz=te,Jz=R.Uint8Array,Kz=Jz&&Jz.prototype||{},Qz=[].toString,Xz=Gz([].join);qz((function(){Qz.call({})}))&&(Qz=function(){return Xz(this)});var Yz=Kz.toString!=Qz;Wz("toString",Qz,Yz);var Zz=function(){function e(t,n,r){s(this,e),this.isUplink_=r,this.connection_=t,this.log_=n,this.seiMessageList_=[],this.seiPayloadType_=243,this.mainVideoSenderOrReceiver_=null,this.mainVideoAbortController_=null,this.abortMap_=new Map,this.onSEIMessage=null}return u(e,[{key:"isRunning",get:function(){return!!this.mainVideoAbortController_}},{key:"start",value:function(e){this.mainVideoSenderOrReceiver_=e;var t=e.createEncodedStreams(),n=t.readable,r=t.writable,i=new TransformStream({transform:this.isUplink_?this.encodeVideoFrame.bind(this):this.decodeVideoFrame.bind(this)});this.mainVideoAbortController_=new AbortController,n.pipeThrough(i).pipeTo(r,{signal:this.mainVideoAbortController_.signal}).catch((function(){}))}},{key:"restart",value:function(e){this.stop(),this.start(e)}},{key:"stop",value:function(){var e;null===(e=this.mainVideoAbortController_)||void 0===e||e.abort(),this.mainVideoAbortController_=null}},{key:"destroy",value:function(){this.stop(),this.abortMap_.forEach((function(e){return e.abort()})),this.abortMap_.clear(),this.log_=null,this.onSEIMessage=null,this.mainVideoSenderOrReceiver_=null,this.connection_=null}},{key:"handleEncodedStreams",value:function(){var e=this;try{var t=this.connection_.getPeerConnection();this.clearUnusedSenderOrReceiver(t),this.isUplink_?t.getSenders().forEach((function(t,n){if(1===n){if(t===e.mainVideoSenderOrReceiver_)return;e.isRunning?e.restart(t):e.start(t)}else{if(e.abortMap_.has(t))return;e.pipeSenderOrReceiver(t)}})):t.getReceivers().forEach((function(t,n){var r;e.abortMap_.has(t)||t===e.mainVideoSenderOrReceiver_||(1===n&&(null===(r=t.track)||void 0===r?void 0:r.kind)===Ww?e.isRunning?e.restart(t):e.start(t):e.pipeSenderOrReceiver(t))}))}catch(Yq){this.log_.warn(Yq)}}},{key:"pipeSenderOrReceiver",value:function(e){var t=e.createEncodedStreams(),n=t.readable,r=t.writable,i=new AbortController;this.abortMap_.set(e,i),n.pipeTo(r,{signal:i.signal}).catch((function(){}))}},{key:"clearUnusedSenderOrReceiver",value:function(e){var t=this;this.abortMap_.forEach((function(n,r){(t.isUplink_?e.getSenders():e.getReceivers()).find((function(e){return e===r}))||(n.abort(),t.abortMap_.delete(r))}))}},{key:"push",value:function(e,t){t&&t.seiPayloadType&&(this.seiPayloadType_=t.seiPayloadType),this.seiMessageList_.push(e)}},{key:"hasSEI",value:function(e){var t=new DataView(e);return 1===t.getInt32(0)&&6===t.getInt8(4)}},{key:"isEmptyFrame",value:function(e){return"empty"===e.type||0===e.data.byteLength}},{key:"getNaluCount",value:function(e){for(var t=0,n=0,r=new DataView(e),i=0;i<e.byteLength;i++)switch(r.getUint8(i)){case 0:t++;break;case 1:2!==t&&3!==t||n++,t=0;break;default:t=0}return n}},{key:"encodeVideoFrame",value:function(e,t){try{if(this.connection_.isH264&&this.seiMessageList_.length>0&&!this.isEmptyFrame(e)){var n=9-this.getNaluCount(e.data);if(n<=0)return;for(var r=this.seiMessageList_.splice(0,n).reverse().map(this.encodeSEINalu.bind(this)),i=r.reduce((function(e,t){return e+t.dataView.byteLength}),0),o=new ArrayBuffer(i+e.data.byteLength),a=new DataView(o),s=new DataView(e.data),c=0,u=0;u<r.length;u++)for(var l=0;l<r[u].dataView.byteLength;l++)a.setInt8(c++,r[u].dataView.getInt8(l));for(var d=0;d<e.data.byteLength;d++)a.setInt8(c++,s.getInt8(d));e.data=o,this.log_.debug("".concat(r.length," sei sent"))}}catch(Yq){this.log_.warn(Yq)}t.enqueue(e)}},{key:"decodeVideoFrame",value:function(e,t){var n=this;try{if(this.connection_.isH264&&!this.isEmptyFrame(e)&&this.hasSEI(e.data)){for(var r=[],i=new DataView(e.data),o=0,a=-1,s=-1,c=0;c<e.data.byteLength;c++){var u=i.getUint8(c);if(0===u)o++;else if(1===u){if(2===o||3===o){var l=c-o;if(-1===a?a=l:-1===s&&(s=l,r.push(new eW(new DataView(i.buffer.slice(a,s)))),a=l,s=-1),6!==i.getUint8(c+1)){e.data=new DataView(i.buffer.slice(l)).buffer;break}}o=0}else o=0}this.log_.debug("".concat(r.length," sei received")),uR(this.onSEIMessage)&&r.reverse().forEach((function(e){n.onSEIMessage({seiPayloadType:e.seiPayloadType,data:e.seiPayload.buffer})}))}}catch(Yq){this.log_.warn(Yq)}t.enqueue(e)}},{key:"encodeSEINalu",value:function(e){var t=e.byteLength,n=parseInt(t/255),r=t%255,i=[];i.push(0,0,0,1,6,this.seiPayloadType_);for(var o=0;o<n;o++)i.push(255);i.push(r);var a=new DataView(e);return i.push.apply(i,k(new Uint8Array(a.buffer))),i.push(128),new eW(new DataView(new Uint8Array(i).buffer),!0)}}]),e}(),eW=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(this,e),this.dataView=t,this.isSEI&&(n?this.addPreventionByte():this.removePreventionByte())}return u(e,[{key:"addPreventionByte",value:function(){for(var e=this.seiPayloadStartIndex,t=this.dataView.byteLength-2,n=[],r=0,i=e;i<=t;i++){var o=this.dataView.getInt8(i);switch(o){case 0:case 1:case 2:case 3:2===r&&(n.push(3),r=0),0==o?r++:r=0,n.push(o);break;default:r=0,n.push(o)}}n.push(this.dataView.getInt8(this.dataView.byteLength-1));var a=new DataView(new Uint8Array([].concat(k(new Uint8Array(this.dataView.buffer).slice(0,e)),n)).buffer);this.dataView=a}},{key:"removePreventionByte",value:function(){for(var e=this.seiPayloadStartIndex,t=this.dataView.byteLength-1,n=[],r=0,i=e;i<=t;i++)switch(this.dataView.getInt8(i)){case 0:r++,n.push(this.dataView.getInt8(i));break;case 3:2!==r&&n.push(this.dataView.getInt8(i)),r=0;break;default:n.push(this.dataView.getInt8(i)),r=0}var o=new DataView(new Uint8Array([].concat(k(new Uint8Array(this.dataView.buffer).slice(0,e)),n)).buffer);this.dataView=o}},{key:"isSEI",get:function(){return 6===this.dataView.getUint8(4)}},{key:"seiPayloadStartIndex",get:function(){for(var e=6,t=6;t<this.dataView.buffer.byteLength&&(e++,255===this.dataView.getUint8(t));t++);return e}},{key:"seiPayloadType",get:function(){return this.isSEI?this.dataView.getUint8(5):null}},{key:"seiPayload",get:function(){if(!this.isSEI)return null;for(var e=0,t=6,n=6;n<this.dataView.buffer.byteLength;n++){var r=this.dataView.getUint8(n);if(t++,255!==r){e+=r;break}e+=255}for(var i=new ArrayBuffer(e),o=new DataView(i),a=0;a<i.byteLength;a++,t++)o.setInt8(a,this.dataView.getInt8(t));return o}}]),e}(),tW=function(){function e(t){s(this,e),this.userId_=t.userId,this.tinyId_=t.tinyId,this.client_=t.client,this.sdpSemantics_=t.client.getSdpSemantics(),this.isUplink_=t.isUplink,this.log_=PA.createLogger({id:"n|"+this.userId_,userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId(),isLocal:this.isUplink_}),this.signalChannel_=t.signalChannel,this.peerConnection_=null,this.isErrorObserved_=!1,this.emitter_=new DR,this.currentState_=QT,this.waitForPeerConnectionConnectedPromise_=null,this.isReconnecting_=!1,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.isFirstConnection_=!0,this.delay_={audioDelay:0,videoDelay:0},this.enableSEI_=t.enableSEI,this.enableSEI_&&SL&&(this.sei_=new Zz(this,this.log_,this.isUplink_))}var t;return u(e,[{key:"initialize",value:function(){var e={encodedInsertableStreams:this.enableSEI_&&SL,iceServers:this.client_.getIceServers(),iceTransportPolicy:this.client_.getIceTransportPolicy(),sdpSemantics:this.sdpSemantics_,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",tcpCandidatePolicy:"disable",IceTransportsType:"nohost"};this.peerConnection_=new RTCPeerConnection(e),this.peerConnection_.onconnectionstatechange=this.onConnectionStateChange.bind(this)}},{key:"close",value:function(){this.log_.info("closing connection"),this.closePeerConnection(),this.sei_&&(this.sei_.destroy(),this.sei_=null)}},{key:"closePeerConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.peerConnection_&&(this.peerConnection_.onconnectionstatechange=function(){},this.peerConnection_.close(),this.peerConnection_=null,e&&this.emitConnectionStateChangedEvent(QT))}},{key:"getDTLSTransportState",value:function(){if(!this.peerConnection_)return KT;var e=null;if(this.isUplink_){if(!fL()||0===this.peerConnection_.getSenders().length)return KT;e=this.peerConnection_.getSenders()[0].transport}else{if(!pL()||0===this.peerConnection_.getReceivers().length)return KT;e=this.peerConnection_.getReceivers()[0].transport}return e?e.state:KT}},{key:"onConnectionStateChange",value:function(e){var t=this.peerConnection_.iceConnectionState,n=this.getDTLSTransportState();if(this.log_.info("onConnectionStateChange() connectionState: "+e.target.connectionState),this.log_.info("ICE Transport state: ".concat(t,", DTLS Transport state: ").concat(n)),e.target.connectionState===tE&&this.emitConnectionStateChangedEvent(XT),e.target.connectionState===nE||e.target.connectionState===rE){var r="".concat(this.isUplink_?"uplink":"downlink"," ICE/DTLS Transport connection ").concat(e.target.connectionState,". ICE Transport state: ").concat(t,", DTLS Transport state: ").concat(n),i=new vP({message:r,code:fP.ICE_TRANSPORT_ERROR});iD.logFailedEvent({userId:this.client_.getUserId(),eventType:TE,error:i}),this.emitConnectionStateChangedEvent(QT),this.isErrorObserved_||this.emitter_.emit(PL.ERROR,i)}e.target.connectionState!==oE&&e.target.connectionState!==aE||(this.logSelectedCandidate(),iD.logSuccessEvent({userId:this.client_.getUserId(),eventType:TE}),this.emitConnectionStateChangedEvent(ZT))}},{key:"emitConnectionStateChangedEvent",value:function(e){e!==this.currentState_&&(this.currentState_===YT&&e===XT||(LR.emit(SA,{client:this.client_,connection:this,prevState:this.currentState_,state:e}),this.emitter_.emit(PL.CONNECTION_STATE_CHANGED,{prevState:this.currentState_,state:e}),this.currentState_=e))}},{key:"hitTest",value:function(e){return(0===e||"0"===e)&&this.isUplink_||e===this.tinyId_}},{key:"addEventInternal",value:function(e,t){var n=this.client_.getUserId(),r={eventId:e,eventDesc:t,timestamp:rg(),userId:n,tinyId:this.client_.getTinyId()};this.isUplink_||(r.remoteUserId=this.userId_,r.remoteTinyId=this.tinyId_),ZP(n,r)}},{key:"getPeerConnection",value:function(){return this.peerConnection_}},{key:"getClient",value:function(){return this.client_}},{key:"getUserId",value:function(){return this.userId_}},{key:"getTinyId",value:function(){return this.tinyId_}},{key:"logSelectedCandidate",value:(t=a(r().mark((function e(){var t,n,i,o,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.peerConnection_.getStats();case 4:t=e.sent,n=E(t),e.prev=6,n.s();case 8:if((i=n.n()).done){e.next=18;break}if((o=S(i.value,2))[0],!kL(a=o[1])){e.next=16;break}return s=t.get(a.localCandidateId),c=t.get(a.remoteCandidateId),s&&this.log_.info("local candidate: ".concat(s.candidateType," ").concat(s.protocol,":").concat(s.ip||s.address,":").concat(s.port," ").concat(s.networkType||""," ").concat("relay"===s.candidateType?"relayProtocol:"+s.relayProtocol:"")),c&&this.log_.info("remote candidate: ".concat(c.candidateType," ").concat(c.protocol,":").concat(c.ip||c.address,":").concat(c.port)),e.abrupt("break",18);case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[6,20,23,26]])}))),function(){return t.apply(this,arguments)})},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"waitForPeerConnectionConnected",value:function(){var e=this;return this.waitForPeerConnectionConnectedPromise_||(this.waitForPeerConnectionConnectedPromise_=new Promise((function(t,n){if(e.currentState_===ZT)return t();var r=-1,i=function(e){e.state===ZT&&(clearTimeout(r),s(),t())},o=function(t){t.client===e.client_&&(clearTimeout(r),s(),n(new vP({code:fP.API_CALL_ABORTED,message:tR({key:Kx,data:"leave room"})})))},a=function(t){var i=t.client,o=t.stream;!e.isUplink_&&i===e.client_&&o.getConnection()===e&&!e.peerConnection_&&(clearTimeout(r),s(),n(new vP({code:fP.API_CALL_ABORTED,message:tR({key:Kx,data:"unsubscribe stream"})})))},s=function(){LR.off($R,o,e),LR.off(aA,a,e),e.emitter_.off(PL.CONNECTION_STATE_CHANGED,i,e)};r=setTimeout((function(){s();var e=new vP({code:fP.API_CALL_TIMEOUT,message:"connection timeout"});n(e)}),1e4),LR.on($R,o,e),e.emitter_.on(PL.CONNECTION_STATE_CHANGED,i,e),e.isUplink_||LR.on(aA,a,e)})),this.waitForPeerConnectionConnectedPromise_=this.waitForPeerConnectionConnectedPromise_.then((function(t){return e.waitForPeerConnectionConnectedPromise_=null,t})).catch((function(t){throw e.waitForPeerConnectionConnectedPromise_=null,t}))),this.waitForPeerConnectionConnectedPromise_}},{key:"getReconnectionCount",value:function(){return this.reconnectionCount_}},{key:"startReconnection",value:function(){this.isReconnecting_=!0,this.emitConnectionStateChangedEvent(YT),this.reconnect(),this.addEventInternal(this.isUplink_?zP:GP,"".concat(this.isUplink_?"uplink":"downlink","-connection is reconnecting"))}},{key:"stopReconnection",value:function(){this.log_.info("stop reconnection"),this.isReconnecting_=!1,this.reconnectionCount_=0,this.clearReconnectionTimer(),this.signalChannel_.off(VO,this.reconnect,this)}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){this.emitter_.off(e,t,n)}},{key:"setDelay",value:function(e){var t=e.audioDelay,n=e.videoDelay;this.delay_={audioDelay:t,videoDelay:n}}},{key:"getDelay",value:function(){return this.delay_}},{key:"isH264",get:function(){var e,t;return!(null===(e=this.peerConnection_)||void 0===e||null===(t=e.remoteDescription)||void 0===t||!t.sdp.includes("H264"))}}]),e}(),nW=function(){function e(){s(this,e),this.set_=new Set,LR.on(NR,this.add,this),LR.on(jR,this.add,this),LR.on(VR,this.delete,this),LR.on($R,this.delete,this)}return u(e,[{key:"add",value:function(e){var t=e.client,n=e.roomId;if("rtc"!==t.getMode()){var r=this.getKey(t.getUserId(),n||t.getRoomId(),t.getSDKAppId(),t.getUseStringRoomId());this.set_.add(r)}}},{key:"delete",value:function(e){var t=e.client;if("rtc"!==t.getMode()){var n=this.getKey(t.getUserId(),t.getRoomId(),t.getSDKAppId(),t.getUseStringRoomId());this.set_.delete(n)}}},{key:"getKey",value:function(e,t,n,r){return"".concat(n,"_").concat(t,"_").concat(e,"_").concat(r)}},{key:"isJoined",value:function(e){var t=e.userId,n=e.roomId,r=e.sdkAppId,i=e.client;return"rtc"!==i.getMode()&&this.set_.has(this.getKey(t,n,r,i.getUseStringRoomId()))}}]),e}(),rW=new nW;function iW(e,t,n,r){if(this.useStringRoomId_){if(!dR(e)||!/^[A-Za-z\d\s!#$%&()+\-:;<=.>?@[\]^_{}|~,]{1,64}$/.test(e))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:fC,data:t,link:{className:r,fnName:n}})})}else if(!(hR(e)&&/^[1-9]\d*$/.test(String(e))&&e<4294967295))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:vC,data:t,link:{className:r,fnName:n}})})}function oW(e,t,n,r){if(!/^[A-Za-z\d_-]*$/.test(e))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:LC,data:t,link:{className:r,fnName:n}})})}var aW,sW,cW={createClient:{name:"clientConfig",required:!0,type:qE,properties:{sdkAppId:{required:!0,type:HE,allowEmpty:!1},userId:{required:!0,type:$E,allowEmpty:!1},userSig:{required:!0,type:$E,allowEmpty:!1},mode:{required:!0,type:$E,values:["rtc",VT]},useStringRoomId:{type:zE},autoSubscribe:{type:zE},enableAutoPlayDialog:{type:zE},streamId:{type:$E},userDefineRecordId:{type:$E},pureAudioPushMode:{type:HE,values:[1,2]},enableSEI:{type:zE}}},createStream:{name:"streamConfig",required:!0,type:qE,properties:{userId:{type:$E},audio:{type:zE},video:{type:zE},screen:{type:zE},screenAudio:{type:zE},microphoneId:{type:$E},cameraId:{type:$E},facingMode:{type:[$E,qE]},audioSource:{instanceOf:window.MediaStreamTrack},videoSource:{instanceOf:window.MediaStreamTrack}},validate:function(e){if(!lR(e.screen)&&e.screen&&lR(e.audio)&&(e.audio=!1),!(lR(e.audio)&&lR(e.video)||lR(e.audioSource)&&lR(e.videoSource)))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:kx})});if(!lR(e.screen)&&!0===e.screen&&!0===e.video)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:wx})});if(e.audio&&e.screenAudio)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:Tx})});if(!0!==e.screen&&!0===e.screenAudio)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:Ex})});if(!lR(e.screen)&&!0===e.screen&&!this.isScreenShareSupported())throw new vP({code:fP.INVALID_OPERATION,message:tR({key:Dx})})}}},uW={join:{name:"options",required:!0,properties:{roomId:{required:!0,type:[HE,$E],allowEmpty:!1,validate:iW},role:{type:[$E],values:[$T,HT]},privateMapKey:{type:[$E]}},validate:function(e){if(this.isJoined_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:pC})});if(this.checkDestroy(),rW.isJoined({userId:this.userId_,roomId:e.roomId,sdkAppId:this.sdkAppId_,client:this}))throw new vP({code:fP.INVALID_OPERATION,message:tR({key:sx,data:this.userId_})})}},publish:[{name:"stream",required:!0,instanceOf:sI,validate:function(e){if(!this.isJoined_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:bC})});if(this.mode_===VT&&this.role_===HT)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:kC})});if(!e.getIsReadyToPublish())throw new vP({code:fP.INVALID_OPERATION,message:tR({key:wC})});if(this.notPublishWithoutH264Supported_)throw new vP({code:fP.NOT_SUPPORTED_H264,message:tR({key:Rx})})}},{name:"options",type:qE,defaultValue:{isAuxiliary:!1},properties:{isAuxiliary:{type:zE,defaultValue:!1,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&!mL())throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:Lx})});if(this.uplinkConnection_&&(e&&this.uplinkConnection_.isAuxStreamPublished||!e&&this.uplinkConnection_.isMainStreamPublished))throw new vP({code:fP.INVALID_OPERATION,message:tR({key:TC,data:e?Kw:"local"})});var t=this.localScreenStream_||k(this.connections_.values()).findIndex((function(e){return e.getTrackState().auxiliary}))>=0;if(!this.enableMultiAuxStream_&&e&&t)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:Xx})})}}}}],unpublish:{name:"stream",required:!0,instanceOf:sI,validate:function(e){if(e!==this.localStream_&&e!==this.localAuxStream_){if(this.localStream_||this.localAuxStream_)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:SC})});this.log_.warn("Client currently has no published stream, please call publish() first.")}}},subscribe:[{name:"stream",required:!0,instanceOf:cI,validate:function(e){if(!e.getConnection())throw new vP({code:fP.INVALID_OPERATION,message:tR({key:EC})});if(this.notSubscribeWithoutH264Supported_)throw new vP({code:fP.NOT_SUPPORTED_H264,message:tR({key:Ax})})}},{name:"options",type:qE,properties:{audio:{type:zE},video:{type:zE}},validate:function(e){var t=e.audio,n=e.video;if(!(lR(t)||lR(n)||t||n))throw new vP({code:fP.INVALID_OPERATION,message:tR({key:Bx})})}}],unsubscribe:{name:"stream",required:!0,instanceOf:cI,validate:function(e){if(!e.getConnection())throw new vP({code:fP.INVALID_OPERATION,message:tR({key:EC})})}},switchRole:{name:"role",required:!0,values:[$T,HT],validate:function(){if(this.mode_!==VT)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:CC})});if(!this.isJoined_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:xC})})}},startPublishCDNStream:{name:"options",required:!1,properties:{streamId:{type:$E,validate:oW},appId:{type:HE,allowEmpty:!1},bizId:{type:HE,allowEmpty:!1},url:{type:$E,allowEmpty:!1}},validate:function(){if(this.isDestroyed_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:cx,data:{funName:"startPublishCDNStream"}})})}},startMixTranscode:{name:"config",required:!0,type:qE,properties:{mode:{type:$E,values:["preset-layout","manual"]},streamId:{type:$E,validate:oW},videoWidth:{type:HE,notLessThanZero:!0},videoHeight:{type:HE,notLessThanZero:!0},videoBitrate:{type:HE,notLessThanZero:!0,allowEmpty:!1},videoFramerate:{type:HE,validate:function(e,t,n,r){if(e<=0||e>30)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:px,link:{className:r,fnName:n}})})}},videoGop:{type:HE,validate:function(e,t,n,r){if(e<1||e>8)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:fx,link:{className:r,fnName:n}})})}},audioSampleRate:{type:HE,notLessThanZero:!0},audioBitrate:{type:HE,validate:function(e,t,n,r){if(e<32||e>192)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:vx,link:{className:r,fnName:n}})})}},audioChannels:{type:HE,values:[1,2]},backgroundColor:{type:HE},backgroundImage:{type:$E},mixUsers:{required:!0,type:WE,arrayItem:{require:!0,type:qE,properties:{userId:{required:!0,type:$E},roomId:{type:[$E,HE],validate:iW},pureAudio:{type:zE},width:{type:HE,notLessThanZero:!0},height:{type:HE,notLessThanZero:!0},locationX:{type:HE,notLessThanZero:!0},locationY:{type:HE,notLessThanZero:!0},zOrder:{type:HE},streamType:{type:$E,values:["main","auxiliary"]},renderMode:{type:HE,values:[0,1,2,4]}}}}},validate:function(e,t,n,r,i){var o=0,a=0,s=e.mixUsers,c=[];if(s.forEach((function(e,t){if(c.push(e.userId),!e.pureAudio){if(!e.zOrder||e.zOrder<1||e>15)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:mx,data:"config.mixUsers[".concat(t,"].zOrder"),link:{className:r,fnName:n}})});e.width+e.locationX>o&&(o=e.width+e.locationX),e.height+e.locationY>a&&(a=e.height+e.locationY)}})),c.indexOf(this.getUserId())<0)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:gx,link:{className:r,fnName:n}})});if(e.videoWidth<o||e.videoHeight<a)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:_x,link:{className:r,fnName:n}})})}},sendSEIMessage:[{name:"buffer",required:!0,instanceOf:ArrayBuffer,validate:function(e){if(!SL)throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:$x})});if(!this.enableSEI_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:Hx})});if(e.byteLength>1e3)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:Wx,data:e.byteLength})});if(0===e.byteLength)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:zx})});if(!this.uplinkConnection_||!this.localStream_)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:qx})});if(!this.localStream_.hasVideo())throw new vP({code:fP.INVALID_OPERATION,message:tR({key:Gx})});var t=this.uplinkConnection_.isH264;if(!t)throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:$x,data:t})})}},{name:"options",type:qE,properties:{seiPayloadType:{type:HE,values:[5,243]}}}]},lW={play:[{name:"elementId",required:!0,type:[$E,"HTMLDivElement"],validate:function(e,t,n){if(dR(e)){var r=document.getElementById(e);if(!r)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:yx,data:{key:t,fnName:n}})});if(!(r instanceof HTMLDivElement))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:bx,data:{key:t,fnName:n,type:gR(r)}})})}}},{name:"options",type:qE,properties:{objectFit:{type:$E,values:["contain","cover","fill"]},muted:{type:zE},mirror:{type:zE}}}],addTrack:{name:IT,instanceOf:MediaStreamTrack,validate:function(e){if(this.isAddingTrack_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:KC})});if(this.isRemovingTrack_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:QC})});if(this.publishState_===QE)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:XC})});var t=this.getMediaStream();if(!t)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:YC})});if(e.kind===zw&&t.getAudioTracks().length>0||e.kind===Ww&&t.getVideoTracks().length>0)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:ZC})});if(!vL()&&!fL())throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:Ox,data:wT})})}},removeTrack:{name:IT,instanceOf:MediaStreamTrack,validate:function(e){if(this.isAddingTrack_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:tx})});if(this.isRemovingTrack_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:nx})});if(this.publishState_===QE)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:rx})});var t=this.getMediaStream();if(!t)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:YC})});if(-1===t.getTracks().indexOf(e))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:ix})});if(!vL()){if(1===t.getTracks().length)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:ox})});if(e.kind===zw)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:ex})});if(!fL())throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:Ox,data:TT})})}}},replaceTrack:{name:IT,instanceOf:MediaStreamTrack,validate:function(e){var t=this.getMediaStream();if(!t)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:JC})});if(this.publishState_===QE)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:GC})});if(e.kind===zw&&t.getAudioTracks().length<=0||e.kind===Ww&&t.getVideoTracks().length<=0)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:ax,data:e})});if(!gL())throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:Ox,data:ET})})}}},dW={TRTC:cW,CLIENT:uW,LOCAL_STREAM:{switchDevice:[{name:"type",required:!0,type:$E,values:[zw,Ww]},{name:"deviceId",required:!0,type:$E,validate:function(){if(this.screen_&&!this.audio_||this.audioSource_||this.videoSource_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:WC})});if(this.publishState_===QE)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:qC})});if(!gL())throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:Px})})}}],setAudioCaptureVolume:{name:"volume",type:HE}},STREAM:lW};function hW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){var i=r.value;return r.value=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return fW.call(this,t,r,n,this.name_),i.apply(this,r)},r}}function pW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,i){var o=i.value;return i.value=a(r().mark((function e(){var i,a,s,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=c.length,a=new Array(i),s=0;s<i;s++)a[s]=c[s];return fW.call(this,t,a,n,this.name_),e.abrupt("return",o.apply(this,a));case 3:case"end":return e.stop()}}),e,this)}))),i}}function fW(e,t,n,r){try{for(var i=0;i<e.length;i++)vW.call(this,{rule:e[i],value:t[i],key:e[i].name,fnName:n,className:r})}catch(Yq){throw PA.error(Yq),Yq}}function vW(e){var t=this,n=e.rule,r=e.value,i=e.key,o=e.fnName,a=e.className;if(lR(r)){if(n.required)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:KI,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(lR(n.defaultValue))return;r=n.defaultValue}if(Array.isArray(n.type)){if(!n.type.map((function(e){return e.toLowerCase()})).includes(gR(r)))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:QI,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}else if(!lR(n.type)&&gR(r)!==n.type)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:QI,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(!1===n.allowEmpty){var s=hR(r)&&(0===r||Number.isNaN(r)),c=dR(r)&&""===r.trim();if(s||c)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:XI,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}if(n.notLessThanZero&&hR(r)&&r<0)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:hx,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(dR(n.instanceOf)){if(!r||r.name_!==n.instanceOf)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:YI,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}else if(uR(n.instanceOf)&&!(r instanceof n.instanceOf))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:YI,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(n.values&&!n.values.includes(r))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:ZI,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});var u=n.properties;aR(u)&&fR(r)&&Object.keys(u).forEach((function(e){vW.call(t,{rule:u[e],value:r&&r[e],key:"".concat(i,".").concat(e),fnName:o,className:a})}));var l=n.arrayItem;aR(l)&&vR(r)&&r.forEach((function(e,n){vW.call(t,{rule:l,value:e,key:"".concat(i,"[").concat(n,"]"),fnName:o,className:a})})),uR(n.validate)&&n.validate.call(this,r,i,o,a,this)}Ei({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var mW=(aW=pW.apply(void 0,k(dW.STREAM.play)),sW=function(){function e(t){s(this,e),this.name_=uI,this.userId_=t.userId,this.isRemote_=t.isRemote,this.type_=t.type,this.log_=PA.createLogger({id:"s".concat(t.seq?t.seq:"","|").concat(this.userId_),userId:lR(t.client)?void 0:t.client.getUserId(),sdkAppId:lR(t.client)?void 0:t.client.getSDKAppId(),isLocal:!this.isRemote_,type:this.isRemote_?this.type_:""}),this.client_=null,lR(t.client)||(this.client_=t.client),this.mediaStream_=null,this.div_=null,this.isPlaying_=!1,this.connection_=null,this.audioPlayer_=null,this.videoPlayer_=null,this.muted_=!1,this.objectFit_="cover",this.mirror_=!1,this.id_="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),this.audioOutputDeviceId_=0,this.audioVolume_=1,this.emitter_=xR(new DR,this.name_),this.connectionState_=QT,this.installEvents(),lR(t.mirror)||this.log_.warn('TRTC.createStream "mirror" option was deprecated since v4.12.1，please use localStream.play to set up preview mirror. refer to '.concat(fI,"/en/LocalStream.html#play. TRTC.createStream 接口的 mirror 选项从 v4.12.1 开始被废弃，请使用 localStream.play 设置本地流预览镜像，参考文档：").concat(fI,"/zh-cn/LocalStream.html#play。"))}var n,i,o,c,l;return u(e,[{key:"installEvents",value:function(){LR.on(TA,this.restartPlayback,this)}},{key:"uninstallEvents",value:function(){LR.off(TA,this.restartPlayback,this)}},{key:"getType",value:function(){return this.type_}},{key:"getLogger",value:function(){return this.log_}},{key:"isSubscribed",get:function(){return this.type_===GT&&this.connection_.isMainStreamSubscribed||this.type_===JT&&this.connection_.isAuxStreamSubscribed}},{key:"isMainVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===GT&&e&&e.video}},{key:"isMainAudioSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===GT&&e&&e.audio}},{key:"isAuxVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===JT&&e&&e.auxiliary}},{key:"isSmallVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===GT&&e&&e.smallVideo}},{key:"emitConnectionStateChanged",value:function(e){e.state!==this.connectionState_&&(e.state!==QT&&this.isRemote_&&!this.isSubscribed||(this.emitter_.emit(ML,e),this.connectionState_=e.state))}},{key:"setConnection",value:function(e){this.connection_!==e&&(e instanceof tW?(null!==this.connection_&&this.connection_.off(PL.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this),e.on(PL.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this)):null===e&&this.connection_.off(PL.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this),this.connection_=e)}},{key:"getConnection",value:function(){return this.connection_}},{key:"play",value:(l=a(r().mark((function e(t,n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log_.info("stream ".concat(this.isPlaying_?"update":"start to"," play with elementId: ").concat(t," and options: ").concat(JSON.stringify(n),".")),!this.isPlaying_){e.next=9;break}return n&&!lR(n.muted)&&(this.muted_=n.muted),n&&!lR(n.objectFit)&&(this.objectFit_=n.objectFit),this.isScreenShare()?this.mirror_=!1:n&&!lR(n.mirror)&&(this.mirror_=n.mirror),this.audioPlayer_&&this.audioPlayer_.setMuted(this.muted_),this.videoPlayer_&&(this.videoPlayer_.setObjectFit(this.objectFit_),this.videoPlayer_.setMirror(this.mirror_)),this.elementId_!==t&&(i=t,dR(t)&&(i=document.getElementById(t)),i.appendChild(this.div_),this.elementId_=t),e.abrupt("return");case 9:return this.isPlaying_=!0,(o=document.createElement("div")).setAttribute("id","player_".concat(this.id_)),o.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"),a=t,dR(t)&&(a=document.getElementById(t)),a.appendChild(o),this.elementId_=t,this.div_=o,this.isRemote_||(this.muted_=!0),n&&!lR(n.muted)&&(this.muted_=n.muted),this.isScreenShare()&&(this.objectFit_="contain"),n&&!lR(n.objectFit)&&(this.objectFit_=n.objectFit),this.isScreenShare()?this.mirror_=!1:(this.isRemote_||(this.mirror_=!0),n&&!lR(n.mirror)&&(this.mirror_=n.mirror)),LR.emit(vA,{stream:this}),e.next=26,Promise.all([this.playAudio(),this.playVideo()]);case 26:LR.emit(YR,{stream:this});case 27:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"playAudio",value:(c=a(r().mark((function e(){var n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasAudio()&&(!this.isRemote_||this.isMainAudioSubscribed)){e.next=2;break}return e.abrupt("return");case 2:if(n=this.getAudioTrack(),this.audioPlayer_||!n){e.next=17;break}return this.log_.info("create AudioPlayer and play"),this.audioPlayer_=new vU({stream:this,track:n,gainedTrack:null===(i=this.gain_)||void 0===i?void 0:i.audioTrack,div:this.div_,muted:this.muted_,outputDeviceId:this.audioOutputDeviceId_,volume:this.audioVolume_}),this.audioPlayer_.on(VL,(function(e){var n={type:zw,state:e.state,reason:e.reason};LR.emit(ZR,t({stream:o},n)),o.emitter_.emit(LL,n)})),e.prev=7,e.next=10,this.audioPlayer_.play();case 10:e.next=17;break;case 12:throw e.prev=12,e.t0=e.catch(7),this.client_&&this.client_.getEnableAutoPlayDialog()&&new FU,this.emitter_.emit(jL,e.t0),e.t0;case 17:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(){return c.apply(this,arguments)})},{key:"playVideo",value:(o=a(r().mark((function e(){var n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasVideo()&&(!this.isRemote_||this.isMainVideoSubscribed||this.isAuxVideoSubscribed||this.isSmallVideoSubscribed)){e.next=2;break}return e.abrupt("return");case 2:if(n=this.getVideoTrack(),this.videoPlayer_||!n){e.next=18;break}return LR.emit(gA,{stream:this}),this.log_.info("create VideoPlayer and play"),this.videoPlayer_=new BU({stream:this,track:n,div:this.div_,muted:this.muted_,objectFit:this.objectFit_,mirror:this.mirror_}),this.videoPlayer_.on(VL,(function(e){var n={type:Ww,state:e.state,reason:e.reason};LR.emit(ZR,t({stream:i},n)),i.emitter_.emit(LL,n)})),e.prev=8,e.next=11,this.videoPlayer_.play();case 11:e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(8),this.client_&&this.client_.getEnableAutoPlayDialog()&&new FU,this.emitter_.emit(jL,e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(){return o.apply(this,arguments)})},{key:"stopAudio",value:function(){this.audioPlayer_&&(this.log_.info("stop AudioPlayer"),this.audioPlayer_.stop(),this.audioPlayer_=null)}},{key:"stopVideo",value:function(){this.videoPlayer_&&(this.log_.info("stop VideoPlayer"),this.videoPlayer_.stop(),this.videoPlayer_=null)}},{key:"restartPlayback",value:function(){this.audioPlayer_&&!this.audioPlayer_.isPlaying&&this.restartAudio(),this.videoPlayer_&&!this.videoPlayer_.isPlaying&&this.restartVideo()}},{key:"restartAudio",value:function(){this.isPlaying_&&(this.stopAudio(),this.playAudio().catch((function(e){})))}},{key:"restartVideo",value:function(){this.isPlaying_&&(this.stopVideo(),this.playVideo().catch((function(e){})))}},{key:"stop",value:function(){this.isPlaying_&&(this.isPlaying_=!1,this.stopAudio(),this.stopVideo(),this.div_.parentNode.removeChild(this.div_))}},{key:"resume",value:(i=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPlaying_){e.next=2;break}return e.abrupt("return");case 2:if(this.log_.info("resume"),!this.audioPlayer_){e.next=6;break}return e.next=6,this.audioPlayer_.resume();case 6:if(!this.videoPlayer_){e.next=9;break}return e.next=9,this.videoPlayer_.resume();case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"close",value:function(){this.log_.info("close stream"),this.isPlaying_&&this.stop(),this.isRemote_||(this.mediaStream_&&(this.mediaStream_.preventEvent=1,this.mediaStream_.getTracks().forEach((function(e){e.stop()})),this.mediaStream_=null),this.uninstallEvents())}},{key:"muteAudio",value:function(){return this.addRemoteEvent(!0,zw),this.doEnableTrack(zw,!1)}},{key:"muteVideo",value:function(){return this.addRemoteEvent(!0,Ww),this.doEnableTrack(Ww,!1)}},{key:"unmuteAudio",value:function(){return this.addRemoteEvent(!1,zw),this.doEnableTrack(zw,!0)}},{key:"unmuteVideo",value:function(){return this.addRemoteEvent(!1,Ww),this.doEnableTrack(Ww,!0)}},{key:"addRemoteEvent",value:function(e,t){if(this.isRemote_&&this.client_){var n=this.client_.getUserId(),r="".concat(e?Zw:eT," remote ").concat(t);ZP(n,{eventId:t===zw?e?PP:LP:e?OP:DP,eventDesc:r,timestamp:(new Date).getTime(),userId:n,tinyId:this.client_.getTinyId(),remoteUserId:this.userId_,remoteTinyId:this.connection_.getTinyId()})}}},{key:"doEnableTrack",value:function(e,t){var n=!1;return e===zw?this.mediaStream_.getAudioTracks().forEach((function(e){n=!0,e.enabled=t})):this.mediaStream_.getVideoTracks().forEach((function(e){n=!0,e.enabled=t})),n}},{key:"getId",value:function(){return this.id_}},{key:"getUserId",value:function(){return this.userId_}},{key:"getTinyId",value:function(){return this.connection_?this.connection_.getTinyId():""}},{key:"isPlaying",value:function(){return this.isPlaying_}},{key:"setAudioOutput",value:(n=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.audioOutputDeviceId_=t,!this.audioPlayer_){e.next=4;break}return e.next=4,this.audioPlayer_.setSinkId(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setAudioVolume",value:function(e){this.audioVolume_=e,this.log_.info("setAudioVolume to ".concat(e)),this.audioPlayer_&&this.audioPlayer_.setVolume(e)}},{key:"getAudioLevel",value:function(){var e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getAudioLevel()),e}},{key:"getInternalAudioLevel",value:function(){var e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getInternalAudioLevel()),e}},{key:"hasAudio",value:function(){if(this.isRemote_){if(!this.connection_)return!1;var e=this.connection_.getTrackState();return this.type_===GT&&e.audio}return!!this.getAudioTrack()}},{key:"hasVideo",value:function(){if(this.isRemote_){if(!this.connection_)return!1;var e=this.connection_.getTrackState();return this.type_===JT?e.auxiliary:e.video}return!!this.getVideoTrack()}},{key:"getSubscribedState",value:function(){return this.isRemote_&&this.connection_?this.connection_.getSubscribeState():null}},{key:"getAudioTrack",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getAudioTracks();t.length>0&&(e=t[0])}return e}},{key:"getVideoTrack",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getVideoTracks();t.length>0&&(e=t[0])}return e}},{key:"getVideoFrame",value:function(){return this.videoPlayer_?this.videoPlayer_.getVideoFrame():null}},{key:"getMediaStream",value:function(){return this.mediaStream_}},{key:"setMediaStream",value:function(e){e!==this.mediaStream_&&(this.mediaStream_&&this.mediaStream_.getTracks().forEach((function(e){return e.stop()})),this.mediaStream_=e)}},{key:"updateVideoPlayingState",value:function(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play video"),this.playVideo().catch((function(e){}))):(this.log_.info("playing state updated, stop video"),this.stopVideo()))}},{key:"updateAudioPlayingState",value:function(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play audio"),this.playAudio().catch((function(e){}))):(this.log_.info("playing state updated, stop audio"),this.stopAudio()))}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"isRemote",value:function(){return this.isRemote_}},{key:"isScreenShare",value:function(){return!this.isRemote_&&this.screen_||this.isRemote_&&this.getType()===Kw}},{key:"getDiv",value:function(){return this.div_}},{key:"getObjectFit",value:function(){return this.objectFit_}},{key:"getMuted",value:function(){return this.muted_}},{key:"getClient",value:function(){return this.client_}}]),e}(),I(sW.prototype,"play",[aW],Object.getOwnPropertyDescriptor(sW.prototype,"play"),sW.prototype),sW),gW=function(e){d(r,e);var n=_(r);function r(e){var i;s(this,r);var o={isRemote:!0,type:e.type},a=t(t({},e),o);return(i=n.call(this,a)).name_=cI,i.isStreamAddedEventEmitted_=!1,i.isAbleToCallSubscription_=!0,i}return u(r,[{key:"installEvents",value:function(){b(h(r.prototype),"installEvents",this).call(this),LR.on(oA,this.handleStreamSubscribed,this),LR.on(aA,this.handleStreamUnsubscribed,this)}},{key:"uninstallEvents",value:function(){b(h(r.prototype),"uninstallEvents",this).call(this),LR.off(oA,this.handleStreamSubscribed,this),LR.off(aA,this.handleStreamUnsubscribed,this)}},{key:"handleStreamSubscribed",value:function(e){e.client===this.client_&&e.stream===this&&this.connection_.getCurrentState()===ZT&&this.emitConnectionStateChanged({prevState:QT,state:ZT})}},{key:"handleStreamUnsubscribed",value:function(e){e.client===this.client_&&e.stream===this&&this.emitConnectionStateChanged({prevState:ZT,state:QT})}},{key:"getType",value:function(){return b(h(r.prototype),"getType",this).call(this)}},{key:"getIsAbleToCallSubscription",value:function(){return this.isAbleToCallSubscription_}},{key:"setIsAbleToCallSubscription",value:function(e){this.isAbleToCallSubscription_=e}},{key:"setIsStreamAddedEventEmitted",value:function(e){this.isStreamAddedEventEmitted_=e}},{key:"getIsStreamAddedEventEmitted",value:function(){return this.isStreamAddedEventEmitted_}},{key:"getAudioTrack",value:function(){return this.connection_&&this.connection_.getTrackState().audio?b(h(r.prototype),"getAudioTrack",this).call(this):null}},{key:"getVideoTrack",value:function(){if(!this.connection_)return null;var e=this.connection_.getTrackState();return this.type_===GT&&!e.video||this.type_===JT&&!e.auxiliary?null:b(h(r.prototype),"getVideoTrack",this).call(this)}},{key:"close",value:function(){b(h(r.prototype),"close",this).call(this)}}]),r}(mW),_W=function(){function e(t){s(this,e),this.client_=t.client,this.subscribedStreams_=new Map,this.unsubscribedStreams_=new Map,this.subscriptedOptions_=new Map,this.autoRecoveryFlags_=new Map}var t,n,i;return u(e,[{key:"isEnabled",get:function(){return"webrtc"!==this.client_.getEnv()}},{key:"recover",value:(i=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getUserId(),i=t.getType(),this.hasAutoRecoveryFlag(n,i)){e.next=5;break}return e.abrupt("return");case 5:if(o=this.getUnsubscribedStream(n,i)?"unsubscribe":"subscribe",e.prev=6,PA.warn("recover() try to recover subscription [".concat(o,"][").concat(n,"][").concat(i,"]")),"subscribe"!==o){e.next=13;break}return e.next=11,this.recoverSubscription(n,t);case 11:e.next=15;break;case 13:return e.next=15,this.recoverUnsubscription(n,t);case 15:iD.logSuccessEvent({userId:this.client_.getUserId(),eventType:RE}),PA.warn("recover() recover successfully [".concat(o,"][").concat(n,"][").concat(i,"]")),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),PA.error("recover() recover failed [".concat(o,"][").concat(n,"][").concat(i,"]"),e.t0),iD.logFailedEvent({userId:this.client_.getUserId(),eventType:RE,error:e.t0});case 23:this.deleteAutoRecoveryFlag(n,i);case 24:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(e){return i.apply(this,arguments)})},{key:"recoverSubscription",value:(n=a(r().mark((function e(t,n){var i,o,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getOptions(t,n.getType()),o=this.getSubscribedStream(t,n.getType()),i&&o){e.next=4;break}return e.abrupt("return");case 4:a=this.getStreamMuteState(o),s=a.isAudioMuted,c=a.isVideoMuted,this.mergeStream(o,n),this.recoverPlayingState(o),s&&o.doEnableTrack(zw,!1),c&&o.doEnableTrack(Ww,!1);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"recoverUnsubscription",value:(t=a(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getUnsubscribedStream(t,n.getType())){e.next=3;break}return e.abrupt("return");case 3:this.mergeStream(i,n);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getStreamMuteState",value:function(e){var t={isAudioMuted:!1,isVideoMuted:!1},n=e.getMediaStream();return n&&(t.isAudioMuted=n.getAudioTracks().map((function(e){return e.enabled})).includes(!1),t.isVideoMuted=n.getVideoTracks().map((function(e){return e.enabled})).includes(!1)),t}},{key:"recoverPlayingState",value:function(e){var t=e.isPlaying(),n=e.getDiv();if(t&&n){var r=n.parentNode;e.stop(),e.play(r,{objectFit:e.getObjectFit(),muted:e.getMuted()})}}},{key:"mergeStream",value:function(e,t){var n=t.getConnection(),r=t.getMediaStream();e.setConnection(n),n.setRemoteStream(r.id,e),e.setMediaStream(r),e.updateAudioPlayingState(t.hasAudio()),e.updateVideoPlayingState(t.hasVideo())}},{key:"addSubscriptionRecord",value:function(e,t,n){var r=t.getType();if(this.subscribedStreams_.has(e))this.subscribedStreams_.get(e).set(r,t);else{var i=new Map;i.set(t.getType(),t),this.subscribedStreams_.set(e,i)}if(this.subscriptedOptions_.has(e))this.subscriptedOptions_.get(e).set(r,n);else{var o=new Map;o.set(t.getType(),n),this.subscriptedOptions_.set(e,o)}this.deleteUnsubscriptionRecord(e,r)}},{key:"addUnsubscriptionRecord",value:function(e,t){if(this.unsubscribedStreams_.has(e))this.unsubscribedStreams_.get(e).set(t.getType(),t);else{var n=new Map;n.set(t.getType(),t),this.unsubscribedStreams_.set(e,n)}this.deleteSubscriptionRecord(e,t.getType())}},{key:"getSubscribedStream",value:function(e,t){return this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).has(t)?this.subscribedStreams_.get(e).get(t):null}},{key:"getOptions",value:function(e,t){return this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).has(t)?this.subscriptedOptions_.get(e).get(t):null}},{key:"getUnsubscribedStream",value:function(e,t){return this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).has(t)?this.unsubscribedStreams_.get(e).get(t):null}},{key:"deleteSubscriptionRecord",value:function(e,t){this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).delete(t),this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).delete(t)}},{key:"deleteUnsubscriptionRecord",value:function(e,t){this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).delete(t)}},{key:"markAllStream",value:function(){for(var e=0,t=k(this.subscribedStreams_.entries());e<t.length;e++)for(var n=S(t[e],2),r=n[0],i=0,o=k(n[1].entries());i<o.length;i++){var a=S(o[i],1)[0];this.setAutoRecoveryFlag(r,a)}for(var s=0,c=k(this.unsubscribedStreams_.entries());s<c.length;s++)for(var u=S(c[s],2),l=u[0],d=0,h=k(u[1].entries());d<h.length;d++){var p=S(h[d],1)[0];this.setAutoRecoveryFlag(l,p)}}},{key:"setAutoRecoveryFlag",value:function(e,t){if(PA.info("setAutoRecoveryFlag() mark [".concat(e,"][").concat(t,"]")),this.autoRecoveryFlags_.has(e))this.autoRecoveryFlags_.get(e).set(t);else{var n=new Map;n.set(t),this.autoRecoveryFlags_.set(e,n)}}},{key:"hasAutoRecoveryFlag",value:function(e,t){return!!this.isEnabled&&this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).has(t)}},{key:"deleteAutoRecoveryFlag",value:function(e,t){this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).delete(t)}},{key:"delete",value:function(e){this.unsubscribedStreams_.delete(e),this.subscribedStreams_.delete(e),this.subscriptedOptions_.delete(e),this.autoRecoveryFlags_.delete(e)}}]),e}(),yW=function(){function e(t){s(this,e),this.player_=t,this.canvas_=document.createElement(Hw),this.canvasCtx_=this.canvas_.getContext("2d")}return u(e,[{key:"setCanvasRect",value:function(e,t){this.canvas_.width=e,this.canvas_.height=t}},{key:"drawVideoToCanvas",value:function(){var e=this.player_.getElement();this.canvasCtx_.drawImage(e,0,0,this.canvas_.width,this.canvas_.height)}},{key:"generateVideoTrackFromCanvasCapture",value:function(e){return this.canvas_.captureStream(e).getVideoTracks()[0]}},{key:"generateStreamFromTrack",value:function(e){var t=new MediaStream;return t.addTrack(e),t}},{key:"destroy",value:function(){this.player_.stop(),this.canvas_.width=0,this.canvas_.height=0,this.canvas_=null,this.canvasCtx_=null}},{key:"canvas",get:function(){return this.canvas_}},{key:"canvasCtx",get:function(){return this.canvasCtx_}},{key:"canDrawVideoToCanvas",get:function(){if(this.player_){var e=this.player_.getElement();if(e)return e.readyState===e.HAVE_ENOUGH_DATA}return!1}}]),e}(),bW=new Blob(["let width,height,offscreen,ctx;onmessage=function(e){const{action,data}=e.data;switch(action){case'render':offscreen=data.canvas;width=offscreen.width;height=offscreen.height;ctx=offscreen.getContext('2d');draw(data.readable,data.writable);break}};function draw(readable,writable){const transformer=new TransformStream({async transform(cameraFrame,controller){ctx.drawImage(cameraFrame,0,0,width,height);const frame=new VideoFrame(offscreen,{timestamp:cameraFrame.timestamp});cameraFrame.close();controller.enqueue(frame)}});readable.pipeThrough(transformer).pipeTo(writable)}"],{type:"application/javascript"}),SW=function(){function e(t){s(this,e);var n=t.videoTrack;this.width=void 0,this.height=void 0,this.canvas=null,this.offscreen=null,this.smallGenerator=new MediaStreamTrackGenerator({kind:"video"}),this.smallWritable=this.smallGenerator.writable,this.bigProcessor=new MediaStreamTrackProcessor({track:n}),this.bigReadable=this.bigProcessor.readable,this.initWorker()}return u(e,[{key:"initWorker",value:function(){try{this.worker=new Worker(URL.createObjectURL(bW)),PA.info("init worker processor success")}catch(e){PA.warn("init worker processor failed. ".concat(e.error))}}},{key:"setCanvasRect",value:function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t,this.offscreen=this.canvas.transferControlToOffscreen(),this.worker.postMessage({action:"render",data:{canvas:this.offscreen,readable:this.bigReadable,writable:this.smallWritable}},[this.offscreen,this.bigReadable,this.smallWritable])}},{key:"generatorVideoTrack",value:function(){var e=new MediaStream([this.smallGenerator]);return null==e?void 0:e.getTracks()[0]}},{key:"destroy",value:function(){this.worker.terminate()}}]),e}(),kW=function(){function e(t){s(this,e),this.localStream_=t,this.player_=null,this.processor_=null,this.initOffscreenSuccess_=!1}var t;return u(e,[{key:"initialize",value:(t=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(OL()&&(null===(t=navigator)||void 0===t?void 0:t.hardwareConcurrency)>=6)){e.next=13;break}return e.prev=1,e.next=4,this.initOffscreen();case 4:this.initOffscreenSuccess_=!0,PA.info("Initialize VideoGenerator successfully!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.initCanvas();case 11:e.next=14;break;case 13:this.initCanvas();case 14:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"generateSmallVideoTrack",value:function(e){var t,n=this.getSmallVideoProfile(e);return this.initOffscreenSuccess_?(this.processor_.setCanvasRect(n.width,n.height),t=this.processor_.generatorVideoTrack()):(this.processor_.setCanvasRect(n.width,n.height),this.player_.setRect({width:n.width,height:n.height}),t=this.processor_.generateVideoTrackFromCanvasCapture(n.frameRate),this.interval_=QD.run(TI,this.render.bind(this),{fps:n.frameRate})),t}},{key:"render",value:function(){this.processor_.canDrawVideoToCanvas&&this.processor_.drawVideoToCanvas()}},{key:"destroy",value:function(){QD.clearTask(this.interval_),this.processor_&&this.processor_.destroy()}},{key:"initOffscreen",value:function(){this.processor_=new SW({videoTrack:this.localStream_.getVideoTrack()})}},{key:"initCanvas",value:function(){this.player_=new BU({stream:this.localStream_,track:this.localStream_.getVideoTrack(),muted:!0,objectFit:"cover",mirror:!1}),this.player_.play().then((function(){PA.info("VideoGenerator: play local video success")})).catch((function(){PA.error("VideoGenerator: Failed to play local video")})),this.processor_=new yW(this.player_)}},{key:"getSmallVideoProfile",value:function(e){var t,n=this.localStream_.getVideoTrack(),r=this.localStream_.getVideoProfile();if(RL){var i=n.getSettings();i&&i.width&&i.height&&(r.width=i.width,r.height=i.height)}var o=r.width*r.height,a=e.width*e.height;return PA.info("big stream resolution: ".concat(r.height,"*").concat(r.width," small stream resolution: ").concat(e.height,"*").concat(e.width," ")),o>a?t=o/a:(PA.warn("Small stream resolution is larger than big stream, which is invalid. big: ".concat(r.width," * ").concat(r.height," small: ").concat(e.width," * ").concat(e.height)),t=o/19200),{width:parseInt(r.width/Math.sqrt(t)),height:parseInt(r.height/Math.sqrt(t)),frameRate:e.frameRate}}}]),e}();function wW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{retries:5,timeout:2e3};return function(t,n,r){var i=CA({retryFunction:r.value,settings:e,onError:e.onError,onRetrying:e.onRetrying,onRetryFailed:e.onRetryFailed});return r.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(this,t)},r}}var TW=new Map,EW=function(){var e=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yL()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,CW(t);case 4:if(n=e.sent,PA.info("getUserMedia with constraints: "+JSON.stringify(n)),!n.audio){e.next=11;break}return e.next=9,Xq.getMicrophones();case 9:i=e.sent,PA.info("microphones: ".concat(JSON.stringify(i)));case 11:if(!n.video){e.next=16;break}return e.next=14,Xq.getCameras();case 14:o=e.sent,PA.info("cameras: ".concat(JSON.stringify(o)));case 16:return e.prev=16,e.next=19,navigator.mediaDevices.getUserMedia(n);case 19:return e.abrupt("return",e.sent);case 22:if(e.prev=22,e.t0=e.catch(16),"NotFoundError"!==e.t0.name){e.next=29;break}if(!o||0!==o.length){e.next=27;break}throw new vP({code:fP.DEVICE_NOT_FOUND,message:tR({key:Mx})});case 27:if(!i||0!==i.length){e.next=29;break}throw new vP({code:fP.DEVICE_NOT_FOUND,message:tR({key:Nx})});case 29:throw new vP({code:fP.INITIALIZE_FAILED,name:e.t0.name,message:e.t0.message,constraint:e.t0.constraint});case 30:case"end":return e.stop()}}),e,null,[[16,22]])})));return function(t){return e.apply(this,arguments)}}(),IW=CA({retryFunction:EW,settings:{retries:3,timeout:500},onError:function(e,t,n){"NotReadableError"===e.name?t():n(e)},onRetrying:function(e){PA.warn("getUserMedia NotReadableError observed, retrying [".concat(e,"/3]"))}});function CW(e){return xW.apply(this,arguments)}function xW(){return(xW=a(r().mark((function e(n){var i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={echoCancellation:n.echoCancellation,autoGainControl:n.autoGainControl,noiseSuppression:n.noiseSuppression},n.audio){e.next=5;break}i=!1,e.next=15;break;case 5:if(nD(n.microphoneId)){e.next=9;break}i=t({deviceId:n.useExact?{exact:n.microphoneId}:n.microphoneId,sampleRate:n.sampleRate,channelCount:n.channelCount},i),e.next=15;break;case 9:return i=t({sampleRate:n.sampleRate,channelCount:n.channelCount},i),e.next=12,Xq.getMicrophones();case 12:o=e.sent,(a=o.filter((function(e){return e.deviceId.length>0}))).length>0&&(i.deviceId={exact:a[0].deviceId});case 15:return s={},c={ideal:n.width,max:n.width},u={ideal:n.height,max:n.height},Uk&&uw&&n.width*n.height<101376&&(c=n.width,u=n.height),s=!lR(n.facingMode)&&n.video?{facingMode:n.facingMode,width:c,height:u,frameRate:n.frameRate}:!nD(n.cameraId)&&n.video?{deviceId:n.useExact?{exact:n.cameraId}:n.cameraId,width:c,height:u,frameRate:n.frameRate}:!!n.video&&(!!lR(n.width)||{width:c,height:u,frameRate:n.frameRate}),e.abrupt("return",{audio:i,video:s});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var RW=function(){var e=a(r().mark((function e(t){var n,i,o,a,s,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yL()){e.next=2;break}return e.abrupt("return");case 2:if(n=null,!(Cw&&xw<74||Aw)){e.next=27;break}return i=OW(t),PA.info("getDisplayMedia with constraints: "+JSON.stringify(i)),e.next=8,navigator.mediaDevices.getDisplayMedia(i);case 8:if(o=e.sent,!t.screenAudio){e.next=14;break}return PA.warn("Your browser not support capture system audio"),e.abrupt("return",o);case 14:if(!t.audio){e.next=24;break}return a=AW(t),PA.info("getUserMedia with constraints: "+JSON.stringify(a)),e.next=19,navigator.mediaDevices.getUserMedia(a);case 19:return n=e.sent,o.addTrack(n.getAudioTracks()[0]),e.abrupt("return",o);case 24:return e.abrupt("return",o);case 25:e.next=53;break;case 27:if(!t.screenAudio){e.next=37;break}return t.audioConstraints={echoCancellation:!0,noiseSuppression:!0,sampleRate:44100},s=OW(t),PA.info("getDisplayMedia with constraints: "+JSON.stringify(s)),e.next=33,navigator.mediaDevices.getDisplayMedia(s);case 33:return c=e.sent,e.abrupt("return",c);case 37:return u=OW(t),PA.info("getDisplayMedia with constraints: "+JSON.stringify(u)),e.next=41,navigator.mediaDevices.getDisplayMedia(u);case 41:if(l=e.sent,!t.audio){e.next=52;break}return d=AW(t),PA.info("getUserMedia with constraints: "+JSON.stringify(d)),e.next=47,navigator.mediaDevices.getUserMedia(d);case 47:return n=e.sent,l.addTrack(n.getAudioTracks()[0]),e.abrupt("return",l);case 52:return e.abrupt("return",l);case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function AW(e){var t={echoCancellation:e.echoCancellation,autoGainControl:e.autoGainControl,noiseSuppression:e.noiseSuppression,sampleRate:e.sampleRate,channelCount:e.channelCount};return lR(e.microphoneId)||(t.deviceId=e.microphoneId),{audio:t,video:!1}}function OW(e){var t={},n={width:Aw?{max:e.width}:{ideal:e.width,max:e.width},height:Aw?{max:e.height}:{ideal:e.height,max:e.height},frameRate:e.frameRate};return t.video=n,lR(e.audioConstraints)||(t.audio=e.audioConstraints),t}var PW,DW,LW,NW,MW,UW,jW,VW,FW,BW,$W,HW=new Map([["120p",{width:160,height:120,frameRate:15,bitrate:200}],["120p_2",{width:160,height:120,frameRate:15,bitrate:100}],["180p",{width:320,height:180,frameRate:15,bitrate:350}],["180p_2",{width:320,height:180,frameRate:15,bitrate:150}],["240p",{width:320,height:240,frameRate:15,bitrate:400}],["240p_2",{width:320,height:240,frameRate:15,bitrate:200}],["360p",{width:640,height:360,frameRate:15,bitrate:800}],["360p_2",{width:640,height:360,frameRate:15,bitrate:400}],["480p",{width:640,height:480,frameRate:15,bitrate:900}],["480p_2",{width:640,height:480,frameRate:15,bitrate:500}],["720p",{width:1280,height:720,frameRate:15,bitrate:1500}],["1080p",{width:1920,height:1080,frameRate:15,bitrate:2e3}],["1440p",{width:2560,height:1440,frameRate:30,bitrate:4860}],["4K",{width:3840,height:2160,frameRate:30,bitrate:9e3}]]),zW=new Map([["480p",{width:640,height:480,frameRate:5,bitrate:900}],["480p_2",{width:640,height:480,frameRate:30,bitrate:1e3}],["720p",{width:1280,height:720,frameRate:5,bitrate:1200}],["720p_2",{width:1280,height:720,frameRate:30,bitrate:3e3}],["1080p",{width:1920,height:1080,frameRate:5,bitrate:1600}],["1080p_2",{width:1920,height:1080,frameRate:30,bitrate:4e3}]]),WW=new Map([["standard",{sampleRate:48e3,channelCount:1,bitrate:40}],["standard-stereo",{sampleRate:48e3,channelCount:2,bitrate:64}],["high",{sampleRate:48e3,channelCount:1,bitrate:128}],["high-stereo",{sampleRate:48e3,channelCount:2,bitrate:192}]]),qW=(PW=pW.apply(void 0,k(dW.LOCAL_STREAM.switchDevice)),DW=pW(dW.STREAM.addTrack),LW=pW(dW.STREAM.removeTrack),NW=pW(dW.STREAM.replaceTrack),MW=wW({retries:10,timeout:3e3,onRetryFailed:function(e){iD.logFailedEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:xE,error:e}),this.emitter_.emit(jL,new vP({code:fP.DEVICE_AUTO_RECOVER_FAILED,message:e.message}))}}),UW=hW(dW.LOCAL_STREAM.setAudioCaptureVolume),jW=function(e){d(S,e);var n,o,c,l,p,f,v,m,g,y=_(S);function S(e){var n;s(this,S);var r=t(t({},e),{isRemote:!1,type:"local"});return(n=y.call(this,r)).name_=sI,n.client_=null,n.video_=e.video,n.audio_=e.audio,n.cameraId_=e.cameraId,n.cameraGroupId_="",n.facingMode_=e.facingMode,n.microphoneId_=e.microphoneId,n.microphoneGroupId_="",n.videoSource_=e.videoSource,n.audioSource_=e.audioSource,n.screen_=e.screen,n.screenAudio_=e.screenAudio,n.audioProfile_={echoCancellation:!!lR(e.echoCancellation)||e.echoCancellation,autoGainControl:!!lR(e.autoGainControl)||e.autoGainControl,noiseSuppression:!!lR(e.noiseSuppression)||e.noiseSuppression,sampleRate:48e3,channelCount:1,bitrate:40},n.videoProfile_=HW.get("480p_2"),n.screenProfile_=zW.get("1080p"),n.videoSetting_=null,n.muteState_={video:!1,audio:!1,auxVideo:!1},n.beautyStatus_=!1,n.prevAudioRecoverTime_=0,n.prevVideoRecoverTime_=0,n.isAudioRecovering_=!1,n.isVideoRecovering_=!1,n.initState(),n.canvas_=null,n.canvasInterval_=null,n.canvasTrack_=null,n.gain_={audioTrack:null,source:null,gainNode:null},n.captureVolume_=100,n.log_.info("stream created: "+n.id_),n}return u(S,[{key:"initState",value:function(){this.isAddingTrack_=!1,this.isRemovingTrack_=!1,this.setIsReadyToPublish(!1),this.setPublishState(KE)}},{key:"installEvents",value:function(){b(h(S.prototype),"installEvents",this).call(this),LR.on(_A,this.onVideoTrackStopped,this),LR.on(pA,this.onVideoTrackStopped,this),LR.on(bA,this.onAudioTrackStopped,this),LR.on(yA,this.onAudioTrackStopped,this)}},{key:"uninstallEvents",value:function(){b(h(S.prototype),"uninstallEvents",this).call(this),LR.off(_A,this.onVideoTrackStopped,this),LR.off(pA,this.onVideoTrackStopped,this),LR.off(bA,this.onAudioTrackStopped,this),LR.off(yA,this.onAudioTrackStopped,this)}},{key:"initialize",value:function(){var e=this;return new Promise((function(t,n){if(bL())n(new vP({code:fP.INVALID_OPERATION,message:tR({key:Ix})}));else{if(lR(e.audio_)){var r=new MediaStream;return lR(e.audioSource_)||(r.addTrack(e.audioSource_),e.updateAudioPlayingState(!0)),lR(e.videoSource_)||(r.addTrack(e.videoSource_),e.updateVideoPlayingState(!0)),e.setMediaStream(r),iD.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:EE,kind:"custom"}),e.setIsReadyToPublish(!0),t()}e.screen_?(e.log_.info("initialize stream audio: "+e.audio_+" screenAudio: "+e.screenAudio_+" screen: "+e.screen_),RW({audio:e.audio_,screenAudio:e.screenAudio_,microphoneId:e.microphoneId_,width:e.screenProfile_.width,height:e.screenProfile_.height,frameRate:e.screenProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount,autoGainControl:e.audioProfile_.autoGainControl,noiseSuppression:e.audioProfile_.noiseSuppression,echoCancellation:e.audioProfile_.echoCancellation}).then((function(n){e.setMediaStream(n),e.updateAudioPlayingState(e.audio_||e.screenAudio_),e.updateVideoPlayingState(!0);var r=e.getVideoTrack();return e.listenForScreenSharingStopped(r),e.setVideoContentHint(cT),e.updateDeviceIdInUse(),e.setIsReadyToPublish(!0),e.log_.info(JSON.stringify(r.getSettings())),iD.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:EE,kind:"getDisplayMedia"}),t()})).catch((function(t){iD.logFailedEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:EE,kind:"getDisplayMedia",error:t}),e.log_.error("getDisplayMedia error observed "+t),n(t instanceof vP?t:new vP({code:fP.INITIALIZE_FAILED,name:t.name,message:t.message}))}))):(LR.emit(lA,{stream:e,audio:e.audio_,video:e.video_}),e.log_.info("initialize stream audio: "+e.audio_+" video: "+e.video_),IW({audio:e.audio_,video:e.video_,facingMode:e.facingMode_,cameraId:e.cameraId_,microphoneId:e.microphoneId_,width:e.videoProfile_.width,height:e.videoProfile_.height,frameRate:e.videoProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount,autoGainControl:e.audioProfile_.autoGainControl,noiseSuppression:e.audioProfile_.noiseSuppression,echoCancellation:e.audioProfile_.echoCancellation}).then((function(n){return LR.emit(dA,{stream:e,audio:e.audio_,video:e.video_}),e.setMediaStream(n),n.getTracks().forEach((function(t){t.kind===Ww&&RL&&(e.videoSetting_=t.getSettings()),AL&&e.log_.info("".concat(t.kind," capabilities: ").concat(JSON.stringify(t.getCapabilities())))})),e.updateAudioPlayingState(e.audio_),e.updateVideoPlayingState(e.video_),e.updateDeviceIdInUse(),e.log_.info("gotStream hasAudio: "+e.hasAudio()+" hasVideo: "+e.hasVideo()),e.setIsReadyToPublish(!0),iD.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:EE,kind:"getUserMedia"}),t()})).catch((function(t){LR.emit(hA,{stream:e,audio:e.audio_,video:e.video_,error:t}),iD.logFailedEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:EE,kind:"getUserMedia",error:t}),e.log_.error("getUserMedia error observed "+t),n(t)})))}}))}},{key:"listenForScreenSharingStopped",value:function(e){var t=this;e.addEventListener("ended",(function(e){t.log_.info("screen sharing was stopped because the video track is ended"),t.emitter_.emit(NL)}))}},{key:"muteAudio",value:function(){var e=b(h(S.prototype),"muteAudio",this).call(this);return e&&(this.log_.info("localStream mute audio"),this.sendMutedFlag(zw,!0)),e}},{key:"muteVideo",value:function(){var e=b(h(S.prototype),"muteVideo",this).call(this);return e&&(this.log_.info("localStream mute video"),this.sendMutedFlag(Ww,!0)),e}},{key:"unmuteAudio",value:function(){var e=b(h(S.prototype),"unmuteAudio",this).call(this);return e&&(this.log_.info("localStream unmute audio"),this.sendMutedFlag(zw,!1)),e}},{key:"unmuteVideo",value:function(){var e=b(h(S.prototype),"unmuteVideo",this).call(this);return e&&(this.log_.info("localStream unmute video"),this.sendMutedFlag(Ww,!1)),e}},{key:"sendMutedFlag",value:function(e,t){this.setMuteState(e,t);var n=this.getConnection();if(n){n.sendMutedFlag(this.muteState_,this);var r=n.getUserId(),i=n.getTinyId(),o="".concat(t?Zw:eT," local ").concat(e," track");ZP(r,{eventId:e===zw?t?bP:kP:t?SP:wP,eventDesc:o,timestamp:rg(),userId:r,tinyId:i})}}},{key:"setMuteState",value:function(e,t){this.muteState_[e]=t,this.log_.info("set ".concat(e," muted state: [").concat(t?"mute":"unmute","]"))}},{key:"setAudioProfile",value:function(e){var n;"object"===i(e)?n=e:void 0===(n=WW.get(e))&&(n=WW.get("standard")),this.log_.info("setAudioProfile: "+JSON.stringify(n)),this.audioProfile_=t(t({},this.audioProfile_),n)}},{key:"setVideoProfile",value:(g=a(r().mark((function e(n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connection_||_L()){e.next=2;break}throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:xx})});case 2:if(aR(n)?i=t(t({},this.videoProfile_),n):dR(n)&&(i=HW.get(n),lR(i)&&(i=HW.get("480p_2"))),i&&i.width*i.height>921600&&Mw&&(i.width=1280,i.height=720,this.log_.warn("reset to 1280 * 720 on iOS 13~14")),this.log_.info("setVideoProfile "+JSON.stringify(i)),!(o=this.getVideoTrack())){e.next=9;break}return e.next=9,o.applyConstraints(i);case 9:if(a=this.videoProfile_.bitrate!==i.bitrate,this.videoProfile_=i,!a||!this.connection_){e.next=15;break}return e.next=14,this.connection_.setBandwidth({bandwidth:i.bitrate,type:Ww,videoType:Jw});case 14:this.connection_.sendMediaSettings(this);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"getVideoBitrate",value:function(){return this.screen_?this.screenProfile_.bitrate:this.videoProfile_.bitrate}},{key:"getAudioBitrate",value:function(){return this.audioProfile_.bitrate}},{key:"setScreenProfile",value:function(e){var t=e;dR(e)&&(t=zW.get(e)||zW.get("1080p")),this.log_.info("setScreenProfile "+JSON.stringify(e)),this.screenProfile_=t}},{key:"getVideoProfile",value:function(){return this.screen_?this.screenProfile_:this.videoProfile_}},{key:"getAudioProfile",value:function(){return this.audioProfile_}},{key:"setVideoContentHint",value:function(e){var t=this.getVideoTrack();t&&"contentHint"in t&&(this.log_.info("set video track contentHint to: "+e),t.contentHint=e,t.contentHint!==e&&this.log_.warn("Invalid video track contentHint: "+e))}},{key:"switchDevice",value:(m=a(r().mark((function e(t,n){var i,o,a,s,c,u,l,d,h,p,f,v,m,g,_,y,b;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t===zw)){e.next=8;break}if(this.microphoneId_!==n){e.next=4;break}return e.abrupt("return");case 4:this.microphoneId_=n,this.audio_=!0,e.next=12;break;case 8:if(this.cameraId_!==n){e.next=10;break}return e.abrupt("return");case 10:n===Xw||n===Yw?this.facingMode_=n:this.cameraId_=n,this.video_=!0;case 12:if(this.getMediaStream()){e.next=14;break}return e.abrupt("return");case 14:return this.setIsReadyToPublish(!1),this.log_.info("switchDevice "+t+" to: "+n),i||((o=this.getVideoTrack())&&o.stop(),gw&&(a=this.getAudioTrack())&&(this.log_.info("stop audio track first in huawei env"),a.stop())),i&&(s=this.getAudioTrack(),c=this.getMicrophoneTrackMixed(),s&&s.stop(),c&&c.stop()),e.next=20,IW({audio:this.audio_&&t===zw||gw,video:this.video_&&t===Ww,facingMode:n===Xw||n===Yw?n:void 0,cameraId:this.cameraId_,microphoneId:this.microphoneId_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount,useExact:!0});case 20:if(u=e.sent,l=null,!i){e.next=27;break}(d=u.getAudioTracks()[0])&&this.isAudioTrackMixed()?(h=this.getAudioTrack(),p=Xq.AudioMixerPlugin.getAudioTrackMap(),f=Xq.AudioMixerPlugin.mix({targetTrack:d,sourceList:p.get(h.id).sourceList,trackList:p.get(h.id).trackList}),l=f):l=d,e.next=36;break;case 27:if(!(l=u.getVideoTracks()[0])||!this.isVideoTrackBeautified()){e.next=32;break}return e.next=31,this.generateBeautyTrack(l);case 31:l=e.sent;case 32:if(!(v=u.getAudioTracks()[0])||!gw){e.next=36;break}return e.next=36,this.replaceTrack(v);case 36:return e.next=38,this.replaceTrack(l);case 38:this.updateDeviceIdInUse(),(m=this.getConnection())&&(g=m.getUserId(),_=m.getTinyId(),y=CP,b="switch camera",i&&(y=xP,b="switch microphone"),ZP(g,{eventId:y,eventDesc:b,timestamp:rg(),userId:g,tinyId:_})),this.log_.info("switch ".concat(i?"microphone":"camera"," success ")),this.setIsReadyToPublish(!0);case 43:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"addTrack",value:(v=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.kind===Ww&&RL&&(n=t.getSettings(),!this.videoSetting_||n.width===this.videoSetting_.width&&n.height===this.videoSetting_.height||this.log_.warn("video resolution of the track (".concat(n.width," x ").concat(n.height,") shall be kept the same as the previous: ").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,". It may cause abnormal Cloud Recording."))),this.isAddingTrack_=!0,this.keepMuteState(t),this.mediaStream_.addTrack(t),!(i=this.getConnection())){e.next=11;break}return o=null,t.kind===Ww&&(Nw||Lw)&&mR(t)&&(o=this.getCanvasTrack()),e.next=11,i.addTrack(o||t,this);case 11:t.kind===zw?(this.audio_=!0,this.updateAudioPlayingState(!0)):(this.video_=!0,this.updateVideoPlayingState(!0)),this.isAddingTrack_=!1,e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(0),this.mediaStream_.removeTrack(t),this.isAddingTrack_=!1,e.t0;case 20:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e){return v.apply(this,arguments)})},{key:"removeTrack",value:(f=a(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isRemovingTrack_=!0,!(n=this.getConnection())){e.next=12;break}if(t.kind!==Ww||!Nw&&!Lw||!this.canvasTrack_){e.next=10;break}return e.next=7,n.removeTrack(this.canvasTrack_,this);case 7:this.clearCanvas(),e.next=12;break;case 10:return e.next=12,n.removeTrack(t,this);case 12:this.mediaStream_.removeTrack(t),t.kind===zw?(this.audio_=!1,this.updateAudioPlayingState(!1)):(this.video_=!1,this.updateVideoPlayingState(!1)),this.isRemovingTrack_=!1,e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(0),this.isRemovingTrack_=!1,e.t0;case 21:case"end":return e.stop()}}),e,this,[[0,17]])}))),function(e){return f.apply(this,arguments)})},{key:"replaceTrack",value:(p=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kind===Ww&&RL&&(n=t.getSettings(),!this.videoSetting_||n.width===this.videoSetting_.width&&n.height===this.videoSetting_.height||this.log_.warn("video resolution of the track (".concat(n.width," x ").concat(n.height,") shall be kept the same as the previous: ").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,". It may cause abnormal Cloud Recording."))),this.keepMuteState(t),i=this.mediaStream_,t.kind!==zw){e.next=12;break}if(i.removeTrack(i.getAudioTracks()[0]),i.addTrack(t),b(h(S.prototype),"restartAudio",this).call(this),!this.gain_.gainNode){e.next=10;break}return this.reconnectGainNode(t),e.abrupt("return");case 10:e.next=15;break;case 12:i.removeTrack(i.getVideoTracks()[0]),i.addTrack(t),b(h(S.prototype),"restartVideo",this).call(this);case 15:if(!(o=this.getConnection())){e.next=21;break}if(t.kind!==Ww||!Nw&&!Lw||!this.canvasTrack_){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,o.replaceTrack(t,this);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"recoverCapture",value:(l=a(r().mark((function e(t){var n,i,o,a,s,c,u,l,d,h,p,f,v,m,g,_,y;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mediaStream_){e.next=2;break}return e.abrupt("return");case 2:return this.log_.warn("recoverCapture() trying "+JSON.stringify(t)),n=this.audio_&&t.audio,i=this.video_&&t.video,e.prev=5,e.next=8,Xq.getCameras();case 8:return o=e.sent,e.next=11,Xq.getMicrophones();case 11:if(a=e.sent,i&&0===o.length&&(i=!1,this.log_.warn("recoverCapture() video flag is true, but no camera detected, set video to false")),n&&0===a.length&&(n=!1,this.log_.warn("recoverCapture() audio flag is true, but no microphone detected, set audio to false")),!1!==n||!1!==i){e.next=17;break}return this.log_.warn("recoverCapture() both audio and video are false, aborted"),e.abrupt("return");case 17:return s=t&&o.findIndex((function(e){return e.deviceId===t.cameraId}))>=0,c=t&&a.findIndex((function(e){return e.deviceId===t.microphoneId}))>=0,e.next=21,IW({audio:n,video:i,cameraId:s?t.cameraId:void 0,microphoneId:c?t.microphoneId:void 0,facingMode:this.facingMode_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount});case 21:u=e.sent,l=u.getTracks(),d=0;case 24:if(!(d<l.length)){e.next=51;break}if((h=l[d]).kind!==zw||!this.isAudioTrackMixed()){e.next=37;break}if(p=this.getAudioTrack(),f=Xq.AudioMixerPlugin.getAudioTrackMap(),(v=f.get(p.id)).hasMicrophone){e.next=33;break}return h.stop(),e.abrupt("continue",48);case 33:return m=Xq.AudioMixerPlugin.mix({targetTrack:h,sourceList:v.sourceList,trackList:v.trackList}),e.next=36,this.replaceTrack(m);case 36:return e.abrupt("continue",48);case 37:if(h.kind!==Ww||!this.isVideoTrackBeautified()){e.next=44;break}return e.next=40,this.generateBeautyTrack(h);case 40:return g=e.sent,e.next=43,this.replaceTrack(g);case 43:return e.abrupt("continue",48);case 44:return h.kind===zw&&(null===(_=this.getAudioTrack())||void 0===_||_.stop()),h.kind===Ww&&(null===(y=this.getVideoTrack())||void 0===y||y.stop()),e.next=48,this.replaceTrack(h);case 48:d++,e.next=24;break;case 51:this.updateDeviceIdInUse(),iD.logSuccessEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:xE}),this.log_.warn("recoverCapture() successfully"),this.emitter_.emit(UL,{isCamera:t.video,isMicrophone:t.audio,cameraId:this.cameraId_,microphoneId:this.microphoneId_}),e.next=61;break;case 57:throw e.prev=57,e.t0=e.catch(5),this.log_.warn("recoverCapture() failed, "+e.t0),e.t0;case 61:case"end":return e.stop()}}),e,this,[[5,57]])}))),function(e){return l.apply(this,arguments)})},{key:"updateDeviceIdInUse",value:function(){var e=this;if(!this.mediaStream_)return this.cameraId_="",this.cameraGroupId_="",this.microphoneId_="",void(this.microphoneGroupId_="");RL&&this.mediaStream_.getTracks().forEach((function(t){if(t.kind===zw&&e.isAudioTrackMixed()){var n=e.getMicrophoneTrackMixed();if(n){var r=n.getSettings(),i=r.deviceId,o=r.groupId;i&&(e.microphoneId_=i,e.microphoneGroupId_=o)}}else if(t.kind===Ww&&e.isVideoTrackBeautified()){var a=e.getBeautyOriginTrack();if(a){var s=a.getSettings(),c=s.deviceId,u=s.groupId;c&&(e.cameraId_=c,e.cameraGroupId_=u)}}else{var l=t.getSettings(),d=l.deviceId,h=l.groupId;d&&(t.kind===zw?(e.microphoneId_=d,e.microphoneGroupId_=h):t.kind!==Ww||e.screen_||(e.cameraId_=d,e.cameraGroupId_=h))}}));var t=this.mediaStream_.getAudioTracks(),n=this.mediaStream_.getVideoTracks();t&&0===t.length&&(this.microphoneId_="",this.microphoneGroupId_=""),n&&0===n.length&&(this.cameraId_="",this.cameraGroupId_="")}},{key:"isAudioTrackMixed",value:function(){if(Xq.AudioMixerPlugin){var e=Xq.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id))return!0}return!1}},{key:"getMicrophoneTrackMixed",value:function(){if(Xq.AudioMixerPlugin){var e=Xq.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id)){var n=e.get(t.id);return n.hasMicrophone?n.microphoneTrack:null}}return null}},{key:"isVideoTrackBeautified",value:function(){if(Xq.beautyTrackMap){var e=Xq.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id))return!0}return!1}},{key:"getBeautyOriginTrack",value:function(){if(Xq.beautyTrackMap){var e=Xq.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id)){var n=e.get(t.id);if(n.originTrack)return n.originTrack}}return null}},{key:"generateBeautyTrack",value:(c=a(r().mark((function e(t){var n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,i=this.getVideoTrack(),o=Xq.beautyTrackMap.get(i.id),a=o.param,o.type){e.next=8;break}n=o.pluginInstance.generateBeautyTrack(t),e.next=22;break;case 8:e.t0=o.type,e.next="beauty"===e.t0?11:"virtual"===e.t0?13:"mixed"===e.t0?17:21;break;case 11:return n=o.pluginInstance.generateBeautyTrack(t),e.abrupt("break",22);case 13:return e.next=15,o.pluginInstance.generateVirtualTrack({videoTrack:t,type:a.type,img:a.img});case 15:case 19:return n=e.sent,e.abrupt("break",22);case 17:return e.next=19,o.pluginInstance.generateMixedTrack({videoTrack:t,type:a.type,img:a.img});case 21:return e.abrupt("break",22);case 22:return o.pluginInstance.deleteSource(i.id),this.log_.info("regenerate beauty track, track id = ".concat(t.id)),e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getScreen",value:function(){return this.screen_}},{key:"hasScreenTrack",value:function(){if(this.screen_)return!0;var e=this.getVideoTrack();return!!e&&(e.contentHint===cT||e.contentHint===uT)}},{key:"getVideo",value:function(){return this.video_}},{key:"getAudio",value:function(){return this.audio_}},{key:"getCameraId",value:function(){return this.cameraId_}},{key:"getMicrophoneId",value:function(){return this.microphoneId_}},{key:"getMicrophoneGroupId",value:function(){return this.microphoneGroupId_}},{key:"getIsReadyToPublish",value:function(){return this.isReadyToPublish_}},{key:"setIsReadyToPublish",value:function(e){this.isReadyToPublish_=e}},{key:"setPublishState",value:function(e){this.publishState_=e}},{key:"setBeautyStatus",value:function(e){this.beautyStatus_=!!e}},{key:"getBeautyStatus",value:function(){return this.beautyStatus_}},{key:"syncMuteState",value:function(){var e=this.getAudioTrack(),t=this.getVideoTrack();if(e){var n=!e.enabled;this.setMuteState(zw,n)}if(t){var r=!t.enabled;this.setMuteState(Ww,r)}this.connection_&&this.connection_.sendMutedFlag(this.muteState_,this)}},{key:"keepMuteState",value:function(e){e instanceof MediaStreamTrack&&this.muteState_[e.kind]&&(e.enabled=!1,this.log_.warn("prev ".concat(e.kind," track is muted, keep mute state")))}},{key:"onVideoTrackStopped",value:(o=a(r().mark((function e(t){var n,i,o,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.stream,i=t.type,n===this&&this.video_&&this.cameraId_&&!this.isVideoRecovering_&&(!(uw&&Aw||Nk&&Number(Dw)>=15.1)||i!==Zw)){e.next=3;break}return e.abrupt("return");case 3:if(!(Date.now()-this.prevVideoRecoverTime_<kI)){e.next=6;break}return setTimeout((function(){return s.onVideoTrackStopped({stream:n,type:i})}),kI),e.abrupt("return");case 6:if(!(o=this.getVideoTrack())){e.next=14;break}return a=o.getSettings().deviceId,e.next=11,Xq.getCameras();case 11:if(!(e.sent.findIndex((function(e){return e.deviceId===a}))<0)){e.next=14;break}return e.abrupt("return");case 14:i===Zw?setTimeout((function(){var e=s.getVideoTrack();null!=e&&e.muted&&"visible"===document.visibilityState&&s.recoverVideoCapture(i)}),1e3):this.recoverVideoCapture(i);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"onAudioTrackStopped",value:(n=a(r().mark((function e(t){var n,i,o,a,s,c,u=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.stream,i=t.type,n===this&&this.audio_&&this.microphoneId_&&!this.isAudioRecovering_&&(!(uw&&Aw||Nk&&Number(Dw)>=15.1)||i!==Zw)){e.next=3;break}return e.abrupt("return");case 3:if(!(Date.now()-this.prevAudioRecoverTime_<kI)){e.next=6;break}return setTimeout((function(){return u.onAudioTrackStopped({stream:n,type:i})}),kI),e.abrupt("return");case 6:if(!(o=this.getAudioTrack())){e.next=14;break}return a=o.getSettings(),s=a.groupId,c=a.deviceId,e.next=11,Xq.getMicrophones();case 11:if(!(e.sent.findIndex((function(e){return e.deviceId===c&&(lR(s)||s===e.groupId)}))<0)){e.next=14;break}return e.abrupt("return");case 14:i===Zw?setTimeout((function(){var e=u.getAudioTrack();null!=e&&e.muted&&"visible"===document.visibilityState&&u.recoverAudioCapture(i)}),1e3):this.recoverAudioCapture(i);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"recoverAudioCapture",value:function(e){var t=this;this.prevAudioRecoverTime_=Date.now(),iD.uploadEvent({log:"stat-local-audio-".concat(e),userId:this.userId_}),this.isAudioRecovering_=!0,this.recoverCapture({audio:!0,video:!1,microphoneId:this.microphoneId_}).then((function(){t.isAudioRecovering_=!1})).catch((function(){t.isAudioRecovering_=!1}))}},{key:"recoverVideoCapture",value:function(e){var t=this;this.isVideoRecovering_||(this.prevVideoRecoverTime_=Date.now(),iD.uploadEvent({log:"stat-local-video-".concat(e),userId:this.userId_}),this.isVideoRecovering_=!0,this.recoverCapture({audio:!1,video:!0,cameraId:this.cameraId_}).then((function(){t.isVideoRecovering_=!1})).catch((function(){t.isVideoRecovering_=!1})))}},{key:"setAudioVolume",value:function(e){b(h(S.prototype),"setAudioVolume",this).call(this,e)}},{key:"clearCanvas",value:function(){this.canvasInterval_&&(QD.clearTask(this.canvasInterval_),this.canvasInterval_=null,this.canvas_=null,this.canvasTrack_=null)}},{key:"getCanvasTrack",value:function(){var e=this;if(this.canvasTrack_)return this.canvasTrack_;this.log_.info("gen canvas track");var t=this.getVideoTrack().getSettings(),n=t.width,r=t.height,i=t.frameRate;this.canvas_=document.createElement("canvas");var o=this.canvas_.getContext("2d");this.canvas_.width=n,this.canvas_.height=r,this.canvasInterval_=QD.run(TI,(function(){if(e.hasVideo()){var t=e.getVideoTrack().getSettings();t.width===e.canvas_.width&&t.height===e.canvas_.height||(e.canvas_.width=t.width,e.canvas_.height=t.height)}e.videoPlayer_&&e.videoPlayer_.element_&&o.drawImage(e.videoPlayer_.element_,0,0,e.canvas_.width,e.canvas_.height)}),{fps:Math.max(15,i)});var a=this.canvas_.captureStream();return this.canvasTrack_=a.getVideoTracks()[0],this.canvasTrack_}},{key:"setClient",value:function(e,t){e&&(this.log_.setUserId(e.getUserId()),this.log_.setSdkAppId(e.getSDKAppId()),t||this.syncMuteState()),this.client_=e}},{key:"setAudioCaptureVolume",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!this.hasAudio()||t<0||!gL())return!1;if(this.captureVolume_===t)return!0;this.captureVolume_=t,this.log_.info("setCaptureVolume "+t),t/=100;var n=IR();if(this.gain_.gainNode)this.gain_.gainNode.gain.value=t;else{var r,i=new MediaStream;i.addTrack(this.getAudioTrack());var o=n.createMediaStreamDestination(),a=n.createMediaStreamSource(i),s=n.createGain();s.gain.value=t,a.connect(s),s.connect(o);var c=o.stream.getAudioTracks()[0],u=function(t){return e.log_.info("gained audio track ".concat(t))};c.onmute=function(){return u("muted")},c.onunmute=function(){return u("unmuted")},c.onended=function(){return u("ended")},this.gain_={source:a,audioTrack:c,gainNode:s},null===(r=this.connection_)||void 0===r||r.replaceTrack(c),b(h(S.prototype),"restartAudio",this).call(this)}return!0}},{key:"getGainedTrack",value:function(){return this.gain_.audioTrack}},{key:"reconnectGainNode",value:function(e){this.log_.warn("reconnect gain node");var t=new MediaStream;t.addTrack(e);var n=IR().createMediaStreamSource(t);n.connect(this.gain_.gainNode),this.gain_.source.disconnect(),this.gain_.source=n}},{key:"close",value:function(){this.setIsReadyToPublish(!1);var e=this.gain_,t=e.audioTrack,n=e.source,r=e.gainNode;r&&(n.disconnect(),r.disconnect(),t.onmute=null,t.onunmute=null,t.onended=null,t.stop(),this.gain_={source:null,gainNode:null,audioTrack:null}),b(h(S.prototype),"close",this).call(this)}}]),S}(mW),I(jW.prototype,"switchDevice",[PW],Object.getOwnPropertyDescriptor(jW.prototype,"switchDevice"),jW.prototype),I(jW.prototype,"addTrack",[DW],Object.getOwnPropertyDescriptor(jW.prototype,"addTrack"),jW.prototype),I(jW.prototype,"removeTrack",[LW],Object.getOwnPropertyDescriptor(jW.prototype,"removeTrack"),jW.prototype),I(jW.prototype,"replaceTrack",[NW],Object.getOwnPropertyDescriptor(jW.prototype,"replaceTrack"),jW.prototype),I(jW.prototype,"recoverCapture",[MW],Object.getOwnPropertyDescriptor(jW.prototype,"recoverCapture"),jW.prototype),I(jW.prototype,"setAudioCaptureVolume",[UW],Object.getOwnPropertyDescriptor(jW.prototype,"setAudioCaptureVolume"),jW.prototype),jW),GW={voiceActivityDetection:!1},JW=(VW=wW({retries:1,timeout:0,onRetrying:function(e){this.log_.warn("connection timeout, retrying [".concat(e,"]"))},onError:function(e,t,n){e.message.includes("timeout")?(this.reset(),this.initialize(),t()):n(e)}}),FW=function(e){d(O,e);var n,i,o,c,l,p,f,v,m,g,y,S,k,w,T,E,I,C,x,R,A=_(O);function O(e){var t;return s(this,O),(t=A.call(this,e)).localStream_=null,t.exchangeSDPTimeout_=-1,t.localAuxStream_=null,t.publishingStream_=null,t.isPublishingAuxStream_=!1,t.smallGenerator_=null,t.isSDPExchanging_=!1,t.ssrc_={audio:0,video:0,small:0,auxiliary:0},t.mediaSettings_={videoCodec:"",videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioCodec:"opus",audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0,auxVideoWidth:0,auxVideoHeight:0,auxVideoFps:0,auxVideoBps:0},t.mixedAudioTrack_=null,t}return u(O,[{key:"isMainStreamPublished",get:function(){return!!this.localStream_}},{key:"isAuxStreamPublished",get:function(){return!!this.localAuxStream_}},{key:"publishState",get:function(){var e=this,t={audio:!1,bigVideo:!1,smallVideo:!1,auxVideo:!1};if(this.peerConnection_){var n,r,i,o,a=this.peerConnection_.getSenders();a&&(vL()?(t.audio=!(null===(n=a[0])||void 0===n||!n.track),t.bigVideo=!(null===(r=a[1])||void 0===r||!r.track),t.smallVideo=!(null===(i=a[2])||void 0===i||!i.track),t.auxVideo=!(null===(o=a[3])||void 0===o||!o.track)):a.forEach((function(n){n.track&&(n.track.kind===zw?t.audio=!0:(t.bigVideo=!0,e.smallGenerator_&&(t.smallVideo=!0)))})))}return t}},{key:"initialize",value:function(){b(h(O.prototype),"initialize",this).call(this),this.installEvents()}},{key:"reset",value:function(){this.isReconnecting_&&this.stopReconnection(),this.closePeerConnection(),this.uninstallEvents(),this.clearExchangeSDPTimeout(),this.localStream_&&this.localStream_.clearCanvas()}},{key:"close",value:function(){b(h(O.prototype),"close",this).call(this),this.reset(),this.emitConnectionStateChangedEvent(QT),this.smallGenerator_&&(this.smallGenerator_.destroy(),this.smallGenerator_=null)}},{key:"installEvents",value:function(){this.emitter_.on(PL.ERROR,this.handleError,this),this.emitter_.on(PL.CONNECTION_STATE_CHANGED,this.handleConnectionStateChange,this)}},{key:"uninstallEvents",value:function(){this.emitter_.off(PL.ERROR,this.handleError,this),this.emitter_.off(PL.CONNECTION_STATE_CHANGED,this.handleConnectionStateChange,this)}},{key:"publish",value:(R=a(r().mark((function e(t,n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publishingStream_=t,this.isPublishingAuxStream_=n,o=t.getVideoTrack(),a=null,!o||n||!this.client_.getIsEnableSmallStream()){e.next=9;break}return this.smallGenerator_=new kW(t),e.next=8,this.smallGenerator_.initialize();case 8:a=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_);case 9:if(this.updateMediaSettings(t,n),!mL()){e.next=15;break}return e.next=13,this.publishByTransceiver(t,a,n);case 13:e.next=17;break;case 15:return e.next=17,this.publishByAddTrack(t,a);case 17:return this.publishingStream_=null,this.isPublishingAuxStream_=!1,n?this.localAuxStream_=t:this.localStream_=t,null===(i=this.sei_)||void 0===i||i.handleEncodedStreams(),e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this)}))),function(e,t){return R.apply(this,arguments)})},{key:"publishByTransceiver",value:(x=a(r().mark((function e(t,n,i){var o,a,s,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log_.info("publish by transceiver"),o=t.getMediaStream(),a=t.getAudioTrack(),s=t.getVideoTrack(),c=null,(Nw||Lw)&&mR(s)&&(c=t.getCanvasTrack()),0!==(u=this.peerConnection_.getTransceivers()).length){e.next=16;break}return this.peerConnection_.addTransceiver(a||zw,{direction:ST,streams:[o]}),this.peerConnection_.addTransceiver(i?Ww:c||s||Ww,{direction:ST,streams:[o]}),this.peerConnection_.addTransceiver(n||Ww,{direction:ST,streams:[o]}),this.peerConnection_.addTransceiver(i?c||s:Ww,{direction:ST,streams:[o]}),e.next=14,this.connect();case 14:e.next=46;break;case 16:if(l=[],!a){e.next=29;break}if(!u[0].sender.track){e.next=24;break}return this.mixAudioTrack(u[0].sender.track,a),e.next=22,u[0].sender.replaceTrack(this.mixedAudioTrack_);case 22:e.next=27;break;case 24:return e.next=26,u[0].sender.replaceTrack(a);case 26:l.push(0);case 27:return e.next=29,this.setBandwidth({bandwidth:t.getAudioBitrate(),type:zw});case 29:if(!s){e.next=42;break}return d=i?3:1,e.next=33,u[d].sender.replaceTrack(c||s);case 33:return e.next=35,this.setBandwidth({bandwidth:t.getVideoBitrate(),type:Ww,videoType:i?Kw:Jw});case 35:if(l.push(d),!n){e.next=42;break}return e.next=39,u[2].sender.replaceTrack(n);case 39:return e.next=41,this.setBandwidth({bandwidth:this.client_.smallStreamConfig.bitrate,type:Ww,videoType:Gw});case 41:l.push(2);case 42:return e.next=44,this.setTransceiverDirection(ST,l);case 44:return e.next=46,this.doPublishChange();case 46:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return x.apply(this,arguments)})},{key:"publishByAddTrack",value:(C=a(r().mark((function e(t,n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("publish by addtrack"),i=t.getMediaStream(),o=t.getAudioTrack(),a=t.getVideoTrack(),o&&this.peerConnection_.addTrack(o,i),a&&(this.peerConnection_.addTrack(a,i),n&&((s=new MediaStream).addTrack(n),this.peerConnection_.addTrack(n,s))),e.next=8,this.connect();case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return C.apply(this,arguments)})},{key:"unpublish",value:(I=a(r().mark((function e(n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vL()){e.next=2;break}return e.abrupt("return",this.doUnpublish());case 2:if(i=n.getAudioTrack(),o=n===this.localAuxStream_,a=this.peerConnection_.getSenders(),s=[],!i){e.next=17;break}if(!this.mixedAudioTrack_){e.next=14;break}return this.log_.info("has mixed audioTrack, use another audioTrack"),e.next=11,a[0].replaceTrack(o?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack());case 11:this.destroyMixedAudioTrack(),e.next=17;break;case 14:return e.next=16,a[0].replaceTrack(null);case 16:s.push(0);case 17:if(!o){e.next=25;break}return e.next=20,a[3].replaceTrack(null);case 20:this.localAuxStream_=null,this.mediaSettings_=t(t({},this.mediaSettings_),{},{auxVideoBps:0,auxVideoFps:0,auxVideoWidth:0,auxVideoHeight:0}),s.push(3),e.next=32;break;case 25:return e.next=27,a[1].replaceTrack(null);case 27:return e.next=29,a[2].replaceTrack(null);case 29:this.localStream_=null,this.mediaSettings_=t(t({},this.mediaSettings_),{},{videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0}),s.push(1,2);case 32:if(!this.localStream_&&!this.localAuxStream_){e.next=39;break}return e.next=35,this.setTransceiverDirection(bT,s);case 35:return e.next=37,this.doPublishChange();case 37:e.next=41;break;case 39:return e.next=41,this.doUnpublish();case 41:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"doPublishChange",value:(E=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={state:this.publishState,constraintConfig:this.mediaSettings_},e.next=3,this.signalChannel_.sendWaitForResponse({command:KO,data:t,responseCommand:GO.PUBLISH_STATE_CHANGE_RESULT});case 3:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"doUnpublish",value:function(){var e=this;return this.signalChannel_.sendWaitForResponse({command:tP,commandDesc:"unpublish",responseCommand:GO.UNPUBLISH_RESULT}).then((function(){e.close()})).catch((function(){e.close()}))}},{key:"updateMediaSettings",value:function(e,t){var n=this;this.localAuxStream_&&e===this.localAuxStream_&&(t=!0);var r=this.client_.getSystemResult().detail,i=r.isH264EncodeSupported,o=r.isVp8EncodeSupported;i?this.mediaSettings_.videoCodec="H264":o&&(this.mediaSettings_.videoCodec="VP8"),RL?e.getMediaStream().getTracks().forEach((function(r){var i=r.getSettings();if(r.kind===zw){var o=1;i.channelCount&&(o=i.channelCount),n.mediaSettings_.audioChannel=o,n.mediaSettings_.audioBps=1e3*e.getAudioBitrate(),n.mediaSettings_.audioFs=i.sampleRate}else if(r.kind===Ww){if(t)return n.mediaSettings_.auxVideoWidth=i.width,n.mediaSettings_.auxVideoHeight=i.height,n.mediaSettings_.auxVideoFps=i.frameRate,void(n.mediaSettings_.auxVideoBps=1e3*e.getVideoBitrate());n.client_.getIsEnableSmallStream()&&(n.mediaSettings_.smallVideoWidth=n.client_.smallStreamConfig.width,n.mediaSettings_.smallVideoHeight=n.client_.smallStreamConfig.height,n.mediaSettings_.smallVideoFps=n.client_.smallStreamConfig.frameRate,n.mediaSettings_.smallVideoBps=1e3*n.client_.smallStreamConfig.bitrate),n.mediaSettings_.videoWidth=i.width,n.mediaSettings_.videoHeight=i.height,n.mediaSettings_.videoFps=i.frameRate,n.mediaSettings_.videoBps=1e3*e.getVideoBitrate()}})):this.updateMediaSettingsFromProfile(e),this.log_.info("updateMediaSettings: "+JSON.stringify(this.mediaSettings_))}},{key:"updateMediaSettingsFromProfile",value:function(e){if(e){if(e.hasAudio()){var t=e.getAudioProfile();this.mediaSettings_.audioChannel=t.channelCount,this.mediaSettings_.audioBps=1e3*t.bitrate,this.mediaSettings_.audioFs=t.sampleRate}if(e.hasVideo()){var n=e.getVideoProfile();this.mediaSettings_.videoWidth=n.width,this.mediaSettings_.videoHeight=n.height,this.mediaSettings_.videoFps=n.frameRate,this.mediaSettings_.videoBps=1e3*n.bitrate}}}},{key:"sendMediaSettings",value:function(e){var t=this;this.updateMediaSettings(e),this.signalChannel_.sendWaitForResponse({command:pP,data:this.mediaSettings_,responseCommand:GO.UPDATE_CONSTRAINT_CONFIG_RES}).then((function(e){0!==e.data.code&&t.log_.warn(e.data.message)})).catch(this.log_.warn)}},{key:"addTrack",value:(T=a(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:if(o=n===this.localAuxStream_,this.log_.info("is adding ".concat(t.kind," track to current published local ").concat(o?Kw:lT," stream")),null===(i=this.sei_)||void 0===i||i.handleEncodedStreams(),!vL()){e.next=10;break}return e.next=8,this.addTrackByTransceiver(t,n);case 8:e.next=12;break;case 10:return e.next=12,this.addTrackBySender(t);case 12:ZP(this.userId_,{eventId:t.kind===zw?gP:mP,eventDesc:"add ".concat(t.kind," track to current published stream"),timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return T.apply(this,arguments)})},{key:"addTrackByTransceiver",value:(w=a(r().mark((function e(t,n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n===this.localAuxStream_,o=this.peerConnection_.getTransceivers(),t.kind!==zw){e.next=13;break}if(!o[0].sender.track){e.next=9;break}return this.mixAudioTrack(o[0].sender.track,t),e.next=7,o[0].sender.replaceTrack(this.mixedAudioTrack_);case 7:e.next=11;break;case 9:return e.next=11,o[0].sender.replaceTrack(t);case 11:e.next=26;break;case 13:return a=i?3:1,e.next=16,o[a].sender.replaceTrack(t);case 16:if(1!==a||!this.client_.getIsEnableSmallStream()){e.next=23;break}return this.smallGenerator_=new kW(this.localStream_),e.next=20,this.smallGenerator_.initialize();case 20:return s=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),e.next=23,o[2].sender.replaceTrack(s);case 23:if(o[a].direction!==bT){e.next=26;break}return e.next=26,this.setTransceiverDirection(ST,[a]);case 26:return this.updateMediaSettings(n,i),e.next=29,this.doPublishChange();case 29:case"end":return e.stop()}}),e,this)}))),function(e,t){return w.apply(this,arguments)})},{key:"addTrackBySender",value:(k=a(r().mark((function e(t){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(vL()&&this.peerConnection_.getTransceivers().findIndex((function(e){return"stopped"===e.direction}))>=0)){e.next=4;break}return this.log_.warn("transceiver is stopping, negotiate sdp first"),e.next=4,this.updateOffer(GE.REMOVE,t);case 4:if(!(n=this.peerConnection_.getSenders().find((function(e){return e.track&&e.track.kind===t.kind})))){e.next=11;break}return this.log_.warn("sender already exists, remove sender first"),i=n.track,this.removeSender(n),e.next=11,this.updateOffer(GE.REMOVE,i);case 11:if(o=this.localStream_.getMediaStream(),this.peerConnection_.addTrack(t,o),t.kind!==Ww||!this.client_.getIsEnableSmallStream()){e.next=21;break}return this.smallGenerator_=new kW(this.localStream_),e.next=17,this.smallGenerator_.initialize();case 17:a=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),(s=new MediaStream).addTrack(a),this.peerConnection_.addTrack(a,s);case 21:return e.next=23,this.updateOffer(GE.ADD,t);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"isNeedToResetOfferOrder",value:function(){if(this.sdpSemantics_===jE||!this.peerConnection_||!this.peerConnection_.localDescription)return!1;for(var e=this.peerConnection_.localDescription.sdp,t=wD(e),n=0;n<t.media.length;n++)if(0===t.media[n].mid&&t.media[n].type===Ww)return!0;return!1}},{key:"removeSender",value:function(e){var t=null;vL()&&(t=this.peerConnection_.getTransceivers().find((function(t){return t.sender&&t.sender.track===e.track}))),this.peerConnection_.removeTrack(e),t&&uR(t.stop)&&(this.log_.info("stop transceiver"),t.stop())}},{key:"removeTrack",value:(S=a(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:if(this.log_.info("is removing ".concat(t.kind," track from current published local ").concat(n===this.localAuxStream_?Kw:lT," stream")),!vL()){e.next=8;break}return e.next=6,this.removeTrackByTransceiver(t,n);case 6:e.next=10;break;case 8:return e.next=10,this.removeTrackBySender(t);case 10:ZP(this.userId_,{eventId:t.kind===zw?yP:_P,eventDesc:"remove ".concat(t.kind," track from current published stream"),timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_});case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return S.apply(this,arguments)})},{key:"removeTrackByTransceiver",value:(y=a(r().mark((function e(t,n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n===this.localAuxStream_,o=this.peerConnection_.getTransceivers(),t.kind!==zw){e.next=13;break}if(!this.mixedAudioTrack_){e.next=9;break}return e.next=6,o[0].sender.replaceTrack(i?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack());case 6:this.destroyMixedAudioTrack(),e.next=11;break;case 9:return e.next=11,o[0].sender.replaceTrack(null);case 11:e.next=23;break;case 13:return a=i?3:1,e.next=16,o[a].sender.replaceTrack(null);case 16:if(1!==a||!this.smallGenerator_){e.next=21;break}return this.smallGenerator_.destroy(),this.smallGenerator_=null,e.next=21,o[2].sender.replaceTrack(null);case 21:return e.next=23,this.setTransceiverDirection(bT,[a]);case 23:return this.updateMediaSettings(n,i),e.next=26,this.doPublishChange();case 26:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"setTransceiverDirection",value:(g=a(r().mark((function e(t,n){var i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Uk){e.next=2;break}return e.abrupt("return");case 2:if(i=!1,o=!1,this.log_.info("setting transceiver ".concat(n.join(",")," direction to ").concat(t)),a=this.peerConnection_.getTransceivers(),n.forEach((function(e){a[e].direction!==t&&(a[e].direction=t,i=!0)})),!i){e.next=14;break}return this.log_.info("updating offer"),e.next=11,this.peerConnection_.createOffer();case 11:return s=e.sent,e.next=14,this.peerConnection_.setLocalDescription(s);case 14:if(c=-1,u=this.peerConnection_.remoteDescription.sdp.split("\r\n").map((function(e){if(e.match(new RegExp("a=(".concat(bT,"|").concat(kT,"|").concat(ST,")")))&&c++,n.includes(c)){if(t===bT&&e.includes("a=".concat(kT)))return o=!0,"a=".concat(t);if(t===ST&&e.includes("a=".concat(bT)))return o=!0,"a=".concat(kT)}return e})).join("\r\n"),!o){e.next=20;break}return this.log_.info("updating answer"),e.next=20,this.peerConnection_.setRemoteDescription({type:"answer",sdp:u});case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"removeTrackBySender",value:(m=a(r().mark((function e(t){var n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kind!==Ww||!this.isNeedToResetOfferOrder()){e.next=7;break}return this.reset(),this.initialize(),null===(n=this.localStream_.getMediaStream())||void 0===n||n.removeTrack(t),e.next=6,this.publish(this.localStream_);case 6:return e.abrupt("return");case 7:return(i=this.peerConnection_.getSenders().find((function(e){return e.track===t})))&&(this.removeSender(i),t.kind===Ww&&this.smallGenerator_&&(this.smallGenerator_.destroy(),this.smallGenerator_=null,this.peerConnection_.getSenders().forEach((function(e){e.track&&e.track.kind===Ww&&o.removeSender(e)})))),e.next=11,this.updateOffer(GE.REMOVE,t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"replaceTrack",value:(v=a(r().mark((function e(t,n){var i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=null===(i=this.peerConnection_)||void 0===i?void 0:i.getSenders())&&0!==o.length){e.next=3;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:GC})});case 3:if(a=n===this.localAuxStream_,this.log_.info("is replacing ".concat(t.kind," track to current published local ").concat(a?Kw:lT," stream")),t.kind!==zw||!o[0]){e.next=16;break}if(!(this.mixedAudioTrack_&&null!==(s=this.localStream_)&&void 0!==s&&s.hasAudio()&&null!==(c=this.localAuxStream_)&&void 0!==c&&c.hasAudio())){e.next=14;break}return this.destroyMixedAudioTrack(),u=a?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack(),this.mixAudioTrack(t,u),e.next=12,o[0].replaceTrack(this.mixedAudioTrack_);case 12:e.next=16;break;case 14:return e.next=16,o[0].replaceTrack(t);case 16:if(t.kind!==Ww){e.next=32;break}if(n!==this.localStream_||!o[1]){e.next=29;break}return e.next=20,o[1].replaceTrack(t);case 20:if(!this.smallGenerator_||!o[2]){e.next=29;break}return this.log_.info("replacing smallVideo"),this.smallGenerator_.destroy(),this.smallGenerator_=new kW(this.localStream_),e.next=26,this.smallGenerator_.initialize();case 26:return l=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),e.next=29,o[2].replaceTrack(l);case 29:if(n!==this.localAuxStream_||!o[3]){e.next=32;break}return e.next=32,o[3].replaceTrack(t);case 32:ZP(this.userId_,{eventId:t.kind===zw?AP:RP,eventDesc:"replace ".concat(t.kind," track from current published stream"),timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_});case 33:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"updateOffer",value:(f=a(r().mark((function e(t,n){var i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection_.createOffer(GW);case 3:return i=e.sent,Uk&&(i.sdp=this.setSDPDirection(i.sdp,"sendrecv")),e.next=7,this.peerConnection_.setLocalDescription(i);case 7:return o=this.updateMediaSettings(this.localStream_||this.localAuxStream_),a={action:t,trackId:n.id,kind:n.kind===Ww?"bigVideo":n.kind,type:"offer",sdp:this.peerConnection_.localDescription.sdp,constraintConfig:o,state:this.publishState},this.log_.info("createOffer success, sending updated offer to remote server"),this.log_.debug("updatedOffer: "+a.sdp),e.next=13,this.signalChannel_.sendWaitForResponse({command:JO,data:a,responseCommand:GO.UPDATE_OFFER_RESULT,timeout:1e4,commandDesc:"update offer"});case 13:return s=e.sent,c=s.data,u=c.code,l=c.message,0!==u&&this.checkPublishResultCode(u,l),e.next=18,this.acceptAnswer(s.data.data);case 18:this.updateSSRC(i.sdp),iD.logSuccessEvent({userId:this.client_.getUserId(),eventType:kE,kind:"offer"}),e.next=27;break;case 22:throw e.prev=22,e.t0=e.catch(0),this.log_.error(e.t0),iD.logFailedEvent({userId:this.client_.getUserId(),eventType:kE,kind:"offer",error:e.t0}),e.t0;case 27:case"end":return e.stop()}}),e,this,[[0,22]])}))),function(e,t){return f.apply(this,arguments)})},{key:"setBandwidth",value:(p=a(r().mark((function e(t){var n,i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.bandwidth,i=t.type,o=t.videoType,a=void 0===o?"":o,s=t.sdp,_L()||!s){e.next=3;break}return e.abrupt("return",i===Ww?this.updateVideoBandwidthRestriction(s,n,a):this.updateAudioBandwidthRestriction(s,n));case 3:if(c=0,i===Ww&&(c=a===Gw?2:a===Kw?3:1),!(u=this.peerConnection_.getSenders()[c])){e.next=22;break}return(l=u.getParameters()).encodings&&0!==l.encodings.length||(l.encodings=[{}]),"unlimited"===n?delete l.encodings[0].maxBitrate:l.encodings[0].maxBitrate=1e3*n,e.prev=10,e.next=13,u.setParameters(l);case 13:return this.log_.info(a+i+" bandwidth was set to "+n+" kbps"),e.abrupt("return",s);case 17:if(e.prev=17,e.t0=e.catch(10),this.log_.info("failed to set bandwidth by setting maxBitrate: "+e.t0),!s){e.next=22;break}return e.abrupt("return",i===Ww?this.updateVideoBandwidthRestriction(s,n,a):this.updateAudioBandwidthRestriction(s,n));case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this,[[10,17]])}))),function(e){return p.apply(this,arguments)})},{key:"updateVideoBandwidthRestriction",value:function(e,t,n){var r="AS";Uk&&(r="TIAS",t*=1e3);var i=0,o=-1;return n===Gw?i=1:n===Kw&&(i=2),e=e.replace(/m=video (.*)\r\nc=IN (.*)\r\n/g,(function(e){return++o===i?"".concat(e,"b=").concat(r,":").concat(t,"\r\n"):e})),e}},{key:"updateAudioBandwidthRestriction",value:function(e,t){var n="AS";return Uk&&(n="TIAS",t*=1e3),e.replace(/m=audio (.*)\r\nc=IN (.*)\r\n/,"m=audio $1\r\nc=IN $2\r\nb="+n+":"+t+"\r\n")}},{key:"removeBandwidthRestriction",value:function(e){return e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"")}},{key:"removeVideoOrientation",value:function(e){return e.replace(/urn:3gpp:video-orientation/,"")}},{key:"connect",value:(l=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.exchangeSDP();case 3:return e.next=5,this.waitForPeerConnectionConnected();case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.closePeerConnection(!0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return l.apply(this,arguments)})},{key:"exchangeSDP",value:(c=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isSDPExchanging_=!0,e.next=4,this.createOffer();case 4:return this.log_.info("createOffer success, sending offer to remote server"),e.next=7,this.doExchangeSDP();case 7:this.isSDPExchanging_=!1,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),this.isSDPExchanging_=!1,e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return c.apply(this,arguments)})},{key:"createOffer",value:(o=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection_.createOffer(GW);case 3:return t=e.sent,e.next=6,this.peerConnection_.setLocalDescription(t);case 6:this.updateSSRC(t.sdp),iD.logSuccessEvent({userId:this.client_.getUserId(),eventType:kE,kind:"offer"}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),iD.logFailedEvent({userId:this.client_.getUserId(),eventType:kE,kind:"offer",error:e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return o.apply(this,arguments)})},{key:"doExchangeSDP",value:function(){var e=this;return new Promise((function(t,n){e.exchangeSDPTimeout_=setTimeout((function(){e.signalChannel_.off(GO.PUBLISH_RESULT,i),e.clearExchangeSDPTimeout();var t=new vP({code:fP.API_CALL_TIMEOUT,message:tR({key:iC})});n(t)}),1e4);var i=function(){var i=a(r().mark((function i(o){var a,s,c;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e.clearExchangeSDPTimeout(),a=o.data,s=a.code,c=a.message,0!==s){r.next=9;break}return r.next=6,e.acceptAnswer(o.data.data);case 6:t(),r.next=10;break;case 9:e.checkPublishResultCode(s,c);case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),n(r.t0);case 15:case"end":return r.stop()}}),i,null,[[0,12]])})));return function(e){return i.apply(this,arguments)}}(),o={type:e.peerConnection_.localDescription.type,sdp:e.removeVideoOrientation(e.peerConnection_.localDescription.sdp),screen:(e.publishingStream_||e.localStream_).hasScreenTrack(),state:e.publishState,constraintConfig:e.mediaSettings_};e.signalChannel_.once(GO.PUBLISH_RESULT,i),e.log_.debug("sending sdp offer: "+o.sdp),e.signalChannel_.send(eP,o)}))}},{key:"setSDPDirection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",r=wD(e);return r.media.forEach((function(e){"all"!==n&&e.type!==n||(e.direction=t)})),TD(r)}},{key:"acceptAnswer",value:(i=a(r().mark((function e(t){var n,i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this.removeVideoOrientation(t.sdp),!(i=this.publishingStream_||this.localStream_)){e.next=15;break}if(o=i.getVideoBitrate(),a=i.getAudioBitrate(),!o){e.next=11;break}return s=this.isPublishingAuxStream_?Kw:Jw,e.next=10,this.setBandwidth({bandwidth:o,type:Ww,sdp:n,videoType:s});case 10:n=e.sent;case 11:if(!a){e.next=15;break}return e.next=14,this.setBandwidth({bandwidth:a,type:zw,sdp:n});case 14:n=e.sent;case 15:if(!this.client_.getIsEnableSmallStream()){e.next=20;break}return c=this.client_.smallStreamConfig,e.next=19,this.setBandwidth({bandwidth:c.bitrate,type:Ww,videoType:Gw,sdp:n});case 19:n=e.sent;case 20:return u={type:t.type,sdp:n},e.next=23,this.peerConnection_.setRemoteDescription(u);case 23:this.log_.debug("accepted answer: "+n),iD.logSuccessEvent({userId:this.client_.getUserId(),eventType:wE,kind:"answer"}),e.next=32;break;case 27:throw e.prev=27,e.t0=e.catch(0),iD.logFailedEvent({userId:this.client_.getUserId(),eventType:wE,kind:"answer",error:e.t0}),this.log_.error("failed to accept remote answer "+e.t0),e.t0;case 32:case"end":return e.stop()}}),e,this,[[0,27]])}))),function(e){return i.apply(this,arguments)})},{key:"sendMutedFlag",value:function(e,t){if(t!==this.localAuxStream_){var n={audio:e.audio,bigVideo:e.video,auxVideo:e.auxVideo};this.log_.info("send muted state: ".concat(JSON.stringify(n))),this.signalChannel_.send(ZO,n)}}},{key:"getIsReconnecting",value:function(){return this.isReconnecting_}},{key:"reconnect",value:(n=a(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.reconnectionTimer_){e.next=3;break}return this.log_.warn("reconnect() uplink is reconnecting, ignore current reconnection"),e.abrupt("return");case 3:if(!(this.reconnectionCount_>=30)){e.next=12;break}return this.log_.warn("SDK has tried reconnect uplink for ".concat(30," times, but all failed, please check your network")),this.stopReconnection(),t=new vP({code:fP.UPLINK_RECONNECTION_FAILED,message:tR({key:sC})}),iD.logFailedEvent({userId:this.client_.getUserId(),eventType:yE,error:t}),this.addEventInternal(qP,"uplink-connection reconnect fail"),this.emitConnectionStateChangedEvent(QT),this.emitter_.emit(PL.ERROR,t),e.abrupt("return");case 12:if(this.signalChannel_.getCurrentState()===zO){e.next=16;break}return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this.signalChannel_.once(VO,this.reconnect,this),e.abrupt("return");case 16:if(this.reconnectionCount_++,e.prev=17,this.log_.warn("reconnect() try to reconnect uplink [".concat(this.reconnectionCount_,"/").concat(30,"]")),n=cR(this.reconnectionCount_),this.reconnectionTimer_=setTimeout((function(){i.log_.warn("reconnect() uplink reconnect timeout(".concat(n/1e3,"s), try again")),i.clearReconnectionTimer(),i.reconnect()}),n),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===tE)){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,this.signalChannel_.sendWaitForResponse({command:tP,responseCommand:GO.UNPUBLISH_RESULT,enableLog:!1});case 25:return this.reset(),this.initialize(),e.next=29,this.publish(this.localStream_);case 29:iD.logSuccessEvent({userId:this.client_.getUserId(),eventType:yE}),this.log_.warn("reconnect() uplink reconnect successfully"),this.addEventInternal(WP,"uplink-connection reconnect success"),this.stopReconnection(),this.localStream_.syncMuteState(),e.next=38;break;case 36:e.prev=36,e.t0=e.catch(17);case 38:case"end":return e.stop()}}),e,this,[[17,36]])}))),function(){return n.apply(this,arguments)})},{key:"clearExchangeSDPTimeout",value:function(){-1!==this.exchangeSDPTimeout_&&(clearTimeout(this.exchangeSDPTimeout_),this.exchangeSDPTimeout_=-1)}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"handleError",value:function(e){e.getCode()===fP.ICE_TRANSPORT_ERROR&&(this.isFirstConnection_&&(this.isFirstConnection_=!1,iD.logFailedEvent({userId:this.client_.getUserId(),eventType:_E,error:e})),this.isReconnecting_||this.startReconnection())}},{key:"handleConnectionStateChange",value:function(e){e.state===ZT&&this.isFirstConnection_&&(this.isFirstConnection_=!1,iD.logSuccessEvent({userId:this.client_.getUserId(),eventType:_E}),this.addEventInternal(VP,"uplink-connection is connected"))}},{key:"updateSSRC",value:function(e){var t=this;try{wD(e).media.forEach((function(e,n){if(e.type===zw){var r=e.ssrcs[0];r&&(t.ssrc_.audio=r.id)}else{if(t.sdpSemantics_===jE)return void e.ssrcGroups.forEach((function(e,n){var r=Number(e.ssrcs.split(" ")[0]);0===n?t.ssrc_.video=r:1===n&&(t.ssrc_.small=r)}));var i=e.ssrcs[0];if(!i)return;switch(n){case 1:t.ssrc_.video=i.id;break;case 2:t.ssrc_.small=i.id;break;case 3:t.ssrc_.auxiliary=i.id}}}))}catch(Yq){}}},{key:"getVideoTrackId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ww;if(this.peerConnection_){var t=this.peerConnection_.getSenders();if(e===Kw&&t[3]&&t[3].track)return t[3].track.id;if(e===Ww&&t[1]&&t[1].track)return t[1].track.id}if(this.localStream_&&e===Ww){var n=this.localStream_.getVideoTrack();if(n)return n.id}if(this.localAuxStream_&&e===Kw){var r=this.localAuxStream_.getVideoTrack();if(r)return r.id}return""}},{key:"getSSRC",value:function(){return this.ssrc_}},{key:"checkPublishResultCode",value:function(e,t){if(0!==e)throw 1028===e?(this.log_.error(Yx.NOT_SUPPORTED_H264ENCODE),new vP({code:fP.NOT_SUPPORTED_H264,message:tR({key:Rx})})):new vP({code:fP.UNKNOWN,message:tR({key:Ux,data:{signalResponse:GO.PUBLISH_RESULT,code:e,message:t}})})}},{key:"getLocalStream",value:function(){return this.localStream_}},{key:"sendSEI",value:function(e,t){this.sei_.push(e,t)}},{key:"mixAudioTrack",value:function(e,t){this.log_.info("mix audio track"),this.mixedAudioTrack_=function(e){var t=ER(),n=t.createMediaStreamDestination(),r=[];e.forEach((function(e){var i=new MediaStream;i.addTrack(e);var o=t.createMediaStreamSource(i);o.connect(n),r.push(o)}));var i=n.stream.getAudioTracks()[0];return TW.set(i,{destination:n,track:i,mediaStreamSourceList:r}),i}([e,t])}},{key:"destroyMixedAudioTrack",value:function(){this.mixedAudioTrack_&&(this.log_.info("destroy audio track"),function(e){if(TW.has(e)){var t=TW.get(e),n=t.destination,r=t.track,i=t.mediaStreamSourceList;r.stop(),n.disconnect(),i.forEach((function(e){e.disconnect()})),TW.delete(e)}}(this.mixedAudioTrack_),this.mixedAudioTrack_=null)}}]),O}(tW),I(FW.prototype,"publish",[VW],Object.getOwnPropertyDescriptor(FW.prototype,"publish"),FW.prototype),FW),KW=(BW=wW({retries:1,timeout:0,onRetrying:function(e){this.log_.warn("connection timeout, retrying [".concat(e,"]"))},onError:function(e,t,n){e.message.includes("timeout")?t():n(e)}}),$W=function(e){d(m,e);var n,i,o,c,l,p,f,v=_(m);function m(e){var t;return s(this,m),(t=v.call(this,e)).remoteStreams_=new Map,t.autoSubscribe=e.autoSubscribe,t.trackState_={audio:e.trackState.audio,video:e.trackState.video,auxiliary:e.trackState.auxiliary,smallVideo:e.trackState.smallVideo},t.ssrc_={audio:0,video:0,auxiliary:0},t.subscribeState_={audio:e.autoSubscribe,video:e.autoSubscribe,auxiliary:e.autoSubscribe,smallVideo:!1},t.isSDPExchanging_=!1,t.installEvents(),t}return u(m,[{key:"isMainStreamSubscribed",get:function(){return(this.subscribeState_.audio||this.subscribeState_.video||this.subscribeState_.smallVideo)&&(this.trackState_.audio||this.trackState_.video||this.trackState_.smallVideo)}},{key:"isAuxStreamSubscribed",get:function(){return this.subscribeState_.auxiliary&&this.trackState_.auxiliary}},{key:"isSmallStreamSubscribed",get:function(){return this.subscribeState_.smallVideo&&this.trackState_.smallVideo}},{key:"isBigStreamSubscribed",get:function(){return this.subscribeState_.video&&this.trackState_.video}},{key:"isStreamUnpublished",value:function(e){return e.getType()===lT?!this.trackState_.audio&&!this.trackState_.video:!this.trackState_.auxiliary}},{key:"initialize",value:function(){b(h(m.prototype),"initialize",this).call(this),this.peerConnection_.ontrack=this.onTrack.bind(this)}},{key:"close",value:function(){var e=this;b(h(m.prototype),"close",this).call(this),this.trackState_.audio=!1,this.trackState_.video=!1,this.trackState_.smallVideo=!1,this.trackState_.auxiliary=!1,this.emitConnectionStateChangedEvent(QT),this.remoteStreams_.forEach((function(t){var n=t;n.setConnection(null),n.uninstallEvents(),n.getIsStreamAddedEventEmitted()&&e.emitter_.emit(PL.STREAM_REMOVED,{stream:n})})),this.remoteStreams_.clear(),this.uninstallEvents()}},{key:"installEvents",value:function(){var e=this;LR.on(nA,this.onRemoteStreamUpdate,this),this.emitter_.on(PL.ERROR,(function(t){t.getCode()===fP.ICE_TRANSPORT_ERROR&&(e.isFirstConnection_&&(e.isFirstConnection_=!1,iD.logFailedEvent({userId:e.client_.getUserId(),eventType:bE,error:t})),e.isReconnecting_||e.startReconnection())})),this.emitter_.on(PL.CONNECTION_STATE_CHANGED,(function(t){t.state===ZT&&e.isFirstConnection_&&(e.isFirstConnection_=!1,iD.logSuccessEvent({userId:e.client_.getUserId(),eventType:bE}),e.addEventInternal(FP,"downlink-connection is connected"))}))}},{key:"uninstallEvents",value:function(){LR.removeListener(nA,this.onRemoteStreamUpdate,this)}},{key:"onRemoteStreamUpdate",value:function(e){if(this.hitTest(e.tinyId)&&e.client===this.client_){this.updateTrackState(e.action,e.kind);var t=e.kind===Kw?WT:zT,n=this.remoteStreams_.get(t);if(!n)return;e.action===GE.ADD?this.handleRemoteAddTrack(e.kind,n):this.handleRemoteRemoveTrack(e.kind,n)}}},{key:"handleRemoteAddTrack",value:function(e,t){this.log_.info("remote add ".concat(e," track")),e===zw?t.updateAudioPlayingState(this.subscribeState_.audio):t.updateVideoPlayingState(e===Kw?this.subscribeState_.auxiliary:this.subscribeState_.video||this.subscribeState_.smallVideo),t.getIsStreamAddedEventEmitted()?this.emitter_.emit(PL.STREAM_UPDATED,{stream:t}):(this.emitter_.emit(PL.STREAM_ADDED,{stream:t}),this.currentState_===ZT&&t.emitConnectionStateChanged({prevState:QT,state:ZT}))}},{key:"handleRemoteRemoveTrack",value:function(e,t){t.getIsStreamAddedEventEmitted()&&(this.log_.info("remote remove ".concat(e," track")),e===Kw||!this.trackState_.audio&&!this.trackState_.video?(this.log_.info("remote stream ".concat(t.getType()," removed")),this.currentState_===ZT&&t.emitConnectionStateChanged({prevState:ZT,state:QT}),this.emitter_.emit(PL.STREAM_REMOVED,{stream:t})):(e===zw?t.updateAudioPlayingState(!1):(e!==Qw||this.isSmallStreamSubscribed)&&t.updateVideoPlayingState(!1),this.emitter_.emit(PL.STREAM_UPDATED,{stream:t})))}},{key:"updateTrackState",value:function(e,t){var n=e===GE.ADD;switch(t){case zw:this.trackState_.audio=n;break;case Ww:this.trackState_.video=n;break;case Kw:this.trackState_.auxiliary=n;break;case Qw:this.trackState_.smallVideo=n}this.log_.info("trackState updated: ".concat(JSON.stringify(this.trackState_)))}},{key:"onTrack",value:function(e){var t=e.streams[0],n=e.track;if(this.log_.info("ontrack() kind: ".concat(n.kind," id: ").concat(n.id," streamId: ").concat(t.id)),this.sdpSemantics_===UE){var r=function(e){var t=dD.parse(e),n={audio:[],video:[]};return t.media.forEach((function(e){if(e.ssrcs){var t=e.ssrcs[0].id>>16&255;if(e.type===zw)n.audio.push(zT);else if(e.type==Ww){var r=t===qT?zT:WT;n.video.push(r)}}})),n}(this.peerConnection_.remoteDescription.sdp);if(n.kind===zw){if(0===r.audio.length||t.id!==zT)return void this.log_.debug("skip this invalid audio track")}else if(-1===r.video.indexOf(t.id))return void this.log_.debug("skip this invalid video track: ".concat(n.id,"  msid: ").concat(t.id))}iD.logEvent({eventType:"ontrack",kind:n.kind});var i=!1,o=this.remoteStreams_.get(t.id),a=t.id===zT?GT:JT;if(lR(o)&&((o=new gW({type:a,userId:this.userId_,client:this.client_})).setConnection(this),this.remoteStreams_.set(t.id,o),i=!0),o.setMediaStream(t),n.kind===zw?o.updateAudioPlayingState(this.subscribeState_.audio):a===GT?o.updateVideoPlayingState(this.subscribeState_.video||this.subscribeState_.smallVideo):o.updateVideoPlayingState(this.subscribeState_.auxiliary),(a!==JT||this.trackState_.auxiliary)&&(a!==GT||this.trackState_.audio||this.trackState_.video)){var s=this.client_.getSubscriptionManager();s&&s.hasAutoRecoveryFlag(this.userId_,a)||(i?this.emitter_.emit(PL.STREAM_ADDED,{stream:o}):this.emitter_.emit(PL.STREAM_UPDATED,{stream:o}))}}},{key:"addRRTRLine",value:function(e){var t=e.split("\r\n"),n=new Map;t.forEach((function(e,r){/^a=rtcp-fb:/.test(e)&&t[r+1]&&!/^a=rtcp-fb:/.test(t[r+1])&&n.set(r+1,e.match(/^a=rtcp-fb:\d+/)[0]+" rrtr")}));for(var r=k(n),i=0;i<r.length;i++){var o=S(r[i],2),a=o[0],s=o[1];t.splice(a+i,0,s)}return t.join("\r\n")}},{key:"addSPSDescription",value:function(e){var t=wD(e);return t.media.forEach((function(e){e.type===Ww&&e.fmtp.forEach((function(e){e.config+=";sps-pps-idr-in-keyframe=1"}))})),TD(t)}},{key:"removeSDESDescription",value:function(e){var t=["urn:ietf:params:rtp-hdrext:sdes:mid","urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id","urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id"],n=wD(e);return n.media.forEach((function(e){e.ext=e.ext.filter((function(e){return!t.includes(e.uri)}))})),TD(n)}},{key:"isSubscriptionStateNotChanged",value:function(e,t){return e.getType()===GT?(null==t?void 0:t.audio)===this.subscribeState_.audio&&(null==t?void 0:t.video)===this.subscribeState_.video&&this.isSubscribeSmall(t):e.getType()===JT?!lR(t.video)&&this.subscribeState_.auxiliary===t.video:void 0}},{key:"isSubscribeSmall",value:function(e){return lR(e.smallVideo)&&!this.subscribeState_.smallVideo}},{key:"subscribe",value:(f=a(r().mark((function e(t,n){var i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n.emitEvent,s=void 0===a||a,c=t.getType(),(null===(i=this.peerConnection_)||void 0===i?void 0:i.connectionState)!==eE&&(null===(o=this.peerConnection_)||void 0===o?void 0:o.connectionState)!==tE){e.next=6;break}return e.next=6,this.waitForPeerConnectionConnected();case 6:if(!this.isSubscriptionStateNotChanged(t,n)){e.next=13;break}if(this.peerConnection_){e.next=11;break}return this.initialize(),e.next=11,this.connect();case 11:case 26:return s&&lR(n.smallVideo)&&this.emitter_.emit(PL.STREAM_SUBSCRIBED,{stream:t,result:!0}),e.abrupt("return",t);case 13:if(c===lT?(lR(n.audio)||(this.subscribeState_.audio=n.audio),lR(n.video)||(this.subscribeState_.video=n.video),this.subscribeState_.smallVideo=(null==n?void 0:n.smallVideo)||!1,this.addEventInternal(this.subscribeState_.audio?TP:IP,this.subscribeState_.audio?"subscribe audio":"unsubscribe audio"),this.addEventInternal(this.subscribeState_.video?TP:IP,this.subscribeState_.video?"subscribe video":"unsubscribe video"),this.addEventInternal(this.subscribeState_.smallVideo?QP:XP,this.subscribeState_.smallVideo?"subscribe smallVideo":"unsubscribe smallVideo")):lR(n.video)||(this.subscribeState_.auxiliary=n.video),this.log_.info("subscribe ".concat(c," stream with options ").concat(JSON.stringify(n)," current state: ").concat(JSON.stringify(this.subscribeState_))),!this.peerConnection_&&!this.isSDPExchanging_){e.next=23;break}return u=ME,this.isMainStreamSubscribed||this.isAuxStreamSubscribed||(u=NE),e.next=20,this.sendSubscription(u);case 20:c===lT?(t.updateAudioPlayingState(this.subscribeState_.audio),t.updateVideoPlayingState(this.subscribeState_.video||this.subscribeState_.smallVideo)):t.updateVideoPlayingState(this.subscribeState_.auxiliary),e.next=26;break;case 23:return this.initialize(),e.next=26,this.connect();case 30:if(e.prev=30,e.t0=e.catch(0),!this.client_.getIsJoined()||!this.isStreamUnpublished(t)){e.next=35;break}throw this.log_.warn("".concat(e.t0.message," ").concat(JSON.stringify(this.trackState_))),new vP({code:fP.REMOTE_STREAM_NOT_EXIST,message:"remote user ".concat(this.userId_," unpublished stream")});case 35:throw e.t0;case 36:case"end":return e.stop()}}),e,this,[[0,30]])}))),function(e,t){return f.apply(this,arguments)})},{key:"unsubscribe",value:(p=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.getType())!==lT){e.next=10;break}if(this.isMainStreamSubscribed){e.next=5;break}return this.log_.info("main stream already unsubscribed"),e.abrupt("return",t);case 5:this.subscribeState_.audio=!1,this.subscribeState_.video=!1,this.subscribeState_.smallVideo=!1,e.next=14;break;case 10:if(this.isAuxStreamSubscribed){e.next=13;break}return this.log_.info("auxiliary stream already unsubscribed"),e.abrupt("return",t);case 13:this.subscribeState_.auxiliary=!1;case 14:return i=NE,(n===GT&&this.isAuxStreamSubscribed||n===JT&&this.isMainStreamSubscribed)&&(i=ME),this.log_.info("unsubscribe ".concat(n," stream with ").concat(JSON.stringify(this.subscribeState_))),e.next=19,this.sendSubscription(i);case 19:return t.updateVideoPlayingState(!1),t.updateAudioPlayingState(!1),i===NE&&((o=t.getMediaStream())&&o.getTracks().forEach((function(e){return o.removeTrack(e)})),this.closePeerConnection(),this.emitConnectionStateChangedEvent(QT)),this.addEventInternal(IP,"unsubscribe audio"),this.addEventInternal(EP,"unsubscribe video"),e.abrupt("return",t);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"sendSubscription",value:function(e){var t=this,n={srcTinyId:this.tinyId_,srcUserId:this.userId_},r=rP,i=GO.UNSUBSCRIBE_RESULT;return e===ME&&(n={audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary,smallVideo:this.subscribeState_.smallVideo,srcTinyId:this.tinyId_},r=iP,i=GO.SUBSCRIBE_CHANGE_RESULT),this.signalChannel_.sendWaitForResponse({command:r,data:n,responseCommand:i,timeout:1e4}).then((function(n){var r=n.data;if(0!==r.code){var i=new vP({code:r.code,message:tR({key:rC,data:{type:e,message:r.message}})});throw t.log_.error(i),i}}))}},{key:"connect",value:(l=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.exchangeSDP();case 3:return e.next=5,this.waitForPeerConnectionConnected();case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.closePeerConnection(!0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return l.apply(this,arguments)})},{key:"exchangeSDP",value:(c=a(r().mark((function e(){var t,n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isSDPExchanging_=!0,e.next=4,this.createOffer();case 4:return this.log_.info("createOffer success, sending offer to remote server"),t=this.peerConnection_.localDescription,n=t.type,i=t.sdp,o={type:n,sdp:i,srcUserId:this.userId_,srcTinyId:this.tinyId_,audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary,smallVideo:this.subscribeState_.smallVideo},LR.emit(kA,{client:this.client_,connection:this,userId:this.userId_,tinyId:this.tinyId_,role:FT,subscribeState:this.subscribeState_,trackState:this.trackState_}),e.next=10,this.signalChannel_.sendWaitForResponse({command:nP,commandDesc:"exchange sdp",data:o,responseCommand:GO.SUBSCRIBE_RESULT,timeout:1e4});case 10:if(a=e.sent,this.peerConnection_){e.next=15;break}throw s=new vP({code:fP.INVALID_OPERATION,message:tR({key:Fx})}),this.log_.warn(s),s;case 15:return e.next=17,this.onSubscribeResult(a);case 17:this.isSDPExchanging_=!1,e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(0),this.isSDPExchanging_=!1,e.t0;case 24:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(){return c.apply(this,arguments)})},{key:"createOffer",value:(o=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={voiceActivityDetection:!1},mL()&&this.sdpSemantics_===UE?(this.peerConnection_.addTransceiver(zw,{direction:"recvonly"}),this.peerConnection_.addTransceiver(Ww,{direction:"recvonly"}),this.peerConnection_.addTransceiver(Ww,{direction:"recvonly"})):(t.offerToReceiveAudio=!0,t.offerToReceiveVideo=!0),e.next=4,this.peerConnection_.createOffer(t);case 4:return n=e.sent,e.next=7,sL();case 7:return e.sent.isH264DecodeSupported||(this.log_.warn("remove h264 desc from sdp"),n.sdp=ID(n.sdp)),n.sdp=this.addRRTRLine(n.sdp),n.sdp=this.addSPSDescription(n.sdp),n.sdp=ED(n.sdp),this.sdpSemantics_===UE&&(n.sdp=this.removeSDESDescription(n.sdp)),e.next=16,this.peerConnection_.setLocalDescription(n);case 16:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"onSubscribeResult",value:(i=a(r().mark((function e(n){var i,o,a,s,c,u,l,d=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n&&n.data||{},o=i.code,a=i.message,s=void 0===a?"":a,c=n&&n.data&&n.data.data||{},u=c.type,l=c.sdp,77393!==o){e.next=5;break}throw this.log_.error(Yx.NOT_SUPPORTED_H264DECODE),new vP({code:fP.NOT_SUPPORTED_H264,message:tR({key:Ax})});case 5:if(e.prev=5,0===o){e.next=8;break}throw new vP({code:o,message:tR({key:aC,data:{errMsg:s}})});case 8:return this.log_.debug("accept remote answer: "+l),e.next=11,this.peerConnection_.setRemoteDescription({type:u,sdp:l});case 11:this.sei_&&(this.sei_.handleEncodedStreams(),this.sei_.onSEIMessage=function(e){d.emitter_.emit(PL.SEI_MESSAGE,t(t({},e),{},{userId:d.userId_}))}),this.updateSSRC(l),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(5),this.log_.error(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(e){return i.apply(this,arguments)})},{key:"updateSSRC",value:function(e){var t=this;try{wD(e).media.forEach((function(e){if(e.type===zw){var n=e.ssrcs.find((function(e){return e.value.includes(zT)}));n&&(t.ssrc_.audio=n.id)}else{var r=e.ssrcs.find((function(e){return e.value.includes(zT)})),i=e.ssrcs.find((function(e){return e.value.includes(WT)}));r&&(t.ssrc_.video=r.id),i&&(t.ssrc_.auxiliary=i.id)}}))}catch(Yq){}}},{key:"setRemoteStream",value:function(e,t){this.remoteStreams_.set(e,t)}},{key:"getSubscribeState",value:function(){return this.subscribeState_}},{key:"getTrackState",value:function(){return this.trackState_}},{key:"getSSRC",value:function(){return this.ssrc_}},{key:"getMainStream",value:function(){return this.remoteStreams_.get(zT)}},{key:"getAuxStream",value:function(){return this.remoteStreams_.get(WT)}},{key:"getMainStreamVideoTrackId",value:function(){var e=this.getMainStream();if(e){var t=e.getVideoTrack();if(t)return t.id}return""}},{key:"getAuxStreamVideoTrackId",value:function(){var e=this.getAuxStream();if(e){var t=e.getVideoTrack();if(t)return t.id}return""}},{key:"reconnect",value:(n=a(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.reconnectionTimer_){e.next=3;break}return this.log_.warn("reconnect() downlink is reconnecting, ignore current reconnection"),e.abrupt("return");case 3:if(!(this.reconnectionCount_>=30)){e.next=12;break}return this.log_.warn("SDK has tried reconnect downlink [".concat(this.userId_,"] for ").concat(30," times, but all failed, please check your network")),this.stopReconnection(),t=new vP({code:fP.DOWNLINK_RECONNECTION_FAILED,message:tR({key:oC})}),iD.logFailedEvent({userId:this.client_.getUserId(),eventType:SE,error:t}),this.addEventInternal(KP,"downlink-connection reconnect fail"),this.emitConnectionStateChangedEvent(QT),this.emitter_.emit(PL.ERROR,t),e.abrupt("return");case 12:if(this.signalChannel_.getCurrentState()===zO){e.next=16;break}return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this.signalChannel_.once(VO,this.reconnect,this),e.abrupt("return");case 16:if(this.reconnectionCount_++,this.log_.warn("reconnect() try to reconnect downlink [".concat(this.reconnectionCount_,"/").concat(30,"]")),n=cR(this.reconnectionCount_),this.reconnectionTimer_=setTimeout((function(){i.log_.warn("reconnect() downlink [".concat(i.userId_,"] reconnect timeout(").concat(n/1e3,"s), try again")),i.clearReconnectionTimer(),i.reconnect()}),n),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===tE)){e.next=22;break}return e.abrupt("return");case 22:return e.prev=22,this.closePeerConnection(),this.initialize(),e.next=27,this.connect();case 27:this.stopReconnection(),this.log_.warn("reconnect() downlink reconnect successfully"),iD.logSuccessEvent({userId:this.client_.getUserId(),eventType:SE}),this.addEventInternal(JP,"downlink-connection reconnect success"),this.recoverSubscription(),e.next=36;break;case 34:e.prev=34,e.t0=e.catch(22);case 36:case"end":return e.stop()}}),e,this,[[22,34]])}))),function(){return n.apply(this,arguments)})},{key:"recoverSubscription",value:function(){var e=this,t=this.client_.getSubscriptionManager();t&&k(this.remoteStreams_.values()).forEach((function(n){t.hasAutoRecoveryFlag(e.userId_,n.getType())&&t.recover(n)}))}},{key:"getIsReconnecting",value:function(){return this.isReconnecting_}},{key:"getSubscribedMainStream",value:function(){var e=null;return this.isMainStreamSubscribed&&(e=this.remoteStreams_.get(zT)),e}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"startReconnection",value:function(){var e=this.client_.getSubscriptionManager();if(e){var t,n=E(this.remoteStreams_.values());try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.getType();(i===GT&&(this.trackState_.audio||this.trackState_.video)||i===JT&&this.trackState_.auxiliary)&&e.setAutoRecoveryFlag(this.userId_,r.getType())}}catch(a){n.e(a)}finally{n.f()}}b(h(m.prototype),"startReconnection",this).call(this)}},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"hasMainStream",value:function(){return this.trackState_.video||this.trackState_.audio||this.trackState_.smallVideo}},{key:"hasAuxStream",value:function(){return this.trackState_.auxiliary}}]),m}(tW),I($W.prototype,"subscribe",[BW],Object.getOwnPropertyDescriptor($W.prototype,"subscribe"),$W.prototype),$W),QW=function(){function e(){s(this,e),this.startTime=0,this.endTime=0,this.start()}return u(e,[{key:"start",value:function(){0===this.startTime&&(this.startTime=yR())}},{key:"stop",value:function(){0===this.endTime&&(this.endTime=yR())}},{key:"getDuration",value:function(){return 0===this.endTime?yR()-this.startTime:this.endTime-this.startTime}}]),e}(),XW=function(){function e(t){s(this,e),this.client_=t.client,this.intervalId_=-1,this.statsCalculator_=t.stats,this.prevStats_=null,this.renderFreezeMap_=new Map,this.remoteStreamMap_=new Map,this.dataFreezeMap_=new Map,this.monitorFreezeData_=new Map}var t,n,i;return u(e,[{key:"installEvents",value:function(){LR.on(gA,this.handlePlayVideoStart,this),LR.on(pA,this.onVideoTrackMuted,this),LR.on(fA,this.onVideoTrackUnmuted,this),LR.on(cA,this.handleStreamStopped,this),LR.on(aA,this.handleStreamStopped,this),LR.on(eA,this.handleVideoPlaying,this)}},{key:"uninstallEvents",value:function(){LR.off(gA,this.handlePlayVideoStart,this),LR.off(pA,this.onVideoTrackMuted,this),LR.off(fA,this.onVideoTrackUnmuted,this),LR.off(cA,this.handleStreamStopped,this),LR.off(aA,this.handleStreamStopped,this),LR.off(eA,this.handleVideoPlaying,this)}},{key:"start",value:function(){var e=this;-1===this.intervalId_&&(this.installEvents(),this.intervalId_=QD.run(a(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.detectFPS();case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])}))),{delay:1e3}))}},{key:"stop",value:function(){-1!==this.intervalId_&&(this.uninstallEvents(),QD.clearTask(this.intervalId_),this.intervalId_=-1,this.renderFreezeMap_.clear(),this.dataFreezeMap_.clear(),this.remoteStreamMap_.clear())}},{key:"onVideoTrackMuted",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()){var n=t.userId_,r=t.type_,i="".concat(n,"_").concat(r),o=this.dataFreezeMap_.get(i),a=new QW;o?o.durationItemList.push(a):this.dataFreezeMap_.set(i,{userId:n,type:r,durationItemList:[a],isFreezing:function(){var e=this.durationItemList[this.durationItemList.length-1];return e&&0===e.endTime}})}}},{key:"onVideoTrackUnmuted",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()){var n=t.userId_,r=t.type_,i="".concat(n,"_").concat(r);this.stopDataFreeze({key:i,userId:n,type:r})}}},{key:"handleStreamStopped",value:function(e){var t=e.client,n=e.stream;if(t===this.client_){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);this.stopDataFreeze({key:o,userId:r,type:i})}}},{key:"stopDataFreeze",value:function(e){var t=e.key,n=e.userId,r=e.type,i=this.dataFreezeMap_.get(t);if(i&&i.isFreezing()){var o=i.durationItemList[i.durationItemList.length-1];o.stop();var a=o.getDuration();a>500?(iD.logEvent({eventType:"videoFrozenCount",delta:a}),this.monitorFreezeData_.set(t,{userId:n,type:r,duration:a})):i.durationItemList.pop()}}},{key:"getTotalDuration",value:function(e){return e.reduce((function(e,t){var n=t.getDuration();return e+Math.min(n,5e3)}),0)}},{key:"getStats",value:(i=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.client_.getConnections(),n={},i=E(t),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=20;break}if(a=S(o.value,2),s=a[0],(c=a[1]).getPeerConnection()){e.next=9;break}return e.abrupt("continue",18);case 9:return u=c.getSubscribeState(),l=c.getTrackState(),e.next=13,this.statsCalculator_.getReceiverStats(c);case 13:d=e.sent,(h={userId:d.userId,tinyId:s,hasVideo:l.video&&u.video,hasAuxiliary:l.auxiliary&&u.auxiliary,video:{framesDecoded:0},auxiliary:{framesDecoded:0}}).hasVideo&&(h.video.framesDecoded=d.video.framesDecoded),h.hasAuxiliary&&(h.auxiliary.framesDecoded=d.auxiliary.framesDecoded),n[d.userId]=h;case 18:e.next=5;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,this,[[3,22,25,28]])}))),function(){return i.apply(this,arguments)})},{key:"detectFPS",value:(n=a(r().mark((function e(){var t,n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStats();case 2:if(t=e.sent,this.prevStats_){e.next=6;break}return this.prevStats_=t,e.abrupt("return");case 6:e.t0=r().keys(t);case 7:if((e.t1=e.t0()).done){e.next=17;break}if(n=e.t1.value,this.prevStats_[n]){e.next=11;break}return e.abrupt("continue",7);case 11:i=t[n].tinyId,o=this.client_.getMutedStates(),t[n].hasVideo&&this.prevStats_[n].hasVideo&&o.has(i)&&!o.get(i).videoMuted&&(a=t[n].video.framesDecoded-this.prevStats_[n].video.framesDecoded,this.handleRenderFreeze({userId:n,type:GT,fps:a})),t[n].hasAuxiliary&&this.prevStats_[n].hasAuxiliary&&(s=t[n].auxiliary.framesDecoded-this.prevStats_[n].auxiliary.framesDecoded,this.handleRenderFreeze({userId:n,type:JT,fps:s})),e.next=7;break;case 17:this.prevStats_=t;case 18:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handleRenderFreeze",value:(t=a(r().mark((function e(t){var n,i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.userId,i=t.fps,o=t.type,a="".concat(n,"_").concat(o),s=this.renderFreezeMap_.get(a),i<=2?(c=yR(),s&&!s.isFreeze&&(s.freezeTimeline.push({startTime:c,endTime:void 0}),s.isFreeze=!0),s||this.renderFreezeMap_.set(a,{userId:n,type:o,isFreeze:!0,freezeTimeline:[{startTime:c,endTime:void 0}],renderFreezeTotal:0})):s&&s.isFreeze&&(s.isFreeze=!1,(u=s.freezeTimeline.pop()).endTime=yR(),l=u.endTime-u.startTime,s.freezeTimeline.push(u),s.renderFreezeTotal+=Math.min(5e3,l));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handlePlayVideoStart",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()&&t.hasVideo()){var n="".concat(t.getUserId(),"_").concat(t.getType());this.remoteStreamMap_.has(n)||this.remoteStreamMap_.set(n,{isPlayingFired:!1})}}},{key:"handleVideoPlaying",value:function(e){var t=e.stream;if(t.isRemote()&&t.getClient()===this.client_){var n="".concat(t.getUserId(),"_").concat(t.getType());this.remoteStreamMap_.has(n)&&(this.remoteStreamMap_.get(n).isPlayingFired=!0)}}},{key:"getDataFreezeDuration",value:function(e){var t={dataFreeze:0,count:0},n=this.dataFreezeMap_.get(e);if(n){if(n.isFreezing()){var r=n.durationItemList[n.durationItemList.length-1];r.stop(),r.getDuration()<500&&n.durationItemList.pop()}t.dataFreeze=this.getTotalDuration(n.durationItemList),t.count=n.durationItemList.length}return t}},{key:"getRenderFreezeDuration",value:function(e){var t=this.renderFreezeMap_.get(e),n=0,r=0;if(t)if(t.isFreeze){var i=yR()-t.freezeTimeline[t.freezeTimeline.length-1].startTime;n=t.renderFreezeTotal+Math.min(i,5e3),r=t.freezeTimeline.length}else n=t.renderFreezeTotal;return{renderFreeze:n,count:r}}},{key:"getMonitorFreeze",value:function(){return this.monitorFreezeData_}},{key:"isBlackStream",value:function(e){return!!this.remoteStreamMap_.has(e)&&!this.remoteStreamMap_.get(e).isPlayingFired}},{key:"resetMonitor",value:function(){this.monitorFreezeData_.clear()}}]),e}(),YW=u((function e(t){s(this,e),this.userId=t.userId,this.tinyId=t.tinyId,this.role=t.role===FT?$T:HT})),ZW={exports:{}};!function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,i,o,a){return n((s=n(n(t,e),n(i,a)))<<(c=o)|s>>>32-c,r);var s,c}function i(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function o(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}function c(e,t){var r,c,u,l,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,p=-271733879,f=-1732584194,v=271733878;for(r=0;r<e.length;r+=16)c=h,u=p,l=f,d=v,h=i(h,p,f,v,e[r],7,-680876936),v=i(v,h,p,f,e[r+1],12,-389564586),f=i(f,v,h,p,e[r+2],17,606105819),p=i(p,f,v,h,e[r+3],22,-1044525330),h=i(h,p,f,v,e[r+4],7,-176418897),v=i(v,h,p,f,e[r+5],12,1200080426),f=i(f,v,h,p,e[r+6],17,-1473231341),p=i(p,f,v,h,e[r+7],22,-45705983),h=i(h,p,f,v,e[r+8],7,1770035416),v=i(v,h,p,f,e[r+9],12,-1958414417),f=i(f,v,h,p,e[r+10],17,-42063),p=i(p,f,v,h,e[r+11],22,-1990404162),h=i(h,p,f,v,e[r+12],7,1804603682),v=i(v,h,p,f,e[r+13],12,-40341101),f=i(f,v,h,p,e[r+14],17,-1502002290),h=o(h,p=i(p,f,v,h,e[r+15],22,1236535329),f,v,e[r+1],5,-165796510),v=o(v,h,p,f,e[r+6],9,-1069501632),f=o(f,v,h,p,e[r+11],14,643717713),p=o(p,f,v,h,e[r],20,-373897302),h=o(h,p,f,v,e[r+5],5,-701558691),v=o(v,h,p,f,e[r+10],9,38016083),f=o(f,v,h,p,e[r+15],14,-660478335),p=o(p,f,v,h,e[r+4],20,-405537848),h=o(h,p,f,v,e[r+9],5,568446438),v=o(v,h,p,f,e[r+14],9,-1019803690),f=o(f,v,h,p,e[r+3],14,-187363961),p=o(p,f,v,h,e[r+8],20,1163531501),h=o(h,p,f,v,e[r+13],5,-1444681467),v=o(v,h,p,f,e[r+2],9,-51403784),f=o(f,v,h,p,e[r+7],14,1735328473),h=a(h,p=o(p,f,v,h,e[r+12],20,-1926607734),f,v,e[r+5],4,-378558),v=a(v,h,p,f,e[r+8],11,-2022574463),f=a(f,v,h,p,e[r+11],16,1839030562),p=a(p,f,v,h,e[r+14],23,-35309556),h=a(h,p,f,v,e[r+1],4,-1530992060),v=a(v,h,p,f,e[r+4],11,1272893353),f=a(f,v,h,p,e[r+7],16,-155497632),p=a(p,f,v,h,e[r+10],23,-1094730640),h=a(h,p,f,v,e[r+13],4,681279174),v=a(v,h,p,f,e[r],11,-358537222),f=a(f,v,h,p,e[r+3],16,-722521979),p=a(p,f,v,h,e[r+6],23,76029189),h=a(h,p,f,v,e[r+9],4,-640364487),v=a(v,h,p,f,e[r+12],11,-421815835),f=a(f,v,h,p,e[r+15],16,530742520),h=s(h,p=a(p,f,v,h,e[r+2],23,-995338651),f,v,e[r],6,-198630844),v=s(v,h,p,f,e[r+7],10,1126891415),f=s(f,v,h,p,e[r+14],15,-1416354905),p=s(p,f,v,h,e[r+5],21,-57434055),h=s(h,p,f,v,e[r+12],6,1700485571),v=s(v,h,p,f,e[r+3],10,-1894986606),f=s(f,v,h,p,e[r+10],15,-1051523),p=s(p,f,v,h,e[r+1],21,-2054922799),h=s(h,p,f,v,e[r+8],6,1873313359),v=s(v,h,p,f,e[r+15],10,-30611744),f=s(f,v,h,p,e[r+6],15,-1560198380),p=s(p,f,v,h,e[r+13],21,1309151649),h=s(h,p,f,v,e[r+4],6,-145523070),v=s(v,h,p,f,e[r+11],10,-1120210379),f=s(f,v,h,p,e[r+2],15,718787259),p=s(p,f,v,h,e[r+9],21,-343485551),h=n(h,c),p=n(p,u),f=n(f,l),v=n(v,d);return[h,p,f,v]}function u(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function h(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return u(c(l(e),8*e.length))}(h(e))}function f(e,t){return function(e,t){var n,r,i=l(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=c(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=c(o.concat(l(t)),512+8*t.length),u(c(a.concat(r),640))}(h(e),h(t))}function v(e,t,n){return t?n?f(t,e):d(f(t,e)):n?p(e):d(p(e))}e.exports?e.exports=v:t.md5=v}(C)}(ZW);var eq,tq,nq=ZW.exports,rq=function(){function e(t){s(this,e),this.client_=t.client,this.signalChannel_=t.signalChannel,this.log_=PA.createLogger({id:"mix|"+this.client_.getUserId(),userId:t.client.getUserId(),sdkAppId:t.client.getSDKAppId()}),this.isMixing_=!1,this.config_=null,this.data_=null,this.remoteStreamMap_=new Map,this.installEvents()}var t,n,i,o;return u(e,[{key:"isPresetLayoutMode",get:function(){return this.config_&&this.config_.mode===VE.PRESET_LAYOUT}},{key:"installEvents",value:function(){LR.on(oA,this.onStreamSubscribed,this),LR.on(aA,this.onStreamUnsubscribed,this),this.client_.on("stream-removed",this.onStreamRemoved,this)}},{key:"uninstallEvents",value:function(){LR.off(oA,this.onStreamSubscribed,this),LR.off(aA,this.onStreamUnsubscribed,this),this.client_.off("stream-removed",this.onStreamRemoved,this)}},{key:"reset",value:function(){this.uninstallEvents(),this.isMixing_=!1,this.config_=null}},{key:"onStreamSubscribed",value:function(e){var t=e.client,n=e.stream;t===this.client_&&(this.remoteStreamMap_.set(n.getId(),{remoteStream:n,isUsed:!1}),this.isMixing_&&this.hasAvailablePlaceHolder()&&this.startMixTranscode(this.config_))}},{key:"onStreamUnsubscribed",value:function(e){var t=e.client,n=e.stream;t===this.client_&&this.onStreamRemoved({stream:n})}},{key:"onStreamRemoved",value:function(e){var t=e.stream;if(this.remoteStreamMap_.has(t.getId())){var n=this.remoteStreamMap_.get(t.getId()).isUsed;this.remoteStreamMap_.delete(t.getId()),this.isMixing_&&this.isPresetLayoutMode&&n&&this.startMixTranscode(this.config_)}}},{key:"startMixTranscode",value:(o=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.resetIsUsedFlag(),this.config_=t,n=this.getInputParam(t,this.remoteStreamMap_),i=this.getOutputParam(t),o=this.getOutputSessionId({config:t,roomId:this.client_.getRoomId(),userId:this.client_.getUserId()}),!this.isMixing_||!this.data_||o===this.data_.outputSessionId){e.next=10;break}return this.log_.info("startMixTranscode() streamId changed, stop mixing before start"),e.next=10,this.doStopMixTranscode();case 10:return e.next=12,this.doStartMixTranscode({outputSessionId:o,inputParam:n,outputParam:i});case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.resetIsUsedFlag(),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return o.apply(this,arguments)})},{key:"doStartMixTranscode",value:(i=a(r().mark((function e(t){var n,i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.outputSessionId,i=t.inputParam,o=t.outputParam,a={roomId:String(this.client_.getRoomId()),mcuRequestTime:Date.now(),outputSessionId:n,inputParam:i,outputParam:o},this.data_=a,this.log_.info("startMixTranscode: ".concat(JSON.stringify(a))),this.isMixing_=!0,e.prev=5,e.next=8,this.signalChannel_.sendWaitForResponse({command:uP,data:a,timeout:5e3,responseCommand:GO.START_MIX_TRANSCODE_RES,commandDesc:"startMixTranscode"});case 8:if(s=e.sent,c=s.data,u=c.code,l=c.message,0===u){e.next=15;break}throw-102083===u&&(l="Please enable relayed-push in ".concat(pI," and try later, refer to ").concat(vI,"tutorial-26-advanced-publish-cdn-stream.html")),this.log_.error("startMixTranscode failed, errCode: ".concat(u," errMsg: ").concat(l)),this.isMixing_=!1,new vP({code:fP.START_MIX_TRANSCODE_FAILED,message:tR({key:ux,data:{message:l},link:{className:"Client",fnName:"startMixTranscode"}})});case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(5),this.isMixing_=!1,e.t0;case 21:case"end":return e.stop()}}),e,this,[[5,17]])}))),function(e){return i.apply(this,arguments)})},{key:"reStartMixTranscode",value:function(){this.isMixing_&&this.startMixTranscode(this.config_)}},{key:"stopMixTranscode",value:(n=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMixing_){e.next=2;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:dx})});case 2:return e.next=4,this.doStopMixTranscode();case 4:this.resetIsUsedFlag();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"doStopMixTranscode",value:(t=a(r().mark((function e(){var t,n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={mcuRequestTime:Date.now(),outputSessionId:this.data_.outputSessionId,streamType:this.data_.outputParam.streamType},this.log_.info("stopMixTranscode: ".concat(JSON.stringify(t))),e.next=4,this.signalChannel_.sendWaitForResponse({command:lP,data:t,timeout:5e3,responseCommand:GO.STOP_MIX_TRANSCODE_RES,commandDesc:"stopMixTranscode"});case 4:if(n=e.sent,i=n.data,o=i.code,a=i.message,0!==o){e.next=10;break}this.isMixing_=!1,e.next=12;break;case 10:throw this.log_.error("stopMixTranscode failed, errCode: ".concat(o," errMsg: ").concat(a)),new vP({code:fP.STOP_MIX_TRANSCODE_FAILED,message:tR({key:lx,data:{message:a},link:{className:"Client",fnName:"stopMixTranscode"}})});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getOutputSessionId",value:function(e){var t=e.config,n=e.userId,r=e.roomId;return dR(t.streamId)&&t.streamId.length>0?t.streamId:nq("".concat(r,"_").concat(n,"_main"))}},{key:"getInputParam",value:function(e,t){var n=this,r=e.mixUsers.map((function(e){return{userId:e.userId,roomId:String(e.roomId||n.client_.getRoomId()),width:e.width||0,height:e.height||0,locationX:e.locationX||0,locationY:e.locationY||0,zOrder:e.zOrder,streamType:lR(e.streamType)||e.streamType!==JT?0:1,inputType:e.pureAudio?BE.IT_PURE_AUDIO:BE.IT_AUDIO_VIDEO,renderMode:e.renderMode||0}}));return e.mode===VE.PRESET_LAYOUT&&(r.forEach((function(e){if(e.userId===FE.REMOTE){var n=k(t.values()).find((function(e){return!e.isUsed}));n&&(e.userId=n.remoteStream.getUserId(),e.streamType=n.remoteStream.getType()===JT?1:0,n.isUsed=!0)}})),r=r.filter((function(e){return e.userId!==FE.REMOTE}))),r}},{key:"getOutputParam",value:function(e){var t=e.streamId||"";return{streamId:t,streamType:t.length>0?1:0,width:lR(e.videoWidth)?640:e.videoWidth,height:lR(e.videoHeight)?480:e.videoHeight,videoBps:e.videoBitrate||0,fps:e.videoFramerate||15,gop:e.videoGOP||2,audioSampleRate:e.audioSampleRate||48e3,audioBps:e.audioBitrate||64,audioChannels:e.audioChannels||1,backgroundColor:e.backgroundColor||0,backgroundImg:e.backgroundImage||"",extraInfo:"",videoCodec:2,audioCodec:0}}},{key:"hasAvailablePlaceHolder",value:function(){return!!this.isPresetLayoutMode&&this.data_.inputParam.length!==this.config_.mixUsers.length}},{key:"resetIsUsedFlag",value:function(){this.remoteStreamMap_.forEach((function(e){return e.isUsed=!1}))}}]),e}(),iq=function(){function e(t){s(this,e),this.client_=t.client,this.signalChannel_=t.signalChannel,this.isPublishingTencentCDN_=!1,this.publishTencentStreamRetryCount_=0,this.publishTencentStreamId_=void 0,this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1}var t,n,i,o,c;return u(e,[{key:"setSignalChannel",value:function(e){this.signalChannel_=e.signalChannel}},{key:"getIsPublishingTencentCDN",value:function(){return this.isPublishingTencentCDN_}},{key:"getIsPublishingGivenCDN",value:function(){return this.isPublishingGivenCDN_}},{key:"generatePublishCDNStreamId",value:function(e){if(!e){var t="".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_main");return/^[A-Za-z\d_-]*$/.test(t)||(t=nq(t)),"".concat(this.client_.getSDKAppId(),"_").concat(t)}return e}},{key:"startPublishTencentCDN",value:(c=a(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPublishingTencentCDN_=!0,this.publishTencentStreamId_=t.streamId,this.client_.isJoined_){e.next=4;break}return e.abrupt("return");case 4:return n=this.generatePublishCDNStreamId(t.streamId),i={requestTime:Date.now(),sessionId:nq("".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_main")),streamId:n,streamType:0},this.publishTencentStreamRetryCount_=0,e.next=9,this.doStartPublishTencentCDN(i);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"doStartPublishTencentCDN",value:(o=a(r().mark((function e(t){var n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,PA.info("startPublishTencentCDN: "+JSON.stringify(t)),e.next=4,this.signalChannel_.sendWaitForResponseWithRetry({command:oP,data:t,timeout:2e3,responseCommand:GO.START_PUBLISH_TENCENT_CDN_RES,commandDesc:"startPublishCDNStream",retries:2});case 4:if(n=e.sent,i=n.data,o=i.code,a=i.message,0===o){e.next=12;break}throw this.publishTencentStreamId_=void 0,this.isPublishingTencentCDN_=!1,-102083===o&&(a="Please enable relayed-push in ".concat(pI," and try later, refer to ").concat(vI,"tutorial-26-advanced-publish-cdn-stream.html")),PA.error("startPublishTencentCDN failed, errCode: ".concat(o,", errMsg: ").concat(a)),new vP({code:fP.START_PUBLISH_CDN_FAILED,message:tR({key:NC,data:{message:a},link:{className:"Client",fnName:"startPublishCDNStream"}})});case 12:e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.publishTencentStreamId_=void 0,this.isPublishingTencentCDN_=!1,e.t0;case 19:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return o.apply(this,arguments)})},{key:"stopPublishTencentCDN",value:(i=a(r().mark((function e(){var t,n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={requestTime:Date.now(),sessionId:nq("".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_main"))},PA.info("stopPublishTencentCDN: "+JSON.stringify(t)),e.next=4,this.signalChannel_.sendWaitForResponse({command:aP,data:t,timeout:5e3,responseCommand:GO.STOP_PUBLISH_TENCENT_CDN_RES,commandDesc:"stopPublishCDNStream"});case 4:if(n=e.sent,i=n.data,o=i.code,a=i.message,0!==o){e.next=11;break}this.publishTencentStreamId_=void 0,this.isPublishingTencentCDN_=!1,e.next=19;break;case 11:if(-102069!==o){e.next=17;break}PA.warn("stopPublishTencentCDN failed, can not stopPublishTencentCDN in auto relayed-push mode"),this.publishTencentStreamId_=void 0,this.isPublishingTencentCDN_=!1,e.next=19;break;case 17:throw PA.error("stopPublishTencentCDN failed, errCode: ".concat(o," errMsg: ").concat(a)),new vP({code:fP.STOP_PUBLISH_CDN_FAILED,message:tR({key:MC,data:{message:a},link:{className:"Client",fnName:"stopPublishCDNStream"}})});case 19:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"startPublishGivenCDN",value:(n=a(r().mark((function e(t){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={pushRequestTime:Date.now(),pushAppId:t.appId,pushBizId:t.bizId,pushCdnUrl:t.url,pushStreamType:lT,pushStreamId:this.publishTencentStreamId_},PA.info("startPublishGivenCDN: "+JSON.stringify(n)),this.publishGivenCDNData_=n,this.isPublishingGivenCDN_=!0,this.client_.isJoined_){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,this.signalChannel_.sendWaitForResponse({command:sP,data:n,timeout:5e3,responseCommand:GO.START_PUBLISH_GIVEN_CDN_RES,commandDesc:"startPublishCDNStream"});case 9:if(i=e.sent,o=i.data,a=o.code,s=o.message,0===a){e.next=16;break}throw PA.error("startPublishGivenCDN failed, errCode: ".concat(a,", errMsg: ").concat(s)),this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,new vP({code:fP.START_PUBLISH_CDN_FAILED,message:tR({key:NC,data:{message:s},link:{className:"Client",fnName:"startPublishCDNStream"}})});case 16:e.next=23;break;case 18:throw e.prev=18,e.t0=e.catch(6),this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,e.t0;case 23:case"end":return e.stop()}}),e,this,[[6,18]])}))),function(e){return n.apply(this,arguments)})},{key:"stopPublishGivenCDN",value:(t=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.publishGivenCDNData_,n=t.pushAppId,i=t.pushBizId,o=t.pushCdnUrl,a=t.pushStreamType,s={pushRequestTime:Date.now(),pushAppId:n,pushBizId:i,pushCdnUrl:o,pushStreamType:a},PA.info("stopPublishGivenCDN: "+JSON.stringify(s)),e.next=5,this.signalChannel_.sendWaitForResponse({command:cP,data:s,timeout:5e3,responseCommand:GO.STOP_PUBLISH_GIVEN_CDN_RES,commandDesc:"stopPublishCDNStream"});case 5:if(c=e.sent,u=c.data,l=u.code,d=u.message,0!==l){e.next=12;break}this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,e.next=14;break;case 12:throw PA.error("stopPublishGivenCDN failed, errCode: ".concat(l," errMsg: ").concat(d)),new vP({code:fP.STOP_PUBLISH_CDN_FAILED,message:tR({key:MC,data:{message:d},link:{className:"Client",fnName:"stopPublishCDNStream"}})});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleCDNConfigForJoinData",value:function(e){var t,n=e;if(this.isPublishingTencentCDN_){var r={};dR(n)&&(r=JSON.parse(n)),r.Str_uc_params||(r.Str_uc_params={}),r.Str_uc_params.userdefine_streamid_main=this.generatePublishCDNStreamId(this.publishTencentStreamId_),n=JSON.stringify(r)}if(this.isPublishingGivenCDN_){var i=this.publishGivenCDNData_,o=i.pushAppId,a=i.pushBizId,s=i.pushCdnUrl,c=i.pushStreamType,u=i.pushStreamId;t={pushRequestTime:Date.now(),pushAppId:o,pushBizId:a,pushCdnUrl:s,pushStreamType:c,pushStreamId:u}}return{bussinessInfo:n,pushUserCdnInfo:t}}},{key:"reset",value:function(){this.isPublishingTencentCDN_=!1,this.publishTencentStreamRetryCount_=0,this.publishTencentStreamId_=void 0,this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1}}]),e}(),oq=function(){function e(t){s(this,e),this.client_=t.client,this.durationMap_=new Map,this.installEvents()}return u(e,[{key:"installEvents",value:function(){LR.on(oA,this.handleSubscribed,this),LR.on(nA,this.handleStreamTrackUpdated,this),LR.on(aA,this.handleStreamStopped,this),LR.on(cA,this.handleStreamStopped,this)}},{key:"uninstallEvents",value:function(){LR.off(oA,this.handleSubscribed,this),LR.off(nA,this.handleStreamTrackUpdated,this),LR.off(aA,this.handleStreamStopped,this),LR.off(cA,this.handleStreamStopped,this)}},{key:"handleSubscribed",value:function(e){var t=e.client,n=e.stream;if(t===this.client_){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);if(n.hasAudio())if(n.isMainAudioSubscribed){var a=new QW,s=this.durationMap_.get(o);s?this.isRecording(s.audio)||s.audio.push(a):this.durationMap_.set(o,{userId:r,type:i,audio:[a],video:[]})}else this.stopDurationItem(o,zw);if(n.hasVideo())if(i===GT&&n.isMainVideoSubscribed||i===JT&&n.isAuxVideoSubscribed){var c=new QW,u=this.durationMap_.get(o);u?this.isRecording(u.video)||u.video.push(c):this.durationMap_.set(o,{userId:r,type:i,audio:[],video:[c]})}else this.stopDurationItem(o,Ww)}}},{key:"handleStreamStopped",value:function(e){var t=e.client,n=e.stream;if(this.clientHitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);this.stopDurationItem(o,zw),this.stopDurationItem(o,Ww)}}},{key:"handleStreamTrackUpdated",value:function(e){var t=e.client,n=e.userId,r=e.tinyId,i=e.kind,o=e.action;if(this.clientHitTest(t)&&this.client_.getConnections().has(r)){var a=i===Kw?i:GT,s="".concat(n,"_").concat(a);if(o===GE.ADD){var c=this.client_.getConnections().get(r).getSubscribeState();if(i===zw&&!c.audio||i===Ww&&!c.video||i===Kw&&!c.auxiliary)return;var u=new QW,l=this.durationMap_.get(s);l?(i!==zw||this.isRecording(l.audio)||l.audio.push(u),i===zw||this.isRecording(l.video)||l.video.push(u)):this.durationMap_.set(s,{userId:n,type:a,audio:i===zw?[u]:[],video:i===zw?[]:[u]})}else this.stopDurationItem(s,i===zw?zw:Ww)}}},{key:"isRecording",value:function(e){return e.findIndex((function(e){return 0===e.endTime}))>=0}},{key:"stopDurationItem",value:function(e,t){if(this.durationMap_.has(e)){var n=this.durationMap_.get(e)[t].find((function(e){return 0===e.endTime}));n&&n.stop()}}},{key:"clientHitTest",value:function(e){return this.client_===e}},{key:"getDuration",value:function(e,t){return this.durationMap_.has(e)?this.durationMap_.get(e)[t].reduce((function(e,t){return e+t.getDuration()}),0):0}},{key:"getDurationMap",value:function(){return this.durationMap_}},{key:"reset",value:function(){this.durationMap_.clear()}},{key:"destroy",value:function(){this.client_=null,this.uninstallEvents()}}]),e}(),aq=Ei,sq=O,cq=$c.f;aq({target:"Object",stat:!0,forced:sq((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:cq});var uq=5e3,lq={msg_user_info:0,uint32_video_avg_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_avg_bitrate:0,uint32_video_block_time:0,uint32_video_play_time:0,uint32_audio_block_time:0,uint32_audio_play_time:0,uint32_audio_play_db:0,uint32_avg_down_loss:0,uint32_stream_type:0,uint32_video_render_first:0,uint32_video_block_count:0,uint32_audio_block_count:0,uint32_audio_bitrate:0,uint32_video_black_screen_subjective:0,uint32_audio_recv_bitrate:0,uint32_video_external_block_time:0},dq=u((function e(t){s(this,e),this.str_identifier=String(t.userId),this.uint64_tinyid=Number(t.tinyId),this.uint32_role=t.role})),hq=(eq=wW({timeout:500,retries:3}),tq=function(){function e(t){var n=this;s(this,e),this.frameWorkType_=t.frameWorkType||30,this.client_=t.client,this.keyPrefix_="key_point",this.storageKey_="".concat(this.keyPrefix_,"_").concat(this.client_.getUserId()),this.log_=PA.createLogger({id:"kpm|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),Object.getOwnPropertyNames(this.__proto__).forEach((function(e){e.startsWith("handle")&&uR(n[e])&&(n[e]=function(e){var t=e.fn,n=e.context;return a(r().mark((function e(){var i,o,a,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,i=s.length,o=new Array(i),a=0;a<i;a++)o[a]=s[a];return e.next=4,t.apply(n||this,o);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),PA.error("".concat(t.name,"() error observed ")+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}({fn:n[e],context:n}))})),this.initData(),this.installEvents(),this.intervalId_=QD.run(wI,this.setStorage.bind(this),{delay:2e4})}var n,i,o;return u(e,[{key:"initData",value:function(){this.firstPublishedUserList_=[],this.networkQuality_={totalUplinkRTT:0,totalUplinkLoss:0,count:0,totalDownlinkRTTAndLossMap:new Map},this.basicInfo={string_sdk_version:za,uint32_os_type:15,string_device_name:"",string_http_user_agent:navigator.userAgent,string_os_version:"",uint32_avg_rtt:0,uint32_avg_up_loss:0,uint32_scene:"live"===this.client_.getMode()?1:0,uint32_joining_duration:0,uint32_networkType:JE[oR()],uint32_framework:this.frameWorkType_},this.pathJoinRoom_={uint64_start_time:0,uint64_init_audio_start_time:0,uint64_init_audio_end_time:0,uint64_init_camera_start_time:0,uint64_init_camera_end_time:0,uint64_send_request_acc_ip_cmd_start_time:0,uint64_send_request_acc_ip_cmd_end_time:0,uint64_send_request_enter_room_cmd_start_time:0,uint64_send_request_enter_room_cmd_end_time:0,uint64_send_first_video_frame_time:0,uint64_recv_userlist_time:0,uint64_end_time:0,int32_init_audio_ret:0,int32_init_camera_ret:0,int32_send_request_acc_ip_cmd_ret:0,int32_send_request_enter_room_cmd_ret:0,int32_end_ret:0},this.pathLeaveRoom_={uint64_start_time:0,uint64_send_request_exit_room_cmd_start_time:0,uint64_send_request_exit_room_cmd_end_time:0,uint64_end_time:0,int32_send_request_exit_room_cmd_ret:0,int32_end_ret:0},this.pathMainVideoMap_=new Map,this.pathMainAudioMap_=new Map,this.pathAuxiliaryMap_=new Map,this.localStreamStats_={totalVideoBitrate:0,totalVideoFPS:0,totalVideoHeight:0,totalVideoWidth:0,totalAudioLevel:0,videoCount:0,audioLevelCount:0,publishStartTime:0,statsToReport:{uint32_audio_capture_db:0,uint32_video_big_capture_fps:0,uint32_video_big_bitrate:0,uint32_video_big_resolution:0}},this.remoteStreamStatsMap_=new Map}},{key:"installEvents",value:function(){LR.on(NR,this.handleJoinStart,this),LR.on(qR,this.handleWSStart,this),LR.on(GR,this.handleWSEnd,this),LR.on(MR,this.handleJoinSendCMD,this),LR.on(UR,this.handleJoinReceivedCMDResponce,this),LR.on(jR,this.handleJoinSuccess,this),LR.on(VR,this.handleJoinFailed,this),LR.on(zR,this.handleReceivedPublishUserList,this),LR.on(SA,this.handleConnectionStateChanged,this),LR.on(FR,this.handleLeaveStart,this),LR.on($R,this.handleLeaveSuccess,this),LR.on(BR,this.handleLeaveSendCMD,this),LR.on(kA,this.handleSendSubscribeCMD,this),LR.on(eA,this.handleVideoPlaying,this),LR.on(tA,this.handleAudioPlaying,this),LR.on(wA,this.handleNetworkQuality,this),LR.on(HR,this.handleHeartbeatStats,this),LR.on(rA,this.handleRemoteStreamAdded,this),LR.on(iA,this.handleRemoteStreamSubscribeStart,this),LR.on(oA,this.handleRemoteStreamSubscribed,this),LR.on(cA,this.handleRemoteStreamRemoved,this),LR.on(mA,this.handleVideoLoadedData,this),LR.on(vA,this.handlePlayStream,this),LR.on(WR,this.handlePublishStart,this),LR.on(lA,this.handleLocalStreamInitStart,this),LR.on(dA,this.handleLocalStreamInitEnd,this),LR.on(hA,this.handleLocalStreamInitFailed,this)}},{key:"uninstallEvents",value:function(){LR.off(NR,this.handleJoinStart,this),LR.off(qR,this.handleWSStart,this),LR.off(GR,this.handleWSEnd,this),LR.off(MR,this.handleJoinSendCMD,this),LR.off(UR,this.handleJoinReceivedCMDResponce,this),LR.off(zR,this.handleReceivedPublishUserList,this),LR.off(SA,this.handleConnectionStateChanged,this),LR.off(FR,this.handleLeaveStart,this),LR.off($R,this.handleLeaveSuccess,this),LR.off(jR,this.handleJoinSuccess,this),LR.off(VR,this.handleJoinFailed,this),LR.off(BR,this.handleLeaveSendCMD,this),LR.off(kA,this.handleSendSubscribeCMD,this),LR.off(eA,this.handleVideoPlaying,this),LR.off(tA,this.handleAudioPlaying,this),LR.off(wA,this.handleNetworkQuality,this),LR.off(HR,this.handleHeartbeatStats,this),LR.off(rA,this.handleRemoteStreamAdded,this),LR.off(iA,this.handleRemoteStreamSubscribeStart,this),LR.off(oA,this.handleRemoteStreamSubscribed,this),LR.off(cA,this.handleRemoteStreamRemoved,this),LR.off(mA,this.handleVideoLoadedData,this),LR.off(vA,this.handlePlayStream,this),LR.off(WR,this.handlePublishStart,this),LR.off(lA,this.handleLocalStreamInitStart,this),LR.off(dA,this.handleLocalStreamInitEnd,this),LR.off(hA,this.handleLocalStreamInitFailed,this)}},{key:"destroy",value:function(){this.uninstallEvents(),QD.clearTask(this.intervalId_),this.client_=null}},{key:"handleJoinStart",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_start_time&&(this.pathJoinRoom_.uint64_start_time=Date.now(),this.checkStorage())}},{key:"handleWSStart",value:function(e){var t=e.client;this.hitTest(t)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time=Date.now())}},{key:"handleWSEnd",value:function(e){var t=e.client,n=e.error;this.hitTest(t)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time=Date.now(),n&&(this.pathJoinRoom_.int32_send_request_acc_ip_cmd_ret=n instanceof vP?Number(n.getExtraCode()||n.getCode()):fP.UNKNOWN,this.pathJoinRoom_.int32_end_ret=2))}},{key:"handleJoinSendCMD",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time=Date.now())}},{key:"handleJoinReceivedCMDResponce",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time=Date.now(),this.pathJoinRoom_.int32_send_request_enter_room_cmd_ret=e.code,0!==e.code&&(this.pathJoinRoom_.int32_end_ret=3))}},{key:"handleJoinSuccess",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_end_time&&(this.pathJoinRoom_.uint64_end_time=Date.now(),this.pathJoinRoom_.int32_end_ret=0)}},{key:"handleJoinFailed",value:function(e){var t=e.client;this.hitTest(t)&&(this.pathJoinRoom_.uint64_end_time=Date.now(),0===this.pathJoinRoom_.int32_end_ret&&(this.pathJoinRoom_.int32_end_ret=3),this.prepareReport(),this.report())}},{key:"handleReceivedPublishUserList",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_recv_userlist_time&&(this.pathJoinRoom_.uint64_recv_userlist_time=Date.now(),this.firstPublishedUserList_=e.data.data&&e.data.data.userList||[])}},{key:"handleConnectionStateChanged",value:function(e){var t=e.client,n=e.state,r=e.connection;if(this.hitTest(t)&&n===ZT){this.client_.getUplinkConnection()===r&&0===this.pathJoinRoom_.uint64_send_first_video_frame_time&&this.localStreamStats_.publishStartTime>this.pathJoinRoom_.uint64_end_time&&this.localStreamStats_.publishStartTime-this.pathJoinRoom_.uint64_end_time<=100&&(this.pathJoinRoom_.uint64_send_first_video_frame_time=Date.now());var i=this.pathMainVideoMap_.get("".concat(r.getUserId(),"_").concat(GT));i&&0===i.statsToReport.uint64_pc_connected_time&&(i.statsToReport.uint64_pc_connected_time=Date.now())}}},{key:"handleLeaveStart",value:function(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_start_time=Date.now())}},{key:"handleLeaveSuccess",value:function(e){this.hitTest(e.client)&&0===this.pathLeaveRoom_.uint64_end_time&&(this.pathLeaveRoom_.uint64_end_time=Date.now(),0!==this.pathJoinRoom_.uint64_end_time?this.basicInfo.uint32_joining_duration=this.pathLeaveRoom_.uint64_end_time-this.pathJoinRoom_.uint64_end_time:this.log_.warn("pathJoinRoom endTime is 0"),this.report())}},{key:"handleLeaveSendCMD",value:function(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_start_time=Date.now(),this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_end_time=Date.now())}},{key:"handleRemoteStreamAdded",value:function(e){var n=e.client,r=e.stream;if(this.hitTest(n)){var i=r.getUserId(),o=r.getType(),a="".concat(i,"_").concat(o),s=this.remoteStreamStatsMap_.get(a);if(s)s.stream=r;else{var c={userId:i,totalVideoFPS:0,totalVideoBitrate:0,totalAudioLevel:0,totalAudioBitrate:0,totalLoss:0,audioCount:0,audioLevelCount:0,videoCount:0,networkQualityCount:0,streamAddedTime:Date.now(),subscribeStartTime:0,subscribedTime:0,playStreamTime:0,statsToReport:t({},lq),stream:r};c.statsToReport.msg_user_info=new dq({userId:i,tinyId:r.getTinyId(),role:FT}),c.statsToReport.uint32_stream_type=o===GT?2:7,this.remoteStreamStatsMap_.set(a,c)}}}},{key:"handleRemoteStreamSubscribeStart",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i),a=this.remoteStreamStatsMap_.get(o);a&&0===a.subscribeStartTime&&(a.subscribeStartTime=Date.now())}}},{key:"handleSendSubscribeCMD",value:function(e){if(this.hitTest(e.client)){var t=new dq(e),n=Date.now(),r="".concat(e.userId,"_").concat(GT);e.trackState.video&&e.subscribeState.video&&!this.pathMainVideoMap_.has(r)&&this.pathMainVideoMap_.set(r,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_render_first_frame_time:0,uint64_combine_first_frame_time:0,uint64_pc_connected_time:0},userId:e.userId,sendSubscribeCMDTime:n}),e.trackState.audio&&e.subscribeState.audio&&!this.pathMainAudioMap_.has(r)&&this.pathMainAudioMap_.set(r,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_play_first_frame_time:0},userId:e.userId,sendSubscribeCMDTime:n});var i="".concat(e.userId,"_").concat(JT);e.trackState.auxiliary&&e.subscribeState.auxiliary&&!this.pathAuxiliaryMap_.has(i)&&this.pathAuxiliaryMap_.set(i,{sendSubscribeCMDTime:n})}}},{key:"handleRemoteStreamSubscribed",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i),a=this.remoteStreamStatsMap_.get(o);a&&0===a.subscribedTime&&(a.subscribedTime=Date.now(),a.stream=n)}}},{key:"handleRemoteStreamRemoved",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o=this.remoteStreamStatsMap_.get("".concat(r,"_").concat(i));o&&(o.stream=null)}}},{key:"handlePlayStream",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType());if(this.remoteStreamStatsMap_.has(r)){var i=this.remoteStreamStatsMap_.get(r);0===i.playStreamTime&&(i.playStreamTime=Date.now())}}}},{key:"handleVideoLoadedData",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType());if(this.pathMainVideoMap_.has(r)){var i=this.pathMainVideoMap_.get(r);0===i.statsToReport.uint64_combine_first_frame_time&&(i.statsToReport.uint64_combine_first_frame_time=Date.now())}}}},{key:"handleVideoPlaying",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType()),i=Date.now();if(this.pathMainVideoMap_.has(r)){var o=this.pathMainVideoMap_.get(r);if(0===o.statsToReport.uint64_render_first_frame_time&&(o.statsToReport.uint64_render_first_frame_time=i),this.remoteStreamStatsMap_.has(r)){var a=this.remoteStreamStatsMap_.get(r),s=a.statsToReport,c=a.playStreamTime,u=a.subscribedTime;0===s.uint32_video_render_first&&c-u<=100&&(s.uint32_video_render_first=i-o.sendSubscribeCMDTime)}}if(t.getType()===JT&&this.pathAuxiliaryMap_.has(r)&&this.remoteStreamStatsMap_.has(r)){var l=this.remoteStreamStatsMap_.get(r),d=l.statsToReport,h=l.playStreamTime,p=l.subscribedTime;0===d.uint32_video_render_first&&h-p<=100&&(d.uint32_video_render_first=i-this.pathAuxiliaryMap_.get(r).sendSubscribeCMDTime)}}}},{key:"handleAudioPlaying",value:function(e){if(e.stream.isRemote()&&e.stream.getConnection()&&this.hitTest(e.stream.getConnection().getClient())){var t=e.stream.getConnection().getUserId(),n="".concat(t,"_").concat(e.stream.getType());if(this.pathMainAudioMap_.has(n)){var r=this.pathMainAudioMap_.get(n);0===r.statsToReport.uint64_play_first_frame_time&&(r.statsToReport.uint64_play_first_frame_time=Date.now())}}}},{key:"handleNetworkQuality",value:function(e){var t=this;this.hitTest(e.client)&&(this.networkQuality_.totalUplinkLoss+=e.uplinkLoss,this.networkQuality_.totalUplinkRTT+=e.uplinkRTT,this.networkQuality_.count++,e.downlinkLossAndRTTMap.forEach((function(e){var n=e.rtt,r=e.loss,i=e.userId,o=t.networkQuality_.totalDownlinkRTTAndLossMap.get(i);o?(o.totalRTT+=n,o.totalLoss+=r,o.count++):t.networkQuality_.totalDownlinkRTTAndLossMap.set(i,{totalRTT:n,totalLoss:r,count:1})})))}},{key:"handleHeartbeatStats",value:function(e){var t=this;if(this.hitTest(e.client)){var n=e.stats,r=n.msg_up_stream_info,i=n.msg_down_stream_info;if(r.msg_video_status[0]){var o=r.msg_video_status[0],a=o.uint32_video_codec_bitrate,s=o.uint32_video_enc_fps,c=o.uint32_video_width,u=o.uint32_video_height;this.localStreamStats_.totalVideoBitrate+=a,this.localStreamStats_.totalVideoFPS+=s,this.localStreamStats_.totalVideoWidth+=c,this.localStreamStats_.totalVideoHeight+=u,this.localStreamStats_.videoCount++}if(r.msg_audio_status){var l=r.msg_audio_status.audioLevel;Math.floor(100*l)>0&&(this.localStreamStats_.totalAudioLevel+=l,this.localStreamStats_.audioLevelCount++)}i.forEach((function(e){var n=e.msg_user_info,r=e.msg_audio_status,i=e.msg_video_status,o=n.str_identifier;if(i.forEach((function(e){var n=2===e.uint32_video_stream_type,r=7===e.uint32_video_stream_type,i="".concat(o,"_").concat(n?GT:JT);if(t.remoteStreamStatsMap_.has(i)){var a,s,c=t.remoteStreamStatsMap_.get(i);(n&&null!==(a=c.stream)&&void 0!==a&&a.isMainVideoSubscribed||r&&null!==(s=c.stream)&&void 0!==s&&s.isAuxVideoSubscribed)&&(c.totalVideoFPS+=e.uint32_video_receive_fps,c.totalVideoBitrate+=e.uint32_video_codec_bitrate,c.videoCount++,0===c.statsToReport.uint32_video_width&&(c.statsToReport.uint32_video_width=e.uint32_video_width),0===c.statsToReport.uint32_video_height&&(c.statsToReport.uint32_video_height=e.uint32_video_height))}})),r){var a="".concat(o,"_").concat(GT);if(t.remoteStreamStatsMap_.has(a)){var s,c=t.remoteStreamStatsMap_.get(a);null!==(s=c.stream)&&void 0!==s&&s.isMainAudioSubscribed&&(c.totalAudioBitrate+=r.uint32_audio_codec_bitrate,c.audioCount++,Math.floor(100*r.audioLevel)>0&&(c.totalAudioLevel+=r.audioLevel,c.audioLevelCount++))}}}))}}},{key:"handlePublishStart",value:function(e){var t=e.client;this.hitTest(t)&&0===this.localStreamStats_.publishStartTime&&(this.localStreamStats_.publishStartTime=Date.now())}},{key:"handleLocalStreamInitStart",value:function(e){var t=e.audio,n=e.video;t&&0===this.pathJoinRoom_.uint64_init_audio_start_time&&(this.pathJoinRoom_.uint64_init_audio_start_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_start_time&&(this.pathJoinRoom_.uint64_init_camera_start_time=Date.now())}},{key:"handleLocalStreamInitEnd",value:function(e){var t=e.audio,n=e.video;t&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}},{key:"handleLocalStreamInitFailed",value:function(e){var t=e.audio,n=e.video,r=e.error,i=r instanceof vP?r.getExtraCode()||r.getCode():{NotFoundError:1,NotAllowedError:2,NotReadableError:3,OverConstrainedError:4,AbortError:5}[r.name]||fP.UNKNOWN;t&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.int32_init_audio_ret=i,this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.int32_init_camera_ret=i,this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}},{key:"hasVideoFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userId===e&&1&t.flag}))>=0}},{key:"hasAudioFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userId===e&&8&t.flag}))>=0}},{key:"hasAuxFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userId===e&&4&t.flag}))>=0}},{key:"hitTest",value:function(e){return e===this.client_}},{key:"checkStorage",value:(o=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=YD.getItem(this.storageKey_))){e.next=6;break}return e.next=5,this.upload(t);case 5:YD.deleteItem(this.storageKey_);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return o.apply(this,arguments)})},{key:"setStorage",value:function(){this.prepareReport();var e=this.getReportData();0!==e.msg_path_enter_room.uint64_start_time&&YD.setItem(this.storageKey_,e)}},{key:"prepareReport",value:function(){var e=this;if(this.networkQuality_.count>0&&(this.basicInfo.uint32_avg_rtt=Math.floor(this.networkQuality_.totalUplinkRTT/this.networkQuality_.count),this.basicInfo.uint32_avg_up_loss=Math.floor(this.networkQuality_.totalUplinkLoss/this.networkQuality_.count)),this.localStreamStats_.videoCount>0){this.localStreamStats_.statsToReport.uint32_video_big_capture_fps=Math.floor(this.localStreamStats_.totalVideoFPS/this.localStreamStats_.videoCount),this.localStreamStats_.statsToReport.uint32_video_big_bitrate=Math.floor(this.localStreamStats_.totalVideoBitrate/this.localStreamStats_.videoCount);var t=Math.floor(this.localStreamStats_.totalVideoWidth/this.localStreamStats_.videoCount),n=Math.floor(this.localStreamStats_.totalVideoHeight/this.localStreamStats_.videoCount);this.localStreamStats_.statsToReport.uint32_video_big_resolution=t<<16|n}this.localStreamStats_.audioLevelCount>0&&(this.localStreamStats_.statsToReport.uint32_audio_capture_db=Math.floor(this.localStreamStats_.totalAudioLevel/this.localStreamStats_.audioLevelCount*100)),this.remoteStreamStatsMap_.forEach((function(t,n){var r=t.userId;if(e.networkQuality_.totalDownlinkRTTAndLossMap.has(r)){var i=e.networkQuality_.totalDownlinkRTTAndLossMap.get(r),o=i.totalLoss,a=i.count;t.statsToReport.uint32_avg_down_loss=Math.floor(o/a)}t.videoCount>0&&(t.statsToReport.uint32_video_avg_fps=Math.floor(t.totalVideoFPS/t.videoCount),t.statsToReport.uint32_video_avg_bitrate=Math.floor(t.totalVideoBitrate/t.videoCount)),t.audioCount>0&&(t.statsToReport.uint32_audio_recv_bitrate=t.statsToReport.uint32_audio_bitrate=Math.floor(t.totalAudioBitrate/t.audioCount)),t.audioLevelCount>0&&(t.statsToReport.uint32_audio_play_db=Math.floor(t.totalAudioLevel/t.audioLevelCount*100));var s=e.client_.getCallDurationCalculator();s&&(t.statsToReport.uint32_audio_play_time=s.getDuration(n,zw),t.statsToReport.uint32_video_play_time=s.getDuration(n,Ww)),t.statsToReport.uint32_video_render_first=Math.min(t.statsToReport.uint32_video_render_first,uq);var c=e.client_.getBadCaseDetector();if(c){var u=c.getDataFreezeDuration(n),l=u.dataFreeze,d=u.count,h=c.getRenderFreezeDuration(n).renderFreeze;t.statsToReport.uint32_video_block_count=d,t.statsToReport.uint32_video_block_time=Math.min(l,t.statsToReport.uint32_video_play_time),t.statsToReport.uint32_video_external_block_time=Math.min(h,t.statsToReport.uint32_video_play_time),c.isBlackStream(n)&&0===t.statsToReport.uint32_video_avg_fps?t.statsToReport.uint32_video_black_screen_subjective=1:t.statsToReport.uint32_video_black_screen_subjective=0}(0===t.subscribeStartTime||t.subscribeStartTime-t.streamAddedTime>100||0===t.playStreamTime)&&(e.pathMainAudioMap_.delete(n),e.pathMainVideoMap_.delete(n),t.statsToReport.uint32_video_render_first=0)})),this.pathMainAudioMap_.forEach((function(t,n){e.hasAudioFlag(t.userId)?t.statsToReport.uint64_play_first_frame_time-t.statsToReport.uint64_start_enter_time>uq&&(t.statsToReport.uint64_play_first_frame_time=t.statsToReport.uint64_start_enter_time+uq):e.pathMainAudioMap_.delete(n)})),this.pathMainVideoMap_.forEach((function(t,n){e.hasVideoFlag(t.userId)?t.statsToReport.uint64_render_first_frame_time-t.statsToReport.uint64_start_enter_time>uq&&(t.statsToReport.uint64_render_first_frame_time=t.statsToReport.uint64_start_enter_time+uq):e.pathMainVideoMap_.delete(n)})),this.pathJoinRoom_.uint64_end_time-this.pathJoinRoom_.uint64_start_time>uq&&(this.pathJoinRoom_.uint64_end_time=this.pathJoinRoom_.uint64_start_time+uq)}},{key:"getReportData",value:function(){var e=this.client_.getSignalInfo();return{uint32_sdk_app_id:Number(this.client_.getSDKAppId()),msg_user_info:new dq({userId:this.client_.getUserId(),tinyId:this.client_.getTinyId(),role:this.client_.getRole()===$T?FT:BT}),msg_basic_info:this.basicInfo,uint32_acc_ip:bR(e.relayIp),uint32_client_ip:bR(e.clientIp,"small"),uint32_acc_port:0,uint64_timestamp:Date.now(),uint32_seq:Math.floor(Math.random()*Math.pow(2,31)),msg_path_enter_room:this.pathJoinRoom_,msg_path_exit_room:this.pathLeaveRoom_,msg_path_recv_video:k(this.pathMainVideoMap_.values()).map((function(e){return e.statsToReport})),msg_quality_statistics:k(this.remoteStreamStatsMap_.values()).map((function(e){return e.statsToReport})),str_room_name:String(this.client_.getRoomId()),msg_path_recv_audio:k(this.pathMainAudioMap_.values()).map((function(e){return e.statsToReport})),uint32_info_client_ip:bR(e.clientIp,"small"),error_code:[],msg_local_statistics:this.localStreamStats_.statsToReport}}},{key:"report",value:(i=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.getReportData(),e.next=4,this.upload(t);case 4:YD.deleteItem(this.storageKey_),this.initData(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return i.apply(this,arguments)})},{key:"upload",value:(n=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Uw||0===t.msg_path_enter_room.uint64_start_time||[lI,dI,hI].findIndex((function(e){return e===location.host}))>=0)){e.next=2;break}return e.abrupt("return");case 2:return n=Number(this.client_.getSDKAppId()),i=iR(n,NT),e.next=6,OR({url:i,body:JSON.stringify(t)});case 6:if("ok"===(o=e.sent).data){e.next=9;break}throw"key point upload failed: ".concat(o.data);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),e}(),I(tq.prototype,"upload",[eq],Object.getOwnPropertyDescriptor(tq.prototype,"upload"),tq.prototype),tq);function pq(){return function(e,t,n){var i=n.value,o=new Set;return n.value=a(r().mark((function e(){var n,a,s,c,u=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.has(this)){e.next=2;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:JI,data:{name:t}})});case 2:for(e.prev=2,o.add(this),n=u.length,a=new Array(n),s=0;s<n;s++)a[s]=u[s];return e.next=7,i.apply(this,a);case 7:return c=e.sent,o.delete(this),e.abrupt("return",c);case 12:throw e.prev=12,e.t0=e.catch(2),o.delete(this),e.t0;case 16:case"end":return e.stop()}}),e,this,[[2,12]])}))),n}}function fq(e){return vq.apply(this,arguments)}function vq(){return vq=a(r().mark((function e(t){var n,i,o,a,s,c,u,l,d,h,p,f,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,i=t.sdkAppId,o=t.useStringRoomId,a=t.roomId,s=t.userSig,c={delta:0,count:[1,1],msg:[]},e.prev=2,(u=new FormData).append("userId",String(n)),u.append("sdkAppId",String(i)),u.append("isStrGroupId",o),u.append("groupId",String(a)),u.append("sdkVersion",za),u.append("userSig",String(s)),l=yR(),e.next=13,bq(u,c,i);case 13:return d=e.sent,c.delta=yR()-l,mq({stat:c,userId:n}),e.abrupt("return",d);case 19:throw e.prev=19,e.t0=e.catch(2),h=vR(e.t0)?e.t0[0]:e.t0,p=hR(h.code)?h.code:0,f="get websocket url failed: ".concat(h.message.includes("timeout")?"timeout":h.message),v=new vP({code:fP.SCHEDULE_FAILED,extraCode:p,message:tR({key:gC,data:{error:f,code:p}})}),PA.error(v),mq({stat:c,userId:n,roomId:a,error:v}),v;case 28:case"end":return e.stop()}}),e,null,[[2,19]])}))),vq.apply(this,arguments)}function mq(e){var t=e.stat,n=e.userId,r=e.error;r?iD.logFailedEvent({eventType:DE,error:r,userId:n}):iD.logSuccessEvent({eventType:DE,delta:t.delta,userId:n}),iD.uploadEvent({log:"stat-schedule:"+JSON.stringify(t),userId:n})}function gq(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lT;return t=rR(e)?n===lT?rI:iI:n===lT?tI:nI,"https://".concat(t,"/api/v1/config")}function _q(e,t,n){return new Promise((function(r,i){OR({url:e,body:t,timeout:n.timeout}).then((function(e){0===e.data.code?r(e.data.data):i({code:e.data.code,message:e.data.msg})})).catch(i)}))}var yq=function(e,t){return CA({retryFunction:_q,settings:{retries:3,timeout:0},onError:t,onRetrying:e})};function bq(e,t,n){return new Promise((function(r,i){var o,a=null;(o=[yq((function(e){return t.count[0]=e+1}),(function(e,n){t.msg[0]=e.message,a||n()}))(gq(n,lT),e,{get timeout(){return 1e3*sR(2+t.count[0])}}),yq((function(e){return t.count[1]=e+1}),(function(e,n){t.msg[1]=e.message,a||n()}))(gq(n,dT),e,{get timeout(){return 1e3*sR(2+t.count[1])}})],new Promise((function(e,t){var n=[];o.forEach((function(r){r.then(e).catch((function(e){n.push(e),n.length===o.length&&t(n)}))}))}))).then((function(e){r(a=e)})).catch(i)}))}var Sq,kq,wq,Tq,Eq,Iq,Cq,xq,Rq,Aq,Oq,Pq,Dq,Lq,Nq,Mq,Uq,jq,Vq,Fq,Bq,$q,Hq,zq,Wq=function(){function e(){s(this,e)}return u(e,[{key:"call",value:function(e,t){return uR(this[e])?this[e](t):Promise.reject(new vP({code:fP.INVALID_PARAMETER,message:tR({key:Vx,data:{name:e}})}))}},{key:"updatePrivateMapKey",value:function(e){var t=e.privateMapKey;return e.client.setProperty("privateMapKey",t),Promise.resolve()}}]),e}(),qq=new Wq,Gq=(Sq=pq(),kq=pW(dW.CLIENT.join),wq=pq(),Tq=wW({retries:3}),Eq=pq(),Iq=pW.apply(void 0,k(dW.CLIENT.publish)),Cq=pq(),xq=pW(dW.CLIENT.unpublish),Rq=pW.apply(void 0,k(dW.CLIENT.subscribe)),Aq=pW(dW.CLIENT.unsubscribe),Oq=pq(),Pq=pW(dW.CLIENT.switchRole),Dq=pW(dW.CLIENT.startPublishCDNStream),Lq=pW(dW.CLIENT.startMixTranscode),Nq=hW.apply(void 0,k(dW.CLIENT.sendSEIMessage)),jq={timesInSecond:30,maxSizeInSecond:8e3,getSize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0].byteLength}},Vq=jq.timesInSecond,Fq=jq.maxSizeInSecond,Bq=jq.getSize,Mq=function(e,t,n){var r=n.value,i=new Map;return LR.on(KR,(function(e){var t=e.client;return i.delete(t)})),n.value=function(){var e=i.get(this);e||(e={callCountInSecond:0,timestamp:0,totalSizeInSecond:0},i.set(this,e)),0===e.timestamp?e.timestamp=Date.now():Date.now()-e.timestamp>1e3&&(e.timestamp=Date.now(),e.callCountInSecond=0,e.totalSizeInSecond=0);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(Bq&&(e.totalSizeInSecond+=Bq.apply(void 0,o)),0!==e.timestamp&&Date.now()-e.timestamp<1e3&&(e.callCountInSecond>=Vq||e.totalSizeInSecond>Fq))throw new vP({code:fP.INVALID_OPERATION,message:tR({key:Jx,data:{isTimes:e.callCountInSecond>=Vq,isSize:e.totalSizeInSecond>Fq,name:t,timesInSecond:Vq,maxSizeInSecond:Fq}})});return e.callCountInSecond++,r.apply(this,o)},n},Uq=function(){function e(t){var n,r;s(this,e),this.name_=aI,this.mode_=t.mode,this.sdpSemantics_=jE,lR(t.sdpSemantics)?function(){var e;if(lR(window.RTCRtpTransceiver))return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var t=null,n=!1;try{(t=new RTCPeerConnection({sdpSemantics:UE})).addTransceiver(zw),n=!0}catch(Yq){}return null===(e=t)||void 0===e||e.close(),n}()&&(this.sdpSemantics_=UE):this.sdpSemantics_=t.sdpSemantics,this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.log_=PA.createLogger({id:"c".concat(t.seq,"|").concat(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_}),this.userSig_=t.userSig,this.roomId_=0,this.useStringRoomId_=t.useStringRoomId||!1,this.pureAudioPushMode_=null,this.version_=t.version,this.log_.info("using sdpSemantics: "+this.sdpSemantics_),this.signalChannel_=null,this.role_=$T,this.privateMapKey_="",this.tinyId_=0,this.env_="",this.proxy_=null,this.connections_=new Map,this.mutedStates_=new Map,this.userMap_=new Map,this.syncUserListInterval_=-1,this.localStream_=null,this.localAuxStream_=null,this.uplinkConnection_=null,this.emitter_=xR(new DR,this.name_),this.isJoined_=!1,this.heartbeat_=-1,this.lastHeartBeatTime_=-1,this.stats_=new $L(this),this.joinTimeout_=-1,this.changeBigSmallRecords_=new Map,this.networkQuality_=null,this.badCaseDetector_=null,this.networkType_=oR(),this.autoSubscribe_=!!lR(t.autoSubscribe)||t.autoSubscribe,this.joinedTimestamp_=0,this.joinOptions_={},this.basis_=(r={browser:Fw().name+"/"+Fw().version,os:TL(),displayResolution:EL(),isScreenShareSupported:hL(),isWebRTCSupported:nL(),isGetUserMediaSupported:IL(),isWebAudioSupported:CL(),isWebSocketsSupported:"WebSocket"in window&&2===window.WebSocket.CLOSING,isWebCodecSupported:(n={AudioDecoder:!1,AudioEncoder:!1,VideoDecoder:!1,VideoEncoder:!1,ImageDecoder:!1},lR(window.AudioDecoder)||(n.AudioDecoder=!0),lR(window.AudioEncoder)||(n.AudioEncoder=!0),lR(window.VideoDecoder)||(n.VideoDecoder=!0),lR(window.VideoEncoder)||(n.VideoEncoder=!0),lR(window.ImageDecoder)||(n.ImageDecoder=!0),n),isMediaSessionSupported:"mediaSession"in navigator&&!lR(navigator.mediaSession.setActionHandler),isWebTransportSupported:!lR(window.WebTransport)},navigator.userAgent.includes("miniProgram")&&(r.browser="mini/".concat(r.browser)),r),this.initBussinessInfo_(t),this.publishedCDN_=!1,this.publishCDNData_=null,this.mixedMCU_=!1,this.mixTranscodeData_=null,this.checkSystemResult_=null,this.enableAudioVolumeEvaluation_=!1,this.audioVolumeIntervalId_=null,this.mixTranscodeManager_=null,this.publishCDNManager_=new iq({client:this}),this.keyPointManager_=new hq({client:this,frameWorkType:t.frameWorkType}),this.isPublishing_=!1,this.isEnableSmallStream_=!1,this.smallStreamConfig_={bitrate:100,frameRate:15,height:120,width:160},this.turnServers_=[],this.iceTransportPolicy_=t.iceTransportPolicy,this.schedule_={domains:null,iceServers:null,iceTransportPolicy:null},this.enableAutoPlayDialog_=!!lR(t.enableAutoPlayDialog)||t.enableAutoPlayDialog,this.enableMultiAuxStream_=!lR(t.enableMultiAuxStream)&&t.enableMultiAuxStream,this.signalInfo_={},this.enableSEI_=!lR(t.enableSEI)&&t.enableSEI,this.isDestroyed_=!1}var n,i,o,c,l,d,h,p,f,v,m,g,_,y,b,w,T,I,C,x,R,A,O,P,D,L,N;return u(e,[{key:"initBussinessInfo_",value:function(e){this.bussinessInfo_=e.bussinessInfo;var t={};if(dR(e.bussinessInfo)&&(t=JSON.parse(e.bussinessInfo)),!lR(e.pureAudioPushMode)){if(!Number.isInteger(Number(e.pureAudioPushMode)))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:cC})});this.pureAudioPushMode_=e.pureAudioPushMode,t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.pure_audio_push_mod=this.pureAudioPushMode_}if(!lR(e.streamId)){if(!(dR(e.streamId)&&String(e.streamId)&&String(e.streamId).length<=64))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:uC})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_streamid_main=e.streamId}if(!lR(e.userDefineRecordId)){if(null===e.userDefineRecordId.match(/^[A-Za-z0-9_-]{1,64}$/gi))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:lC})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_record_id=e.userDefineRecordId}if(!lR(e.userDefinePushArgs)){if(!(dR(e.userDefinePushArgs)&&String(e.userDefinePushArgs)&&String(e.userDefinePushArgs).length<=256))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:dC})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_push_args=e.userDefinePushArgs}nD(t)||(this.bussinessInfo_=JSON.stringify(t))}},{key:"schedule",value:(N=a(r().mark((function e(n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fq({userId:this.userId_,sdkAppId:this.sdkAppId_,roomId:n,useStringRoomId:this.useStringRoomId_,version:this.version_,userSig:this.userSig_});case 2:(i=e.sent)&&(this.log_.info("schedule: ".concat(JSON.stringify(i))),this.schedule_=t(t({},this.schedule_),i),LR.emit(QR,this.schedule_));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getSignalChannelUrl",value:function(){var e={mainUrl:"",backupUrl:""},t=nR();return t?e.mainUrl=e.backupUrl="wss://".concat(t,".rtc.qq.com"):this.proxy_?e.mainUrl=e.backupUrl=this.proxy_:Array.isArray(this.schedule_.domains)&&this.schedule_.domains.length>0&&(e.mainUrl=e.backupUrl="wss://".concat(this.schedule_.domains[0]),this.schedule_.domains[1]&&(e.backupUrl="wss://".concat(this.schedule_.domains[1]))),e}},{key:"getUserId",value:function(){return this.userId_}},{key:"getUserSig",value:function(){return this.userSig_}},{key:"getRole",value:function(){return this.role_}},{key:"getSignalInfo",value:function(){return this.signalInfo_}},{key:"getRoomId",value:function(){return this.roomId_}},{key:"getSDKAppId",value:function(){return this.sdkAppId_}},{key:"getTinyId",value:function(){return this.tinyId_}},{key:"getIceTransportPolicy",value:function(){return this.iceTransportPolicy_||this.schedule_.iceTransportPolicy||"all"}},{key:"initialize",value:function(){var e=this;this.log_.info("setup signal channel");var t=this.getSignalChannelUrl(),n=t.mainUrl,r=t.backupUrl;return this.signalChannel_=new oD({sdkAppId:this.sdkAppId_,userId:this.userId_,userSig:this.userSig_,url:n,backupUrl:r,client:this}),this.networkQuality_||(this.networkQuality_=new HL({connections:this.connections_,signalChannel:this.signalChannel_,userId:this.userId_,client:this}),this.networkQuality_.on(DL.NETWORK_QUALITY,(function(t){e.emitter_.emit(DL.NETWORK_QUALITY,t)}))),this.deviceDetector_||(this.deviceDetector_=new zL({client:this})),this.subscriptionManager_||(this.subscriptionManager_=new _W({client:this})),this.badCaseDetector_||(this.badCaseDetector_=new XW({client:this,stats:this.stats_})),this.callDurationCalculator_||(this.callDurationCalculator_=new oq({client:this})),this.mixTranscodeManager_||(this.mixTranscodeManager_=new rq({client:this,signalChannel:this.signalChannel_})),this.publishCDNManager_&&this.publishCDNManager_.setSignalChannel({signalChannel:this.signalChannel_}),this.signalChannel_.on(jO,(function(t){e.log_.info("SignalChannel state changed from ".concat(t.prevState," to ").concat(t.state)),e.emitter_.emit(DL.CONNECTION_STATE_CHANGED,t)})),this.signalChannel_.on(FO,(function(t){e.reset(),e.emitter_.emit(DL.ERROR,t)})),this.signalChannel_.once(MO,(function(t){e.tinyId_=t.signalInfo.tinyId,LR.emit(GR,{client:e})})),this.signalChannel_.on(GO.PEER_JOIN,this.onPeerJoin,this),this.signalChannel_.on(GO.PEER_LEAVE,this.onPeerLeave,this),this.signalChannel_.on(GO.UPDATE_REMOTE_MUTE_STAT,(function(t){Date.now()-e.lastHeartBeatTime_>=1e4&&e.doHeartbeat(),LR.emit(zR,{client:e,data:t.data}),e.onPublishedUserList(t.data),e.onUpdateRemoteMuteStat(t.data)})),this.signalChannel_.on(GO.CLIENT_BANNED,(function(t){var n,r=t.data.data.reason;if(iD.uploadEvent({log:"stat-banned:".concat(r),userId:e.userId_}),r===hT)n="you got banned by the admin";else if(r===pT)n="duplicated userId joining the room";else if(r===vT)n="the room has been disbanded by the admin",r=r.replace("_","-");else if(r===fT)return e.log_.warn("".concat(r," last heart beat time: ").concat(e.lastHeartBeatTime_," interval: ").concat(Date.now()-e.lastHeartBeatTime_,", visibility: ").concat(document.visibilityState)),void e.reJoin();e.log_["kick"===r?"error":"info"]("user was banned because of [".concat(r,"]")),e.reset(),e.emitter_.emit(DL.CLIENT_BANNED,{reason:r,message:tR({key:OC,data:{message:n,reason:r}})||r})})),LR.emit(qR,{client:this}),this.signalChannel_.connect()}},{key:"preJoin",value:(L=a(r().mark((function e(t){var n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.joinOptions_=t,e.next=3,uL();case 3:if(this.checkSystemResult_=e.sent,this.checkDestroy(),(n=nR())||(n=RT,this.proxy_&&(this.proxy_.startsWith(CT)?n=AT:this.proxy_.startsWith(xT)&&(n=OT))),this.env_=n,iD.setConfig({env:n,sdkAppId:this.sdkAppId_,userId:this.userId_,roomId:t.roomId}),this.uploadTrtcStats(),i=this.checkSystemResult_.detail,o=i.isH264EncodeSupported,a=i.isVp8EncodeSupported,nL()&&(o||a)){e.next=13;break}throw new vP({code:fP.NOT_SUPPORTED,message:tR({key:Cx})});case 13:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{key:"join",value:(D=a(r().mark((function e(t){var n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yR(),LR.emit(NR,{client:this,roomId:t.roomId}),ZP(this.userId_,{eventId:NP,eventDesc:"joining room",timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_}),e.next=5,this.preJoin(t);case 5:return e.abrupt("return",new Promise(function(){var e=a(r().mark((function e(o,a){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.joinReject_=a,e.prev=1,i.proxy_||i.schedule_.domains){e.next=5;break}return e.next=5,i.schedule(t.roomId);case 5:return i.checkDestroy(),e.next=8,i.initialize(t);case 8:return e.next=10,i.doJoin(t);case 10:i.signalInfo_=i.signalChannel_.getSignalInfo(),LR.emit(jR,{client:i}),i.joinedTimestamp_=yR(),iD.logSuccessEvent({userId:i.userId_,eventType:uE,delta:i.joinedTimestamp_-n}),iD.logSuccessEvent({userId:i.userId_,eventType:cE}),iD.uploadEvent({log:"stat-autoplay-dialog:".concat(i.enableAutoPlayDialog_),userId:i.userId_}),iD.uploadEvent({log:"stat-conv-".concat(Uw,"-").concat(location.hostname),userId:i.userId_}),o(),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(1),LR.emit(VR,{client:i,error:e.t0}),iD.logFailedEvent({userId:i.userId_,eventType:cE,error:e.t0}),i.reset(),a(e.t0);case 26:i.joinReject_=null;case 27:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"checkDestroy",value:function(){if(this.isDestroyed_)throw new vP({code:fP.INVALID_OPERATION,message:tR({key:cx,data:{funName:"join"}})})}},{key:"uploadTrtcStats",value:(P=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d,h,p,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xq.getMicrophones();case 3:i=e.sent,t=i&&i.length,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,e.next=12,Xq.getCameras();case 12:o=e.sent,n=o&&o.length,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(9);case 18:a={microphone:t,camera:n},s=this.checkSystemResult_.detail,c=s.isH264EncodeSupported,u=s.isVp8EncodeSupported,l=s.isH264DecodeSupported,d=s.isVp8DecodeSupported,h={webRTC:this.basis_.isWebRTCSupported,getUserMedia:this.basis_.isGetUserMediaSupported,webSocket:this.basis_.isWebSocketsSupported,screenShare:this.basis_.isScreenShareSupported,webAudio:this.basis_.isWebAudioSupported,h264Encode:c,h264Decode:l,vp8Encode:u,vp8Decode:d},p={browser:this.basis_.browser,os:this.basis_.os,trtc:h,devices:a},f={isWebCodecSupported:this.basis_.isWebCodecSupported,isMediaSessionSupported:this.basis_.isMediaSessionSupported,isWebTransportSupported:this.basis_.isWebTransportSupported},iD.uploadEvent({log:"trtcstats-"+JSON.stringify(p),userId:this.userId_}),this.log_.info("TrtcStats-"+JSON.stringify(p)),iD.uploadEvent({log:"trtcadvancedstats-"+JSON.stringify(f),userId:this.userId_});case 26:case"end":return e.stop()}}),e,this,[[0,7],[9,16]])}))),function(){return P.apply(this,arguments)})},{key:"doJoin",value:function(e){var t=this;return new Promise((function(n,r){t.roomId_=e.roomId,lR(e.role)||(t.role_=e.role),lR(e.privateMapKey)||(t.privateMapKey_=e.privateMapKey),t.log_.info("Join() => joining room: ".concat(e.roomId," useStringRoomId: ").concat(t.useStringRoomId_," mode: ").concat(t.mode_," role: ").concat(t.role_));var i={roomId:String(e.roomId),useStringRoomId:t.useStringRoomId_,privateMapKey:t.privateMapKey_,trtcRole:t.role_===$T?FT:BT,trtcScene:t.mode_===VT?jT:UT,sdpSemantics:t.sdpSemantics_,version:AR(t.version_),ua:navigator&&navigator.userAgent||"",autoSubscribe:t.autoSubscribe_,terminalType:Mk?4:Dk?2:Ok?3:uw?12:cw?5:lw?13:1,netType:JE[oR()],bussinessInfo:t.bussinessInfo_};if(t.publishCDNManager_){var o=t.publishCDNManager_.handleCDNConfigForJoinData(t.bussinessInfo_),a=o.bussinessInfo,s=o.pushUserCdnInfo;Object.assign(i,{bussinessInfo:a,pushUserCdnInfo:s})}t.log_.debug("join room signal data: ".concat(JSON.stringify(i))),t.joinTimeout_=setTimeout((function(){t.log_.error("join room timeout observed"),r(new vP({code:fP.JOIN_ROOM_FAILED,message:tR({key:mC})}))}),5e3),LR.emit(MR,{client:t}),t.signalChannel_.once(UO,(function(e){t.clearJoinTimeout(),LR.emit(GR,{client:t,error:e}),r(e)})),t.signalChannel_.send(QO,i),t.signalChannel_.once(GO.JOIN_ROOM_RESULT,(function(e){t.clearJoinTimeout();var i=e.data,o=i.code,a=i.message,s=i.data;t.onPublishedUserList({data:{userList:s.publishers}}),LR.emit(UR,{client:t,code:o}),0===o?(t.isJoined_=!0,t.log_.info("Join room success, start heartbeat"),t.startHeartbeat(),t.badCaseDetector_&&t.badCaseDetector_.start(),t.syncUserList(),t.startSyncUserListInterval(),n()):(t.log_.error("Join room failed result: "+o+" error: "+a),r(new vP({code:fP.JOIN_ROOM_FAILED,extraCode:o,message:tR({key:gC,data:{error:a,code:o}})})))}))}))}},{key:"reJoin",value:(O=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_){e.next=3;break}return this.log_.warn("reJoin abort"),e.abrupt("return");case 3:return this.isJoined_=!1,e.prev=4,this.log_.warn("reJoin pending: ".concat(this.joinOptions_.roomId)),this.subscriptionManager_&&this.subscriptionManager_.markAllStream(),this.signalChannel_.close(),e.next=10,this.signalChannel_.connect();case 10:return e.next=12,this.doJoin(t(t({},this.joinOptions_),{},{role:this.role_,privateMapKey:this.privateMapKey_}));case 12:this.log_.warn("reJoin success"),iD.logSuccessEvent({userId:this.userId_,eventType:lE}),this.checkConnectionsToReconnect(),this.republish(),this.mixTranscodeManager_&&this.mixTranscodeManager_.reStartMixTranscode(),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(4),this.log_.warn("reJoin fail "+e.t0),this.reset(),iD.logFailedEvent({userId:this.userId_,eventType:lE,error:e.t0}),this.emitter_.emit(DL.ERROR,new vP({code:fP.JOIN_ROOM_FAILED,message:tR({key:_C,data:{roomId:this.joinOptions_.roomId}})}));case 25:case"end":return e.stop()}}),e,this,[[4,19]])}))),function(){return O.apply(this,arguments)})},{key:"republish",value:function(){var e=this;if(this.uplinkConnection_&&this.localStream_&&!this.uplinkConnection_.getIsReconnecting()){this.log_.warn("republish pending");var t=this.localStream_;this.doUnpublish(t).then((function(){return e.publish(t)})).then((function(){return e.log_.warn("republish success")})).catch((function(t){return e.log_.warn("republish fail "+t)}))}}},{key:"leave",value:(A=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return LR.emit(FR,{client:this}),ZP(this.userId_,{eventId:MP,eventDesc:"leaving room",timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_}),e.prev=2,e.next=5,this.doHeartbeat();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:this.doLeave(),LR.emit($R,{client:this}),iD.logSuccessEvent({userId:this.userId_,eventType:dE}),t=Math.floor((yR()-this.joinedTimestamp_)/1e3),iD.logSuccessEvent({userId:this.userId_,eventType:hE,delta:t});case 14:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return A.apply(this,arguments)})},{key:"doLeave",value:function(){this.isJoined_&&(LR.emit(BR,{client:this}),this.log_.info("leave() => leaving room"),this.signalChannel_.send(XO),this.reset())}},{key:"clearNetworkQuality",value:function(){this.networkQuality_&&(this.networkQuality_.stop(),this.networkQuality_=null)}},{key:"closeConnections",value:function(){var e=this;this.connections_.forEach((function(t){e.closeDownLink(t.getTinyId())}))}},{key:"clearJoinTimeout",value:function(){clearTimeout(this.joinTimeout_),this.joinTimeout_=-1}},{key:"destroy",value:function(){var e,t,n;if(this.isJoined_)throw this.log_.warn(Yx.INVALID_DESTROY),new vP({code:fP.INVALID_OPERATION,message:tR({key:yC})});this.isDestroyed_||(this.log_.info("destroy client"),this.joinReject_&&(this.joinReject_(new vP({code:fP.INVALID_OPERATION,message:tR({key:cx,data:{funName:"join"}})})),this.clearJoinTimeout(),this.reset()),this.off("*"),null===(e=this.callDurationCalculator_)||void 0===e||e.destroy(),null===(t=this.keyPointManager_)||void 0===t||t.destroy(),null===(n=this.deviceDetector_)||void 0===n||n.destroy(),this.callDurationCalculator_=null,this.keyPointManager_=null,this.deviceDetector_=null,this.badCaseDetector_=null,this.publishCDNManager_=null,this.isDestroyed_=!0,LR.emit(KR,{client:this}))}},{key:"reset",value:function(){this.keyPointManager_&&this.keyPointManager_.prepareReport(),this.mixTranscodeManager_&&(this.mixTranscodeManager_.reset(),this.mixTranscodeManager_=null),this.publishCDNManager_&&this.publishCDNManager_.reset(),this.userMap_.clear(),this.stopSyncUserListInterval(),this.stopHeartbeat(),this.closeConnections(),this.mutedStates_.clear(),this.clearNetworkQuality(),this.badCaseDetector_&&this.callDurationCalculator_&&this.uploadAllCallStats(),this.closeUplink(),this.isJoined_=!1,this.signalChannel_&&(this.log_.info("destroying SignalChannel"),this.signalChannel_.close(),this.signalChannel_=null),this.stats_.reset()}},{key:"startSyncUserListInterval",value:function(){-1===this.syncUserListInterval_&&(this.syncUserListInterval_=QD.run(wI,this.syncUserList.bind(this)))}},{key:"stopSyncUserListInterval",value:function(){QD.clearTask(this.syncUserListInterval_),this.syncUserListInterval_=-1}},{key:"syncUserList",value:(R=a(r().mark((function e(){var t,n=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getUserList();case 3:t=e.sent,0!==this.userMap_.size&&this.userMap_.forEach((function(e){t.findIndex((function(t){return t.userId===e.userId}))<0&&(n.log_.info("peer leave detected: ".concat(e.userId)),n.cleanUser({userId:e.userId,tinyId:e.tinyId}))})),t.forEach((function(e){var t=e.userId;n.userMap_.has(t)||t===n.userId_||(n.userMap_.set(t,e),n.emitter_.emit(DL.PEER_JOIN,{userId:t}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn("sync user list failed: "+e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return R.apply(this,arguments)})},{key:"getUserList",value:function(){return this.signalChannel_?this.signalChannel_.sendWaitForResponse({command:dP,responseCommand:GO.USER_LIST_RES,enableLog:!1,timeout:2e3}).then((function(e){var t=e.data,n=t.code,r=t.message;if(0===n)return(t.data&&t.data.userList||[]).map((function(e){var t=e.userId,n=e.srcTinyId,r=e.role;return new YW({userId:t,tinyId:n,role:r})}));throw tR({key:Ux,data:{signalResponse:GO.USER_LIST_RES,code:n,message:r}})})):[]}},{key:"publish",value:(x=a(r().mark((function e(t){var n,i,o,a,s,c,u,l,d=this,h=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:{isAuxiliary:!1},t.setPublishState(QE),this.isPublishing_=!0,i=yR(),LR.emit(WR,{client:this,stream:t}),o=n.isAuxiliary,a=o?Kw:lT,s=t.getScreen(),this.log_.info("publish() => publishing ".concat(s?qw+" ":"").concat(a," stream ").concat(t.getId())),c=this.uplinkConnection_,e.prev=10,c||((c=new JW({userId:this.userId_,tinyId:this.tinyId_,client:this,isUplink:!0,signalChannel:this.signalChannel_,enableSEI:this.enableSEI_})).initialize(),c.on(PL.ERROR,(function(e){var t=e.getCode();t!==fP.ICE_TRANSPORT_ERROR&&(t===fP.UPLINK_RECONNECTION_FAILED&&d.closeUplink(),d.emitter_.emit(DL.ERROR,e))}))),t.setConnection(c),e.next=15,c.publish(t,o);case 15:this.log_.info("local ".concat(s?qw+" ":"").concat(a," stream is published")),this.isPublishing_=!1,o?this.localAuxStream_=t:(this.localStream_=t,this.deviceDetector_&&this.deviceDetector_.setLocalStream(this.localStream_),this.localStream_.getBeautyStatus()&&this.log_.info("beauty stream is published successfully")),t.setPublishState(XE),t.setClient(this,o),this.uplinkConnection_=c,u=yR(),l=u-i,iD.logSuccessEvent({userId:this.userId_,eventType:pE}),iD.logSuccessEvent({userId:this.userId_,eventType:fE,delta:l}),t.hasAudio()&&ZP(this.userId_,{eventId:gP,eventDesc:"publish audio track",timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_}),t.hasVideo()&&ZP(this.userId_,{eventId:mP,eventDesc:"publish video track",timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_}),this.networkQuality_&&this.networkQuality_.setUplinkConnection(this.uplinkConnection_),LR.emit(uA,{localStream:t,isAuxiliary:o,client:this}),this.notPublishWithoutH264Supported_=!1,e.next=41;break;case 32:throw e.prev=32,e.t0=e.catch(10),e.t0 instanceof vP&&e.t0.getCode()===fP.NOT_SUPPORTED_H264&&(this.notPublishWithoutH264Supported_=!0),t.setPublishState(KE),c.close(),this.log_.error("failed to publish stream "+e.t0),this.isPublishing_=!1,iD.logFailedEvent({userId:this.userId_,eventType:pE,error:e.t0}),e.t0;case 41:case"end":return e.stop()}}),e,this,[[10,32]])}))),function(e){return x.apply(this,arguments)})},{key:"unpublish",value:(C=a(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.uplinkConnection_){e.next=2;break}return e.abrupt("return");case 2:return n=t===this.localAuxStream_,i=t.getScreen(),this.log_.info("unpublish() => unpublishing local ".concat(i?qw+" ":"").concat(n?Kw:lT," stream")),e.prev=5,e.next=8,this.uplinkConnection_.unpublish(t);case 8:t.setClient(null),t.setConnection(null),n?this.localAuxStream_=null:(this.localStream_=null,t.hasAudio()&&ZP(this.userId_,{eventId:yP,eventDesc:"unpublish audio track",timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_}),t.hasVideo()&&ZP(this.userId_,{eventId:_P,eventDesc:"unpublish video track",timestamp:rg(),userId:this.userId_,tinyId:this.tinyId_})),this.localStream_||this.localAuxStream_||this.closeUplink(),iD.logSuccessEvent({userId:this.userId_,eventType:vE}),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(5),iD.logFailedEvent({userId:this.userId_,eventType:vE,error:e.t0}),e.t0;case 19:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(e){return C.apply(this,arguments)})},{key:"closeUplink",value:function(){this.uplinkConnection_&&(this.uplinkConnection_.close(),this.uplinkConnection_=null,this.networkQuality_&&this.networkQuality_.setUplinkConnection(null),this.localStream_&&(this.localStream_.setClient(null),this.localStream_.setConnection(null),this.localStream_=null),this.localAuxStream_&&(this.localAuxStream_.setClient(null),this.localAuxStream_.setConnection(null),this.localAuxStream_=null),this.deviceDetector_&&this.deviceDetector_.setLocalStream(null))}},{key:"closeDownLink",value:function(e){var t=this.connections_.get(e);t&&(t.getIsReconnecting()&&t.stopReconnection(),this.subscriptionManager_&&this.subscriptionManager_.delete(t.getUserId()),t.close(),this.connections_.delete(e),this.mutedStates_.delete(e))}},{key:"subscribe",value:(I=a(r().mark((function e(t,n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("subscribe() => subscribe to [".concat(t.getUserId(),"] ").concat(t.getType()," stream with options: ").concat(JSON.stringify(n))),lR(n)&&(n={audio:!0,video:!0}),lR(n.video)&&(n.video=!0),lR(n.audio)&&(n.audio=!0),e.prev=4,i=t.getConnection(),LR.emit(iA,{client:this,stream:t}),e.next=9,i.subscribe(t,n);case 9:this.subscriptionManager_&&this.subscriptionManager_.addSubscriptionRecord(t.getUserId(),t,n),this.notSubscribeWithoutH264Supported_=!1,iD.logSuccessEvent({userId:this.userId_,eventType:mE}),e.next=21;break;case 14:throw e.prev=14,e.t0=e.catch(4),(o=e.t0 instanceof vP?e.t0.getCode():fP.UNKNOWN)===fP.NOT_SUPPORTED_H264&&(this.notSubscribeWithoutH264Supported_=!0),o===fP.REMOTE_STREAM_NOT_EXIST?(a=new vP({code:fP.API_CALL_ABORTED,message:tR({key:Qx,data:{message:e.t0.message,stream:t}})}),this.log_.warn(a)):(a=new vP({code:o,message:tR({key:IC,data:{message:e.t0.message,stream:t}})}),this.log_.error(a)),iD.logFailedEvent({userId:this.userId_,eventType:mE,error:a}),a;case 21:case"end":return e.stop()}}),e,this,[[4,14]])}))),function(e,t){return I.apply(this,arguments)})},{key:"unsubscribe",value:(T=a(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("unsubscribe() => unsubscribe to [".concat(t.getUserId(),"] ").concat(t.getType()," stream")),e.prev=1,n=t.getConnection(),e.next=5,n.unsubscribe(t);case 5:this.subscriptionManager_&&this.subscriptionManager_.addUnsubscriptionRecord(t.getUserId(),t),LR.emit(aA,{client:this,stream:t}),iD.logSuccessEvent({userId:this.userId_,eventType:gE}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),iD.logFailedEvent({userId:this.userId_,eventType:gE,error:e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return T.apply(this,arguments)})},{key:"switchRole",value:(w=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.role_!==t){e.next=2;break}return e.abrupt("return");case 2:if(t!==HT||!this.localStream_){e.next=5;break}return e.next=5,this.unpublish(this.localStream_);case 5:return this.log_.info("switchRole() => switch role to: "+t),e.next=8,this.doSwitchRole(t);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"doSwitchRole",value:function(e){var t,n,r=this,i={command:hP,data:{role:e===$T?FT:BT,privateMapKey:this.privateMapKey_},responseCommand:GO.SWITCH_ROLE_RES,retries:(null===(t=this.schedule_.config)||void 0===t||null===(n=t.retries)||void 0===n?void 0:n.switchRole)||1};return this.log_.info("switchRole signal data: "+JSON.stringify(i.data)),this.signalChannel_.sendWaitForResponseWithRetry(i).then((function(t){var n=t.data,i=n.code,o=n.message;if(0!==i)throw new vP({code:fP.SWITCH_ROLE_FAILED,message:tR({key:AC,data:{errMsg:o,errCode:i}})});r.role_=e})).catch((function(e){throw e instanceof vP&&e.getCode()===fP.API_CALL_TIMEOUT&&(e=new vP({code:fP.SWITCH_ROLE_FAILED,message:tR({key:RC})})),r.log_.error(e),e}))}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"getRemoteMutedState",value:function(){var e=this,n=[];return this.mutedStates_.forEach((function(r,i,o){var a=e.connections_.get(i);a&&n.push(t({userId:a.getUserId()},r))})),n}},{key:"getTransportStats",value:(b=a(r().mark((function e(){var t,n,i,o,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={rtt:0,downlinksRTT:{}},!this.uplinkConnection_){e.next=6;break}return e.next=4,this.stats_.getSenderStats(this.uplinkConnection_);case 4:n=e.sent,t.rtt=n.rtt;case 6:i=E(this.connections_),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=17;break}return(a=S(o.value,2))[0],s=a[1],e.next=13,this.stats_.getReceiverStats(s);case 13:c=e.sent,t.downlinksRTT[c.userId]=c.rtt;case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e,this,[[7,19,22,25]])}))),function(){return b.apply(this,arguments)})},{key:"getLocalAudioStats",value:(y=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:n=e.sent,t[this.userId_]={bytesSent:n.audio.bytesSent,packetsSent:n.audio.packetsSent};case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"getLocalVideoStats",value:(_=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0,framesEncoded:0,framesSent:0,frameWidth:0,frameHeight:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:n=e.sent,t[this.userId_]={bytesSent:n.video.bytesSent,packetsSent:n.video.packetsSent,framesEncoded:n.video.framesEncoded,framesSent:n.video.framesSent,frameWidth:n.video.frameWidth,frameHeight:n.video.frameHeight};case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"getRemoteAudioStats",value:(g=a(r().mark((function e(){var t,n,i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=E(this.connections_),e.prev=2,n.s();case 4:if((i=n.n()).done){e.next=13;break}return(o=S(i.value,2))[0],a=o[1],s=a.getDelay(),c=s.audioDelay,e.next=9,this.stats_.getReceiverStats(a);case 9:(u=e.sent).hasAudio&&(t[u.userId]={bytesReceived:u.audio.bytesReceived,packetsReceived:u.audio.packetsReceived,packetsLost:u.audio.packetsLost,end2EndDelay:c});case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this,[[2,15,18,21]])}))),function(){return g.apply(this,arguments)})},{key:"getRemoteVideoStats",value:(m=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:GT,n={},i=E(this.connections_),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=15;break}return(a=S(o.value,2))[0],s=a[1],e.next=9,this.stats_.getReceiverStats(s);case 9:c=e.sent,u=s.getDelay(),l=u.videoDelay,t===GT&&c.hasVideo&&(n[c.userId]={bytesReceived:c.video.bytesReceived,packetsReceived:c.video.packetsReceived,packetsLost:c.video.packetsLost,framesDecoded:c.video.framesDecoded,frameWidth:c.video.frameWidth,frameHeight:c.video.frameHeight,end2EndDelay:l}),t===JT&&c.hasAuxiliary&&(n[c.userId]={bytesReceived:c.auxiliary.bytesReceived,packetsReceived:c.auxiliary.packetsReceived,packetsLost:c.auxiliary.packetsLost,framesDecoded:c.auxiliary.framesDecoded,frameWidth:c.auxiliary.frameWidth,frameHeight:c.auxiliary.frameHeight,end2EndDelay:l});case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),i.e(e.t0);case 20:return e.prev=20,i.f(),e.finish(20);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,this,[[3,17,20,23]])}))),function(){return m.apply(this,arguments)})},{key:"getSdpSemantics",value:function(){return this.sdpSemantics_}},{key:"getIceServers",value:function(){return 0===this.turnServers_.length&&this.schedule_.iceServers?this.schedule_.iceServers:this.turnServers_}},{key:"getConnections",value:function(){return this.connections_}},{key:"getMutedStates",value:function(){return this.mutedStates_}},{key:"startHeartbeat",value:function(){-1===this.heartbeat_&&(this.log_.info("startHeartbeat..."),this.heartbeat_=QD.run(wI,this.doHeartbeat.bind(this),{delay:2e3}))}},{key:"stopHeartbeat",value:function(){-1!==this.heartbeat_&&(this.log_.info("stopHeartbeat"),QD.clearTask(this.heartbeat_),this.heartbeat_=-1,this.lastHeartBeatTime_=-1)}},{key:"doHeartbeat",value:(v=a(r().mark((function e(){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.badCaseDetector_.getMonitorFreeze(),e.next=3,this.stats_.getStatsReport({uplinkConnection:this.uplinkConnection_,downlinkConnections:this.connections_,freezeMap:n});case 3:if(i=e.sent,LR.emit(HR,{client:this,stats:i}),this.badCaseDetector_.resetMonitor(),this.signalChannel_){e.next=8;break}return e.abrupt("return");case 8:o=this.signalChannel_.isConnected()?eD(this.userId_):[],a=t(t({str_sdk_version:this.version_,uint64_datetime:(new Date).getTime(),msg_user_info:{str_identifier:this.userId_,uint64_tinyid:this.tinyId_},msg_device_info:{uint32_terminal_type:15,str_device_name:navigator.platform,str_os_version:"",uint32_net_type:JE[this.networkType_]}},i),{},{msg_event_msg:o}),this.signalChannel_.send(YO,a),s=Date.now(),this.lastHeartBeatTime_>0&&s-this.lastHeartBeatTime_>1e4&&this.log_.warn("heartbeat took ".concat(s-this.lastHeartBeatTime_)),this.lastHeartBeatTime_=s,!this.isRelayChanged_&&this.isRelayMaybeFailed()&&(this.reJoin(),this.isRelayChanged_=!0);case 15:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"onRemoteStreamAdded",value:function(e){var t=e.content,n=t.userId,r=t.tinyId,i=t.audio,o=t.bigVideo,a=t.auxVideo,s=t.smallVideo;if(null!==n){this.userMap_.has(n)||(this.userMap_.set(n,new YW({userId:n,tinyId:r,role:$T})),this.emitter_.emit(DL.PEER_JOIN,{userId:n}));var c=this.connections_.get(r);if(c){if(c.getIsReconnecting())return;this.log_.warn("duplicated stream-added observed, rebuild the connection"),c.close(),this.connections_.delete(r)}var u={audio:i,video:o,auxiliary:a,smallVideo:s};this.log_.info("remote peer [".concat(n,"] published stream. trackState: ").concat(JSON.stringify(u))),this.createDownlinkConnection({userId:n,tinyId:r,trackState:u})}else this.log_.warn("received null userId on stream added")}},{key:"createDownlinkConnection",value:function(e){var t=this,n=e.userId,r=e.tinyId,i=e.trackState,o=new KW({userId:n,tinyId:r,client:this,isUplink:!1,signalChannel:this.signalChannel_,autoSubscribe:this.autoSubscribe_,trackState:i,enableSEI:this.enableSEI_});this.connections_.set(r,o),this.installDownlinkEvents(o,n,r),this.autoSubscribe_?(o.initialize(),o.connect().catch((function(){!o.getMainStream()&&o.hasMainStream()&&t.initRemoteStream({type:GT,userId:n,downlinkConnection:o}),!o.getAuxStream()&&o.hasAuxStream()&&t.initRemoteStream({type:JT,userId:n,downlinkConnection:o})}))):(o.hasMainStream()&&this.initRemoteStream({type:GT,userId:n,downlinkConnection:o}),o.hasAuxStream()&&this.initRemoteStream({type:JT,userId:n,downlinkConnection:o}))}},{key:"initRemoteStream",value:function(e){var t=e.type,n=e.userId,r=e.downlinkConnection,i=new gW({type:t,userId:n,client:this});i.setConnection(r),r.setRemoteStream(t===GT?zT:WT,i),i.setIsStreamAddedEventEmitted(!0),LR.emit(rA,{client:this,stream:i}),this.emitter_.emit(DL.STREAM_ADDED,{stream:i})}},{key:"installDownlinkEvents",value:function(e,t,n){var r=this;e.on(PL.SEI_MESSAGE,(function(e){r.emitter_.emit(DL.SEI_MESSAGE,e)})),e.on(PL.STREAM_ADDED,(function(e){e.stream.setIsStreamAddedEventEmitted(!0),LR.emit(rA,{client:r,stream:e.stream}),r.emitter_.emit(DL.STREAM_ADDED,{stream:e.stream})})),e.on(PL.STREAM_REMOVED,(function(e){r.changeBigSmallRecords_.delete(e.stream.getUserId()),e.stream.stop(),e.stream.setIsStreamAddedEventEmitted(!1),r.subscriptionManager_&&r.subscriptionManager_.deleteAutoRecoveryFlag(e.stream.getUserId(),e.stream.getType()),LR.emit(cA,{client:r,stream:e.stream}),r.emitter_.emit(DL.STREAM_REMOVED,{stream:e.stream})})),e.on(PL.STREAM_UPDATED,(function(e){LR.emit(sA,{client:r,stream:e.stream}),r.emitter_.emit(DL.STREAM_UPDATED,{stream:e.stream})})),e.on(PL.STREAM_SUBSCRIBED,(function(e){LR.emit(oA,{client:r,stream:e.stream}),r.emitter_.emit(DL.STREAM_SUBSCRIBED,{stream:e.stream})})),e.on(PL.ERROR,(function(e){var t=e.getCode();t!==fP.ICE_TRANSPORT_ERROR&&(t===fP.DOWNLINK_RECONNECTION_FAILED&&r.closeDownLink(n),r.emitter_.emit(DL.ERROR,e))}))}},{key:"onPeerJoin",value:function(e){var t=e.data.data,n=t.srcTinyId,r=t.userId,i=t.role;this.userMap_.has(r)||(this.userMap_.set(r,new YW({userId:r,tinyId:n,role:i})),this.emitter_.emit(DL.PEER_JOIN,{userId:r}))}},{key:"onPeerLeave",value:function(e){var t=e.data.data,n=t.srcTinyId,r=t.userId,i=t.reason,o=void 0===i?0:i;this.log_.info("peer leave [".concat(r,"]: ").concat(SI[o])),this.cleanUser({userId:r,tinyId:n})}},{key:"cleanUser",value:function(e){var t=e.userId,n=e.tinyId;this.userMap_.delete(t),this.closeDownLink(n),this.emitter_.emit(DL.PEER_LEAVE,{userId:t})}},{key:"onPublishedUserList",value:function(e){var t=this;try{var n=e.data.userList.map((function(e){return e.userId}));this.connections_.forEach((function(e){var r=e.getUserId(),i=e.getTinyId();n.findIndex((function(e){return e===r}))<0&&(t.log_.info("peer unpublished detected [".concat(r,"]")),t.closeDownLink(i))})),e.data.userList.forEach((function(e){var n=e.userId,r=e.srcTinyId,i=e.flag;if(n!==t.userId_){var o=!!(1&i),a=!!(8&i),s=!!(4&i),c=!!(2&i),u=t.connections_.get(r);if(t.changeBigSmallRecords_.has(n)&&(c||o)&&t.checkSubscribeBigSmallVideo(u,c),u){var l=u.getTrackState(),d=l.audio,h=l.video,p=l.auxiliary,f=l.smallVideo;!h&&o&&LR.emit(nA,{client:t,tinyId:r,userId:n,action:GE.ADD,kind:Ww}),!d&&a&&LR.emit(nA,{client:t,tinyId:r,userId:n,action:GE.ADD,kind:zw}),!p&&s&&LR.emit(nA,{client:t,tinyId:r,userId:n,action:GE.ADD,kind:Kw}),!f&&c&&LR.emit(nA,{client:t,tinyId:r,userId:n,action:GE.ADD,kind:Qw}),h&&!o&&LR.emit(nA,{client:t,tinyId:r,userId:n,action:GE.REMOVE,kind:Ww}),d&&!a&&LR.emit(nA,{client:t,tinyId:r,userId:n,action:GE.REMOVE,kind:zw}),p&&!s&&LR.emit(nA,{client:t,tinyId:r,userId:n,action:GE.REMOVE,kind:Kw}),f&&!c&&LR.emit(nA,{client:t,tinyId:r,userId:n,action:GE.REMOVE,kind:Qw})}else t.log_.info("peer published detected [".concat(n,"]")),t.onRemoteStreamAdded({content:{audio:a,bigVideo:o,auxVideo:s,smallVideo:c,userId:n,tinyId:r}})}}))}catch(Yq){}}},{key:"onUpdateRemoteMuteStat",value:function(e){var t=this,n=e.data;(n&&n.userList||[]).forEach((function(e){var n=e.srcTinyId,r=e.userId;if(0!==n&&n!==t.tinyId_){var i=t.connections_.get(n);if(i){var o=i.getMainStream();if(o&&o.getIsStreamAddedEventEmitted()){var a=!!(1&e.flag),s=!!(8&e.flag),c=!!(2&e.flag),u=!!(64&e.flag),l=!!(16&e.flag),d=t.mutedStates_.get(n);if(void 0===d)return t.mutedStates_.set(n,{hasAudio:s,hasVideo:a,hasSmall:c,audioMuted:u,videoMuted:l}),a?l?t.emitter_.emit(DL.MUTE_VIDEO,{userId:r}):t.emitter_.emit(DL.UNMUTE_VIDEO,{userId:r}):t.emitter_.emit(DL.MUTE_VIDEO,{userId:r}),void(s?u?t.emitter_.emit(DL.MUTE_AUDIO,{userId:r}):t.emitter_.emit(DL.UNMUTE_AUDIO,{userId:r}):t.emitter_.emit(DL.MUTE_AUDIO,{userId:r}));var h=!u&&s;(!d.audioMuted&&d.hasAudio)!==h&&(h?t.emitter_.emit(DL.UNMUTE_AUDIO,{userId:r}):t.emitter_.emit(DL.MUTE_AUDIO,{userId:r}));var p=!l&&a;(!d.videoMuted&&d.hasVideo)!==p&&(p?t.emitter_.emit(DL.UNMUTE_VIDEO,{userId:r}):t.emitter_.emit(DL.MUTE_VIDEO,{userId:r})),t.mutedStates_.set(n,{hasAudio:s,hasVideo:a,hasSmall:c,audioMuted:u,videoMuted:l})}}else t.mutedStates_.delete(n)}}))}},{key:"getEnv",value:function(){return this.env_}},{key:"getSubscriptionManager",value:function(){return this.subscriptionManager_}},{key:"startPublishCDNStream",value:(f=a(r().mark((function e(){var t,n=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{},this.log_.info("startPublishCDNStream params: ".concat(JSON.stringify(t),"; isJoined: ").concat(this.isJoined_,"; isPublished: ").concat(!!this.localStream_)),this.localStream_){e.next=4;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:PC})});case 4:return e.next=6,this.publishCDNManager_.startPublishTencentCDN(t);case 6:if(!(t.appId&&t.bizId&&t.url)){e.next=9;break}return e.next=9,this.publishCDNManager_.startPublishGivenCDN(t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"stopPublishCDNStream",value:(p=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publishCDNManager_.getIsPublishingTencentCDN()){e.next=2;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:DC})});case 2:return this.log_.info("stopPublishCDNStream"),e.next=5,this.publishCDNManager_.stopPublishTencentCDN();case 5:if(!this.publishCDNManager_.getIsPublishingGivenCDN()){e.next=8;break}return e.next=8,this.publishCDNManager_.stopPublishGivenCDN();case 8:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"startMixTranscode",value:(h=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_&&this.mixTranscodeManager_){e.next=2;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:UC})});case 2:return lR(t.mode)&&(t.mode=VE.MANUAL),e.prev=3,this.log_.info("startMixTranscode with config ".concat(JSON.stringify(t))),iD.uploadEvent({log:"mix-transcode-mode:".concat(t.mode),userId:this.userId_}),e.next=8,this.mixTranscodeManager_.startMixTranscode(t);case 8:iD.logSuccessEvent({userId:this.userId_,eventType:AE}),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(3),iD.logFailedEvent({userId:this.userId_,eventType:AE,error:e.t0}),e.t0;case 15:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e){return h.apply(this,arguments)})},{key:"stopMixTranscode",value:(d=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_&&this.mixTranscodeManager_){e.next=2;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:jC})});case 2:return e.prev=2,e.next=5,this.mixTranscodeManager_.stopMixTranscode();case 5:iD.logSuccessEvent({userId:this.userId_,eventType:OE}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),iD.logFailedEvent({userId:this.userId_,eventType:OE,error:e.t0}),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return d.apply(this,arguments)})},{key:"getSystemResult",value:function(){return this.checkSystemResult_}},{key:"enableAudioVolumeEvaluation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!hR(t))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:VC})});if(this.log_.info("enableAudioVolumeEvaluation with interval: "+t),t<=0)return this.enableAudioVolumeEvaluation_=!1,QD.clearTask(this.audioVolumeIntervalId_),void(this.audioVolumeIntervalId_=null);t=Math.floor(Math.max(t,16)),LR.emit(XR,{interval:t}),this.audioVolumeIntervalId_&&(QD.clearTask(this.audioVolumeIntervalId_),this.audioVolumeIntervalId_=null),this.enableAudioVolumeEvaluation_=!0,this.audioVolumeIntervalId_=QD.run(TI,(function(){var t=[];if(e.localStream_){var n=Math.floor(100*e.localStream_.getAudioLevel());t.push({userId:e.userId_,audioVolume:n,stream:e.localStream_})}e.connections_.forEach((function(e){var n=e.getSubscribedMainStream();if(n){var r=Math.floor(100*n.getAudioLevel());t.push({userId:e.getUserId(),audioVolume:r,stream:n})}})),e.emitter_.emit(DL.AUDIO_VOLUME,{result:t})}),{fps:1e3/t,backgroundTask:n})}},{key:"callExperimentalAPI",value:function(e,n){return qq.call(e,t({client:this},n))}},{key:"setProperty",value:function(e,t){var n="".concat(e,"_");lR(this[n])||(this[n]=t)}},{key:"uploadAllCallStats",value:function(){var e=this;this.callDurationCalculator_.getDurationMap().forEach((function(t,n){var r={userId:t.userId,type:t.type,duration:e.callDurationCalculator_.getDuration(n,Ww),dataFreeze:e.badCaseDetector_.getDataFreezeDuration(n).dataFreeze,renderFreeze:e.badCaseDetector_.getRenderFreezeDuration(n).renderFreeze};iD.uploadEvent({log:"callStats-"+JSON.stringify(r),userId:e.userId_})})),this.badCaseDetector_.stop(),this.callDurationCalculator_.reset()}},{key:"enableSmallStream",value:(l=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublished()&&!this.isPublishing_){e.next=2;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:FC})});case 2:if(!xL()){e.next=7;break}this.setIsEnableSmallStream(!0),this.log_.info("SmallStream successfully enabled"),e.next=8;break;case 7:throw new vP({code:fP.INVALID_OPERATION,message:tR({key:$C})});case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"disableSmallStream",value:(c=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublished()&&!this.isPublishing_){e.next=2;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:BC})});case 2:this.setIsEnableSmallStream(!1),this.log_.info("SmallStream successfully disabled");case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"setSmallStreamProfile",value:function(e){var t=this;e&&e.framerate&&(e.frameRate=e.framerate),Object.keys(this.smallStreamConfig_).forEach((function(n){e[n]&&(t.smallStreamConfig_[n]=e[n])})),this.log_.info("setSmallStreamProfile: bitrate=".concat(this.smallStreamConfig_.bitrate,", frameRate=").concat(this.smallStreamConfig_.frameRate,", height=").concat(this.smallStreamConfig_.height,", width=").concat(this.smallStreamConfig_.width));var n=this.smallStreamConfig_,r=n.width,i=n.height,o=n.bitrate,a=n.frameRate;if(r<0||i<0||o<0||a<0)throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:HC})})}},{key:"setRemoteVideoStreamType",value:(o=a(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof gW){e.next=2;break}throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:zC})});case 2:if(t.getConnection()){e.next=4;break}throw new vP({code:fP.INVALID_OPERATION,message:tR({key:EC})});case 4:if(t.getType()!==JT){e.next=6;break}return e.abrupt("return");case 6:e.t0=n,e.next=e.t0===YE||e.t0===ZE?9:12;break;case 9:return e.next=11,this.changeVideoType(t,n);case 11:case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"changeVideoType",value:(i=a(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.getUserId(),o={stream:t,options:{video:n===YE,smallVideo:n===ZE},isSubscribing:!1,reSubscribeCount:10},this.changeBigSmallRecords_.set(i,o),this.log_.info("set [".concat(i,"] ").concat(t.getType()," stream video prefer type: ").concat(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"checkSubscribeBigSmallVideo",value:(n=a(r().mark((function e(t,n){var i,o,a,s,c,u,l,d,h,p,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isBigStreamSubscribed||t.isSmallStreamSubscribed){e.next=2;break}return e.abrupt("return");case 2:if(i=t.getUserId(),o=this.changeBigSmallRecords_.get(i)||{},a=t.getSubscribeState(),s=a.video,c=a.smallVideo,u=o.stream,l=o.options,d=o.isSubscribing,h=o.reSubscribeCount,!(l.video&&s||l.smallVideo&&c&&n)){e.next=8;break}return e.abrupt("return");case 8:if(!d){e.next=10;break}return e.abrupt("return");case 10:if(p={video:l.video,smallVideo:l.smallVideo},!(n&&t.isBigStreamSubscribed||t.isSmallStreamSubscribed)){e.next=30;break}if(e.prev=12,!(l&&u&&!d&&h>=1)){e.next=23;break}return o.isSubscribing=!0,o.reSubscribeCount=h-1,f=u.getConnection(),!n&&f.isSmallStreamSubscribed&&(p={video:!0,smallVideo:!1}),e.next=20,null==f?void 0:f.subscribe(u,p);case 20:this.log_.info("change [".concat(i,"] to ").concat(p.smallVideo?"small":"big"," video successfully. count ").concat(10-o.reSubscribeCount,".")),o.isSubscribing=!1,o.reSubscribeCount=10;case 23:e.next=30;break;case 25:e.prev=25,e.t0=e.catch(12),this.log_.info("change [".concat(i,"] to ").concat(p.smallVideo?"small":"big"," video failed. count ").concat(10-o.reSubscribeCount,".")),o.isSubscribing=!1,0===h&&this.changeBigSmallRecords_.delete(i);case 30:case"end":return e.stop()}}),e,this,[[12,25]])}))),function(e,t){return n.apply(this,arguments)})},{key:"setIsEnableSmallStream",value:function(e){this.isEnableSmallStream_=e}},{key:"getIsEnableSmallStream",value:function(){return this.isEnableSmallStream_}},{key:"smallStreamConfig",get:function(){return this.smallStreamConfig_}},{key:"isPublished",value:function(){return!!this.localStream_}},{key:"getUplinkConnection",value:function(){return this.uplinkConnection_}},{key:"getLocalStream",value:function(){return this.localStream_}},{key:"getMode",value:function(){return this.mode_}},{key:"getBadCaseDetector",value:function(){return this.badCaseDetector_}},{key:"getCallDurationCalculator",value:function(){return this.callDurationCalculator_}},{key:"getIsJoined",value:function(){return this.isJoined_}},{key:"getAllConnections",value:function(){var e=k(this.connections_.values());return this.uplinkConnection_&&e.push(this.uplinkConnection_),e}},{key:"isRelayMaybeFailed",value:function(){var e=this.getAllConnections();if(0===e.length)return!1;for(var t=0;t<e.length;t++)if(e[t].getReconnectionCount()<6)return!1;return!0}},{key:"getUseStringRoomId",value:function(){return this.useStringRoomId_}},{key:"checkConnectionsToReconnect",value:function(){var e=this;this.getAllConnections().forEach((function(t){if(!t.getIsReconnecting()){var n=t.getPeerConnection();n&&n.connectionState===rE&&(e.log_.warn("[".concat(t.getUserId(),"] pc is closed but not reconnect")),t.startReconnection())}}))}},{key:"getEnableAutoPlayDialog",value:function(){return this.enableAutoPlayDialog_}},{key:"sendSEIMessage",value:function(e,t){this.uplinkConnection_.sendSEI(e,t)}},{key:"setProxyServer",value:function(e){if(this.log_.info("set proxy server: ".concat(JSON.stringify(e))),dR(e)){if(!e.startsWith("wss://"))throw new vP({code:fP.INVALID_PARAMETER,message:tR({key:hC})});this.proxy_=e}else if(aR(e)){var t=e.websocketProxy,n=e.loggerProxy;t&&(this.proxy_=t),n&&MT(n)}}},{key:"setTurnServer",value:function(e){this.log_.info("set turn server: "+JSON.stringify(e));var t=[];Array.isArray(e)?e.forEach((function(e){return t.push(_R(e))})):aR(e)&&t.push(_R(e)),this.turnServers_=t}}]),e}(),I(Uq.prototype,"join",[Sq,kq],Object.getOwnPropertyDescriptor(Uq.prototype,"join"),Uq.prototype),I(Uq.prototype,"leave",[wq],Object.getOwnPropertyDescriptor(Uq.prototype,"leave"),Uq.prototype),I(Uq.prototype,"getUserList",[Tq],Object.getOwnPropertyDescriptor(Uq.prototype,"getUserList"),Uq.prototype),I(Uq.prototype,"publish",[Eq,Iq],Object.getOwnPropertyDescriptor(Uq.prototype,"publish"),Uq.prototype),I(Uq.prototype,"unpublish",[Cq,xq],Object.getOwnPropertyDescriptor(Uq.prototype,"unpublish"),Uq.prototype),I(Uq.prototype,"subscribe",[Rq],Object.getOwnPropertyDescriptor(Uq.prototype,"subscribe"),Uq.prototype),I(Uq.prototype,"unsubscribe",[Aq],Object.getOwnPropertyDescriptor(Uq.prototype,"unsubscribe"),Uq.prototype),I(Uq.prototype,"switchRole",[Oq,Pq],Object.getOwnPropertyDescriptor(Uq.prototype,"switchRole"),Uq.prototype),I(Uq.prototype,"startPublishCDNStream",[Dq],Object.getOwnPropertyDescriptor(Uq.prototype,"startPublishCDNStream"),Uq.prototype),I(Uq.prototype,"startMixTranscode",[Lq],Object.getOwnPropertyDescriptor(Uq.prototype,"startMixTranscode"),Uq.prototype),I(Uq.prototype,"sendSEIMessage",[Nq,Mq],Object.getOwnPropertyDescriptor(Uq.prototype,"sendSEIMessage"),Uq.prototype),Uq),Jq=0,Kq=0,Qq=($q=hW(dW.TRTC.createClient),Hq=hW(dW.TRTC.createStream),zq=function(){function e(){s(this,e),this.name_=oI,this.VERSION=za,this.Logger={loggerManager:PA,LogLevel:yI,setLogLevel:function(e){PA.setLogLevel(e),e<=1&&eR()},enableUploadLog:function(){PA.enableUploadLog()},disableUploadLog:function(){PA.warn("disableUploadLog"),PA.disableUploadLog()}}}var n,i,o,c,l;return u(e,[{key:"checkSystemRequirements",value:(l=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uL();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"isScreenShareSupported",value:function(){return hL()}},{key:"isSmallStreamSupported",value:function(){return xL()}},{key:"getDevices",value:(c=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bL()&&!yL()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind!==aT||e.deviceId!=_I})).map((function(e,t){var n=e.label;e.label||(n=e.kind+"_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"getCameras",value:(o=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bL()&&!yL()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind===sT})).map((function(e,t){var n=e.label;e.label||(n="camera_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"getMicrophones",value:(i=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bL()&&!yL()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind===aT&&e.deviceId!==_I})).map((function(e,t){var n=e.label;e.label||(n="microphone_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"getSpeakers",value:(n=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bL()&&!yL()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return"audiooutput"===e.kind})).map((function(e,t){var n=e.label;e.label||(n="speaker_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"createClient",value:function(e){DA&&(DA=!1,PA.getLogLevel()!=Xq.Logger.LogLevel.NONE&&(console.info("******************************************************************************"),console.info("*   TRTC Web SDK"),console.info("*   API Document: "+"".concat(vI,"index.html")),console.info("*   Changelog: https://cloud.tencent.com/document/product/647/38958"),console.info("*   Report issues: https://github.com/LiteAVSDK/TRTC_Web/issues"),console.info("******************************************************************************")),PA.info("TRTC Web SDK Version: 4.15.0"),PA.info("UserAgent: "+navigator.userAgent),PA.info("URL of current page: "+location.href));var n={version:this.VERSION},r=new Gq(t(t(t({},n),e),{},{seq:++Jq}));return LR.emit(JR,{client:r}),r}},{key:"createStream",value:function(e){return new qW(t(t({},e),{},{seq:++Kq}))}}]),e}(),I(zq.prototype,"createClient",[$q],Object.getOwnPropertyDescriptor(zq.prototype,"createClient"),zq.prototype),I(zq.prototype,"createStream",[Hq],Object.getOwnPropertyDescriptor(zq.prototype,"createStream"),zq.prototype),zq),Xq=new Qq;return Xq}))},7152:function(e,t){"use strict";
/*!
 * vue-i18n v8.28.2 
 * (c) 2022 kazuya kawaguchi
 * Released under the MIT License.
 */var n=["compactDisplay","currency","currencyDisplay","currencySign","localeMatcher","notation","numberingSystem","signDisplay","style","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],r=["dateStyle","timeStyle","calendar","localeMatcher","hour12","hourCycle","timeZone","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function i(e,t){"undefined"!==typeof console&&(console.warn("[vue-i18n] "+e),t&&console.warn(t.stack))}function o(e,t){"undefined"!==typeof console&&(console.error("[vue-i18n] "+e),t&&console.error(t.stack))}var a=Array.isArray;function s(e){return null!==e&&"object"===typeof e}function c(e){return"boolean"===typeof e}function u(e){return"string"===typeof e}var l=Object.prototype.toString,d="[object Object]";function h(e){return l.call(e)===d}function p(e){return null===e||void 0===e}function f(e){return"function"===typeof e}function v(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];var n=null,r=null;return 1===e.length?s(e[0])||a(e[0])?r=e[0]:"string"===typeof e[0]&&(n=e[0]):2===e.length&&("string"===typeof e[0]&&(n=e[0]),(s(e[1])||a(e[1]))&&(r=e[1])),{locale:n,params:r}}function m(e){return JSON.parse(JSON.stringify(e))}function g(e,t){if(e.delete(t))return e}function _(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}function y(e,t){return!!~e.indexOf(t)}var b=Object.prototype.hasOwnProperty;function S(e,t){return b.call(e,t)}function k(e){for(var t=arguments,n=Object(e),r=1;r<arguments.length;r++){var i=t[r];if(void 0!==i&&null!==i){var o=void 0;for(o in i)S(i,o)&&(s(i[o])?n[o]=k(n[o],i[o]):n[o]=i[o])}}return n}function w(e,t){if(e===t)return!0;var n=s(e),r=s(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=a(e),o=a(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return w(e,t[n])}));if(i||o)return!1;var c=Object.keys(e),u=Object.keys(t);return c.length===u.length&&c.every((function(n){return w(e[n],t[n])}))}catch(l){return!1}}function T(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function E(e){return null!=e&&Object.keys(e).forEach((function(t){"string"==typeof e[t]&&(e[t]=T(e[t]))})),e}function I(e){e.prototype.hasOwnProperty("$i18n")||Object.defineProperty(e.prototype,"$i18n",{get:function(){return this._i18n}}),e.prototype.$t=function(e){var t=[],n=arguments.length-1;while(n-- >0)t[n]=arguments[n+1];var r=this.$i18n;return r._t.apply(r,[e,r.locale,r._getMessages(),this].concat(t))},e.prototype.$tc=function(e,t){var n=[],r=arguments.length-2;while(r-- >0)n[r]=arguments[r+2];var i=this.$i18n;return i._tc.apply(i,[e,i.locale,i._getMessages(),this,t].concat(n))},e.prototype.$te=function(e,t){var n=this.$i18n;return n._te(e,n.locale,n._getMessages(),t)},e.prototype.$d=function(e){var t,n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return(t=this.$i18n).d.apply(t,[e].concat(n))},e.prototype.$n=function(e){var t,n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return(t=this.$i18n).n.apply(t,[e].concat(n))}}function C(e){function t(){this!==this.$root&&this.$options.__INTLIFY_META__&&this.$el&&this.$el.setAttribute("data-intlify",this.$options.__INTLIFY_META__)}return void 0===e&&(e=!1),e?{mounted:t}:{beforeCreate:function(){var e=this.$options;if(e.i18n=e.i18n||(e.__i18nBridge||e.__i18n?{}:null),e.i18n)if(e.i18n instanceof Ee){if(e.__i18nBridge||e.__i18n)try{var t=e.i18n&&e.i18n.messages?e.i18n.messages:{},n=e.__i18nBridge||e.__i18n;n.forEach((function(e){t=k(t,JSON.parse(e))})),Object.keys(t).forEach((function(n){e.i18n.mergeLocaleMessage(n,t[n])}))}catch(c){0}this._i18n=e.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(h(e.i18n)){var r=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Ee?this.$root.$i18n:null;if(r&&(e.i18n.root=this.$root,e.i18n.formatter=r.formatter,e.i18n.fallbackLocale=r.fallbackLocale,e.i18n.formatFallbackMessages=r.formatFallbackMessages,e.i18n.silentTranslationWarn=r.silentTranslationWarn,e.i18n.silentFallbackWarn=r.silentFallbackWarn,e.i18n.pluralizationRules=r.pluralizationRules,e.i18n.preserveDirectiveContent=r.preserveDirectiveContent),e.__i18nBridge||e.__i18n)try{var i=e.i18n&&e.i18n.messages?e.i18n.messages:{},o=e.__i18nBridge||e.__i18n;o.forEach((function(e){i=k(i,JSON.parse(e))})),e.i18n.messages=i}catch(c){0}var a=e.i18n,s=a.sharedMessages;s&&h(s)&&(e.i18n.messages=k(e.i18n.messages,s)),this._i18n=new Ee(e.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===e.i18n.sync||e.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),r&&r.onComponentInstanceCreated(this._i18n)}else 0;else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Ee?this._i18n=this.$root.$i18n:e.parent&&e.parent.$i18n&&e.parent.$i18n instanceof Ee&&(this._i18n=e.parent.$i18n)},beforeMount:function(){var e=this.$options;e.i18n=e.i18n||(e.__i18nBridge||e.__i18n?{}:null),e.i18n?(e.i18n instanceof Ee||h(e.i18n))&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Ee||e.parent&&e.parent.$i18n&&e.parent.$i18n instanceof Ee)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},mounted:t,beforeDestroy:function(){if(this._i18n){var e=this;this.$nextTick((function(){e._subscribing&&(e._i18n.unsubscribeDataChanging(e),delete e._subscribing),e._i18nWatcher&&(e._i18nWatcher(),e._i18n.destroyVM(),delete e._i18nWatcher),e._localeWatcher&&(e._localeWatcher(),delete e._localeWatcher)}))}}}}var x={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(e,t){var n=t.data,r=t.parent,i=t.props,o=t.slots,a=r.$i18n;if(a){var s=i.path,c=i.locale,u=i.places,l=o(),d=a.i(s,c,R(l)||u?A(l.default,u):l),h=i.tag&&!0!==i.tag||!1===i.tag?i.tag:"span";return h?e(h,n,d):d}}};function R(e){var t;for(t in e)if("default"!==t)return!1;return Boolean(t)}function A(e,t){var n=t?O(t):{};if(!e)return n;e=e.filter((function(e){return e.tag||""!==e.text.trim()}));var r=e.every(L);return e.reduce(r?P:D,n)}function O(e){return Array.isArray(e)?e.reduce(D,{}):Object.assign({},e)}function P(e,t){return t.data&&t.data.attrs&&t.data.attrs.place&&(e[t.data.attrs.place]=t),e}function D(e,t,n){return e[n]=t,e}function L(e){return Boolean(e.data&&e.data.attrs&&e.data.attrs.place)}var N,M={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(e,t){var r=t.props,i=t.parent,o=t.data,a=i.$i18n;if(!a)return null;var c=null,l=null;u(r.format)?c=r.format:s(r.format)&&(r.format.key&&(c=r.format.key),l=Object.keys(r.format).reduce((function(e,t){var i;return y(n,t)?Object.assign({},e,(i={},i[t]=r.format[t],i)):e}),null));var d=r.locale||a.locale,h=a._ntp(r.value,d,c,l),p=h.map((function(e,t){var n,r=o.scopedSlots&&o.scopedSlots[e.type];return r?r((n={},n[e.type]=e.value,n.index=t,n.parts=h,n)):e.value})),f=r.tag&&!0!==r.tag||!1===r.tag?r.tag:"span";return f?e(f,{attrs:o.attrs,class:o["class"],staticClass:o.staticClass},p):p}};function U(e,t,n){F(e,n)&&$(e,t,n)}function j(e,t,n,r){if(F(e,n)){var i=n.context.$i18n;B(e,n)&&w(t.value,t.oldValue)&&w(e._localeMessage,i.getLocaleMessage(i.locale))||$(e,t,n)}}function V(e,t,n,r){var o=n.context;if(o){var a=n.context.$i18n||{};t.modifiers.preserve||a.preserveDirectiveContent||(e.textContent=""),e._vt=void 0,delete e["_vt"],e._locale=void 0,delete e["_locale"],e._localeMessage=void 0,delete e["_localeMessage"]}else i("Vue instance does not exists in VNode context")}function F(e,t){var n=t.context;return n?!!n.$i18n||(i("VueI18n instance does not exists in Vue instance"),!1):(i("Vue instance does not exists in VNode context"),!1)}function B(e,t){var n=t.context;return e._locale===n.$i18n.locale}function $(e,t,n){var r,o,a=t.value,s=H(a),c=s.path,u=s.locale,l=s.args,d=s.choice;if(c||u||l)if(c){var h=n.context;e._vt=e.textContent=null!=d?(r=h.$i18n).tc.apply(r,[c,d].concat(z(u,l))):(o=h.$i18n).t.apply(o,[c].concat(z(u,l))),e._locale=h.$i18n.locale,e._localeMessage=h.$i18n.getLocaleMessage(h.$i18n.locale)}else i("`path` is required in v-t directive");else i("value type not supported")}function H(e){var t,n,r,i;return u(e)?t=e:h(e)&&(t=e.path,n=e.locale,r=e.args,i=e.choice),{path:t,locale:n,args:r,choice:i}}function z(e,t){var n=[];return e&&n.push(e),t&&(Array.isArray(t)||h(t))&&n.push(t),n}function W(e,t){void 0===t&&(t={bridge:!1}),W.installed=!0,N=e;N.version&&Number(N.version.split(".")[0]);I(N),N.mixin(C(t.bridge)),N.directive("t",{bind:U,update:j,unbind:V}),N.component(x.name,x),N.component(M.name,M);var n=N.config.optionMergeStrategies;n.i18n=function(e,t){return void 0===t?e:t}}var q=function(){this._caches=Object.create(null)};q.prototype.interpolate=function(e,t){if(!t)return[e];var n=this._caches[e];return n||(n=K(e),this._caches[e]=n),Q(n,t)};var G=/^(?:\d)+/,J=/^(?:\w)+/;function K(e){var t=[],n=0,r="";while(n<e.length){var i=e[n++];if("{"===i){r&&t.push({type:"text",value:r}),r="";var o="";i=e[n++];while(void 0!==i&&"}"!==i)o+=i,i=e[n++];var a="}"===i,s=G.test(o)?"list":a&&J.test(o)?"named":"unknown";t.push({value:o,type:s})}else"%"===i?"{"!==e[n]&&(r+=i):r+=i}return r&&t.push({type:"text",value:r}),t}function Q(e,t){var n=[],r=0,i=Array.isArray(t)?"list":s(t)?"named":"unknown";if("unknown"===i)return n;while(r<e.length){var o=e[r];switch(o.type){case"text":n.push(o.value);break;case"list":n.push(t[parseInt(o.value,10)]);break;case"named":"named"===i&&n.push(t[o.value]);break;case"unknown":0;break}r++}return n}var X=0,Y=1,Z=2,ee=3,te=0,ne=1,re=2,ie=3,oe=4,ae=5,se=6,ce=7,ue=8,le=[];le[te]={ws:[te],ident:[ie,X],"[":[oe],eof:[ce]},le[ne]={ws:[ne],".":[re],"[":[oe],eof:[ce]},le[re]={ws:[re],ident:[ie,X],0:[ie,X],number:[ie,X]},le[ie]={ident:[ie,X],0:[ie,X],number:[ie,X],ws:[ne,Y],".":[re,Y],"[":[oe,Y],eof:[ce,Y]},le[oe]={"'":[ae,X],'"':[se,X],"[":[oe,Z],"]":[ne,ee],eof:ue,else:[oe,X]},le[ae]={"'":[oe,X],eof:ue,else:[ae,X]},le[se]={'"':[oe,X],eof:ue,else:[se,X]};var de=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function he(e){return de.test(e)}function pe(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function fe(e){if(void 0===e||null===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function ve(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(he(t)?pe(t):"*"+t)}function me(e){var t,n,r,i,o,a,s,c=[],u=-1,l=te,d=0,h=[];function p(){var t=e[u+1];if(l===ae&&"'"===t||l===se&&'"'===t)return u++,r="\\"+t,h[X](),!0}h[Y]=function(){void 0!==n&&(c.push(n),n=void 0)},h[X]=function(){void 0===n?n=r:n+=r},h[Z]=function(){h[X](),d++},h[ee]=function(){if(d>0)d--,l=oe,h[X]();else{if(d=0,void 0===n)return!1;if(n=ve(n),!1===n)return!1;h[Y]()}};while(null!==l)if(u++,t=e[u],"\\"!==t||!p()){if(i=fe(t),s=le[l],o=s[i]||s["else"]||ue,o===ue)return;if(l=o[0],a=h[o[1]],a&&(r=o[2],r=void 0===r?t:r,!1===a()))return;if(l===ce)return c}}var ge=function(){this._cache=Object.create(null)};ge.prototype.parsePath=function(e){var t=this._cache[e];return t||(t=me(e),t&&(this._cache[e]=t)),t||[]},ge.prototype.getPathValue=function(e,t){if(!s(e))return null;var n=this.parsePath(t);if(0===n.length)return null;var r=n.length,i=e,o=0;while(o<r){var a=i[n[o]];if(void 0===a||null===a)return null;i=a,o++}return i};var _e,ye=/<\/?[\w\s="/.':;#-\/]+>/,be=/(?:@(?:\.[a-zA-Z]+)?:(?:[\w\-_|./]+|\([\w\-_:|./]+\)))/g,Se=/^@(?:\.([a-zA-Z]+))?:/,ke=/[()]/g,we={upper:function(e){return e.toLocaleUpperCase()},lower:function(e){return e.toLocaleLowerCase()},capitalize:function(e){return""+e.charAt(0).toLocaleUpperCase()+e.substr(1)}},Te=new q,Ee=function(e){var t=this;void 0===e&&(e={}),!N&&"undefined"!==typeof window&&window.Vue&&W(window.Vue);var n=e.locale||"en-US",r=!1!==e.fallbackLocale&&(e.fallbackLocale||"en-US"),i=e.messages||{},o=e.dateTimeFormats||e.datetimeFormats||{},a=e.numberFormats||{};this._vm=null,this._formatter=e.formatter||Te,this._modifiers=e.modifiers||{},this._missing=e.missing||null,this._root=e.root||null,this._sync=void 0===e.sync||!!e.sync,this._fallbackRoot=void 0===e.fallbackRoot||!!e.fallbackRoot,this._fallbackRootWithEmptyString=void 0===e.fallbackRootWithEmptyString||!!e.fallbackRootWithEmptyString,this._formatFallbackMessages=void 0!==e.formatFallbackMessages&&!!e.formatFallbackMessages,this._silentTranslationWarn=void 0!==e.silentTranslationWarn&&e.silentTranslationWarn,this._silentFallbackWarn=void 0!==e.silentFallbackWarn&&!!e.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new ge,this._dataListeners=new Set,this._componentInstanceCreatedListener=e.componentInstanceCreatedListener||null,this._preserveDirectiveContent=void 0!==e.preserveDirectiveContent&&!!e.preserveDirectiveContent,this.pluralizationRules=e.pluralizationRules||{},this._warnHtmlInMessage=e.warnHtmlInMessage||"off",this._postTranslation=e.postTranslation||null,this._escapeParameterHtml=e.escapeParameterHtml||!1,"__VUE_I18N_BRIDGE__"in e&&(this.__VUE_I18N_BRIDGE__=e.__VUE_I18N_BRIDGE__),this.getChoiceIndex=function(e,n){var r=Object.getPrototypeOf(t);if(r&&r.getChoiceIndex){var i=r.getChoiceIndex;return i.call(t,e,n)}var o=function(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0};return t.locale in t.pluralizationRules?t.pluralizationRules[t.locale].apply(t,[e,n]):o(e,n)},this._exist=function(e,n){return!(!e||!n)&&(!p(t._path.getPathValue(e,n))||!!e[n])},"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||Object.keys(i).forEach((function(e){t._checkLocaleMessage(e,t._warnHtmlInMessage,i[e])})),this._initVM({locale:n,fallbackLocale:r,messages:i,dateTimeFormats:o,numberFormats:a})},Ie={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0},sync:{configurable:!0}};Ee.prototype._checkLocaleMessage=function(e,t,n){var r=[],s=function(e,t,n,r){if(h(n))Object.keys(n).forEach((function(i){var o=n[i];h(o)?(r.push(i),r.push("."),s(e,t,o,r),r.pop(),r.pop()):(r.push(i),s(e,t,o,r),r.pop())}));else if(a(n))n.forEach((function(n,i){h(n)?(r.push("["+i+"]"),r.push("."),s(e,t,n,r),r.pop(),r.pop()):(r.push("["+i+"]"),s(e,t,n,r),r.pop())}));else if(u(n)){var c=ye.test(n);if(c){var l="Detected HTML in message '"+n+"' of keypath '"+r.join("")+"' at '"+t+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===e?i(l):"error"===e&&o(l)}}};s(t,e,n,r)},Ee.prototype._initVM=function(e){var t=N.config.silent;N.config.silent=!0,this._vm=new N({data:e,__VUE18N__INSTANCE__:!0}),N.config.silent=t},Ee.prototype.destroyVM=function(){this._vm.$destroy()},Ee.prototype.subscribeDataChanging=function(e){this._dataListeners.add(e)},Ee.prototype.unsubscribeDataChanging=function(e){g(this._dataListeners,e)},Ee.prototype.watchI18nData=function(){var e=this;return this._vm.$watch("$data",(function(){var t=_(e._dataListeners),n=t.length;while(n--)N.nextTick((function(){t[n]&&t[n].$forceUpdate()}))}),{deep:!0})},Ee.prototype.watchLocale=function(e){if(e){if(!this.__VUE_I18N_BRIDGE__)return null;var t=this,n=this._vm;return this.vm.$watch("locale",(function(r){n.$set(n,"locale",r),t.__VUE_I18N_BRIDGE__&&e&&(e.locale.value=r),n.$forceUpdate()}),{immediate:!0})}if(!this._sync||!this._root)return null;var r=this._vm;return this._root.$i18n.vm.$watch("locale",(function(e){r.$set(r,"locale",e),r.$forceUpdate()}),{immediate:!0})},Ee.prototype.onComponentInstanceCreated=function(e){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(e,this)},Ie.vm.get=function(){return this._vm},Ie.messages.get=function(){return m(this._getMessages())},Ie.dateTimeFormats.get=function(){return m(this._getDateTimeFormats())},Ie.numberFormats.get=function(){return m(this._getNumberFormats())},Ie.availableLocales.get=function(){return Object.keys(this.messages).sort()},Ie.locale.get=function(){return this._vm.locale},Ie.locale.set=function(e){this._vm.$set(this._vm,"locale",e)},Ie.fallbackLocale.get=function(){return this._vm.fallbackLocale},Ie.fallbackLocale.set=function(e){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",e)},Ie.formatFallbackMessages.get=function(){return this._formatFallbackMessages},Ie.formatFallbackMessages.set=function(e){this._formatFallbackMessages=e},Ie.missing.get=function(){return this._missing},Ie.missing.set=function(e){this._missing=e},Ie.formatter.get=function(){return this._formatter},Ie.formatter.set=function(e){this._formatter=e},Ie.silentTranslationWarn.get=function(){return this._silentTranslationWarn},Ie.silentTranslationWarn.set=function(e){this._silentTranslationWarn=e},Ie.silentFallbackWarn.get=function(){return this._silentFallbackWarn},Ie.silentFallbackWarn.set=function(e){this._silentFallbackWarn=e},Ie.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},Ie.preserveDirectiveContent.set=function(e){this._preserveDirectiveContent=e},Ie.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},Ie.warnHtmlInMessage.set=function(e){var t=this,n=this._warnHtmlInMessage;if(this._warnHtmlInMessage=e,n!==e&&("warn"===e||"error"===e)){var r=this._getMessages();Object.keys(r).forEach((function(e){t._checkLocaleMessage(e,t._warnHtmlInMessage,r[e])}))}},Ie.postTranslation.get=function(){return this._postTranslation},Ie.postTranslation.set=function(e){this._postTranslation=e},Ie.sync.get=function(){return this._sync},Ie.sync.set=function(e){this._sync=e},Ee.prototype._getMessages=function(){return this._vm.messages},Ee.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},Ee.prototype._getNumberFormats=function(){return this._vm.numberFormats},Ee.prototype._warnDefault=function(e,t,n,r,i,o){if(!p(n))return n;if(this._missing){var a=this._missing.apply(null,[e,t,r,i]);if(u(a))return a}else 0;if(this._formatFallbackMessages){var s=v.apply(void 0,i);return this._render(t,o,s.params,t)}return t},Ee.prototype._isFallbackRoot=function(e){return(this._fallbackRootWithEmptyString?!e:p(e))&&!p(this._root)&&this._fallbackRoot},Ee.prototype._isSilentFallbackWarn=function(e){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(e):this._silentFallbackWarn},Ee.prototype._isSilentFallback=function(e,t){return this._isSilentFallbackWarn(t)&&(this._isFallbackRoot()||e!==this.fallbackLocale)},Ee.prototype._isSilentTranslationWarn=function(e){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(e):this._silentTranslationWarn},Ee.prototype._interpolate=function(e,t,n,r,i,o,s){if(!t)return null;var c,l=this._path.getPathValue(t,n);if(a(l)||h(l))return l;if(p(l)){if(!h(t))return null;if(c=t[n],!u(c)&&!f(c))return null}else{if(!u(l)&&!f(l))return null;c=l}return u(c)&&(c.indexOf("@:")>=0||c.indexOf("@.")>=0)&&(c=this._link(e,t,c,r,"raw",o,s)),this._render(c,i,o,n)},Ee.prototype._link=function(e,t,n,r,i,o,s){var c=n,u=c.match(be);for(var l in u)if(u.hasOwnProperty(l)){var d=u[l],h=d.match(Se),p=h[0],f=h[1],v=d.replace(p,"").replace(ke,"");if(y(s,v))return c;s.push(v);var m=this._interpolate(e,t,v,r,"raw"===i?"string":i,"raw"===i?void 0:o,s);if(this._isFallbackRoot(m)){if(!this._root)throw Error("unexpected error");var g=this._root.$i18n;m=g._translate(g._getMessages(),g.locale,g.fallbackLocale,v,r,i,o)}m=this._warnDefault(e,v,m,r,a(o)?o:[o],i),this._modifiers.hasOwnProperty(f)?m=this._modifiers[f](m):we.hasOwnProperty(f)&&(m=we[f](m)),s.pop(),c=m?c.replace(d,m):c}return c},Ee.prototype._createMessageContext=function(e,t,n,r){var i=this,o=a(e)?e:[],c=s(e)?e:{},u=function(e){return o[e]},l=function(e){return c[e]},d=this._getMessages(),h=this.locale;return{list:u,named:l,values:e,formatter:t,path:n,messages:d,locale:h,linked:function(e){return i._interpolate(h,d[h]||{},e,null,r,void 0,[e])}}},Ee.prototype._render=function(e,t,n,r){if(f(e))return e(this._createMessageContext(n,this._formatter||Te,r,t));var i=this._formatter.interpolate(e,n,r);return i||(i=Te.interpolate(e,n,r)),"string"!==t||u(i)?i:i.join("")},Ee.prototype._appendItemToChain=function(e,t,n){var r=!1;return y(e,t)||(r=!0,t&&(r="!"!==t[t.length-1],t=t.replace(/!/g,""),e.push(t),n&&n[t]&&(r=n[t]))),r},Ee.prototype._appendLocaleToChain=function(e,t,n){var r,i=t.split("-");do{var o=i.join("-");r=this._appendItemToChain(e,o,n),i.splice(-1,1)}while(i.length&&!0===r);return r},Ee.prototype._appendBlockToChain=function(e,t,n){for(var r=!0,i=0;i<t.length&&c(r);i++){var o=t[i];u(o)&&(r=this._appendLocaleToChain(e,o,n))}return r},Ee.prototype._getLocaleChain=function(e,t){if(""===e)return[];this._localeChainCache||(this._localeChainCache={});var n=this._localeChainCache[e];if(!n){t||(t=this.fallbackLocale),n=[];var r,i=[e];while(a(i))i=this._appendBlockToChain(n,i,t);r=a(t)?t:s(t)?t["default"]?t["default"]:null:t,i=u(r)?[r]:r,i&&this._appendBlockToChain(n,i,null),this._localeChainCache[e]=n}return n},Ee.prototype._translate=function(e,t,n,r,i,o,a){for(var s,c=this._getLocaleChain(t,n),u=0;u<c.length;u++){var l=c[u];if(s=this._interpolate(l,e[l],r,i,o,a,[r]),!p(s))return s}return null},Ee.prototype._t=function(e,t,n,r){var i,o=[],a=arguments.length-4;while(a-- >0)o[a]=arguments[a+4];if(!e)return"";var s=v.apply(void 0,o);this._escapeParameterHtml&&(s.params=E(s.params));var c=s.locale||t,u=this._translate(n,c,this.fallbackLocale,e,r,"string",s.params);if(this._isFallbackRoot(u)){if(!this._root)throw Error("unexpected error");return(i=this._root).$t.apply(i,[e].concat(o))}return u=this._warnDefault(c,e,u,r,o,"string"),this._postTranslation&&null!==u&&void 0!==u&&(u=this._postTranslation(u,e)),u},Ee.prototype.t=function(e){var t,n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return(t=this)._t.apply(t,[e,this.locale,this._getMessages(),null].concat(n))},Ee.prototype._i=function(e,t,n,r,i){var o=this._translate(n,t,this.fallbackLocale,e,r,"raw",i);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(e,t,i)}return this._warnDefault(t,e,o,r,[i],"raw")},Ee.prototype.i=function(e,t,n){return e?(u(t)||(t=this.locale),this._i(e,t,this._getMessages(),null,n)):""},Ee.prototype._tc=function(e,t,n,r,i){var o,a=[],s=arguments.length-5;while(s-- >0)a[s]=arguments[s+5];if(!e)return"";void 0===i&&(i=1);var c={count:i,n:i},u=v.apply(void 0,a);return u.params=Object.assign(c,u.params),a=null===u.locale?[u.params]:[u.locale,u.params],this.fetchChoice((o=this)._t.apply(o,[e,t,n,r].concat(a)),i)},Ee.prototype.fetchChoice=function(e,t){if(!e||!u(e))return null;var n=e.split("|");return t=this.getChoiceIndex(t,n.length),n[t]?n[t].trim():e},Ee.prototype.tc=function(e,t){var n,r=[],i=arguments.length-2;while(i-- >0)r[i]=arguments[i+2];return(n=this)._tc.apply(n,[e,this.locale,this._getMessages(),null,t].concat(r))},Ee.prototype._te=function(e,t,n){var r=[],i=arguments.length-3;while(i-- >0)r[i]=arguments[i+3];var o=v.apply(void 0,r).locale||t;return this._exist(n[o],e)},Ee.prototype.te=function(e,t){return this._te(e,this.locale,this._getMessages(),t)},Ee.prototype.getLocaleMessage=function(e){return m(this._vm.messages[e]||{})},Ee.prototype.setLocaleMessage=function(e,t){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(e,this._warnHtmlInMessage,t),this._vm.$set(this._vm.messages,e,t)},Ee.prototype.mergeLocaleMessage=function(e,t){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(e,this._warnHtmlInMessage,t),this._vm.$set(this._vm.messages,e,k("undefined"!==typeof this._vm.messages[e]&&Object.keys(this._vm.messages[e]).length?Object.assign({},this._vm.messages[e]):{},t))},Ee.prototype.getDateTimeFormat=function(e){return m(this._vm.dateTimeFormats[e]||{})},Ee.prototype.setDateTimeFormat=function(e,t){this._vm.$set(this._vm.dateTimeFormats,e,t),this._clearDateTimeFormat(e,t)},Ee.prototype.mergeDateTimeFormat=function(e,t){this._vm.$set(this._vm.dateTimeFormats,e,k(this._vm.dateTimeFormats[e]||{},t)),this._clearDateTimeFormat(e,t)},Ee.prototype._clearDateTimeFormat=function(e,t){for(var n in t){var r=e+"__"+n;this._dateTimeFormatters.hasOwnProperty(r)&&delete this._dateTimeFormatters[r]}},Ee.prototype._localizeDateTime=function(e,t,n,r,i,o){for(var a=t,s=r[a],c=this._getLocaleChain(t,n),u=0;u<c.length;u++){var l=c[u];if(s=r[l],a=l,!p(s)&&!p(s[i]))break}if(p(s)||p(s[i]))return null;var d,h=s[i];if(o)d=new Intl.DateTimeFormat(a,Object.assign({},h,o));else{var f=a+"__"+i;d=this._dateTimeFormatters[f],d||(d=this._dateTimeFormatters[f]=new Intl.DateTimeFormat(a,h))}return d.format(e)},Ee.prototype._d=function(e,t,n,r){if(!n){var i=r?new Intl.DateTimeFormat(t,r):new Intl.DateTimeFormat(t);return i.format(e)}var o=this._localizeDateTime(e,t,this.fallbackLocale,this._getDateTimeFormats(),n,r);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(e,n,t)}return o||""},Ee.prototype.d=function(e){var t=[],n=arguments.length-1;while(n-- >0)t[n]=arguments[n+1];var i=this.locale,o=null,a=null;return 1===t.length?(u(t[0])?o=t[0]:s(t[0])&&(t[0].locale&&(i=t[0].locale),t[0].key&&(o=t[0].key)),a=Object.keys(t[0]).reduce((function(e,n){var i;return y(r,n)?Object.assign({},e,(i={},i[n]=t[0][n],i)):e}),null)):2===t.length&&(u(t[0])&&(o=t[0]),u(t[1])&&(i=t[1])),this._d(e,i,o,a)},Ee.prototype.getNumberFormat=function(e){return m(this._vm.numberFormats[e]||{})},Ee.prototype.setNumberFormat=function(e,t){this._vm.$set(this._vm.numberFormats,e,t),this._clearNumberFormat(e,t)},Ee.prototype.mergeNumberFormat=function(e,t){this._vm.$set(this._vm.numberFormats,e,k(this._vm.numberFormats[e]||{},t)),this._clearNumberFormat(e,t)},Ee.prototype._clearNumberFormat=function(e,t){for(var n in t){var r=e+"__"+n;this._numberFormatters.hasOwnProperty(r)&&delete this._numberFormatters[r]}},Ee.prototype._getNumberFormatter=function(e,t,n,r,i,o){for(var a=t,s=r[a],c=this._getLocaleChain(t,n),u=0;u<c.length;u++){var l=c[u];if(s=r[l],a=l,!p(s)&&!p(s[i]))break}if(p(s)||p(s[i]))return null;var d,h=s[i];if(o)d=new Intl.NumberFormat(a,Object.assign({},h,o));else{var f=a+"__"+i;d=this._numberFormatters[f],d||(d=this._numberFormatters[f]=new Intl.NumberFormat(a,h))}return d},Ee.prototype._n=function(e,t,n,r){if(!Ee.availabilities.numberFormat)return"";if(!n){var i=r?new Intl.NumberFormat(t,r):new Intl.NumberFormat(t);return i.format(e)}var o=this._getNumberFormatter(e,t,this.fallbackLocale,this._getNumberFormats(),n,r),a=o&&o.format(e);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(e,Object.assign({},{key:n,locale:t},r))}return a||""},Ee.prototype.n=function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];var i=this.locale,o=null,a=null;return 1===t.length?u(t[0])?o=t[0]:s(t[0])&&(t[0].locale&&(i=t[0].locale),t[0].key&&(o=t[0].key),a=Object.keys(t[0]).reduce((function(e,r){var i;return y(n,r)?Object.assign({},e,(i={},i[r]=t[0][r],i)):e}),null)):2===t.length&&(u(t[0])&&(o=t[0]),u(t[1])&&(i=t[1])),this._n(e,i,o,a)},Ee.prototype._ntp=function(e,t,n,r){if(!Ee.availabilities.numberFormat)return[];if(!n){var i=r?new Intl.NumberFormat(t,r):new Intl.NumberFormat(t);return i.formatToParts(e)}var o=this._getNumberFormatter(e,t,this.fallbackLocale,this._getNumberFormats(),n,r),a=o&&o.formatToParts(e);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(e,t,n,r)}return a||[]},Object.defineProperties(Ee.prototype,Ie),Object.defineProperty(Ee,"availabilities",{get:function(){if(!_e){var e="undefined"!==typeof Intl;_e={dateTimeFormat:e&&"undefined"!==typeof Intl.DateTimeFormat,numberFormat:e&&"undefined"!==typeof Intl.NumberFormat}}return _e}}),Ee.install=W,Ee.version="8.28.2",t["Z"]=Ee},8345:function(e,t,n){"use strict";function r(e,t){for(var n in t)e[n]=t[n];return e}n.d(t,{ZP:function(){return kt}});var i=/[!'()*]/g,o=function(e){return"%"+e.charCodeAt(0).toString(16)},a=/%2C/g,s=function(e){return encodeURIComponent(e).replace(i,o).replace(a,",")};function c(e){try{return decodeURIComponent(e)}catch(t){0}return e}function u(e,t,n){void 0===t&&(t={});var r,i=n||d;try{r=i(e||"")}catch(s){r={}}for(var o in t){var a=t[o];r[o]=Array.isArray(a)?a.map(l):l(a)}return r}var l=function(e){return null==e||"object"===typeof e?e:String(e)};function d(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=c(n.shift()),i=n.length>0?c(n.join("=")):null;void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t}function h(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return s(t);if(Array.isArray(n)){var r=[];return n.forEach((function(e){void 0!==e&&(null===e?r.push(s(t)):r.push(s(t)+"="+s(e)))})),r.join("&")}return s(t)+"="+s(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var p=/\/?$/;function f(e,t,n,r){var i=r&&r.options.stringifyQuery,o=t.query||{};try{o=v(o)}catch(s){}var a={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:_(t,i),matched:e?g(e):[]};return n&&(a.redirectedFrom=_(n,i)),Object.freeze(a)}function v(e){if(Array.isArray(e))return e.map(v);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=v(e[n]);return t}return e}var m=f(null,{path:"/"});function g(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function _(e,t){var n=e.path,r=e.query;void 0===r&&(r={});var i=e.hash;void 0===i&&(i="");var o=t||h;return(n||"/")+o(r)+i}function y(e,t,n){return t===m?e===t:!!t&&(e.path&&t.path?e.path.replace(p,"")===t.path.replace(p,"")&&(n||e.hash===t.hash&&b(e.query,t.query)):!(!e.name||!t.name)&&(e.name===t.name&&(n||e.hash===t.hash&&b(e.query,t.query)&&b(e.params,t.params))))}function b(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e).sort(),r=Object.keys(t).sort();return n.length===r.length&&n.every((function(n,i){var o=e[n],a=r[i];if(a!==n)return!1;var s=t[n];return null==o||null==s?o===s:"object"===typeof o&&"object"===typeof s?b(o,s):String(o)===String(s)}))}function S(e,t){return 0===e.path.replace(p,"/").indexOf(t.path.replace(p,"/"))&&(!t.hash||e.hash===t.hash)&&k(e.query,t.query)}function k(e,t){for(var n in t)if(!(n in e))return!1;return!0}function w(e){for(var t=0;t<e.matched.length;t++){var n=e.matched[t];for(var r in n.instances){var i=n.instances[r],o=n.enteredCbs[r];if(i&&o){delete n.enteredCbs[r];for(var a=0;a<o.length;a++)i._isBeingDestroyed||o[a](i)}}}}var T={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,i=t.children,o=t.parent,a=t.data;a.routerView=!0;var s=o.$createElement,c=n.name,u=o.$route,l=o._routerViewCache||(o._routerViewCache={}),d=0,h=!1;while(o&&o._routerRoot!==o){var p=o.$vnode?o.$vnode.data:{};p.routerView&&d++,p.keepAlive&&o._directInactive&&o._inactive&&(h=!0),o=o.$parent}if(a.routerViewDepth=d,h){var f=l[c],v=f&&f.component;return v?(f.configProps&&E(v,a,f.route,f.configProps),s(v,a,i)):s()}var m=u.matched[d],g=m&&m.components[c];if(!m||!g)return l[c]=null,s();l[c]={component:g},a.registerRouteInstance=function(e,t){var n=m.instances[c];(t&&n!==e||!t&&n===e)&&(m.instances[c]=t)},(a.hook||(a.hook={})).prepatch=function(e,t){m.instances[c]=t.componentInstance},a.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[c]&&(m.instances[c]=e.componentInstance),w(u)};var _=m.props&&m.props[c];return _&&(r(l[c],{route:u,configProps:_}),E(g,a,u,_)),s(g,a,i)}};function E(e,t,n,i){var o=t.props=I(n,i);if(o){o=t.props=r({},o);var a=t.attrs=t.attrs||{};for(var s in o)e.props&&s in e.props||(a[s]=o[s],delete o[s])}}function I(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}function C(e,t,n){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return t+e;var i=t.split("/");n&&i[i.length-1]||i.pop();for(var o=e.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function x(e){var t="",n="",r=e.indexOf("#");r>=0&&(t=e.slice(r),e=e.slice(0,r));var i=e.indexOf("?");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{path:e,query:n,hash:t}}function R(e){return e.replace(/\/(?:\s*\/)+/g,"/")}var A=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},O=Q,P=U,D=j,L=B,N=K,M=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function U(e,t){var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";while(null!=(n=M.exec(e))){var c=n[0],u=n[1],l=n.index;if(a+=e.slice(o,l),o=l+c.length,u)a+=u[1];else{var d=e[o],h=n[2],p=n[3],f=n[4],v=n[5],m=n[6],g=n[7];a&&(r.push(a),a="");var _=null!=h&&null!=d&&d!==h,y="+"===m||"*"===m,b="?"===m||"*"===m,S=n[2]||s,k=f||v;r.push({name:p||i++,prefix:h||"",delimiter:S,optional:b,repeat:y,partial:_,asterisk:!!g,pattern:k?H(k):g?".*":"[^"+$(S)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function j(e,t){return B(U(e,t),t)}function V(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function F(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function B(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",W(t)));return function(t,r){for(var i="",o=t||{},a=r||{},s=a.pretty?V:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var l,d=o[u.name];if(null==d){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(A(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(l=s(d[h]),!n[c].test(l))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===h?u.prefix:u.delimiter)+l}}else{if(l=u.asterisk?F(d):s(d),!n[c].test(l))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+l+'"');i+=u.prefix+l}}else i+=u}return i}}function $(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function H(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function z(e,t){return e.keys=t,e}function W(e){return e&&e.sensitive?"":"i"}function q(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return z(e,t)}function G(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(Q(e[i],t,n).source);var o=new RegExp("(?:"+r.join("|")+")",W(n));return z(o,t)}function J(e,t,n){return K(U(e,n),t,n)}function K(e,t,n){A(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)o+=$(s);else{var c=$(s.prefix),u="(?:"+s.pattern+")";t.push(s),s.repeat&&(u+="(?:"+c+u+")*"),u=s.optional?s.partial?c+"("+u+")?":"(?:"+c+"("+u+"))?":c+"("+u+")",o+=u}}var l=$(n.delimiter||"/"),d=o.slice(-l.length)===l;return r||(o=(d?o.slice(0,-l.length):o)+"(?:"+l+"(?=$))?"),o+=i?"$":r&&d?"":"(?="+l+"|$)",z(new RegExp("^"+o,W(n)),t)}function Q(e,t,n){return A(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?q(e,t):A(e)?G(e,t,n):J(e,t,n)}O.parse=P,O.compile=D,O.tokensToFunction=L,O.tokensToRegExp=N;var X=Object.create(null);function Y(e,t,n){t=t||{};try{var r=X[e]||(X[e]=O.compile(e));return"string"===typeof t.pathMatch&&(t[0]=t.pathMatch),r(t,{pretty:!0})}catch(i){return""}finally{delete t[0]}}function Z(e,t,n,i){var o="string"===typeof e?{path:e}:e;if(o._normalized)return o;if(o.name){o=r({},e);var a=o.params;return a&&"object"===typeof a&&(o.params=r({},a)),o}if(!o.path&&o.params&&t){o=r({},o),o._normalized=!0;var s=r(r({},t.params),o.params);if(t.name)o.name=t.name,o.params=s;else if(t.matched.length){var c=t.matched[t.matched.length-1].path;o.path=Y(c,s,"path "+t.path)}else 0;return o}var l=x(o.path||""),d=t&&t.path||"/",h=l.path?C(l.path,d,n||o.append):d,p=u(l.query,o.query,i&&i.options.parseQuery),f=o.hash||l.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:h,query:p,hash:f}}var ee,te=[String,Object],ne=[String,Array],re=function(){},ie={name:"RouterLink",props:{to:{type:te,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:ne,default:"click"}},render:function(e){var t=this,n=this.$router,i=this.$route,o=n.resolve(this.to,i,this.append),a=o.location,s=o.route,c=o.href,u={},l=n.options.linkActiveClass,d=n.options.linkExactActiveClass,h=null==l?"router-link-active":l,p=null==d?"router-link-exact-active":d,v=null==this.activeClass?h:this.activeClass,m=null==this.exactActiveClass?p:this.exactActiveClass,g=s.redirectedFrom?f(null,Z(s.redirectedFrom),null,n):s;u[m]=y(i,g,this.exactPath),u[v]=this.exact||this.exactPath?u[m]:S(i,g);var _=u[m]?this.ariaCurrentValue:null,b=function(e){oe(e)&&(t.replace?n.replace(a,re):n.push(a,re))},k={click:oe};Array.isArray(this.event)?this.event.forEach((function(e){k[e]=b})):k[this.event]=b;var w={class:u},T=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:c,route:s,navigate:b,isActive:u[v],isExactActive:u[m]});if(T){if(1===T.length)return T[0];if(T.length>1||!T.length)return 0===T.length?e():e("span",{},T)}if("a"===this.tag)w.on=k,w.attrs={href:c,"aria-current":_};else{var E=ae(this.$slots.default);if(E){E.isStatic=!1;var I=E.data=r({},E.data);for(var C in I.on=I.on||{},I.on){var x=I.on[C];C in k&&(I.on[C]=Array.isArray(x)?x:[x])}for(var R in k)R in I.on?I.on[R].push(k[R]):I.on[R]=b;var A=E.data.attrs=r({},E.data.attrs);A.href=c,A["aria-current"]=_}else w.on=k}return e(this.tag,w,this.$slots.default)}};function oe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ae(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=ae(t.children)))return t}}function se(e){if(!se.installed||ee!==e){se.installed=!0,ee=e;var t=function(e){return void 0!==e},n=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",T),e.component("RouterLink",ie);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var ce="undefined"!==typeof window;function ue(e,t,n,r,i){var o=t||[],a=n||Object.create(null),s=r||Object.create(null);e.forEach((function(e){le(o,a,s,e,i)}));for(var c=0,u=o.length;c<u;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),u--,c--);return{pathList:o,pathMap:a,nameMap:s}}function le(e,t,n,r,i,o){var a=r.path,s=r.name;var c=r.pathToRegexpOptions||{},u=he(a,i,c.strict);"boolean"===typeof r.caseSensitive&&(c.sensitive=r.caseSensitive);var l={path:u,regex:de(u,c),components:r.components||{default:r.component},alias:r.alias?"string"===typeof r.alias?[r.alias]:r.alias:[],instances:{},enteredCbs:{},name:s,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach((function(r){var i=o?R(o+"/"+r.path):void 0;le(e,t,n,r,l,i)})),t[l.path]||(e.push(l.path),t[l.path]=l),void 0!==r.alias)for(var d=Array.isArray(r.alias)?r.alias:[r.alias],h=0;h<d.length;++h){var p=d[h];0;var f={path:p,children:r.children};le(e,t,n,f,i,l.path||"/")}s&&(n[s]||(n[s]=l))}function de(e,t){var n=O(e,[],t);return n}function he(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:R(t.path+"/"+e)}function pe(e,t){var n=ue(e),r=n.pathList,i=n.pathMap,o=n.nameMap;function a(e){ue(e,r,i,o)}function s(e,t){var n="object"!==typeof e?o[e]:void 0;ue([t||e],r,i,o,n),n&&n.alias.length&&ue(n.alias.map((function(e){return{path:e,children:[t]}})),r,i,o,n)}function c(){return r.map((function(e){return i[e]}))}function u(e,n,a){var s=Z(e,n,!1,t),c=s.name;if(c){var u=o[c];if(!u)return h(null,s);var l=u.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var d in n.params)!(d in s.params)&&l.indexOf(d)>-1&&(s.params[d]=n.params[d]);return s.path=Y(u.path,s.params,'named route "'+c+'"'),h(u,s,a)}if(s.path){s.params={};for(var p=0;p<r.length;p++){var f=r[p],v=i[f];if(fe(v.regex,s.path,s.params))return h(v,s,a)}}return h(null,s)}function l(e,n){var r=e.redirect,i="function"===typeof r?r(f(e,n,null,t)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return h(null,n);var a=i,s=a.name,c=a.path,l=n.query,d=n.hash,p=n.params;if(l=a.hasOwnProperty("query")?a.query:l,d=a.hasOwnProperty("hash")?a.hash:d,p=a.hasOwnProperty("params")?a.params:p,s){o[s];return u({_normalized:!0,name:s,query:l,hash:d,params:p},void 0,n)}if(c){var v=ve(c,e),m=Y(v,p,'redirect route with path "'+v+'"');return u({_normalized:!0,path:m,query:l,hash:d},void 0,n)}return h(null,n)}function d(e,t,n){var r=Y(n,t.params,'aliased route with path "'+n+'"'),i=u({_normalized:!0,path:r});if(i){var o=i.matched,a=o[o.length-1];return t.params=i.params,h(a,t)}return h(null,t)}function h(e,n,r){return e&&e.redirect?l(e,r||n):e&&e.matchAs?d(e,n,e.matchAs):f(e,n,r,t)}return{match:u,addRoute:s,getRoutes:c,addRoutes:a}}function fe(e,t,n){var r=t.match(e);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var a=e.keys[i-1];a&&(n[a.name||"pathMatch"]="string"===typeof r[i]?c(r[i]):r[i])}return!0}function ve(e,t){return C(e,t.parent?t.parent.path:"/",!0)}var me=ce&&window.performance&&window.performance.now?window.performance:Date;function ge(){return me.now().toFixed(3)}var _e=ge();function ye(){return _e}function be(e){return _e=e}var Se=Object.create(null);function ke(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),n=r({},window.history.state);return n.key=ye(),window.history.replaceState(n,"",t),window.addEventListener("popstate",Ee),function(){window.removeEventListener("popstate",Ee)}}function we(e,t,n,r){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick((function(){var o=Ie(),a=i.call(e,t,n,r?o:null);a&&("function"===typeof a.then?a.then((function(e){De(e,o)})).catch((function(e){0})):De(a,o))}))}}function Te(){var e=ye();e&&(Se[e]={x:window.pageXOffset,y:window.pageYOffset})}function Ee(e){Te(),e.state&&e.state.key&&be(e.state.key)}function Ie(){var e=ye();if(e)return Se[e]}function Ce(e,t){var n=document.documentElement,r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:i.left-r.left-t.x,y:i.top-r.top-t.y}}function xe(e){return Oe(e.x)||Oe(e.y)}function Re(e){return{x:Oe(e.x)?e.x:window.pageXOffset,y:Oe(e.y)?e.y:window.pageYOffset}}function Ae(e){return{x:Oe(e.x)?e.x:0,y:Oe(e.y)?e.y:0}}function Oe(e){return"number"===typeof e}var Pe=/^#\d/;function De(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var r=Pe.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(r){var i=e.offset&&"object"===typeof e.offset?e.offset:{};i=Ae(i),t=Ce(r,i)}else xe(e)&&(t=Re(e))}else n&&xe(e)&&(t=Re(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var Le=ce&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Ne(e,t){Te();var n=window.history;try{if(t){var i=r({},n.state);i.key=ye(),n.replaceState(i,"",e)}else n.pushState({key:be(ge())},"",e)}catch(o){window.location[t?"replace":"assign"](e)}}function Me(e){Ne(e,!0)}var Ue={redirected:2,aborted:4,cancelled:8,duplicated:16};function je(e,t){return $e(e,t,Ue.redirected,'Redirected when going from "'+e.fullPath+'" to "'+ze(t)+'" via a navigation guard.')}function Ve(e,t){var n=$e(e,t,Ue.duplicated,'Avoided redundant navigation to current location: "'+e.fullPath+'".');return n.name="NavigationDuplicated",n}function Fe(e,t){return $e(e,t,Ue.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function Be(e,t){return $e(e,t,Ue.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}function $e(e,t,n,r){var i=new Error(r);return i._isRouter=!0,i.from=e,i.to=t,i.type=n,i}var He=["params","query","hash"];function ze(e){if("string"===typeof e)return e;if("path"in e)return e.path;var t={};return He.forEach((function(n){n in e&&(t[n]=e[n])})),JSON.stringify(t,null,2)}function We(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function qe(e,t){return We(e)&&e._isRouter&&(null==t||e.type===t)}function Ge(e,t,n){var r=function(i){i>=e.length?n():e[i]?t(e[i],(function(){r(i+1)})):r(i+1)};r(0)}function Je(e){return function(t,n,r){var i=!1,o=0,a=null;Ke(e,(function(e,t,n,s){if("function"===typeof e&&void 0===e.cid){i=!0,o++;var c,u=Ze((function(t){Ye(t)&&(t=t.default),e.resolved="function"===typeof t?t:ee.extend(t),n.components[s]=t,o--,o<=0&&r()})),l=Ze((function(e){var t="Failed to resolve async component "+s+": "+e;a||(a=We(e)?e:new Error(t),r(a))}));try{c=e(u,l)}catch(h){l(h)}if(c)if("function"===typeof c.then)c.then(u,l);else{var d=c.component;d&&"function"===typeof d.then&&d.then(u,l)}}})),i||r()}}function Ke(e,t){return Qe(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function Qe(e){return Array.prototype.concat.apply([],e)}var Xe="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Ye(e){return e.__esModule||Xe&&"Module"===e[Symbol.toStringTag]}function Ze(e){var t=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!t)return t=!0,e.apply(this,n)}}var et=function(e,t){this.router=e,this.base=tt(t),this.current=m,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function tt(e){if(!e)if(ce){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function nt(e,t){var n,r=Math.max(e.length,t.length);for(n=0;n<r;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function rt(e,t,n,r){var i=Ke(e,(function(e,r,i,o){var a=it(e,t);if(a)return Array.isArray(a)?a.map((function(e){return n(e,r,i,o)})):n(a,r,i,o)}));return Qe(r?i.reverse():i)}function it(e,t){return"function"!==typeof e&&(e=ee.extend(e)),e.options[t]}function ot(e){return rt(e,"beforeRouteLeave",st,!0)}function at(e){return rt(e,"beforeRouteUpdate",st)}function st(e,t){if(t)return function(){return e.apply(t,arguments)}}function ct(e){return rt(e,"beforeRouteEnter",(function(e,t,n,r){return ut(e,n,r)}))}function ut(e,t,n){return function(r,i,o){return e(r,i,(function(e){"function"===typeof e&&(t.enteredCbs[n]||(t.enteredCbs[n]=[]),t.enteredCbs[n].push(e)),o(e)}))}}et.prototype.listen=function(e){this.cb=e},et.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},et.prototype.onError=function(e){this.errorCbs.push(e)},et.prototype.transitionTo=function(e,t,n){var r,i=this;try{r=this.router.match(e,this.current)}catch(a){throw this.errorCbs.forEach((function(e){e(a)})),a}var o=this.current;this.confirmTransition(r,(function(){i.updateRoute(r),t&&t(r),i.ensureURL(),i.router.afterHooks.forEach((function(e){e&&e(r,o)})),i.ready||(i.ready=!0,i.readyCbs.forEach((function(e){e(r)})))}),(function(e){n&&n(e),e&&!i.ready&&(qe(e,Ue.redirected)&&o===m||(i.ready=!0,i.readyErrorCbs.forEach((function(t){t(e)}))))}))},et.prototype.confirmTransition=function(e,t,n){var r=this,i=this.current;this.pending=e;var o=function(e){!qe(e)&&We(e)&&(r.errorCbs.length?r.errorCbs.forEach((function(t){t(e)})):console.error(e)),n&&n(e)},a=e.matched.length-1,s=i.matched.length-1;if(y(e,i)&&a===s&&e.matched[a]===i.matched[s])return this.ensureURL(),e.hash&&we(this.router,i,e,!1),o(Ve(i,e));var c=nt(this.current.matched,e.matched),u=c.updated,l=c.deactivated,d=c.activated,h=[].concat(ot(l),this.router.beforeHooks,at(u),d.map((function(e){return e.beforeEnter})),Je(d)),p=function(t,n){if(r.pending!==e)return o(Fe(i,e));try{t(e,i,(function(t){!1===t?(r.ensureURL(!0),o(Be(i,e))):We(t)?(r.ensureURL(!0),o(t)):"string"===typeof t||"object"===typeof t&&("string"===typeof t.path||"string"===typeof t.name)?(o(je(i,e)),"object"===typeof t&&t.replace?r.replace(t):r.push(t)):n(t)}))}catch(a){o(a)}};Ge(h,p,(function(){var n=ct(d),a=n.concat(r.router.resolveHooks);Ge(a,p,(function(){if(r.pending!==e)return o(Fe(i,e));r.pending=null,t(e),r.router.app&&r.router.app.$nextTick((function(){w(e)}))}))}))},et.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},et.prototype.setupListeners=function(){},et.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=m,this.pending=null};var lt=function(e){function t(t,n){e.call(this,t,n),this._startLocation=dt(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,r=Le&&n;r&&this.listeners.push(ke());var i=function(){var n=e.current,i=dt(e.base);e.current===m&&i===e._startLocation||e.transitionTo(i,(function(e){r&&we(t,e,n,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){Ne(R(r.base+e.fullPath)),we(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){Me(R(r.base+e.fullPath)),we(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(dt(this.base)!==this.current.fullPath){var t=R(this.base+this.current.fullPath);e?Ne(t):Me(t)}},t.prototype.getCurrentLocation=function(){return dt(this.base)},t}(et);function dt(e){var t=window.location.pathname,n=t.toLowerCase(),r=e.toLowerCase();return!e||n!==r&&0!==n.indexOf(R(r+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var ht=function(e){function t(t,n,r){e.call(this,t,n),r&&pt(this.base)||ft()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,r=Le&&n;r&&this.listeners.push(ke());var i=function(){var t=e.current;ft()&&e.transitionTo(vt(),(function(n){r&&we(e.router,n,t,!0),Le||_t(n.fullPath)}))},o=Le?"popstate":"hashchange";window.addEventListener(o,i),this.listeners.push((function(){window.removeEventListener(o,i)}))}},t.prototype.push=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){gt(e.fullPath),we(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this,i=this,o=i.current;this.transitionTo(e,(function(e){_t(e.fullPath),we(r.router,e,o,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;vt()!==t&&(e?gt(t):_t(t))},t.prototype.getCurrentLocation=function(){return vt()},t}(et);function pt(e){var t=dt(e);if(!/^\/#/.test(t))return window.location.replace(R(e+"/#"+t)),!0}function ft(){var e=vt();return"/"===e.charAt(0)||(_t("/"+e),!1)}function vt(){var e=window.location.href,t=e.indexOf("#");return t<0?"":(e=e.slice(t+1),e)}function mt(e){var t=window.location.href,n=t.indexOf("#"),r=n>=0?t.slice(0,n):t;return r+"#"+e}function gt(e){Le?Ne(mt(e)):window.location.hash=e}function _t(e){Le?Me(mt(e)):window.location.replace(mt(e))}var yt=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,(function(){var e=t.current;t.index=n,t.updateRoute(r),t.router.afterHooks.forEach((function(t){t&&t(r,e)}))}),(function(e){qe(e,Ue.duplicated)&&(t.index=n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(et),bt=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=pe(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Le&&!1!==e.fallback,this.fallback&&(t="hash"),ce||(t="abstract"),this.mode=t,t){case"history":this.history=new lt(this,e.base);break;case"hash":this.history=new ht(this,e.base,this.fallback);break;case"abstract":this.history=new yt(this,e.base);break;default:0}},St={currentRoute:{configurable:!0}};bt.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},St.currentRoute.get=function(){return this.history&&this.history.current},bt.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var n=this.history;if(n instanceof lt||n instanceof ht){var r=function(e){var r=n.current,i=t.options.scrollBehavior,o=Le&&i;o&&"fullPath"in e&&we(t,e,r,!1)},i=function(e){n.setupListeners(),r(e)};n.transitionTo(n.getCurrentLocation(),i,i)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},bt.prototype.beforeEach=function(e){return wt(this.beforeHooks,e)},bt.prototype.beforeResolve=function(e){return wt(this.resolveHooks,e)},bt.prototype.afterEach=function(e){return wt(this.afterHooks,e)},bt.prototype.onReady=function(e,t){this.history.onReady(e,t)},bt.prototype.onError=function(e){this.history.onError(e)},bt.prototype.push=function(e,t,n){var r=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){r.history.push(e,t,n)}));this.history.push(e,t,n)},bt.prototype.replace=function(e,t,n){var r=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){r.history.replace(e,t,n)}));this.history.replace(e,t,n)},bt.prototype.go=function(e){this.history.go(e)},bt.prototype.back=function(){this.go(-1)},bt.prototype.forward=function(){this.go(1)},bt.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},bt.prototype.resolve=function(e,t,n){t=t||this.history.current;var r=Z(e,t,n,this),i=this.match(r,t),o=i.redirectedFrom||i.fullPath,a=this.history.base,s=Tt(a,o,this.mode);return{location:r,route:i,href:s,normalizedTo:r,resolved:i}},bt.prototype.getRoutes=function(){return this.matcher.getRoutes()},bt.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},bt.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(bt.prototype,St);var kt=bt;function wt(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function Tt(e,t,n){var r="hash"===n?"#"+t:t;return e?R(e+"/"+r):r}bt.install=se,bt.version="3.6.5",bt.isNavigationFailure=qe,bt.NavigationFailureType=Ue,bt.START_LOCATION=m,ce&&window.Vue&&window.Vue.use(bt)},144:function(e,t,n){"use strict";n.r(t),n.d(t,{EffectScope:function(){return xt},computed:function(){return mt},customRef:function(){return st},default:function(){return ro},defineAsyncComponent:function(){return tr},defineComponent:function(){return _r},del:function(){return Be},effectScope:function(){return Rt},getCurrentInstance:function(){return me},getCurrentScope:function(){return Ot},h:function(){return jn},inject:function(){return Nt},isProxy:function(){return Ke},isReactive:function(){return qe},isReadonly:function(){return Je},isRef:function(){return Ze},isShallow:function(){return Ge},markRaw:function(){return Xe},mergeDefaults:function(){return Tn},nextTick:function(){return Yn},onActivated:function(){return lr},onBeforeMount:function(){return ir},onBeforeUnmount:function(){return cr},onBeforeUpdate:function(){return ar},onDeactivated:function(){return dr},onErrorCaptured:function(){return mr},onMounted:function(){return or},onRenderTracked:function(){return pr},onRenderTriggered:function(){return fr},onScopeDispose:function(){return Pt},onServerPrefetch:function(){return hr},onUnmounted:function(){return ur},onUpdated:function(){return sr},provide:function(){return Dt},proxyRefs:function(){return ot},reactive:function(){return He},readonly:function(){return ht},ref:function(){return et},set:function(){return Fe},shallowReactive:function(){return ze},shallowReadonly:function(){return vt},shallowRef:function(){return tt},toRaw:function(){return Qe},toRef:function(){return ut},toRefs:function(){return ct},triggerRef:function(){return rt},unref:function(){return it},useAttrs:function(){return Sn},useCssModule:function(){return Zn},useCssVars:function(){return er},useListeners:function(){return kn},useSlots:function(){return bn},version:function(){return gr},watch:function(){return It},watchEffect:function(){return St},watchPostEffect:function(){return kt},watchSyncEffect:function(){return wt}});
/*!
 * Vue.js v2.7.14
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({}),i=Array.isArray;function o(e){return void 0===e||null===e}function a(e){return void 0!==e&&null!==e}function s(e){return!0===e}function c(e){return!1===e}function u(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function l(e){return"function"===typeof e}function d(e){return null!==e&&"object"===typeof e}var h=Object.prototype.toString;function p(e){return"[object Object]"===h.call(e)}function f(e){return"[object RegExp]"===h.call(e)}function v(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function m(e){return a(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function g(e){return null==e?"":Array.isArray(e)||p(e)&&e.toString===h?JSON.stringify(e,null,2):String(e)}function _(e){var t=parseFloat(e);return isNaN(t)?e:t}function y(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}y("slot,component",!0);var b=y("key,ref,slot,slot-scope,is");function S(e,t){var n=e.length;if(n){if(t===e[n-1])return void(e.length=n-1);var r=e.indexOf(t);if(r>-1)return e.splice(r,1)}}var k=Object.prototype.hasOwnProperty;function w(e,t){return k.call(e,t)}function T(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var E=/-(\w)/g,I=T((function(e){return e.replace(E,(function(e,t){return t?t.toUpperCase():""}))})),C=T((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),x=/\B([A-Z])/g,R=T((function(e){return e.replace(x,"-$1").toLowerCase()}));function A(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function O(e,t){return e.bind(t)}var P=Function.prototype.bind?O:A;function D(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function L(e,t){for(var n in t)e[n]=t[n];return e}function N(e){for(var t={},n=0;n<e.length;n++)e[n]&&L(t,e[n]);return t}function M(e,t,n){}var U=function(e,t,n){return!1},j=function(e){return e};function V(e,t){if(e===t)return!0;var n=d(e),r=d(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return V(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return V(e[n],t[n])}))}catch(c){return!1}}function F(e,t){for(var n=0;n<e.length;n++)if(V(e[n],t))return n;return-1}function B(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function $(e,t){return e===t?0===e&&1/e!==1/t:e===e||t===t}var H="data-server-rendered",z=["component","directive","filter"],W=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],q={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:U,isReservedAttr:U,isUnknownElement:U,getTagNamespace:M,parsePlatformTagName:j,mustUseProp:U,async:!0,_lifecycleHooks:W},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function J(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function K(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var Q=new RegExp("[^".concat(G.source,".$_\\d]"));function X(e){if(!Q.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var Y="__proto__"in{},Z="undefined"!==typeof window,ee=Z&&window.navigator.userAgent.toLowerCase(),te=ee&&/msie|trident/.test(ee),ne=ee&&ee.indexOf("msie 9.0")>0,re=ee&&ee.indexOf("edge/")>0;ee&&ee.indexOf("android");var ie=ee&&/iphone|ipad|ipod|ios/.test(ee);ee&&/chrome\/\d+/.test(ee),ee&&/phantomjs/.test(ee);var oe,ae=ee&&ee.match(/firefox\/(\d+)/),se={}.watch,ce=!1;if(Z)try{var ue={};Object.defineProperty(ue,"passive",{get:function(){ce=!0}}),window.addEventListener("test-passive",null,ue)}catch(ic){}var le=function(){return void 0===oe&&(oe=!Z&&"undefined"!==typeof n.g&&(n.g["process"]&&"server"===n.g["process"].env.VUE_ENV)),oe},de=Z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function he(e){return"function"===typeof e&&/native code/.test(e.toString())}var pe,fe="undefined"!==typeof Symbol&&he(Symbol)&&"undefined"!==typeof Reflect&&he(Reflect.ownKeys);pe="undefined"!==typeof Set&&he(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ve=null;function me(){return ve&&{proxy:ve}}function ge(e){void 0===e&&(e=null),e||ve&&ve._scope.off(),ve=e,e&&e._scope.on()}var _e=function(){function e(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),ye=function(e){void 0===e&&(e="");var t=new _e;return t.text=e,t.isComment=!0,t};function be(e){return new _e(void 0,void 0,void 0,String(e))}function Se(e){var t=new _e(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var ke=0,we=[],Te=function(){for(var e=0;e<we.length;e++){var t=we[e];t.subs=t.subs.filter((function(e){return e})),t._pending=!1}we.length=0},Ee=function(){function e(){this._pending=!1,this.id=ke++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,we.push(this))},e.prototype.depend=function(t){e.target&&e.target.addDep(this)},e.prototype.notify=function(e){var t=this.subs.filter((function(e){return e}));for(var n=0,r=t.length;n<r;n++){var i=t[n];0,i.update()}},e}();Ee.target=null;var Ie=[];function Ce(e){Ie.push(e),Ee.target=e}function xe(){Ie.pop(),Ee.target=Ie[Ie.length-1]}var Re=Array.prototype,Ae=Object.create(Re),Oe=["push","pop","shift","unshift","splice","sort","reverse"];Oe.forEach((function(e){var t=Re[e];K(Ae,e,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o}))}));var Pe=Object.getOwnPropertyNames(Ae),De={},Le=!0;function Ne(e){Le=e}var Me={notify:M,depend:M,addSub:M,removeSub:M},Ue=function(){function e(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),this.value=e,this.shallow=t,this.mock=n,this.dep=n?Me:new Ee,this.vmCount=0,K(e,"__ob__",this),i(e)){if(!n)if(Y)e.__proto__=Ae;else for(var r=0,o=Pe.length;r<o;r++){var a=Pe[r];K(e,a,Ae[a])}t||this.observeArray(e)}else{var s=Object.keys(e);for(r=0;r<s.length;r++){a=s[r];Ve(e,a,De,void 0,t,n)}}}return e.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)je(e[t],!1,this.mock)},e}();function je(e,t,n){return e&&w(e,"__ob__")&&e.__ob__ instanceof Ue?e.__ob__:!Le||!n&&le()||!i(e)&&!p(e)||!Object.isExtensible(e)||e.__v_skip||Ze(e)||e instanceof _e?void 0:new Ue(e,t,n)}function Ve(e,t,n,r,o,a){var s=new Ee,c=Object.getOwnPropertyDescriptor(e,t);if(!c||!1!==c.configurable){var u=c&&c.get,l=c&&c.set;u&&!l||n!==De&&2!==arguments.length||(n=e[t]);var d=!o&&je(n,!1,a);return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=u?u.call(e):n;return Ee.target&&(s.depend(),d&&(d.dep.depend(),i(t)&&$e(t))),Ze(t)&&!o?t.value:t},set:function(t){var r=u?u.call(e):n;if($(r,t)){if(l)l.call(e,t);else{if(u)return;if(!o&&Ze(r)&&!Ze(t))return void(r.value=t);n=t}d=!o&&je(t,!1,a),s.notify()}}}),s}}function Fe(e,t,n){if(!Je(e)){var r=e.__ob__;return i(e)&&v(t)?(e.length=Math.max(e.length,t),e.splice(t,1,n),r&&!r.shallow&&r.mock&&je(n,!1,!0),n):t in e&&!(t in Object.prototype)?(e[t]=n,n):e._isVue||r&&r.vmCount?n:r?(Ve(r.value,t,n,void 0,r.shallow,r.mock),r.dep.notify(),n):(e[t]=n,n)}}function Be(e,t){if(i(e)&&v(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||Je(e)||w(e,t)&&(delete e[t],n&&n.dep.notify())}}function $e(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),i(t)&&$e(t)}function He(e){return We(e,!1),e}function ze(e){return We(e,!0),K(e,"__v_isShallow",!0),e}function We(e,t){if(!Je(e)){je(e,t,le());0}}function qe(e){return Je(e)?qe(e["__v_raw"]):!(!e||!e.__ob__)}function Ge(e){return!(!e||!e.__v_isShallow)}function Je(e){return!(!e||!e.__v_isReadonly)}function Ke(e){return qe(e)||Je(e)}function Qe(e){var t=e&&e["__v_raw"];return t?Qe(t):e}function Xe(e){return Object.isExtensible(e)&&K(e,"__v_skip",!0),e}var Ye="__v_isRef";function Ze(e){return!(!e||!0!==e.__v_isRef)}function et(e){return nt(e,!1)}function tt(e){return nt(e,!0)}function nt(e,t){if(Ze(e))return e;var n={};return K(n,Ye,!0),K(n,"__v_isShallow",t),K(n,"dep",Ve(n,"value",e,null,t,le())),n}function rt(e){e.dep&&e.dep.notify()}function it(e){return Ze(e)?e.value:e}function ot(e){if(qe(e))return e;for(var t={},n=Object.keys(e),r=0;r<n.length;r++)at(t,e,n[r]);return t}function at(e,t,n){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var e=t[n];if(Ze(e))return e.value;var r=e&&e.__ob__;return r&&r.dep.depend(),e},set:function(e){var r=t[n];Ze(r)&&!Ze(e)?r.value=e:t[n]=e}})}function st(e){var t=new Ee,n=e((function(){t.depend()}),(function(){t.notify()})),r=n.get,i=n.set,o={get value(){return r()},set value(e){i(e)}};return K(o,Ye,!0),o}function ct(e){var t=i(e)?new Array(e.length):{};for(var n in e)t[n]=ut(e,n);return t}function ut(e,t,n){var r=e[t];if(Ze(r))return r;var i={get value(){var r=e[t];return void 0===r?n:r},set value(n){e[t]=n}};return K(i,Ye,!0),i}var lt="__v_rawToReadonly",dt="__v_rawToShallowReadonly";function ht(e){return pt(e,!1)}function pt(e,t){if(!p(e))return e;if(Je(e))return e;var n=t?dt:lt,r=e[n];if(r)return r;var i=Object.create(Object.getPrototypeOf(e));K(e,n,i),K(i,"__v_isReadonly",!0),K(i,"__v_raw",e),Ze(e)&&K(i,Ye,!0),(t||Ge(e))&&K(i,"__v_isShallow",!0);for(var o=Object.keys(e),a=0;a<o.length;a++)ft(i,e,o[a],t);return i}function ft(e,t,n,r){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var e=t[n];return r||!p(e)?e:ht(e)},set:function(){}})}function vt(e){return pt(e,!0)}function mt(e,t){var n,r,i=l(e);i?(n=e,r=M):(n=e.get,r=e.set);var o=le()?null:new Tr(ve,n,M,{lazy:!0});var a={effect:o,get value(){return o?(o.dirty&&o.evaluate(),Ee.target&&o.depend(),o.value):n()},set value(e){r(e)}};return K(a,Ye,!0),K(a,"__v_isReadonly",i),a}var gt="watcher",_t="".concat(gt," callback"),yt="".concat(gt," getter"),bt="".concat(gt," cleanup");function St(e,t){return Ct(e,null,t)}function kt(e,t){return Ct(e,null,{flush:"post"})}function wt(e,t){return Ct(e,null,{flush:"sync"})}var Tt,Et={};function It(e,t,n){return Ct(e,t,n)}function Ct(e,t,n){var o=void 0===n?r:n,a=o.immediate,s=o.deep,c=o.flush,u=void 0===c?"pre":c;o.onTrack,o.onTrigger;var d,h,p=ve,f=function(e,t,n){return void 0===n&&(n=null),Fn(e,null,n,p,t)},v=!1,m=!1;if(Ze(e)?(d=function(){return e.value},v=Ge(e)):qe(e)?(d=function(){return e.__ob__.dep.depend(),e},s=!0):i(e)?(m=!0,v=e.some((function(e){return qe(e)||Ge(e)})),d=function(){return e.map((function(e){return Ze(e)?e.value:qe(e)?br(e):l(e)?f(e,yt):void 0}))}):d=l(e)?t?function(){return f(e,yt)}:function(){if(!p||!p._isDestroyed)return h&&h(),f(e,gt,[_])}:M,t&&s){var g=d;d=function(){return br(g())}}var _=function(e){h=y.onStop=function(){f(e,bt)}};if(le())return _=M,t?a&&f(t,_t,[d(),m?[]:void 0,_]):d(),M;var y=new Tr(ve,d,M,{lazy:!0});y.noRecurse=!t;var b=m?[]:Et;return y.run=function(){if(y.active)if(t){var e=y.get();(s||v||(m?e.some((function(e,t){return $(e,b[t])})):$(e,b)))&&(h&&h(),f(t,_t,[e,b===Et?void 0:b,_]),b=e)}else y.get()},"sync"===u?y.update=y.run:"post"===u?(y.post=!0,y.update=function(){return ni(y)}):y.update=function(){if(p&&p===ve&&!p._isMounted){var e=p._preWatchers||(p._preWatchers=[]);e.indexOf(y)<0&&e.push(y)}else ni(y)},t?a?y.run():b=y.get():"post"===u&&p?p.$once("hook:mounted",(function(){return y.get()})):y.get(),function(){y.teardown()}}var xt=function(){function e(e){void 0===e&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Tt,!e&&Tt&&(this.index=(Tt.scopes||(Tt.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var t=Tt;try{return Tt=this,e()}finally{Tt=t}}else 0},e.prototype.on=function(){Tt=this},e.prototype.off=function(){Tt=this.parent},e.prototype.stop=function(e){if(this.active){var t=void 0,n=void 0;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].teardown();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}},e}();function Rt(e){return new xt(e)}function At(e,t){void 0===t&&(t=Tt),t&&t.active&&t.effects.push(e)}function Ot(){return Tt}function Pt(e){Tt&&Tt.cleanups.push(e)}function Dt(e,t){ve&&(Lt(ve)[e]=t)}function Lt(e){var t=e._provided,n=e.$parent&&e.$parent._provided;return n===t?e._provided=Object.create(n):t}function Nt(e,t,n){void 0===n&&(n=!1);var r=ve;if(r){var i=r.$parent&&r.$parent._provided;if(i&&e in i)return i[e];if(arguments.length>1)return n&&l(t)?t.call(r):t}else 0}var Mt=T((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}}));function Ut(e,t){function n(){var e=n.fns;if(!i(e))return Fn(e,null,arguments,t,"v-on handler");for(var r=e.slice(),o=0;o<r.length;o++)Fn(r[o],null,arguments,t,"v-on handler")}return n.fns=e,n}function jt(e,t,n,r,i,a){var c,u,l,d;for(c in e)u=e[c],l=t[c],d=Mt(c),o(u)||(o(l)?(o(u.fns)&&(u=e[c]=Ut(u,a)),s(d.once)&&(u=e[c]=i(d.name,u,d.capture)),n(d.name,u,d.capture,d.passive,d.params)):u!==l&&(l.fns=u,e[c]=l));for(c in t)o(e[c])&&(d=Mt(c),r(d.name,t[c],d.capture))}function Vt(e,t,n){var r;e instanceof _e&&(e=e.data.hook||(e.data.hook={}));var i=e[t];function c(){n.apply(this,arguments),S(r.fns,c)}o(i)?r=Ut([c]):a(i.fns)&&s(i.merged)?(r=i,r.fns.push(c)):r=Ut([i,c]),r.merged=!0,e[t]=r}function Ft(e,t,n){var r=t.options.props;if(!o(r)){var i={},s=e.attrs,c=e.props;if(a(s)||a(c))for(var u in r){var l=R(u);Bt(i,c,u,l,!0)||Bt(i,s,u,l,!1)}return i}}function Bt(e,t,n,r,i){if(a(t)){if(w(t,n))return e[n]=t[n],i||delete t[n],!0;if(w(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function $t(e){for(var t=0;t<e.length;t++)if(i(e[t]))return Array.prototype.concat.apply([],e);return e}function Ht(e){return u(e)?[be(e)]:i(e)?Wt(e):void 0}function zt(e){return a(e)&&a(e.text)&&c(e.isComment)}function Wt(e,t){var n,r,c,l,d=[];for(n=0;n<e.length;n++)r=e[n],o(r)||"boolean"===typeof r||(c=d.length-1,l=d[c],i(r)?r.length>0&&(r=Wt(r,"".concat(t||"","_").concat(n)),zt(r[0])&&zt(l)&&(d[c]=be(l.text+r[0].text),r.shift()),d.push.apply(d,r)):u(r)?zt(l)?d[c]=be(l.text+r):""!==r&&d.push(be(r)):zt(r)&&zt(l)?d[c]=be(l.text+r.text):(s(e._isVList)&&a(r.tag)&&o(r.key)&&a(t)&&(r.key="__vlist".concat(t,"_").concat(n,"__")),d.push(r)));return d}function qt(e,t){var n,r,o,s,c=null;if(i(e)||"string"===typeof e)for(c=new Array(e.length),n=0,r=e.length;n<r;n++)c[n]=t(e[n],n);else if("number"===typeof e)for(c=new Array(e),n=0;n<e;n++)c[n]=t(n+1,n);else if(d(e))if(fe&&e[Symbol.iterator]){c=[];var u=e[Symbol.iterator](),l=u.next();while(!l.done)c.push(t(l.value,c.length)),l=u.next()}else for(o=Object.keys(e),c=new Array(o.length),n=0,r=o.length;n<r;n++)s=o[n],c[n]=t(e[s],s,n);return a(c)||(c=[]),c._isVList=!0,c}function Gt(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=L(L({},r),n)),i=o(n)||(l(t)?t():t)):i=this.$slots[e]||(l(t)?t():t);var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Jt(e){return Ai(this.$options,"filters",e,!0)||j}function Kt(e,t){return i(e)?-1===e.indexOf(t):e!==t}function Qt(e,t,n,r,i){var o=q.keyCodes[t]||n;return i&&r&&!q.keyCodes[t]?Kt(i,r):o?Kt(o,e):r?R(r)!==t:void 0===e}function Xt(e,t,n,r,o){if(n)if(d(n)){i(n)&&(n=N(n));var a=void 0,s=function(i){if("class"===i||"style"===i||b(i))a=e;else{var s=e.attrs&&e.attrs.type;a=r||q.mustUseProp(t,s,i)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=I(i),u=R(i);if(!(c in a)&&!(u in a)&&(a[i]=n[i],o)){var l=e.on||(e.on={});l["update:".concat(i)]=function(e){n[i]=e}}};for(var c in n)s(c)}else;return e}function Yt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),en(r,"__static__".concat(e),!1)),r}function Zt(e,t,n){return en(e,"__once__".concat(t).concat(n?"_".concat(n):""),!0),e}function en(e,t,n){if(i(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&tn(e[r],"".concat(t,"_").concat(r),n);else tn(e,t,n)}function tn(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function nn(e,t){if(t)if(p(t)){var n=e.on=e.on?L({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else;return e}function rn(e,t,n,r){t=t||{$stable:!n};for(var o=0;o<e.length;o++){var a=e[o];i(a)?rn(a,t,n):a&&(a.proxy&&(a.fn.proxy=!0),t[a.key]=a.fn)}return r&&(t.$key=r),t}function on(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"===typeof r&&r&&(e[t[n]]=t[n+1])}return e}function an(e,t){return"string"===typeof e?t+e:e}function sn(e){e._o=Zt,e._n=_,e._s=g,e._l=qt,e._t=Gt,e._q=V,e._i=F,e._m=Yt,e._f=Jt,e._k=Qt,e._b=Xt,e._v=be,e._e=ye,e._u=rn,e._g=nn,e._d=on,e._p=an}function cn(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var u in n)n[u].every(un)&&delete n[u];return n}function un(e){return e.isComment&&!e.asyncFactory||" "===e.text}function ln(e){return e.isComment&&e.asyncFactory}function dn(e,t,n,i){var o,a=Object.keys(n).length>0,s=t?!!t.$stable:!a,c=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(s&&i&&i!==r&&c===i.$key&&!a&&!i.$hasNormal)return i;for(var u in o={},t)t[u]&&"$"!==u[0]&&(o[u]=hn(e,n,u,t[u]))}else o={};for(var l in n)l in o||(o[l]=pn(n,l));return t&&Object.isExtensible(t)&&(t._normalized=o),K(o,"$stable",s),K(o,"$key",c),K(o,"$hasNormal",a),o}function hn(e,t,n,r){var o=function(){var t=ve;ge(e);var n=arguments.length?r.apply(null,arguments):r({});n=n&&"object"===typeof n&&!i(n)?[n]:Ht(n);var o=n&&n[0];return ge(t),n&&(!o||1===n.length&&o.isComment&&!ln(o))?void 0:n};return r.proxy&&Object.defineProperty(t,n,{get:o,enumerable:!0,configurable:!0}),o}function pn(e,t){return function(){return e[t]}}function fn(e){var t=e.$options,n=t.setup;if(n){var r=e._setupContext=vn(e);ge(e),Ce();var i=Fn(n,null,[e._props||ze({}),r],e,"setup");if(xe(),ge(),l(i))t.render=i;else if(d(i))if(e._setupState=i,i.__sfc){var o=e._setupProxy={};for(var a in i)"__sfc"!==a&&at(o,i,a)}else for(var a in i)J(a)||at(e,i,a);else 0}}function vn(e){return{get attrs(){if(!e._attrsProxy){var t=e._attrsProxy={};K(t,"_v_attr_proxy",!0),mn(t,e.$attrs,r,e,"$attrs")}return e._attrsProxy},get listeners(){if(!e._listenersProxy){var t=e._listenersProxy={};mn(t,e.$listeners,r,e,"$listeners")}return e._listenersProxy},get slots(){return _n(e)},emit:P(e.$emit,e),expose:function(t){t&&Object.keys(t).forEach((function(n){return at(e,t,n)}))}}}function mn(e,t,n,r,i){var o=!1;for(var a in t)a in e?t[a]!==n[a]&&(o=!0):(o=!0,gn(e,a,r,i));for(var a in e)a in t||(o=!0,delete e[a]);return o}function gn(e,t,n,r){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n[r][t]}})}function _n(e){return e._slotsProxy||yn(e._slotsProxy={},e.$scopedSlots),e._slotsProxy}function yn(e,t){for(var n in t)e[n]=t[n];for(var n in e)n in t||delete e[n]}function bn(){return wn().slots}function Sn(){return wn().attrs}function kn(){return wn().listeners}function wn(){var e=ve;return e._setupContext||(e._setupContext=vn(e))}function Tn(e,t){var n=i(e)?e.reduce((function(e,t){return e[t]={},e}),{}):e;for(var r in t){var o=n[r];o?i(o)||l(o)?n[r]={type:o,default:t[r]}:o.default=t[r]:null===o&&(n[r]={default:t[r]})}return n}function En(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,i=n&&n.context;e.$slots=cn(t._renderChildren,i),e.$scopedSlots=n?dn(e.$parent,n.data.scopedSlots,e.$slots):r,e._c=function(t,n,r,i){return Ln(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return Ln(e,t,n,r,i,!0)};var o=n&&n.data;Ve(e,"$attrs",o&&o.attrs||r,null,!0),Ve(e,"$listeners",t._parentListeners||r,null,!0)}var In=null;function Cn(e){sn(e.prototype),e.prototype.$nextTick=function(e){return Yn(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,o=n._parentVnode;o&&t._isMounted&&(t.$scopedSlots=dn(t.$parent,o.data.scopedSlots,t.$slots,t.$scopedSlots),t._slotsProxy&&yn(t._slotsProxy,t.$scopedSlots)),t.$vnode=o;try{ge(t),In=t,e=r.call(t._renderProxy,t.$createElement)}catch(ic){Vn(ic,t,"render"),e=t._vnode}finally{In=null,ge()}return i(e)&&1===e.length&&(e=e[0]),e instanceof _e||(e=ye()),e.parent=o,e}}function xn(e,t){return(e.__esModule||fe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),d(e)?t.extend(e):e}function Rn(e,t,n,r,i){var o=ye();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function An(e,t){if(s(e.error)&&a(e.errorComp))return e.errorComp;if(a(e.resolved))return e.resolved;var n=In;if(n&&a(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),s(e.loading)&&a(e.loadingComp))return e.loadingComp;if(n&&!a(e.owners)){var r=e.owners=[n],i=!0,c=null,u=null;n.$on("hook:destroyed",(function(){return S(r,n)}));var l=function(e){for(var t=0,n=r.length;t<n;t++)r[t].$forceUpdate();e&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},h=B((function(n){e.resolved=xn(n,t),i?r.length=0:l(!0)})),p=B((function(t){a(e.errorComp)&&(e.error=!0,l(!0))})),f=e(h,p);return d(f)&&(m(f)?o(e.resolved)&&f.then(h,p):m(f.component)&&(f.component.then(h,p),a(f.error)&&(e.errorComp=xn(f.error,t)),a(f.loading)&&(e.loadingComp=xn(f.loading,t),0===f.delay?e.loading=!0:c=setTimeout((function(){c=null,o(e.resolved)&&o(e.error)&&(e.loading=!0,l(!1))}),f.delay||200)),a(f.timeout)&&(u=setTimeout((function(){u=null,o(e.resolved)&&p(null)}),f.timeout)))),i=!1,e.loading?e.loadingComp:e.resolved}}function On(e){if(i(e))for(var t=0;t<e.length;t++){var n=e[t];if(a(n)&&(a(n.componentOptions)||ln(n)))return n}}var Pn=1,Dn=2;function Ln(e,t,n,r,o,a){return(i(n)||u(n))&&(o=r,r=n,n=void 0),s(a)&&(o=Dn),Nn(e,t,n,r,o)}function Nn(e,t,n,r,o){if(a(n)&&a(n.__ob__))return ye();if(a(n)&&a(n.is)&&(t=n.is),!t)return ye();var s,c;if(i(r)&&l(r[0])&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===Dn?r=Ht(r):o===Pn&&(r=$t(r)),"string"===typeof t){var u=void 0;c=e.$vnode&&e.$vnode.ns||q.getTagNamespace(t),s=q.isReservedTag(t)?new _e(q.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!a(u=Ai(e.$options,"components",t))?new _e(t,n,r,void 0,void 0,e):pi(u,n,e,r,t)}else s=pi(t,n,e,r);return i(s)?s:a(s)?(a(c)&&Mn(s,c),a(n)&&Un(n),s):ye()}function Mn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),a(e.children))for(var r=0,i=e.children.length;r<i;r++){var c=e.children[r];a(c.tag)&&(o(c.ns)||s(n)&&"svg"!==c.tag)&&Mn(c,t,n)}}function Un(e){d(e.style)&&br(e.style),d(e.class)&&br(e.class)}function jn(e,t,n){return Ln(ve,e,t,n,2,!0)}function Vn(e,t,n){Ce();try{if(t){var r=t;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,e,t,n);if(a)return}catch(ic){Bn(ic,r,"errorCaptured hook")}}}Bn(e,t,n)}finally{xe()}}function Fn(e,t,n,r,i){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&m(o)&&!o._handled&&(o.catch((function(e){return Vn(e,r,i+" (Promise/async)")})),o._handled=!0)}catch(ic){Vn(ic,r,i)}return o}function Bn(e,t,n){if(q.errorHandler)try{return q.errorHandler.call(null,e,t,n)}catch(ic){ic!==e&&$n(ic,null,"config.errorHandler")}$n(e,t,n)}function $n(e,t,n){if(!Z||"undefined"===typeof console)throw e;console.error(e)}var Hn,zn=!1,Wn=[],qn=!1;function Gn(){qn=!1;var e=Wn.slice(0);Wn.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&he(Promise)){var Jn=Promise.resolve();Hn=function(){Jn.then(Gn),ie&&setTimeout(M)},zn=!0}else if(te||"undefined"===typeof MutationObserver||!he(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Hn="undefined"!==typeof setImmediate&&he(setImmediate)?function(){setImmediate(Gn)}:function(){setTimeout(Gn,0)};else{var Kn=1,Qn=new MutationObserver(Gn),Xn=document.createTextNode(String(Kn));Qn.observe(Xn,{characterData:!0}),Hn=function(){Kn=(Kn+1)%2,Xn.data=String(Kn)},zn=!0}function Yn(e,t){var n;if(Wn.push((function(){if(e)try{e.call(t)}catch(ic){Vn(ic,t,"nextTick")}else n&&n(t)})),qn||(qn=!0,Hn()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}function Zn(e){if(void 0===e&&(e="$style"),!ve)return r;var t=ve[e];return t||r}function er(e){if(Z){var t=ve;t&&kt((function(){var n=t.$el,r=e(t,t._setupProxy);if(n&&1===n.nodeType){var i=n.style;for(var o in r)i.setProperty("--".concat(o),r[o])}}))}}function tr(e){l(e)&&(e={loader:e});var t=e.loader,n=e.loadingComponent,r=e.errorComponent,i=e.delay,o=void 0===i?200:i,a=e.timeout,s=(e.suspensible,e.onError);var c=null,u=0,d=function(){return u++,c=null,h()},h=function(){var e;return c||(e=c=t().catch((function(e){if(e=e instanceof Error?e:new Error(String(e)),s)return new Promise((function(t,n){var r=function(){return t(d())},i=function(){return n(e)};s(e,r,i,u+1)}));throw e})).then((function(t){return e!==c&&c?c:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),t)})))};return function(){var e=h();return{component:e,delay:o,timeout:a,error:r,loading:n}}}function nr(e){return function(t,n){if(void 0===n&&(n=ve),n)return rr(n,e,t)}}function rr(e,t,n){var r=e.$options;r[t]=ki(r[t],n)}var ir=nr("beforeMount"),or=nr("mounted"),ar=nr("beforeUpdate"),sr=nr("updated"),cr=nr("beforeDestroy"),ur=nr("destroyed"),lr=nr("activated"),dr=nr("deactivated"),hr=nr("serverPrefetch"),pr=nr("renderTracked"),fr=nr("renderTriggered"),vr=nr("errorCaptured");function mr(e,t){void 0===t&&(t=ve),vr(e,t)}var gr="2.7.14";function _r(e){return e}var yr=new pe;function br(e){return Sr(e,yr),yr.clear(),e}function Sr(e,t){var n,r,o=i(e);if(!(!o&&!d(e)||e.__v_skip||Object.isFrozen(e)||e instanceof _e)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(o){n=e.length;while(n--)Sr(e[n],t)}else if(Ze(e))Sr(e.value,t);else{r=Object.keys(e),n=r.length;while(n--)Sr(e[r[n]],t)}}}var kr,wr=0,Tr=function(){function e(e,t,n,r,i){At(this,Tt&&!Tt._vm?Tt:e?e._scope:void 0),(this.vm=e)&&i&&(e._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++wr,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pe,this.newDepIds=new pe,this.expression="",l(t)?this.getter=t:(this.getter=X(t),this.getter||(this.getter=M)),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){var e;Ce(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(ic){if(!this.user)throw ic;Vn(ic,t,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&br(e),xe(),this.cleanupDeps()}return e},e.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},e.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ni(this)},e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||d(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'.concat(this.expression,'"');Fn(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&S(this.vm._scope.effects,this),this.active){var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}();function Er(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Rr(e,t)}function Ir(e,t){kr.$on(e,t)}function Cr(e,t){kr.$off(e,t)}function xr(e,t){var n=kr;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function Rr(e,t,n){kr=e,jt(t,n||{},Ir,Cr,xr,e),kr=void 0}function Ar(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(i(e))for(var o=0,a=e.length;o<a;o++)r.$on(e[o],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(i(e)){for(var r=0,o=e.length;r<o;r++)n.$off(e[r],t);return n}var a,s=n._events[e];if(!s)return n;if(!t)return n._events[e]=null,n;var c=s.length;while(c--)if(a=s[c],a===t||a.fn===t){s.splice(c,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?D(n):n;for(var r=D(arguments,1),i='event handler for "'.concat(e,'"'),o=0,a=n.length;o<a;o++)Fn(n[o],t,r,t,i)}return t}}var Or=null;function Pr(e){var t=Or;return Or=e,function(){Or=t}}function Dr(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._provided=n?n._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Lr(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=Pr(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n);var a=n;while(a&&a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode)a.$parent.$el=a.$el,a=a.$parent},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Fr(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||S(t.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Fr(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Nr(e,t,n){var r;e.$el=t,e.$options.render||(e.$options.render=ye),Fr(e,"beforeMount"),r=function(){e._update(e._render(),n)};var i={before:function(){e._isMounted&&!e._isDestroyed&&Fr(e,"beforeUpdate")}};new Tr(e,r,M,i,!0),n=!1;var o=e._preWatchers;if(o)for(var a=0;a<o.length;a++)o[a].run();return null==e.$vnode&&(e._isMounted=!0,Fr(e,"mounted")),e}function Mr(e,t,n,i,o){var a=i.data.scopedSlots,s=e.$scopedSlots,c=!!(a&&!a.$stable||s!==r&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key),u=!!(o||e.$options._renderChildren||c),l=e.$vnode;e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i),e.$options._renderChildren=o;var d=i.data.attrs||r;e._attrsProxy&&mn(e._attrsProxy,d,l.data&&l.data.attrs||r,e,"$attrs")&&(u=!0),e.$attrs=d,n=n||r;var h=e.$options._parentListeners;if(e._listenersProxy&&mn(e._listenersProxy,n,h||r,e,"$listeners"),e.$listeners=e.$options._parentListeners=n,Rr(e,n,h),t&&e.$options.props){Ne(!1);for(var p=e._props,f=e.$options._propKeys||[],v=0;v<f.length;v++){var m=f[v],g=e.$options.props;p[m]=Oi(m,g,t,e)}Ne(!0),e.$options.propsData=t}u&&(e.$slots=cn(o,i.context),e.$forceUpdate())}function Ur(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function jr(e,t){if(t){if(e._directInactive=!1,Ur(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)jr(e.$children[n]);Fr(e,"activated")}}function Vr(e,t){if((!t||(e._directInactive=!0,!Ur(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Vr(e.$children[n]);Fr(e,"deactivated")}}function Fr(e,t,n,r){void 0===r&&(r=!0),Ce();var i=ve;r&&ge(e);var o=e.$options[t],a="".concat(t," hook");if(o)for(var s=0,c=o.length;s<c;s++)Fn(o[s],e,n||null,e,a);e._hasHookEvent&&e.$emit("hook:"+t),r&&ge(i),xe()}var Br=[],$r=[],Hr={},zr=!1,Wr=!1,qr=0;function Gr(){qr=Br.length=$r.length=0,Hr={},zr=Wr=!1}var Jr=0,Kr=Date.now;if(Z&&!te){var Qr=window.performance;Qr&&"function"===typeof Qr.now&&Kr()>document.createEvent("Event").timeStamp&&(Kr=function(){return Qr.now()})}var Xr=function(e,t){if(e.post){if(!t.post)return 1}else if(t.post)return-1;return e.id-t.id};function Yr(){var e,t;for(Jr=Kr(),Wr=!0,Br.sort(Xr),qr=0;qr<Br.length;qr++)e=Br[qr],e.before&&e.before(),t=e.id,Hr[t]=null,e.run();var n=$r.slice(),r=Br.slice();Gr(),ti(n),Zr(r),Te(),de&&q.devtools&&de.emit("flush")}function Zr(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r&&r._watcher===n&&r._isMounted&&!r._isDestroyed&&Fr(r,"updated")}}function ei(e){e._inactive=!1,$r.push(e)}function ti(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,jr(e[t],!0)}function ni(e){var t=e.id;if(null==Hr[t]&&(e!==Ee.target||!e.noRecurse)){if(Hr[t]=!0,Wr){var n=Br.length-1;while(n>qr&&Br[n].id>e.id)n--;Br.splice(n+1,0,e)}else Br.push(e);zr||(zr=!0,Yn(Yr))}}function ri(e){var t=e.$options.provide;if(t){var n=l(t)?t.call(e):t;if(!d(n))return;for(var r=Lt(e),i=fe?Reflect.ownKeys(n):Object.keys(n),o=0;o<i.length;o++){var a=i[o];Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))}}}function ii(e){var t=oi(e.$options.inject,e);t&&(Ne(!1),Object.keys(t).forEach((function(n){Ve(e,n,t[n])})),Ne(!0))}function oi(e,t){if(e){for(var n=Object.create(null),r=fe?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=e[o].from;if(a in t._provided)n[o]=t._provided[a];else if("default"in e[o]){var s=e[o].default;n[o]=l(s)?s.call(t):s}else 0}}return n}}function ai(e,t,n,o,a){var c,u=this,l=a.options;w(o,"_uid")?(c=Object.create(o),c._original=o):(c=o,o=o._original);var d=s(l._compiled),h=!d;this.data=e,this.props=t,this.children=n,this.parent=o,this.listeners=e.on||r,this.injections=oi(l.inject,o),this.slots=function(){return u.$slots||dn(o,e.scopedSlots,u.$slots=cn(n,o)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return dn(o,e.scopedSlots,this.slots())}}),d&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=dn(o,e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,r){var a=Ln(c,e,t,n,r,h);return a&&!i(a)&&(a.fnScopeId=l._scopeId,a.fnContext=o),a}:this._c=function(e,t,n,r){return Ln(c,e,t,n,r,h)}}function si(e,t,n,o,s){var c=e.options,u={},l=c.props;if(a(l))for(var d in l)u[d]=Oi(d,l,t||r);else a(n.attrs)&&ui(u,n.attrs),a(n.props)&&ui(u,n.props);var h=new ai(n,u,s,o,e),p=c.render.call(null,h._c,h);if(p instanceof _e)return ci(p,n,h.parent,c,h);if(i(p)){for(var f=Ht(p)||[],v=new Array(f.length),m=0;m<f.length;m++)v[m]=ci(f[m],n,h.parent,c,h);return v}}function ci(e,t,n,r,i){var o=Se(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function ui(e,t){for(var n in t)e[I(n)]=t[n]}function li(e){return e.name||e.__name||e._componentTag}sn(ai.prototype);var di={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;di.prepatch(n,n)}else{var r=e.componentInstance=fi(e,Or);r.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;Mr(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Fr(n,"mounted")),e.data.keepAlive&&(t._isMounted?ei(n):jr(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Vr(t,!0):t.$destroy())}},hi=Object.keys(di);function pi(e,t,n,r,i){if(!o(e)){var c=n.$options._base;if(d(e)&&(e=c.extend(e)),"function"===typeof e){var u;if(o(e.cid)&&(u=e,e=An(u,c),void 0===e))return Rn(u,t,n,r,i);t=t||{},to(e),a(t.model)&&gi(e.options,t);var l=Ft(t,e,i);if(s(e.options.functional))return si(e,l,t,n,r);var h=t.on;if(t.on=t.nativeOn,s(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}vi(t);var f=li(e.options)||i,v=new _e("vue-component-".concat(e.cid).concat(f?"-".concat(f):""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:l,listeners:h,tag:i,children:r},u);return v}}}function fi(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return a(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function vi(e){for(var t=e.hook||(e.hook={}),n=0;n<hi.length;n++){var r=hi[n],i=t[r],o=di[r];i===o||i&&i._merged||(t[r]=i?mi(o,i):o)}}function mi(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function gi(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),s=o[r],c=t.model.callback;a(s)?(i(s)?-1===s.indexOf(c):s!==c)&&(o[r]=[c].concat(s)):o[r]=c}var _i=M,yi=q.optionMergeStrategies;function bi(e,t,n){if(void 0===n&&(n=!0),!t)return e;for(var r,i,o,a=fe?Reflect.ownKeys(t):Object.keys(t),s=0;s<a.length;s++)r=a[s],"__ob__"!==r&&(i=e[r],o=t[r],n&&w(e,r)?i!==o&&p(i)&&p(o)&&bi(i,o):Fe(e,r,o));return e}function Si(e,t,n){return n?function(){var r=l(t)?t.call(n,n):t,i=l(e)?e.call(n,n):e;return r?bi(r,i):i}:t?e?function(){return bi(l(t)?t.call(this,this):t,l(e)?e.call(this,this):e)}:t:e}function ki(e,t){var n=t?e?e.concat(t):i(t)?t:[t]:e;return n?wi(n):n}function wi(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function Ti(e,t,n,r){var i=Object.create(e||null);return t?L(i,t):i}yi.data=function(e,t,n){return n?Si(e,t,n):t&&"function"!==typeof t?e:Si(e,t)},W.forEach((function(e){yi[e]=ki})),z.forEach((function(e){yi[e+"s"]=Ti})),yi.watch=function(e,t,n,r){if(e===se&&(e=void 0),t===se&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var o={};for(var a in L(o,e),t){var s=o[a],c=t[a];s&&!i(s)&&(s=[s]),o[a]=s?s.concat(c):i(c)?c:[c]}return o},yi.props=yi.methods=yi.inject=yi.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return L(i,e),t&&L(i,t),i},yi.provide=function(e,t){return e?function(){var n=Object.create(null);return bi(n,l(e)?e.call(this):e),t&&bi(n,l(t)?t.call(this):t,!1),n}:t};var Ei=function(e,t){return void 0===t?e:t};function Ii(e,t){var n=e.props;if(n){var r,o,a,s={};if(i(n)){r=n.length;while(r--)o=n[r],"string"===typeof o&&(a=I(o),s[a]={type:null})}else if(p(n))for(var c in n)o=n[c],a=I(c),s[a]=p(o)?o:{type:o};else 0;e.props=s}}function Ci(e,t){var n=e.inject;if(n){var r=e.inject={};if(i(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(p(n))for(var a in n){var s=n[a];r[a]=p(s)?L({from:a},s):{from:s}}else 0}}function xi(e){var t=e.directives;if(t)for(var n in t){var r=t[n];l(r)&&(t[n]={bind:r,update:r})}}function Ri(e,t,n){if(l(t)&&(t=t.options),Ii(t,n),Ci(t,n),xi(t),!t._base&&(t.extends&&(e=Ri(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Ri(e,t.mixins[r],n);var o,a={};for(o in e)s(o);for(o in t)w(e,o)||s(o);function s(r){var i=yi[r]||Ei;a[r]=i(e[r],t[r],n,r)}return a}function Ai(e,t,n,r){if("string"===typeof n){var i=e[t];if(w(i,n))return i[n];var o=I(n);if(w(i,o))return i[o];var a=C(o);if(w(i,a))return i[a];var s=i[n]||i[o]||i[a];return s}}function Oi(e,t,n,r){var i=t[e],o=!w(n,e),a=n[e],s=Mi(Boolean,i.type);if(s>-1)if(o&&!w(i,"default"))a=!1;else if(""===a||a===R(e)){var c=Mi(String,i.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=Pi(r,i,e);var u=Le;Ne(!0),je(a),Ne(u)}return a}function Pi(e,t,n){if(w(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:l(r)&&"Function"!==Li(t.type)?r.call(e):r}}var Di=/^\s*function (\w+)/;function Li(e){var t=e&&e.toString().match(Di);return t?t[1]:""}function Ni(e,t){return Li(e)===Li(t)}function Mi(e,t){if(!i(t))return Ni(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(Ni(t[n],e))return n;return-1}var Ui={enumerable:!0,configurable:!0,get:M,set:M};function ji(e,t,n){Ui.get=function(){return this[t][n]},Ui.set=function(e){this[t][n]=e},Object.defineProperty(e,n,Ui)}function Vi(e){var t=e.$options;if(t.props&&Fi(e,t.props),fn(e),t.methods&&Ji(e,t.methods),t.data)Bi(e);else{var n=je(e._data={});n&&n.vmCount++}t.computed&&zi(e,t.computed),t.watch&&t.watch!==se&&Ki(e,t.watch)}function Fi(e,t){var n=e.$options.propsData||{},r=e._props=ze({}),i=e.$options._propKeys=[],o=!e.$parent;o||Ne(!1);var a=function(o){i.push(o);var a=Oi(o,t,n,e);Ve(r,o,a),o in e||ji(e,"_props",o)};for(var s in t)a(s);Ne(!0)}function Bi(e){var t=e.$options.data;t=e._data=l(t)?$i(t,e):t||{},p(t)||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);while(i--){var o=n[i];0,r&&w(r,o)||J(o)||ji(e,"_data",o)}var a=je(t);a&&a.vmCount++}function $i(e,t){Ce();try{return e.call(t,t)}catch(ic){return Vn(ic,t,"data()"),{}}finally{xe()}}var Hi={lazy:!0};function zi(e,t){var n=e._computedWatchers=Object.create(null),r=le();for(var i in t){var o=t[i],a=l(o)?o:o.get;0,r||(n[i]=new Tr(e,a||M,M,Hi)),i in e||Wi(e,i,o)}}function Wi(e,t,n){var r=!le();l(n)?(Ui.get=r?qi(t):Gi(n),Ui.set=M):(Ui.get=n.get?r&&!1!==n.cache?qi(t):Gi(n.get):M,Ui.set=n.set||M),Object.defineProperty(e,t,Ui)}function qi(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),Ee.target&&t.depend(),t.value}}function Gi(e){return function(){return e.call(this,this)}}function Ji(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?M:P(t[n],e)}function Ki(e,t){for(var n in t){var r=t[n];if(i(r))for(var o=0;o<r.length;o++)Qi(e,n,r[o]);else Qi(e,n,r)}}function Qi(e,t,n,r){return p(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function Xi(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Fe,e.prototype.$delete=Be,e.prototype.$watch=function(e,t,n){var r=this;if(p(t))return Qi(r,e,t,n);n=n||{},n.user=!0;var i=new Tr(r,e,t,n);if(n.immediate){var o='callback for immediate watcher "'.concat(i.expression,'"');Ce(),Fn(t,r,[i.value],r,o),xe()}return function(){i.teardown()}}}var Yi=0;function Zi(e){e.prototype._init=function(e){var t=this;t._uid=Yi++,t._isVue=!0,t.__v_skip=!0,t._scope=new xt(!0),t._scope._vm=!0,e&&e._isComponent?eo(t,e):t.$options=Ri(to(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Dr(t),Er(t),En(t),Fr(t,"beforeCreate",void 0,!1),ii(t),Vi(t),ri(t),Fr(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function eo(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function to(e){var t=e.options;if(e.super){var n=to(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var i=no(e);i&&L(e.extendOptions,i),t=e.options=Ri(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function no(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function ro(e){this._init(e)}function io(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=D(arguments,1);return n.unshift(this),l(e.install)?e.install.apply(e,n):l(e)&&e.apply(null,n),t.push(e),this}}function oo(e){e.mixin=function(e){return this.options=Ri(this.options,e),this}}function ao(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=li(e)||li(n.options);var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=Ri(n.options,e),a["super"]=n,a.options.props&&so(a),a.options.computed&&co(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,z.forEach((function(e){a[e]=n[e]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=L({},a.options),i[r]=a,a}}function so(e){var t=e.options.props;for(var n in t)ji(e.prototype,"_props",n)}function co(e){var t=e.options.computed;for(var n in t)Wi(e.prototype,n,t[n])}function uo(e){z.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&p(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&l(n)&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function lo(e){return e&&(li(e.Ctor.options)||e.tag)}function ho(e,t){return i(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!f(e)&&e.test(t)}function po(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var a=n[o];if(a){var s=a.name;s&&!t(s)&&fo(n,o,r,i)}}}function fo(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,S(n,t)}Zi(ro),Xi(ro),Ar(ro),Lr(ro),Cn(ro);var vo=[String,RegExp,Array],mo={name:"keep-alive",abstract:!0,props:{include:vo,exclude:vo,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,r=e.vnodeToCache,i=e.keyToCache;if(r){var o=r.tag,a=r.componentInstance,s=r.componentOptions;t[i]={name:lo(s),tag:o,componentInstance:a},n.push(i),this.max&&n.length>parseInt(this.max)&&fo(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)fo(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){po(e,(function(e){return ho(t,e)}))})),this.$watch("exclude",(function(t){po(e,(function(e){return!ho(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=On(e),n=t&&t.componentOptions;if(n){var r=lo(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!ho(o,r))||a&&r&&ho(a,r))return t;var s=this,c=s.cache,u=s.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):t.key;c[l]?(t.componentInstance=c[l].componentInstance,S(u,l),u.push(l)):(this.vnodeToCache=t,this.keyToCache=l),t.data.keepAlive=!0}return t||e&&e[0]}},go={KeepAlive:mo};function _o(e){var t={get:function(){return q}};Object.defineProperty(e,"config",t),e.util={warn:_i,extend:L,mergeOptions:Ri,defineReactive:Ve},e.set=Fe,e.delete=Be,e.nextTick=Yn,e.observable=function(e){return je(e),e},e.options=Object.create(null),z.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,L(e.options.components,go),io(e),oo(e),ao(e),uo(e)}_o(ro),Object.defineProperty(ro.prototype,"$isServer",{get:le}),Object.defineProperty(ro.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(ro,"FunctionalRenderContext",{value:ai}),ro.version=gr;var yo=y("style,class"),bo=y("input,textarea,option,select,progress"),So=function(e,t,n){return"value"===n&&bo(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},ko=y("contenteditable,draggable,spellcheck"),wo=y("events,caret,typing,plaintext-only"),To=function(e,t){return Ro(t)||"false"===t?"false":"contenteditable"===e&&wo(t)?t:"true"},Eo=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Io="http://www.w3.org/1999/xlink",Co=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},xo=function(e){return Co(e)?e.slice(6,e.length):""},Ro=function(e){return null==e||!1===e};function Ao(e){var t=e.data,n=e,r=e;while(a(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(t=Oo(r.data,t));while(a(n=n.parent))n&&n.data&&(t=Oo(t,n.data));return Po(t.staticClass,t.class)}function Oo(e,t){return{staticClass:Do(e.staticClass,t.staticClass),class:a(e.class)?[e.class,t.class]:t.class}}function Po(e,t){return a(e)||a(t)?Do(e,Lo(t)):""}function Do(e,t){return e?t?e+" "+t:e:t||""}function Lo(e){return Array.isArray(e)?No(e):d(e)?Mo(e):"string"===typeof e?e:""}function No(e){for(var t,n="",r=0,i=e.length;r<i;r++)a(t=Lo(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function Mo(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var Uo={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},jo=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Vo=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Fo=function(e){return jo(e)||Vo(e)};function Bo(e){return Vo(e)?"svg":"math"===e?"math":void 0}var $o=Object.create(null);function Ho(e){if(!Z)return!0;if(Fo(e))return!1;if(e=e.toLowerCase(),null!=$o[e])return $o[e];var t=document.createElement(e);return e.indexOf("-")>-1?$o[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:$o[e]=/HTMLUnknownElement/.test(t.toString())}var zo=y("text,number,password,search,email,tel,url");function Wo(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function qo(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function Go(e,t){return document.createElementNS(Uo[e],t)}function Jo(e){return document.createTextNode(e)}function Ko(e){return document.createComment(e)}function Qo(e,t,n){e.insertBefore(t,n)}function Xo(e,t){e.removeChild(t)}function Yo(e,t){e.appendChild(t)}function Zo(e){return e.parentNode}function ea(e){return e.nextSibling}function ta(e){return e.tagName}function na(e,t){e.textContent=t}function ra(e,t){e.setAttribute(t,"")}var ia=Object.freeze({__proto__:null,createElement:qo,createElementNS:Go,createTextNode:Jo,createComment:Ko,insertBefore:Qo,removeChild:Xo,appendChild:Yo,parentNode:Zo,nextSibling:ea,tagName:ta,setTextContent:na,setStyleScope:ra}),oa={create:function(e,t){aa(t)},update:function(e,t){e.data.ref!==t.data.ref&&(aa(e,!0),aa(t))},destroy:function(e){aa(e,!0)}};function aa(e,t){var n=e.data.ref;if(a(n)){var r=e.context,o=e.componentInstance||e.elm,s=t?null:o,c=t?void 0:o;if(l(n))Fn(n,r,[s],r,"template ref function");else{var u=e.data.refInFor,d="string"===typeof n||"number"===typeof n,h=Ze(n),p=r.$refs;if(d||h)if(u){var f=d?p[n]:n.value;t?i(f)&&S(f,o):i(f)?f.includes(o)||f.push(o):d?(p[n]=[o],sa(r,n,p[n])):n.value=[o]}else if(d){if(t&&p[n]!==o)return;p[n]=c,sa(r,n,s)}else if(h){if(t&&n.value!==o)return;n.value=s}else 0}}}function sa(e,t,n){var r=e._setupState;r&&w(r,t)&&(Ze(r[t])?r[t].value=n:r[t]=n)}var ca=new _e("",{},[]),ua=["create","activate","update","remove","destroy"];function la(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&a(e.data)===a(t.data)&&da(e,t)||s(e.isAsyncPlaceholder)&&o(t.asyncFactory.error))}function da(e,t){if("input"!==e.tag)return!0;var n,r=a(n=e.data)&&a(n=n.attrs)&&n.type,i=a(n=t.data)&&a(n=n.attrs)&&n.type;return r===i||zo(r)&&zo(i)}function ha(e,t,n){var r,i,o={};for(r=t;r<=n;++r)i=e[r].key,a(i)&&(o[i]=r);return o}function pa(e){var t,n,r={},c=e.modules,l=e.nodeOps;for(t=0;t<ua.length;++t)for(r[ua[t]]=[],n=0;n<c.length;++n)a(c[n][ua[t]])&&r[ua[t]].push(c[n][ua[t]]);function d(e){return new _e(l.tagName(e).toLowerCase(),{},[],void 0,e)}function h(e,t){function n(){0===--n.listeners&&p(e)}return n.listeners=t,n}function p(e){var t=l.parentNode(e);a(t)&&l.removeChild(t,e)}function f(e,t,n,r,i,o,c){if(a(e.elm)&&a(o)&&(e=o[c]=Se(e)),e.isRootInsert=!i,!v(e,t,n,r)){var u=e.data,d=e.children,h=e.tag;a(h)?(e.elm=e.ns?l.createElementNS(e.ns,h):l.createElement(h,e),w(e),b(e,d,t),a(u)&&k(e,t),_(n,e.elm,r)):s(e.isComment)?(e.elm=l.createComment(e.text),_(n,e.elm,r)):(e.elm=l.createTextNode(e.text),_(n,e.elm,r))}}function v(e,t,n,r){var i=e.data;if(a(i)){var o=a(e.componentInstance)&&i.keepAlive;if(a(i=i.hook)&&a(i=i.init)&&i(e,!1),a(e.componentInstance))return m(e,t),_(n,e.elm,r),s(o)&&g(e,t,n,r),!0}}function m(e,t){a(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,S(e)?(k(e,t),w(e)):(aa(e),t.push(e))}function g(e,t,n,i){var o,s=e;while(s.componentInstance)if(s=s.componentInstance._vnode,a(o=s.data)&&a(o=o.transition)){for(o=0;o<r.activate.length;++o)r.activate[o](ca,s);t.push(s);break}_(n,e.elm,i)}function _(e,t,n){a(e)&&(a(n)?l.parentNode(n)===e&&l.insertBefore(e,t,n):l.appendChild(e,t))}function b(e,t,n){if(i(t)){0;for(var r=0;r<t.length;++r)f(t[r],n,e.elm,null,!0,t,r)}else u(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function S(e){while(e.componentInstance)e=e.componentInstance._vnode;return a(e.tag)}function k(e,n){for(var i=0;i<r.create.length;++i)r.create[i](ca,e);t=e.data.hook,a(t)&&(a(t.create)&&t.create(ca,e),a(t.insert)&&n.push(e))}function w(e){var t;if(a(t=e.fnScopeId))l.setStyleScope(e.elm,t);else{var n=e;while(n)a(t=n.context)&&a(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),n=n.parent}a(t=Or)&&t!==e.context&&t!==e.fnContext&&a(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function T(e,t,n,r,i,o){for(;r<=i;++r)f(n[r],o,e,t,!1,n,r)}function E(e){var t,n,i=e.data;if(a(i))for(a(t=i.hook)&&a(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t)r.destroy[t](e);if(a(t=e.children))for(n=0;n<e.children.length;++n)E(e.children[n])}function I(e,t,n){for(;t<=n;++t){var r=e[t];a(r)&&(a(r.tag)?(C(r),E(r)):p(r.elm))}}function C(e,t){if(a(t)||a(e.data)){var n,i=r.remove.length+1;for(a(t)?t.listeners+=i:t=h(e.elm,i),a(n=e.componentInstance)&&a(n=n._vnode)&&a(n.data)&&C(n,t),n=0;n<r.remove.length;++n)r.remove[n](e,t);a(n=e.data.hook)&&a(n=n.remove)?n(e,t):t()}else p(e.elm)}function x(e,t,n,r,i){var s,c,u,d,h=0,p=0,v=t.length-1,m=t[0],g=t[v],_=n.length-1,y=n[0],b=n[_],S=!i;while(h<=v&&p<=_)o(m)?m=t[++h]:o(g)?g=t[--v]:la(m,y)?(A(m,y,r,n,p),m=t[++h],y=n[++p]):la(g,b)?(A(g,b,r,n,_),g=t[--v],b=n[--_]):la(m,b)?(A(m,b,r,n,_),S&&l.insertBefore(e,m.elm,l.nextSibling(g.elm)),m=t[++h],b=n[--_]):la(g,y)?(A(g,y,r,n,p),S&&l.insertBefore(e,g.elm,m.elm),g=t[--v],y=n[++p]):(o(s)&&(s=ha(t,h,v)),c=a(y.key)?s[y.key]:R(y,t,h,v),o(c)?f(y,r,e,m.elm,!1,n,p):(u=t[c],la(u,y)?(A(u,y,r,n,p),t[c]=void 0,S&&l.insertBefore(e,u.elm,m.elm)):f(y,r,e,m.elm,!1,n,p)),y=n[++p]);h>v?(d=o(n[_+1])?null:n[_+1].elm,T(e,d,n,p,_,r)):p>_&&I(t,h,v)}function R(e,t,n,r){for(var i=n;i<r;i++){var o=t[i];if(a(o)&&la(e,o))return i}}function A(e,t,n,i,c,u){if(e!==t){a(t.elm)&&a(i)&&(t=i[c]=Se(t));var d=t.elm=e.elm;if(s(e.isAsyncPlaceholder))a(t.asyncFactory.resolved)?D(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(s(t.isStatic)&&s(e.isStatic)&&t.key===e.key&&(s(t.isCloned)||s(t.isOnce)))t.componentInstance=e.componentInstance;else{var h,p=t.data;a(p)&&a(h=p.hook)&&a(h=h.prepatch)&&h(e,t);var f=e.children,v=t.children;if(a(p)&&S(t)){for(h=0;h<r.update.length;++h)r.update[h](e,t);a(h=p.hook)&&a(h=h.update)&&h(e,t)}o(t.text)?a(f)&&a(v)?f!==v&&x(d,f,v,n,u):a(v)?(a(e.text)&&l.setTextContent(d,""),T(d,null,v,0,v.length-1,n)):a(f)?I(f,0,f.length-1):a(e.text)&&l.setTextContent(d,""):e.text!==t.text&&l.setTextContent(d,t.text),a(p)&&a(h=p.hook)&&a(h=h.postpatch)&&h(e,t)}}}function O(e,t,n){if(s(n)&&a(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var P=y("attrs,class,staticClass,staticStyle,key");function D(e,t,n,r){var i,o=t.tag,c=t.data,u=t.children;if(r=r||c&&c.pre,t.elm=e,s(t.isComment)&&a(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(a(c)&&(a(i=c.hook)&&a(i=i.init)&&i(t,!0),a(i=t.componentInstance)))return m(t,n),!0;if(a(o)){if(a(u))if(e.hasChildNodes())if(a(i=c)&&a(i=i.domProps)&&a(i=i.innerHTML)){if(i!==e.innerHTML)return!1}else{for(var l=!0,d=e.firstChild,h=0;h<u.length;h++){if(!d||!D(d,u[h],n,r)){l=!1;break}d=d.nextSibling}if(!l||d)return!1}else b(t,u,n);if(a(c)){var p=!1;for(var f in c)if(!P(f)){p=!0,k(t,n);break}!p&&c["class"]&&br(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,i){if(!o(t)){var c=!1,u=[];if(o(e))c=!0,f(t,u);else{var h=a(e.nodeType);if(!h&&la(e,t))A(e,t,u,null,null,i);else{if(h){if(1===e.nodeType&&e.hasAttribute(H)&&(e.removeAttribute(H),n=!0),s(n)&&D(e,t,u))return O(t,u,!0),e;e=d(e)}var p=e.elm,v=l.parentNode(p);if(f(t,u,p._leaveCb?null:v,l.nextSibling(p)),a(t.parent)){var m=t.parent,g=S(t);while(m){for(var _=0;_<r.destroy.length;++_)r.destroy[_](m);if(m.elm=t.elm,g){for(var y=0;y<r.create.length;++y)r.create[y](ca,m);var b=m.data.hook.insert;if(b.merged)for(var k=1;k<b.fns.length;k++)b.fns[k]()}else aa(m);m=m.parent}}a(v)?I([e],0,0):a(e.tag)&&E(e)}}return O(t,u,c),t.elm}a(e)&&E(e)}}var fa={create:va,update:va,destroy:function(e){va(e,ca)}};function va(e,t){(e.data.directives||t.data.directives)&&ma(e,t)}function ma(e,t){var n,r,i,o=e===ca,a=t===ca,s=_a(e.data.directives,e.context),c=_a(t.data.directives,t.context),u=[],l=[];for(n in c)r=s[n],i=c[n],r?(i.oldValue=r.value,i.oldArg=r.arg,ba(i,"update",t,e),i.def&&i.def.componentUpdated&&l.push(i)):(ba(i,"bind",t,e),i.def&&i.def.inserted&&u.push(i));if(u.length){var d=function(){for(var n=0;n<u.length;n++)ba(u[n],"inserted",t,e)};o?Vt(t,"insert",d):d()}if(l.length&&Vt(t,"postpatch",(function(){for(var n=0;n<l.length;n++)ba(l[n],"componentUpdated",t,e)})),!o)for(n in s)c[n]||ba(s[n],"unbind",e,e,a)}var ga=Object.create(null);function _a(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++){if(r=e[n],r.modifiers||(r.modifiers=ga),i[ya(r)]=r,t._setupState&&t._setupState.__sfc){var o=r.def||Ai(t,"_setupState","v-"+r.name);r.def="function"===typeof o?{bind:o,update:o}:o}r.def=r.def||Ai(t.$options,"directives",r.name,!0)}return i}function ya(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function ba(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(ic){Vn(ic,n.context,"directive ".concat(e.name," ").concat(t," hook"))}}var Sa=[oa,fa];function ka(e,t){var n=t.componentOptions;if((!a(n)||!1!==n.Ctor.options.inheritAttrs)&&(!o(e.data.attrs)||!o(t.data.attrs))){var r,i,c,u=t.elm,l=e.data.attrs||{},d=t.data.attrs||{};for(r in(a(d.__ob__)||s(d._v_attr_proxy))&&(d=t.data.attrs=L({},d)),d)i=d[r],c=l[r],c!==i&&wa(u,r,i,t.data.pre);for(r in(te||re)&&d.value!==l.value&&wa(u,"value",d.value),l)o(d[r])&&(Co(r)?u.removeAttributeNS(Io,xo(r)):ko(r)||u.removeAttribute(r))}}function wa(e,t,n,r){r||e.tagName.indexOf("-")>-1?Ta(e,t,n):Eo(t)?Ro(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):ko(t)?e.setAttribute(t,To(t,n)):Co(t)?Ro(n)?e.removeAttributeNS(Io,xo(t)):e.setAttributeNS(Io,t,n):Ta(e,t,n)}function Ta(e,t,n){if(Ro(n))e.removeAttribute(t);else{if(te&&!ne&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var Ea={create:ka,update:ka};function Ia(e,t){var n=t.elm,r=t.data,i=e.data;if(!(o(r.staticClass)&&o(r.class)&&(o(i)||o(i.staticClass)&&o(i.class)))){var s=Ao(t),c=n._transitionClasses;a(c)&&(s=Do(s,Lo(c))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Ca,xa={create:Ia,update:Ia},Ra="__r",Aa="__c";function Oa(e){if(a(e[Ra])){var t=te?"change":"input";e[t]=[].concat(e[Ra],e[t]||[]),delete e[Ra]}a(e[Aa])&&(e.change=[].concat(e[Aa],e.change||[]),delete e[Aa])}function Pa(e,t,n){var r=Ca;return function i(){var o=t.apply(null,arguments);null!==o&&Na(e,i,n,r)}}var Da=zn&&!(ae&&Number(ae[1])<=53);function La(e,t,n,r){if(Da){var i=Jr,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}Ca.addEventListener(e,t,ce?{capture:n,passive:r}:n)}function Na(e,t,n,r){(r||Ca).removeEventListener(e,t._wrapper||t,n)}function Ma(e,t){if(!o(e.data.on)||!o(t.data.on)){var n=t.data.on||{},r=e.data.on||{};Ca=t.elm||e.elm,Oa(n),jt(n,r,La,Na,Pa,t.context),Ca=void 0}}var Ua,ja={create:Ma,update:Ma,destroy:function(e){return Ma(e,ca)}};function Va(e,t){if(!o(e.data.domProps)||!o(t.data.domProps)){var n,r,i=t.elm,c=e.data.domProps||{},u=t.data.domProps||{};for(n in(a(u.__ob__)||s(u._v_attr_proxy))&&(u=t.data.domProps=L({},u)),c)n in u||(i[n]="");for(n in u){if(r=u[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===c[n])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===n&&"PROGRESS"!==i.tagName){i._value=r;var l=o(r)?"":String(r);Fa(i,l)&&(i.value=l)}else if("innerHTML"===n&&Vo(i.tagName)&&o(i.innerHTML)){Ua=Ua||document.createElement("div"),Ua.innerHTML="<svg>".concat(r,"</svg>");var d=Ua.firstChild;while(i.firstChild)i.removeChild(i.firstChild);while(d.firstChild)i.appendChild(d.firstChild)}else if(r!==c[n])try{i[n]=r}catch(ic){}}}}function Fa(e,t){return!e.composing&&("OPTION"===e.tagName||Ba(e,t)||$a(e,t))}function Ba(e,t){var n=!0;try{n=document.activeElement!==e}catch(ic){}return n&&e.value!==t}function $a(e,t){var n=e.value,r=e._vModifiers;if(a(r)){if(r.number)return _(n)!==_(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var Ha={create:Va,update:Va},za=T((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function Wa(e){var t=qa(e.style);return e.staticStyle?L(e.staticStyle,t):t}function qa(e){return Array.isArray(e)?N(e):"string"===typeof e?za(e):e}function Ga(e,t){var n,r={};if(t){var i=e;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=Wa(i.data))&&L(r,n)}(n=Wa(e.data))&&L(r,n);var o=e;while(o=o.parent)o.data&&(n=Wa(o.data))&&L(r,n);return r}var Ja,Ka=/^--/,Qa=/\s*!important$/,Xa=function(e,t,n){if(Ka.test(t))e.style.setProperty(t,n);else if(Qa.test(n))e.style.setProperty(R(t),n.replace(Qa,""),"important");else{var r=Za(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},Ya=["Webkit","Moz","ms"],Za=T((function(e){if(Ja=Ja||document.createElement("div").style,e=I(e),"filter"!==e&&e in Ja)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Ya.length;n++){var r=Ya[n]+t;if(r in Ja)return r}}));function es(e,t){var n=t.data,r=e.data;if(!(o(n.staticStyle)&&o(n.style)&&o(r.staticStyle)&&o(r.style))){var i,s,c=t.elm,u=r.staticStyle,l=r.normalizedStyle||r.style||{},d=u||l,h=qa(t.data.style)||{};t.data.normalizedStyle=a(h.__ob__)?L({},h):h;var p=Ga(t,!0);for(s in d)o(p[s])&&Xa(c,s,"");for(s in p)i=p[s],i!==d[s]&&Xa(c,s,null==i?"":i)}}var ts={create:es,update:es},ns=/\s+/;function rs(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(ns).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" ".concat(e.getAttribute("class")||""," ");n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function is(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(ns).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" ".concat(e.getAttribute("class")||""," "),r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function os(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&L(t,as(e.name||"v")),L(t,e),t}return"string"===typeof e?as(e):void 0}}var as=T((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),ss=Z&&!ne,cs="transition",us="animation",ls="transition",ds="transitionend",hs="animation",ps="animationend";ss&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ls="WebkitTransition",ds="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(hs="WebkitAnimation",ps="webkitAnimationEnd"));var fs=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function vs(e){fs((function(){fs(e)}))}function ms(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),rs(e,t))}function gs(e,t){e._transitionClasses&&S(e._transitionClasses,t),is(e,t)}function _s(e,t,n){var r=bs(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===cs?ds:ps,c=0,u=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++c>=a&&u()};setTimeout((function(){c<a&&u()}),o+1),e.addEventListener(s,l)}var ys=/\b(transform|all)(,|$)/;function bs(e,t){var n,r=window.getComputedStyle(e),i=(r[ls+"Delay"]||"").split(", "),o=(r[ls+"Duration"]||"").split(", "),a=Ss(i,o),s=(r[hs+"Delay"]||"").split(", "),c=(r[hs+"Duration"]||"").split(", "),u=Ss(s,c),l=0,d=0;t===cs?a>0&&(n=cs,l=a,d=o.length):t===us?u>0&&(n=us,l=u,d=c.length):(l=Math.max(a,u),n=l>0?a>u?cs:us:null,d=n?n===cs?o.length:c.length:0);var h=n===cs&&ys.test(r[ls+"Property"]);return{type:n,timeout:l,propCount:d,hasTransform:h}}function Ss(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return ks(t)+ks(e[n])})))}function ks(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ws(e,t){var n=e.elm;a(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=os(e.data.transition);if(!o(r)&&!a(n._enterCb)&&1===n.nodeType){var i=r.css,s=r.type,c=r.enterClass,u=r.enterToClass,h=r.enterActiveClass,p=r.appearClass,f=r.appearToClass,v=r.appearActiveClass,m=r.beforeEnter,g=r.enter,y=r.afterEnter,b=r.enterCancelled,S=r.beforeAppear,k=r.appear,w=r.afterAppear,T=r.appearCancelled,E=r.duration,I=Or,C=Or.$vnode;while(C&&C.parent)I=C.context,C=C.parent;var x=!I._isMounted||!e.isRootInsert;if(!x||k||""===k){var R=x&&p?p:c,A=x&&v?v:h,O=x&&f?f:u,P=x&&S||m,D=x&&l(k)?k:g,L=x&&w||y,N=x&&T||b,M=_(d(E)?E.enter:E);0;var U=!1!==i&&!ne,j=Is(D),V=n._enterCb=B((function(){U&&(gs(n,O),gs(n,A)),V.cancelled?(U&&gs(n,R),N&&N(n)):L&&L(n),n._enterCb=null}));e.data.show||Vt(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),D&&D(n,V)})),P&&P(n),U&&(ms(n,R),ms(n,A),vs((function(){gs(n,R),V.cancelled||(ms(n,O),j||(Es(M)?setTimeout(V,M):_s(n,s,V)))}))),e.data.show&&(t&&t(),D&&D(n,V)),U||j||V()}}}function Ts(e,t){var n=e.elm;a(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=os(e.data.transition);if(o(r)||1!==n.nodeType)return t();if(!a(n._leaveCb)){var i=r.css,s=r.type,c=r.leaveClass,u=r.leaveToClass,l=r.leaveActiveClass,h=r.beforeLeave,p=r.leave,f=r.afterLeave,v=r.leaveCancelled,m=r.delayLeave,g=r.duration,y=!1!==i&&!ne,b=Is(p),S=_(d(g)?g.leave:g);0;var k=n._leaveCb=B((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(gs(n,u),gs(n,l)),k.cancelled?(y&&gs(n,c),v&&v(n)):(t(),f&&f(n)),n._leaveCb=null}));m?m(w):w()}function w(){k.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),h&&h(n),y&&(ms(n,c),ms(n,l),vs((function(){gs(n,c),k.cancelled||(ms(n,u),b||(Es(S)?setTimeout(k,S):_s(n,s,k)))}))),p&&p(n,k),y||b||k())}}function Es(e){return"number"===typeof e&&!isNaN(e)}function Is(e){if(o(e))return!1;var t=e.fns;return a(t)?Is(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Cs(e,t){!0!==t.data.show&&ws(t)}var xs=Z?{create:Cs,activate:Cs,remove:function(e,t){!0!==e.data.show?Ts(e,t):t()}}:{},Rs=[Ea,xa,ja,Ha,ts,xs],As=Rs.concat(Sa),Os=pa({nodeOps:ia,modules:As});ne&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Vs(e,"input")}));var Ps={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?Vt(n,"postpatch",(function(){Ps.componentUpdated(e,t,n)})):Ds(e,t,n.context),e._vOptions=[].map.call(e.options,Ms)):("textarea"===n.tag||zo(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Us),e.addEventListener("compositionend",js),e.addEventListener("change",js),ne&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Ds(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,Ms);if(i.some((function(e,t){return!V(e,r[t])}))){var o=e.multiple?t.value.some((function(e){return Ns(e,i)})):t.value!==t.oldValue&&Ns(t.value,i);o&&Vs(e,"change")}}}};function Ds(e,t,n){Ls(e,t,n),(te||re)&&setTimeout((function(){Ls(e,t,n)}),0)}function Ls(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],i)o=F(r,Ms(a))>-1,a.selected!==o&&(a.selected=o);else if(V(Ms(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function Ns(e,t){return t.every((function(t){return!V(t,e)}))}function Ms(e){return"_value"in e?e._value:e.value}function Us(e){e.target.composing=!0}function js(e){e.target.composing&&(e.target.composing=!1,Vs(e.target,"input"))}function Vs(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Fs(e){return!e.componentInstance||e.data&&e.data.transition?e:Fs(e.componentInstance._vnode)}var Bs={bind:function(e,t,n){var r=t.value;n=Fs(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,ws(n,(function(){e.style.display=o}))):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(!r!==!i){n=Fs(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?ws(n,(function(){e.style.display=e.__vOriginalDisplay})):Ts(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},$s={model:Ps,show:Bs},Hs={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function zs(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?zs(On(t.children)):e}function Ws(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var r in i)t[I(r)]=i[r];return t}function qs(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Gs(e){while(e=e.parent)if(e.data.transition)return!0}function Js(e,t){return t.key===e.key&&t.tag===e.tag}var Ks=function(e){return e.tag||ln(e)},Qs=function(e){return"show"===e.name},Xs={name:"transition",props:Hs,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Ks),n.length)){0;var r=this.mode;0;var i=n[0];if(Gs(this.$vnode))return i;var o=zs(i);if(!o)return i;if(this._leaving)return qs(e,i);var a="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?a+"comment":a+o.tag:u(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var s=(o.data||(o.data={})).transition=Ws(this),c=this._vnode,l=zs(c);if(o.data.directives&&o.data.directives.some(Qs)&&(o.data.show=!0),l&&l.data&&!Js(o,l)&&!ln(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var d=l.data.transition=L({},s);if("out-in"===r)return this._leaving=!0,Vt(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),qs(e,i);if("in-out"===r){if(ln(o))return c;var h,p=function(){h()};Vt(s,"afterEnter",p),Vt(s,"enterCancelled",p),Vt(d,"delayLeave",(function(e){h=e}))}}return i}}},Ys=L({tag:String,moveClass:String},Hs);delete Ys.mode;var Zs={props:Ys,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Pr(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=Ws(this),s=0;s<i.length;s++){var c=i[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(r){var u=[],l=[];for(s=0;s<r.length;s++){c=r[s];c.data.transition=a,c.data.pos=c.elm.getBoundingClientRect(),n[c.key]?u.push(c):l.push(c)}this.kept=e(t,null,u),this.removed=l}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ec),e.forEach(tc),e.forEach(nc),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;ms(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(ds,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(ds,e),n._moveCb=null,gs(n,t))})}})))},methods:{hasMove:function(e,t){if(!ss)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){is(n,e)})),rs(n,t),n.style.display="none",this.$el.appendChild(n);var r=bs(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ec(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function tc(e){e.data.newPos=e.elm.getBoundingClientRect()}function nc(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate(".concat(r,"px,").concat(i,"px)"),o.transitionDuration="0s"}}var rc={Transition:Xs,TransitionGroup:Zs};ro.config.mustUseProp=So,ro.config.isReservedTag=Fo,ro.config.isReservedAttr=yo,ro.config.getTagNamespace=Bo,ro.config.isUnknownElement=Ho,L(ro.options.directives,$s),L(ro.options.components,rc),ro.prototype.__patch__=Z?Os:M,ro.prototype.$mount=function(e,t){return e=e&&Z?Wo(e):void 0,Nr(this,e,t)},Z&&setTimeout((function(){q.devtools&&de&&de.emit("init",ro)}),0)}}]);
//# sourceMappingURL=chunk-vendors.e02789a9.js.map